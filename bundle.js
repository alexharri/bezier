!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=37)}([function(t,e,n){"use strict";t.exports={colors:{PRIMARY:"#29aaf4",PRIMARY_LIGHT:"#68bef2",PRIMARY_LIGHTER:"#c4e9ff",WHITE:"#fff"},types:{POINT:"__POINT",CONN:"__CONNECTION",HANDLE:"__HANDLE",LINE:"__LINE"},typeReducers:{__POINT:"points",__CONNECTION:"connections",__HANDLE:"handles"},tools:{p:"PEN",PEN:"PEN",v:"MOVE",MOVE:"MOVE"},cursors:{DEFAULT:"default-cursor.png",MOVE:"default-move-cursor.png",PEN:"pen-cursor.png",PEN_ADD_POINT:"pen-add-point-cursor.png",PEN_SELECT_POINT:"pen-select-point-cursor.png",CONVERT_ANCHOR_POINT:"convert-anchor-point-cursor.png"},defaultToolCursors:{MOVE:"DEFAULT",PEN:"PEN"},keys:{SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",ARROW_UP:"ArrowUp",ARROW_LEFT:"ArrowLeft",ARROW_DOWN:"ArrowDown",ARROW_RIGHT:"ArrowRight"}}},function(t,e,n){"use strict";var r=n(28),o=r.createStore,i=r.applyMiddleware,a=n(62),u=a.createLogger,c=n(63),s=void 0;s=i(u({collapsed:!0})),t.exports=o(c,s)},function(t,e,n){"use strict";function r(){for(var t=o.getState(),e=t.points,n=[],r=Object.keys(e),i=0;i<r.length;i+=1){var a=e[r[i]],u=a.x,c=a.y;n.push({x:u,y:c,id:r[i]})}return n}var o=n(1),i=n(10),a=i.getAllConnections,u=n(22);e.getPointById=function(t){if(!t||"string"!=typeof t)throw new Error("Invalid id. Expected string but got '"+t+"'");return o.getState().points[t]||null},e.getPointAtPosition=function(t){for(var e=r(),n=void 0,o=void 0,i=0;i<e.length;i+=1){var a=u(t,e[i]);(!n||a<o)&&(n=e[i],o=a)}return o<225?n:null},e.getPointHandleIds=function(t){for(var e=a(),n=[],r=0;r<e.length;r+=1){var o=e[r].points.indexOf(t);o>-1&&n.push(e[r].handles[o])}return n},e.getPointConnections=function(t){if(!t||"string"!=typeof t)throw new Error("Invalid id. Expected string but got '"+t+"'");for(var e=[],n=o.getState().connections,r=Object.keys(n),i=0;i<r.length;i+=1)-1!==n[r[i]].points.indexOf(t)&&e.push(n[r[i]]);return e},e.getAllPoints=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){if(!(s.indexOf(t)>-1)){if(!t||"string"!=typeof t)throw new Error("Invalid type. Expected string but got '"+t+"'.");c.dispatch({type:"ADD_SELECTION_TYPE",payload:t}),s.push(t)}}function i(t){return o(t),c.getState().selection[t]}var a=n(0),u=a.typeReducers,c=n(1),s=[];e.getSelectedOfType=i,e.addToSelection=function(t,e){i(t).indexOf(e)<0&&c.dispatch({type:"ADD_TO_SELECTION",payload:{type:t,id:e}})},e.removeFromSelection=function(t,e){var n=i(t).indexOf(e);n>-1&&c.dispatch({type:"REMOVE_FROM_SELECTION",payload:{type:t,itemIndex:n}})},e.isSelected=function(t,e){return i(t).indexOf(e)>-1},e.clearSelection=function(){c.dispatch({type:"CLEAR_SELECTION"})},e.copySelection=function(){for(var t=c.getState().selection,e={},n=Object.keys(t),o=0;o<n.length;o+=1)e[n[o]]=[].concat(r(t[n[o]]));return e},e.isValidSelection=function(t){for(var e=!0,n=Object.keys(t),r=0;e&&r<n.length;r+=1)!function(r){var o=c.getState()[u[n[r]]];t[n[r]].forEach(function(t){o[t]||(e=!1)})}(r);return e}},function(t,e,n){"use strict";function r(){for(var t=o.getState().handles,e=[],n=Object.keys(t),r=0;r<n.length;r+=1)e.push(t[n[r]]);return e}var o=n(1);e.getAllHandles=r,e.getHandleById=function(t){return o.getState().handles[t]||null}},function(t,e,n){"use strict";for(var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(8),i=n(0),a=i.cursors,u=(document.getElementById("canvas"),{}),c=Object.keys(a),s=0;s<c.length;s+=1){var l=new Image;l.src="static/images/"+a[c[s]],u[c[s]]=l}var f="DEFAULT",d=null;e.setCursor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"object"!==(void 0===e?"undefined":r(e)))throw new Error("Invalid options. Expected object but got '"+e+"'.");if(d&&e.overrideId!==d){if(e.override)throw new Error("Attempted to double override.");return!1}if(void 0===a[t])throw new Error("Invalid cursor '"+t+"'.");if(t!==f){f=t;a[t];return!e.override||(d=o())}},e.getCursor=function(){return u[f]},e.releaseOverride=function(t){if(null===d)throw new Error("No override is present.");if(t!==d)throw new Error("Incorrect overrideId. Expected '"+d+"' but got '"+t+"'.");d=null}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return t&&"object"===(void 0===t?"undefined":r(t))&&"number"==typeof t.x&&"number"==typeof t.y}},function(t,e,n){"use strict";function r(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid type. Expected string but got '"+t+"'.");if(!e||"string"!=typeof e)throw new Error("Invalid id. Expected string but got '"+e+"'.");return!(!a[t]||!a[t][e])&&(delete a[t][e],!0)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(8),a={};e.removeListener=r,e.addListener=function(t,e,n){var o=arguments;if(!t||"string"!=typeof t)throw new Error("Invalid type. Expected string but got '"+t+"'.");if("function"!=typeof e)throw new Error("Expected the 2nd argument to be a function. Got '"+e+"'");a[t]||(a[t]={});var u=i();return a[t][u]=n?function(){e.apply(void 0,o),r(t,u)}:e,u},e.runListeners=function(t){if(!t||"string"!=typeof t)throw new Error("Invalid type. Expected string but got '"+t+"'.");if(a[t]&&"object"===o(a[t])){for(var e=Object.keys(a[t]),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var u=0;u<e.length;u+=1){var c;(c=a[t])[e[u]].apply(c,r)}}}},function(t,e,n){"use strict";t.exports=n(39)},function(t,e,n){"use strict";function r(){d=!1}function o(t){if(!t)return void(l!==y&&(l=y,r()));if(t!==l){if(t.length!==y.length)throw new Error("Custom alphabet for shortid must be "+y.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,n){return e!==n.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+y.length+" unique characters. These characters were not unique: "+e.join(", "));l=t,r()}}function i(t){return o(t),l}function a(t){p.seed(t),f!==t&&(r(),f=t)}function u(){l||o(y);for(var t,e=l.split(""),n=[],r=p.nextValue();e.length>0;)r=p.nextValue(),t=Math.floor(r*e.length),n.push(e.splice(t,1)[0]);return n.join("")}function c(){return d||(d=u())}function s(t){return c()[t]}var l,f,d,p=n(40),y="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={characters:i,seed:a,lookup:s,shuffled:c}},function(t,e,n){"use strict";function r(){for(var t=a.getState().connections,e=[],n=Object.keys(t),r=0;r<n.length;r+=1)e.push(t[n[r]]);return e}var o=n(70),i=n(19),a=(i.toConnectionId,n(1));e.getConnectionById=function(t){return a.getState().connections[t]||null},e.getAllConnections=r,e.getConnectionAtPosition=function(t){for(var e=r(),n=0;n<e.length;n+=1){var i=o(e[n],t);if(i)return{closestPoint:i,connection:e[n]}}return null}},function(t,e,n){"use strict";var r=n(12),o=n(73),i=n(76),a=n(6),u=n(5),c=u.getCursor,s=n(13),l=s.resetGuides,f=void 0;t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r();if(n.clearRect(0,0,800,800),o(),i(),l(),!e.noPosition){if(e.useLastPosition?t=f:f=t,!a(t))throw new Error("Invalid position.");n.drawImage(c(),t.x,t.y)}}},function(t,e,n){"use strict";var r=document.getElementById("canvas"),o=r.getContext("2d");t.exports=function(){return o}},function(t,e,n){"use strict";var r=n(74),o=r.checkType,i={};e.addGuide=function(t,e){o(t),Array.isArray(i[t])?i[t].push(e):i[t]=[e]},e.resetGuides=function(){i={}},e.getGuidesOfType=function(t){return o(t),i[t]||[]}},function(t,e,n){"use strict";var r=function(t,e){return{x:e.x-t.x,y:e.y-t.y}};t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),i=n(3),a=i.copySelection,u=n(25);t.exports=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||"object"!==(void 0===t?"undefined":r(t)))throw new Error("Invalid action. Expected object but got '"+t+"'.");if(!t.type||"string"!=typeof t.type)throw new Error("Invalid type. Expected string but got '"+t.type+"'.");if(void 0===t.data)throw new Error("Invalid data. Expected any but got '"+t.data+"'.");t.selection=a(),e&&u(t,{ignoreSelection:!0}),o.dispatch({type:"ADD_ACTION_TO_HISTORY",payload:t})}},function(t,e,n){"use strict";function r(t,e,n){return[{x:n.x+.4*(e.x-n.x),y:n.y+.4*(e.y-n.y)},{x:t.x+.85*(e.x-t.x),y:t.y+.85*(e.y-t.y)}]}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=function(t,e,n,i){if(null===e){if(null===n)throw new Error("Expected p2 not to be null.");var a=r(i,n,t),u=o(a,2),c=u[0];return[t,u[1],c,i]}if(null===n){if(null===e)throw new Error("Expected p1 not to be null.");var s=r(t,e,i),l=o(s,2),f=l[0];return[t,l[1],f,i]}throw new Error("Expected either p1 or p2 to be null.")}},function(t,e,n){"use strict";var r=n(0),o=r.tools,i=r.defaultToolCursors,a=n(26),u=n(7),c=u.runListeners,s=n(46),l=n(5),f=l.setCursor,d=n(11),p=n(35),y=n(93),h=n(98),v=(o.PEN,o.MOVE),g={MOVE:p,PEN:y},E={MOVE:void 0,PEN:h},b={},O=v;e.setTool=function(t){o[t]&&o[t]!==O&&(O=o[t],f(O),d(null,{useLastPosition:!0}));for(var e=document.querySelectorAll("[data-tool-key]"),n=0;n<e.length;n+=1)e[n].classList.remove("active"),e[n].getAttribute("data-tool-key")===t&&e[n].classList.add("active")},e.onToolMouseDown=function(t){var e=a(t),n=s(e);n||f(i[O]),g[O]&&g[O](e,n),d(e)},e.onToolMouseMove=function(t){var e=a(t);c("mousemove",e);var n=s(e);n||f(i[O]),E[O]&&E[O](e,n),d(e)},e.onToolMouseUp=function(t){var e=a(t);c("mouseup",e);var n=s(e);n||f(i[O]),b[O]&&b[O](e,n),d(e)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=function(t,e){return[t,e].sort().join("-")};e.toConnectionId=r},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(2),i=n(4),a=i.getHandleById;t.exports=function(t){var e=o.getPointById,n=r(t.points,2),i=n[0],u=n[1],c=r(t.handles,2),s=c[0],l=c[1];if(!s&&!l&&!u)throw new Error("Invalid connection.");return[e(i),s?a(s):null,l?a(l):null,u?e(u):null]}},function(t,e,n){"use strict";var r=function(t,e,n){return t*(1-n)+e*n};t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n*n+r*r}},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(12),a=n(6);e.renderCircle=function(t,e,n,r){var a=i();Array.isArray(t)||(t=[t]),a.fillStyle=n;for(var u=0;u<t.length;u+=1){var c=t[u],s=c.x,l=c.y;if(a.beginPath(),a.arc(s,l,e,0,2*Math.PI,!1),a.closePath(),a.fill(),r){if("object"!==(void 0===r?"undefined":o(r)))throw new Error("Invalid stroke. Expected object but got '"+r+"'.");a.beginPath(),a.arc(s,l,e,0,2*Math.PI,!1),a.lineWidth=r.width||1,a.strokeStyle=r.color||"#000000",a.stroke()}}},e.renderLine=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#444",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=i();if(!a(t))throw new Error("Invalid position 'from'.");if(!a(e))throw new Error("Invalid position 'to'.");if("string"!=typeof n)throw new Error("Invalid color. Expected string but got '"+n+"'.");if("number"!=typeof r)throw new Error("Invalid width. Expected number but got '"+r+"'.");o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.strokeStyle=n,o.lineWidth=r,o.stroke()},e.renderCubicBezier=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#444";if(!Array.isArray(t))throw new Error("Invalid points. Expected array but got "+t+".");if(4!==t.length)throw new Error("Invalid points. Expected 4 but got "+t.length+".");t.forEach(function(t,e){if(!a(t))throw new Error("Invalid position at index "+e)});var o=r(t,4),u=o[0],c=o[1],s=o[2],l=o[3],f=i();f.beginPath(),f.moveTo(u.x,u.y),f.bezierCurveTo(c.x,c.y,s.x,s.y,l.x,l.y),f.strokeStyle=n,f.lineWidth=e,f.stroke()},e.renderQuadraticBezier=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#444";if(!Array.isArray(t))throw new Error("Invalid points. Expected array but got "+t+".");if(3!==t.length)throw new Error("Invalid points. Expected 3 but got "+t.length+".");t.forEach(function(t,e){if(!a(t))throw new Error("Invalid position at index "+e)});var o=r(t,3),u=o[0],c=o[1],s=o[2],l=i();l.beginPath(),l.moveTo(u.x,u.y),l.quadraticCurveTo(c.x,c.y,s.x,s.y),l.strokeStyle=n,l.lineWidth=e,l.stroke()}},function(t,e,n){"use strict";function r(t){if("string"!=typeof t)throw new Error("Invalid key. Expected string but got '"+t+"'.");return s[t]||!1}var o=n(17),i=n(0),a=i.keys,u=n(78),c=n(91),s={};e.onKeyUp=function(t){var e=t.key;if("string"!=typeof e)throw new Error("Invalid key. Expected string but got '"+e+"'.");s[e]=!1},e.onKeyDown=function(t){var e=t.key;if(!t.repeat){if("string"!=typeof e)throw new Error("Invalid key. Expected string but got '"+e+"'.");if("z"===e.toLowerCase()&&r(a.CONTROL)&&r(a.SHIFT))return void c();if("z"===e&&r(a.CONTROL))return void u();if("z"===e.toLowerCase()&&r("Meta")&&r(a.SHIFT))return void c();if("z"===e&&r("Meta"))return void u();o.setTool(e),s[e]=!0}},e.isKeyDown=r},function(t,e,n){"use strict";function r(t,e){if(!u[t])throw new Error("Could not find action of type '"+t+"'.");var n=e?"undo":"redo";if("object"===i(u[t])){if("function"!=typeof u[t][n])throw new Error("Invalid action creator of type: '"+t+"'. Could not '"+n+"'.");return u[t][n]}if("function"==typeof u[t])return u[t];throw new Error("Invalid action creator of type: '"+t+"'.")}function o(t,e){for(var n=0;n<t.length;n+=1){var i=t[n],u=i.type,c=i.data,s=r(u,e),l=s(c);Array.isArray(l)?o(l,e):a.dispatch(l)}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(1),u=n(79),c=n(3),s=c.isValidSelection,l=c.clearSelection;t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"object"!==(void 0===e?"undefined":i(e)))throw new Error("Invalid options. Expected object but got '"+e+"'.");var n=t.type,u=t.data,c=t.selection,f=e.undo||!1,d=r(n,f),p=d(u);if(Array.isArray(p)?o(p,f):a.dispatch(p),!e.ignoreSelection)if(f){if(!s(c)){var y=a.getState().history.history;if(y.length){var h=y[y.length-1];a.dispatch({type:"RESTORE_SELECTION",payload:h.selection})}else l()}}else a.dispatch({type:"RESTORE_SELECTION",payload:c})}},function(t,e,n){"use strict";var r=n(38),o=r.getLeftOffset,i=r.getTopOffset,a=function(t){return{x:t.clientX-o(),y:t.clientY-i()}};t.exports=a},function(t,e,n){"use strict";function r(t,e){for(var n,r=0,i="";!n;)i+=t(e>>4*r&15|o()),n=e<Math.pow(16,r+1),r++;return i}var o=n(41);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),o=n(59),i=n(60),a=n(61),u=n(33);n(32);n.d(e,"createStore",function(){return r.b}),n.d(e,"combineReducers",function(){return o.a}),n.d(e,"bindActionCreators",function(){return i.a}),n.d(e,"applyMiddleware",function(){return a.a}),n.d(e,"compose",function(){return u.a})},function(t,e,n){"use strict";function r(t,e,n){function i(){g===v&&(g=v.slice())}function c(){return h}function s(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return i(),g.push(t),function(){if(e){e=!1,i();var n=g.indexOf(t);g.splice(n,1)}}}function l(t){if(!Object(o.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(E)throw new Error("Reducers may not dispatch actions.");try{E=!0,h=y(h,t)}finally{E=!1}for(var e=v=g,n=0;n<e.length;n++){(0,e[n])()}return t}function f(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");y=t,l({type:u.INIT})}function d(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(c())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[a.a]=function(){return this},t}var p;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var y=t,h=e,v=[],g=v,E=!1;return l({type:u.INIT}),p={dispatch:l,subscribe:s,getState:c,replaceReducer:f},p[a.a]=d,p}n.d(e,"a",function(){return u}),e.b=r;var o=n(30),i=n(55),a=n.n(i),u={INIT:"@@redux/INIT"}},function(t,e,n){"use strict";function r(t){if(!Object(a.a)(t)||Object(o.a)(t)!=u)return!1;var e=Object(i.a)(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var o=n(47),i=n(52),a=n(54),u="[object Object]",c=Function.prototype,s=Object.prototype,l=c.toString,f=s.hasOwnProperty,d=l.call(Object);e.a=r},function(t,e,n){"use strict";var r=n(48),o=r.a.Symbol;e.a=o},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}e.a=r},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(20),i=n(21);t.exports=function(t,e){function n(t){var n=Math.pow(d,3)*c[t];return n+=3*e*Math.pow(d,2)*s[t],n+=3*d*Math.pow(e,2)*l[t],n+=Math.pow(e,3)*f[t]}var a=o(t),u=r(a,4),c=u[0],s=u[1],l=u[2],f=u[3];if(!s&&!l){return{x:i(c.x,f.x,e),y:i(c.y,f.y,e)}}var d=1-e;return{x:n("x"),y:n("y"),t:e}}},function(t,e,n){"use strict";var r=n(77),o=n(24),i=o.isKeyDown,a=n(0),u=a.keys,c=(a.types,n(7)),s=c.addListener,l=c.removeListener,f=n(5),d=f.setCursor,p=f.releaseOverride,y=n(1),h=n(15),v=n(92),g=n(3),E=g.clearSelection,b=g.addToSelection,O=g.isSelected,w=g.copySelection,x=g.removeFromSelection,N=function(t,e){return{x:e.x-t.x,y:e.y-t.y}};t.exports=function(t,e){if(!e)return void E();var n=e.value,o=e.type,a=r(o,n),c=O(o,a),f=!1,g=void 0,m=t,C=void 0,I=s("mousemove",function(t){f||(f=!0,g=d("MOVE",{override:!0})),y.dispatch({type:"MOVE",payload:{selection:C,positionChange:N(m,t)}}),m=t});s("mouseup",function(){l("mousemove",I),"string"==typeof g&&(p(g),d("DEFAULT")),f&&h({type:"MOVE",data:{selection:C,positionChange:N(t,m)}},!1),!f&&c&&(i(u.SHIFT)?x(o,a):(E(),b(o,a)))},!0),c||(i(u.SHIFT)||E(),b(o,a)),C=v(w())}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o={mirrorLength:!0};t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=e.x,a=e.y;if(n.mirrorLength){return{x:-1*(t.x-i)+i,y:-1*(t.y-a)+a}}var u=r({},n.positionToMirror),c=Math.atan2(pos.y-a,pos.x-i),s=Math.atan2(u.y-a,u.x-i),l=c-s+Math.PI,f=Math.sin(l),d=Math.cos(l);u.x-=i,u.y-=a;var p=u.x*d-u.y*f,y=u.x*f+u.y*d;return u.x=p+i,u.y=y+a,u}},function(t,e,n){"use strict";var r=n(17),o=r.onToolMouseDown,i=r.onToolMouseMove,a=r.onToolMouseUp,u=(n(26),n(11)),c=n(24),s=c.onKeyDown,l=c.onKeyUp,f=n(99);document.getElementById("canvas");window.onkeydown=s,window.onkeyup=l,canvas.onmousedown=o,canvas.onmousemove=i,canvas.onmouseup=a,f(),u(null,{noPosition:!0})},function(t,e,n){"use strict";var r=document.getElementById("canvas"),o=function(){return r.getBoundingClientRect()};e.getLeftOffset=function(){return o().left},e.getTopOffset=function(){return o().top}},function(t,e,n){"use strict";function r(e){return u.seed(e),t.exports}function o(e){return f=e,t.exports}function i(t){return void 0!==t&&u.characters(t),u.shuffled()}function a(){return s(f)}var u=n(9),c=(n(27),n(42)),s=n(43),l=n(44),f=n(45)||0;t.exports=a,t.exports.generate=a,t.exports.seed=r,t.exports.worker=o,t.exports.characters=i,t.exports.decode=c,t.exports.isValid=l},function(t,e,n){"use strict";function r(){return(i=(9301*i+49297)%233280)/233280}function o(t){i=t}var i=1;t.exports={nextValue:r,seed:o}},function(t,e,n){"use strict";function r(){if(!o||!o.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return o.getRandomValues(t),48&t[0]}var o="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=r},function(t,e,n){"use strict";function r(t){var e=o.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}var o=n(9);t.exports=r},function(t,e,n){"use strict";function r(t){var e="",n=Math.floor(.001*(Date.now()-c));return n===i?o++:(o=0,i=n),e+=a(u.lookup,s),e+=a(u.lookup,t),o>0&&(e+=a(u.lookup,o)),e+=a(u.lookup,n)}var o,i,a=n(27),u=n(9),c=1459707606518,s=6;t.exports=r},function(t,e,n){"use strict";function r(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=o.characters(),n=t.length,r=0;r<n;r++)if(-1===e.indexOf(t[r]))return!1;return!0}var o=n(9);t.exports=r},function(t,e,n){"use strict";t.exports=0},function(t,e,n){"use strict";var r=n(2),o=r.getPointAtPosition,i=n(10),a=i.getConnectionAtPosition,u=n(72);t.exports=function(t){var e=u(t);if(e)return{type:"__HANDLE",value:e};var n=o(t);if(n)return{type:"__POINT",value:n};var r=a(t);return r?{type:"__CONNECTION",value:r}:null}},function(t,e,n){"use strict";function r(t){return null==t?void 0===t?c:u:s&&s in Object(t)?Object(i.a)(t):Object(a.a)(t)}var o=n(31),i=n(50),a=n(51),u="[object Null]",c="[object Undefined]",s=o.a?o.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";var r=n(49),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();e.a=i},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n(18))},function(t,e,n){"use strict";function r(t){var e=a.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[c]=n:delete t[c]),o}var o=n(31),i=Object.prototype,a=i.hasOwnProperty,u=i.toString,c=o.a?o.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";function r(t){return i.call(t)}var o=Object.prototype,i=o.toString;e.a=r},function(t,e,n){"use strict";var r=n(53),o=Object(r.a)(Object.getPrototypeOf,Object);e.a=o},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}e.a=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}e.a=r},function(t,e,n){t.exports=n(56)},function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(58),a=function(t){return t&&t.__esModule?t:{default:t}}(i);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var u=(0,a.default)(o);e.default=u}).call(e,n(18),n(57)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function o(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:a.a.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+a.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function i(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var a=e[i];"function"==typeof t[a]&&(n[a]=t[a])}var u=Object.keys(n),c=void 0;try{o(n)}catch(t){c=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var o=!1,i={},a=0;a<u.length;a++){var s=u[a],l=n[s],f=t[s],d=l(f,e);if(void 0===d){var p=r(s,e);throw new Error(p)}i[s]=d,o=o||d!==f}return o?i:t}}e.a=i;var a=n(29);n(30),n(32)},function(t,e,n){"use strict";function r(t,e){return function(){return e(t.apply(void 0,arguments))}}function o(t,e){if("function"==typeof t)return r(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),o={},i=0;i<n.length;i++){var a=n[i],u=t[a];"function"==typeof u&&(o[a]=r(u,e))}return o}e.a=o},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,a){var u=t(n,r,a),c=u.dispatch,s=[],l={getState:u.getState,dispatch:function(t){return c(t)}};return s=e.map(function(t){return t(l)}),c=o.a.apply(void 0,s)(u.dispatch),i({},u,{dispatch:c})}}}e.a=r;var o=n(33),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){(function(t){!function(t,n){n(e)}(0,function(e){"use strict";function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function o(t,e,n){o.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(t,e){i.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function a(t,e){a.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function u(t,e,n){u.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function c(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function s(t){var e=void 0===t?"undefined":S(t);return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function l(t,e,n,r,f,d,p){f=f||[],p=p||[];var y=f.slice(0);if(void 0!==d){if(r){if("function"==typeof r&&r(y,d))return;if("object"===(void 0===r?"undefined":S(r))){if(r.prefilter&&r.prefilter(y,d))return;if(r.normalize){var h=r.normalize(y,d,t,e);h&&(t=h[0],e=h[1])}}}y.push(d)}"regexp"===s(t)&&"regexp"===s(e)&&(t=t.toString(),e=e.toString());var v=void 0===t?"undefined":S(t),g=void 0===e?"undefined":S(e),E="undefined"!==v||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(d),b="undefined"!==g||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(d);if(!E&&b)n(new i(y,e));else if(!b&&E)n(new a(y,t));else if(s(t)!==s(e))n(new o(y,t,e));else if("date"===s(t)&&t-e!=0)n(new o(y,t,e));else if("object"===v&&null!==t&&null!==e)if(p.filter(function(e){return e.lhs===t}).length)t!==e&&n(new o(y,t,e));else{if(p.push({lhs:t,rhs:e}),Array.isArray(t)){var O;for(t.length,O=0;O<t.length;O++)O>=e.length?n(new u(y,O,new a(void 0,t[O]))):l(t[O],e[O],n,r,y,O,p);for(;O<e.length;)n(new u(y,O,new i(void 0,e[O++])))}else{var w=Object.keys(t),x=Object.keys(e);w.forEach(function(o,i){var a=x.indexOf(o);a>=0?(l(t[o],e[o],n,r,y,o,p),x=c(x,a)):l(t[o],void 0,n,r,y,o,p)}),x.forEach(function(t){l(void 0,e[t],n,r,y,t,p)})}p.length=p.length-1}else t!==e&&("number"===v&&isNaN(t)&&isNaN(e)||n(new o(y,t,e)))}function f(t,e,n,r){return r=r||[],l(t,e,function(t){t&&r.push(t)},n),r.length?r:void 0}function d(t,e,n){if(n.path&&n.path.length){var r,o=t[e],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":d(o[n.path[r]],n.index,n.item);break;case"D":delete o[n.path[r]];break;case"E":case"N":o[n.path[r]]=n.rhs}}else switch(n.kind){case"A":d(t[e],n.index,n.item);break;case"D":t=c(t,e);break;case"E":case"N":t[e]=n.rhs}return t}function p(t,e,n){if(t&&e&&n&&n.kind){for(var r=t,o=-1,i=n.path?n.path.length-1:0;++o<i;)void 0===r[n.path[o]]&&(r[n.path[o]]="number"==typeof n.path[o]?[]:{}),r=r[n.path[o]];switch(n.kind){case"A":d(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}}function y(t,e,n){if(n.path&&n.path.length){var r,o=t[e],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":y(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}else switch(n.kind){case"A":y(t[e],n.index,n.item);break;case"D":case"E":t[e]=n.lhs;break;case"N":t=c(t,e)}return t}function h(t,e,n){if(t&&e&&n&&n.kind){var r,o,i=t;for(o=n.path.length-1,r=0;r<o;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":y(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}}function v(t,e,n){if(t&&e){l(t,e,function(r){n&&!n(t,e,r)||p(t,e,r)})}}function g(t){return"color: "+L[t].color+"; font-weight: bold"}function E(t){var e=t.kind,n=t.path,r=t.lhs,o=t.rhs,i=t.index,a=t.item;switch(e){case"E":return[n.join("."),r,"→",o];case"N":return[n.join("."),o];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+i+"]",a];default:return[]}}function b(t,e,n,r){var o=f(t,e);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(t){n.log("diff")}o?o.forEach(function(t){var e=t.kind,r=E(t);n.log.apply(n,["%c "+L[e].text,g(e)].concat(P(r)))}):n.log("—— no diff ——");try{n.groupEnd()}catch(t){n.log("—— diff end —— ")}}function O(t,e,n,r){switch(void 0===t?"undefined":S(t)){case"object":return"function"==typeof t[r]?t[r].apply(t,P(n)):t[r];case"function":return t(e);default:return t}}function w(t){var e=t.timestamp,n=t.duration;return function(t,r,o){var i=["action"];return i.push("%c"+String(t.type)),e&&i.push("%c@ "+r),n&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}function x(t,e){var n=e.logger,r=e.actionTransformer,o=e.titleFormatter,i=void 0===o?w(e):o,a=e.collapsed,u=e.colors,c=e.level,s=e.diff,l=void 0===e.titleFormatter;t.forEach(function(o,f){var d=o.started,p=o.startedTime,y=o.action,h=o.prevState,v=o.error,g=o.took,E=o.nextState,w=t[f+1];w&&(E=w.prevState,g=w.started-d);var x=r(y),N="function"==typeof a?a(function(){return E},y,o):a,m=T(p),C=u.title?"color: "+u.title(x)+";":"",I=["color: gray; font-weight: lighter;"];I.push(C),e.timestamp&&I.push("color: gray; font-weight: lighter;"),e.duration&&I.push("color: gray; font-weight: lighter;");var A=i(x,m,g);try{N?u.title&&l?n.groupCollapsed.apply(n,["%c "+A].concat(I)):n.groupCollapsed(A):u.title&&l?n.group.apply(n,["%c "+A].concat(I)):n.group(A)}catch(t){n.log(A)}var D=O(c,x,[h],"prevState"),S=O(c,x,[x],"action"),P=O(c,x,[v,h],"error"),_=O(c,x,[E],"nextState");if(D)if(u.prevState){var L="color: "+u.prevState(h)+"; font-weight: bold";n[D]("%c prev state",L,h)}else n[D]("prev state",h);if(S)if(u.action){var j="color: "+u.action(x)+"; font-weight: bold";n[S]("%c action    ",j,x)}else n[S]("action    ",x);if(v&&P)if(u.error){var H="color: "+u.error(v,h)+"; font-weight: bold;";n[P]("%c error     ",H,v)}else n[P]("error     ",v);if(_)if(u.nextState){var k="color: "+u.nextState(E)+"; font-weight: bold";n[_]("%c next state",k,E)}else n[_]("next state",E);s&&b(h,E,n,N);try{n.groupEnd()}catch(t){n.log("—— log end ——")}})}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},j,t),n=e.logger,r=e.stateTransformer,o=e.errorTransformer,i=e.predicate,a=e.logErrors,u=e.diffPredicate;if(void 0===n)return function(){return function(t){return function(e){return t(e)}}};if(t.getState&&t.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var c=[];return function(t){var n=t.getState;return function(t){return function(s){if("function"==typeof i&&!i(n,s))return t(s);var l={};c.push(l),l.started=D.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=s;var f=void 0;if(a)try{f=t(s)}catch(t){l.error=o(t)}else f=t(s);l.took=D.now()-l.started,l.nextState=r(n());var d=e.diff&&"function"==typeof u?u(n,s):e.diff;if(x(c,Object.assign({},e,{diff:d})),c.length=0,l.error)throw l.error;return f}}}}var m,C,I=function(t,e){return new Array(e+1).join(t)},A=function(t,e){return I("0",e-t.toString().length)+t},T=function(t){return A(t.getHours(),2)+":"+A(t.getMinutes(),2)+":"+A(t.getSeconds(),2)+"."+A(t.getMilliseconds(),3)},D="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},_=[];m="object"===(void 0===t?"undefined":S(t))&&t?t:"undefined"!=typeof window?window:{},C=m.DeepDiff,C&&_.push(function(){void 0!==C&&m.DeepDiff===f&&(m.DeepDiff=C,C=void 0)}),n(o,r),n(i,r),n(a,r),n(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:h,enumerable:!0},isConflict:{value:function(){return void 0!==C},enumerable:!0},noConflict:{value:function(){return _&&(_.forEach(function(t){t()}),_=null),f},enumerable:!0}});var L={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},j={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(t){return t},actionTransformer:function(t){return t},errorTransformer:function(t){return t},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dispatch,n=t.getState;return"function"==typeof e||"function"==typeof n?N()({dispatch:e,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=j,e.createLogger=N,e.logger=H,e.default=H,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(18))},function(t,e,n){"use strict";var r=n(28),o=r.combineReducers,i=n(64),a=n(65),u=n(66),c=n(67),s=n(69);t.exports=o({history:i,points:a,selection:u,connections:c,handles:s})},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i={history:[],future:[]};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments[1];switch(e.type){case"CLEAR_HISTORY":return i;case"ADD_ACTION_TO_HISTORY":return o({},t,{history:[].concat(r(t.history.slice(50===t.history.length?1:0)),[e.payload]),future:[]});case"UNDO":return 0===t.history.length?t:o({},t,{future:[].concat(r(t.future),[t.history[t.history.length-1]]),history:t.history.splice(0,t.history.length-1)});case"REDO":return 0===t.future.length?t:o({},t,{history:[].concat(r(t.history),[t.future[t.future.length-1]]),future:t.future.splice(0,t.future.length-1)});default:return t}}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(0),a=i.types,u={a:{x:40,y:40},b:{x:400,y:200}};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments[1];switch(e.type){case"MOVE":var n=e.payload,i=n.selection,c=n.positionChange,s=i[a.POINT];if(!Array.isArray(s))return t;for(var l=o({},t),f=0;f<s.length;f+=1){var d=s[f],p=t[d],y=p.x,h=p.y;l[d]=o({},t[d],{x:y+c.x,y:h+c.y})}return l;case"ADD_POINT":var v=e.payload,g=v.x,E=v.y,b=v.id;return o({},t,r({},b,{x:g,y:E}));case"DELETE_POINT":return Object.keys(t).reduce(function(n,r){return r!==e.payload&&(n[r]=t[r]),n},{});default:return t}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments[1];switch(e.type){case"ADD_SELECTION_TYPE":return i({},t,o({},e.payload,[]));case"ADD_TO_SELECTION":var n=e.payload,u=n.id,c=n.type;return i({},t,o({},c,[].concat(r(t[c]),[u])));case"REMOVE_FROM_SELECTION":var s=e.payload,l=s.type,f=s.itemIndex;return i({},t,o({},l,t[l].filter(function(t,e){return e!==f})));case"CLEAR_SELECTION":for(var d={},p=Object.keys(t),y=0;y<p.length;y+=1)d[p[y]]=[];return d;case"RESTORE_SELECTION":for(var h=i({},e.payload),v=Object.keys(t),g=0;g<v.length;g+=1)Array.isArray(h[v[g]])||(h[v[g]]=[]);return h;default:return t}}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(19),a=i.toConnectionId,u=n(68),c=u.checkValidConnection,s=u.checkIdArray,l=r({},a("a","b"),{id:a("a","b"),points:["a","b"],handles:["x","y"]});t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments[1];switch(e.type){case"ADD_CONNECTION":c(e.payload);var n=e.payload.id;if(t[n])throw new Error("There is already a connection by the id '"+n+"'");return o({},t,r({},n,e.payload));case"REPLACE_CONNECTION_POINT_IDS":var i=e.payload,a=i.id,u=i.handles,f=i.points;if(!t[a])throw new Error("Connection by id '"+a+"' does not exist.");return u&&s(u),f&&s(f),o({},t,r({},a,o({},t[a],{handles:u||t[a].handles,points:f||t[a].points})));case"DELETE_CONNECTION":var d=e.payload;return Object.keys(t).reduce(function(e,n){return n!==d&&(e[n]=t[n]),e},{});default:return t}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t.length!==e&&u();for(var n=0;n<t.length;n+=1)t[n]&&"object"===i(t[n])&&u(),"string"!=typeof t[n]&&"object"!==i(t[n])&&u()}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){throw new Error("Invalid connection.")},u=function(){throw new Error("Invalid id array.")};e.checkIdArray=o,e.checkValidConnection=function(t){var e=t.id,n=t.points,i=t.handles;e&&"string"==typeof e||a(),Array.isArray(n)&&Array.isArray(i)||a(),n[0]||a(),n[1]||i[0]||a(),o([].concat(r(n),r(i)),4)}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(0),i=o.types,a={x:{x:240,y:20,id:"x"},y:{x:360,y:500,id:"y"}};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments[1];switch(e.type){case"MOVE":var n=e.payload,o=n.selection,u=n.positionChange,c=o[i.HANDLE];if(!Array.isArray(c))return t;for(var s=r({},t),l=0;l<c.length;l+=1){var f=c[l],d=t[f],p=d.x,y=d.y;s[f]=r({},t[f],{x:p+u.x,y:y+u.y})}return s;case"ADD_HANDLES":for(var h=r({},t),v=e.payload,g=0;g<v.length;g+=1){var E=v[g],b=E.id,O=E.x,w=E.y;h[b]={x:O,y:w,id:b}}return h;case"DELETE_HANDLES":var x=e.payload;return Object.keys(t).reduce(function(e,n){return x.indexOf(n)<0&&(e[n]=t[n]),e},{});default:return t}}},function(t,e,n){"use strict";var r=n(34),o=n(22),i=n(21),a=n(71);t.exports=function(t,e){if(-1!==t.points.indexOf(null))return null;for(var n=void 0,u=void 0,c=0;c<40;c+=1){var s=c/39,l=r(t,i(0,1,s)),f=o(e,l),d={x:l.x,y:l.y,distance:f,t:s};!n||f<n.distance?(u=n,n=d):(!u||f<u.distance)&&(u=d)}if(n.distance>225)return null;for(var p=a(t,20,n.t,u.t),y=void 0,h=0;h<p.length;h+=1){var v=o(e,p[h]);(!y||v<y.distance)&&(y={x:p[h].x,y:p[h].y,t:p[h].t,distance:v})}return y}},function(t,e,n){"use strict";var r=n(21),o=n(34);t.exports=function(t,e,n,i){for(var a=[],u=0;u<e;u+=1){var c=r(n,i,u/e),s=o(t,c);a.push(s)}return a}},function(t,e,n){"use strict";var r=n(4),o=r.getAllHandles,i=n(22),a=n(2);a.getPointById;t.exports=function(t,e){for(var n=o(),r=void 0,a=void 0,u=0;u<n.length;u+=1){var c=i(t,n[u]);(!a||c<a)&&(r=n[u],a=c)}return a<225?r:null}},function(t,e,n){"use strict";var r=n(13),o=r.getGuidesOfType,i=n(12),a=n(20),u=n(10),c=u.getAllConnections,s=n(75),l=n(23),f=l.renderLine,d=l.renderCubicBezier,p=l.renderQuadraticBezier,y=n(0),h=y.types,v=y.colors;t.exports=function(){for(var t=c(),e=0;e<t.length;e+=1){var n=a(t[e]);-1===n.indexOf(null)?d(n):n[0]&&n[3]&&(n[1]||n[2]?p(n.filter(function(t){return t})):f(n[0],n[3])),s(t[e])}o(h.CONN).forEach(function(t){d(t,1,v.PRIMARY)}),o(h.LINE).forEach(function(t){i();f(t.from,t.to,v.PRIMARY,1)})}},function(t,e,n){"use strict";for(var r=n(0),o=r.types,i=[],a=Object.keys(o),u=0;u<a.length;u+=1)i.push(o[a[u]]);e.isValidType=function(){return i.indexOf(type)>-1},e.checkType=function(t){if(-1===i.indexOf(t))throw new Error("Invalid type '"+t+"'.")}},function(t,e,n){"use strict";function r(t,e,n){var r=u("__HANDLE").indexOf(e.id)>-1;d(t,e,r?v:"#aaa",1);var o=r?h:"#999";f(e,r?4:3,o)}var o=n(4),i=o.getHandleById,a=n(3),u=a.getSelectedOfType,c=n(2),s=c.getPointById,l=n(23),f=l.renderCircle,d=l.renderLine,p=(n(12),n(0)),y=p.colors,h=y.PRIMARY,v=y.PRIMARY_LIGHT;t.exports=function(t){for(var e=0;e<t.handles.length;e+=1)if(t.handles[e]&&t.points[e]){var n=i(t.handles[e]),o=s(t.points[e]);r(o,n)}}},function(t,e,n){"use strict";var r=n(13),o=r.getGuidesOfType,i=n(3),a=i.getSelectedOfType,u=n(2),c=u.getAllPoints,s=n(23),l=s.renderCircle,f=n(0),d=f.colors,p=f.types;t.exports=function(){for(var t=c(),e=a(p.POINT),n=0;n<t.length;n+=1){e.indexOf(t[n].id)>-1?l(t[n],5,d.WHITE,{color:d.PRIMARY,width:2}):l(t[n],4,d.PRIMARY)}for(var r=o(p.POINT),i=0;i<r.length;i+=1)l(r[i],4,d.PRIMARY)}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o,i=n(0),a=i.types,u=a.POINT,c=a.CONN,s=a.HANDLE,l=(o={},r(o,u,function(t){return t.id}),r(o,s,function(t){return t.id}),r(o,c,function(t){return t.connection.id}),o);t.exports=function(t,e){if("function"!=typeof l[t])throw new Error("Invalid type: '"+t+"'.");return l[t](e)}},function(t,e,n){"use strict";var r=n(25),o=n(1),i=n(11);t.exports=function(){var t=o.getState().history.history;if(t.length){var e=t[t.length-1];o.dispatch({type:"UNDO"}),r(e,{undo:!0}),i(null,{useLastPosition:!0})}}},function(t,e,n){"use strict";var r=n(80),o=n(81),i=n(82),a=n(83),u=n(84),c=n(85),s=n(86),l=n(87),f=n(88),d=n(89),p=n(90),y=function(t){return{redo:t.undo,undo:t.redo}};t.exports=Object.freeze({MOVE:r,ADD_POINT:o,DELETE_POINT:y(o),ADD_PEN_POINT:i,ADD_CONNECTION:a,DELETE_CONNECTION:y(a),SPLIT_CONNECTION:u,SPLIT_LINE_CONNECTION:c,CONNECT_POINTS:s,ADD_STRAY_CONNECTION:l,COMPLETE_STRAY_CONNECTION:f,REPLACE_CONNECTION_POINT_IDS:d,ADD_HANDLES:p,DELETE_HANDLES:y(p)})},function(t,e,n){"use strict";var r=function(t,e){return{type:"MOVE",payload:{selection:t,positionChange:e}}};t.exports={redo:function(t){var e=t.selection,n=t.positionChange;return r(e,n)},undo:function(t){var e=t.selection,n=t.positionChange;return r(e,{x:-1*n.x,y:-1*n.y})}}},function(t,e,n){"use strict";var r=n(6);t.exports={redo:function(t){if(!r(t))throw new Error("Invalid position.");if(!t.id||"string"!=typeof t.id)throw new Error("Invalid point id. Expected string but got '"+t.id+"'.");return{type:"ADD_POINT",payload:t}},undo:function(t){var e=t.id;if(!e||"string"!=typeof e)throw new Error("Invalid point id. Expected string but got '"+e+"'.");return{type:"DELETE_POINT",payload:e}}}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(0),i=o.types;t.exports=function(t){var e=t.point,n=t.newHandle,o=t.newConnection,a=t.movedHandle,u=t.strayConnection,c=t.completedConnection,s=t.newCompletedConnectionHandle,l=t.lineConnection,f=t.lineConnectionHandles,d=[{type:"ADD_POINT",data:e}];if(n&&(d.push({type:"ADD_CONNECTION",data:o}),d.push({type:"ADD_HANDLES",data:[n]})),l&&(d.push({type:"ADD_CONNECTION",data:l}),f&&d.push({type:"ADD_HANDLES",data:[f]})),c){if(d.push({type:"REPLACE_CONNECTION_POINT_IDS",data:{oldConnection:u,newConnection:c}}),a){var p=a.id,y=a.positionChange;d.push({type:"MOVE",data:{selection:r({},i.HANDLE,[p]),positionChange:y}})}s||d.push({type:"ADD_HANDLES",data:[s]})}return d}},function(t,e,n){"use strict";var r=n(19);r.toConnectionId;e.redo=function(t){var e=t.points,n=t.handles;return{type:"ADD_CONNECTION",payload:{id:t.id,points:e,handles:n}}},e.undo=function(t){return{type:"DELETE_CONNECTION",payload:t.id}}},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=function(t){var e=t.connection,n=t.newPoints,o=t.ids,i=[],a=r(e.points,2),u=a[0],c=a[1],s=r(n,7),l=(s[0],s[1]),f=s[2],d=s[3],p=s[4],y=s[5];s[6];return i.push({type:"DELETE_CONNECTION",data:e}),i.push({type:"ADD_POINT",data:d}),i.push({type:"ADD_CONNECTION",data:{id:o[0],points:[u,d.id],handles:[l.id,f.id]}}),i.push({type:"ADD_CONNECTION",data:{id:o[1],points:[d.id,c],handles:[p.id,y.id]}}),i.push({type:"ADD_HANDLES",data:[l,f,p,y]}),i}},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=function(t){var e=t.ids,n=t.connection,o=t.newPoint,i=[],a=r(n.points,2),u=a[0],c=a[1];return i.push({type:"DELETE_CONNECTION",data:n}),i.push({type:"ADD_POINT",data:o}),i.push({type:"ADD_CONNECTION",data:{id:e[0],points:[u,o.id],handles:[null,null]}}),i.push({type:"ADD_CONNECTION",data:{id:e[1],points:[o.id,c],handles:[null,null]}}),i}},function(t,e,n){"use strict";t.exports=function(t){var e=t.connection,n=t.handles,r=t.strayConnection,o=t.strayConnectionHandle,i=[];return i.push({type:"ADD_CONNECTION",data:e}),n&&i.push({type:"ADD_HANDLES",data:n}),r&&(i.push({type:"ADD_CONNECTION",data:r}),i.push({type:"ADD_HANDLES",data:[o]})),i}},function(t,e,n){"use strict";t.exports=function(t){var e=t.pointId,n=t.connectionId,r=t.handleId,o=t.handlePosition;return[{type:"ADD_CONNECTION",data:{id:n,points:[e,null],handles:[r,null]}},{type:"ADD_HANDLES",data:[{x:o.x,y:o.y,id:r}]}]}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(4),u=a.getHandleById,c=n(14),s=n(0),l=s.types;t.exports=function(t){var e=t.handleId,n=t.newPoints,a=t.pointIds,s=t.connection,f=[],d=i(n,4),p=(d[0],d[1]),y=d[2],h=d[3];return f.push({type:"REPLACE_CONNECTION_POINT_IDS",data:{newConnection:{id:s.id,points:[s.points[0],a[3]],handles:[s.handles[0],a[2]]},oldConnection:s}}),f.push({type:"ADD_POINT",data:o({},h,{id:a[3]})}),f.push({type:"ADD_HANDLES",data:[o({},y,{id:a[2]})]}),f.push({type:"MOVE",data:{selection:r({},l.HANDLE,[e]),positionChange:c(u(s.handles[0]),p)}}),f}},function(t,e,n){"use strict";n(1);e.undo=function(t){return{type:"REPLACE_CONNECTION_POINT_IDS",payload:t.oldConnection}},e.redo=function(t){return{type:"REPLACE_CONNECTION_POINT_IDS",payload:t.newConnection}}},function(t,e,n){"use strict";var r=n(6);t.exports={redo:function(t){for(var e=0;e<t.length;e+=1){if(!r(t[e]))throw new Error("Invalid handle.");if(!t[e].id||"string"!=typeof t[e].id)throw new Error("Invalid handle id. Expected string but got '"+t[e].id+"'.")}return{type:"ADD_HANDLES",payload:t}},undo:function(t){for(var e=0;e<t.length;e+=1)if(!t[e].id||"string"!=typeof t[e].id)throw new Error("Invalid handle id. Expected string but got '"+t[e].id+"'.");return{type:"DELETE_HANDLES",payload:t.map(function(t){return t.id})}}}},function(t,e,n){"use strict";var r=n(25),o=n(1),i=n(11);t.exports=function(){var t=o.getState().history.future;if(t.length){var e=t[t.length-1];r(e,{undo:!1}),o.dispatch({type:"REDO"}),i(null,{useLastPosition:!0})}}},function(t,e,n){"use strict";var r=n(10),o=r.getConnectionById,i=n(2),a=i.getPointHandleIds,u=n(0),c=u.types;t.exports=function(t){function e(t,e){Array.isArray(i[t])?-1===i[t].indexOf(e)&&i[t].push(e):i[t]=[e]}function n(t,e){if(t===c.POINT){var n=a(e).filter(function(t){return t});r(c.HANDLE,n)}else if(t===c.CONN){var i=o(e).points;r(c.POINT,i)}}function r(t,r){for(var o=0;o<r.length;o+=1)e(t,r[o]),n(t,r[o])}for(var i={},u=Object.keys(t),s=0;s<u.length;s+=1){var l=u[s];Array.isArray(i[l])||(i[l]=[]);for(var f=0;f<t[l].length;f+=1)e(l,t[l][f]),n(l,t[l][f])}return i}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(8),a=n(7),u=a.addListener,c=a.removeListener,s=n(24),l=s.isKeyDown,f=n(94),d=n(3),p=d.getSelectedOfType,y=n(5),h=y.setCursor,v=y.releaseOverride,g=n(95),E=n(20),b=n(15),O=n(35),w=n(0),x=w.types,N=(w.cursors,w.keys),m=n(1),C=(n(16),n(2)),I=(C.getPointById,n(4)),A=(I.getHandleById,n(14)),T=n(3),D=T.addToSelection,S=T.clearSelection,P=T.isSelected,_=n(96),L=n(97);t.exports=function(t,e){if(e){var n=e.value,a=e.type;if(a===x.CONN){var s=n.connection,d=n.closestPoint,y=d.t,w=E(s);if(w[1]||w[2]){for(var C=g(w,y),I=0;I<C.length;I+=1)C[I].id=i();C[2].sibling=C[4].id,C[4].sibling=C[2].id,S(),D(x.POINT,C[3].id),b({type:"SPLIT_CONNECTION",data:{ids:[i(),i()],connection:s,newPoints:C}},!0),h("DEFAULT")}else{var T=i();S(),D(x.POINT,T),b({type:"SPLIT_LINE_CONNECTION",data:{ids:[i(),i()],connection:s,newPoint:o({},d,{id:T})}},!0)}}if(a===x.HANDLE&&O(t,e),a===x.POINT){var j=p(x.POINT);if(1===j.length&&j[0]!==n.id)return void _(j[0],n.id);l(N.SHIFT)||S(),P(x.POINT,n.id)||D(x.POINT,n.id);var H=!1,k=void 0,R=t,M=1===j.length?f(j[0]):null;if(!M){var V=i(),B=i(),F=u("mousemove",function(t){H?m.dispatch({type:"MOVE",payload:{selection:r({},x.HANDLE,[B]),positionChange:A(R,t)}}):(H=!0,k=h("PEN",{override:!0}),m.dispatch({type:"ADD_CONNECTION",payload:{id:V,points:[n.id,null],handles:[B,null]}}),m.dispatch({type:"ADD_HANDLES",payload:[{x:t.x,y:t.y,id:B}]})),R=t});u("mouseup",function(){c("mousemove",F),"string"==typeof k&&(v(k),h("DEFAULT")),H&&!M&&b({type:"ADD_STRAY_CONNECTION",data:{pointId:j[0],connectionId:V,handleId:B,handlePosition:R}},!1)},!0)}}}else{var U=p(x.POINT);if(1===U.length){var Y=f(U[0]);Y?L(t,{strayConnection:Y}):L(t,{selectedPoint:U[0]})}else L(t)}}},function(t,e,n){"use strict";var r=n(2),o=r.getPointConnections;t.exports=function(t){for(var e=o(t),n=0;n<e.length;n+=1)if(null===e[n].points[1])return e[n];return null}},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=function(t,e){var n=r(t,4),o=n[0],i=n[1],a=n[2],u=n[3],c=o.x,s=o.y,l=i.x,f=i.y,d=a.x,p=a.y,y=u.x,h=u.y,v=(l-c)*e+c,g=(f-s)*e+s,E=(d-l)*e+l,b=(p-f)*e+f,O=(y-d)*e+d,w=(h-p)*e+p,x=(E-v)*e+v,N=(b-g)*e+g,m=(O-E)*e+E,C=(w-b)*e+b;return[{x:c,y:s},{x:v,y:g},{x:x,y:N},{x:(m-x)*e+x,y:(C-N)*e+N},{x:m,y:C},{x:O,y:w},{x:y,y:h}]}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=(n(4),n(8)),u=n(7),c=u.addListener,s=u.removeListener,l=(n(6),n(3)),f=l.addToSelection,d=l.clearSelection,p=(l.isSelected,n(15)),y=n(5),h=y.setCursor,v=y.releaseOverride,g=n(14),E=n(1),b=n(36),O=n(16),w=n(2),x=w.getPointById,N=n(0),m=N.types;t.exports=function(t,e){var n={selectedPointId:t,clickedPointId:e,connection:{id:a(),points:[t,e],handles:[null,null]}};E.dispatch({type:"ADD_CONNECTION",payload:n.connection}),d(),f(m.POINT,e);var u=!1,l=void 0,y=i({},x(e)),w=c("mousemove",function(c){if(u||!(Math.hypot(y.x-c.x,y.y-c.y)<10)){if(u){var s=x(e),f=O(x(t),null,b(c,s),s),d=o(f,4),p=(d[0],d[1]),v=d[2];d[3];E.dispatch({type:"MOVE",payload:{selection:r({},m.HANDLE,[n.handles[1].id]),positionChange:g(n.handles[1],p)}}),n.handles[1].x=p.x,n.handles[1].y=p.y,E.dispatch({type:"MOVE",payload:{selection:r({},m.HANDLE,[n.handles[0].id]),positionChange:g(n.handles[0],v)}}),n.handles[0].x=v.x,n.handles[0].y=v.y,E.dispatch({type:"MOVE",payload:{selection:r({},m.HANDLE,[n.strayConnection.handles[0]]),positionChange:g(n.strayConnectionHandle,c)}}),n.strayConnectionHandle.x=c.x,n.strayConnectionHandle.y=c.y}else{u=!0,l=h("PEN",{override:!0});var w=a();n.strayConnection={id:a(),points:[e,null],handles:[w,null]},n.strayConnectionHandle={id:w,x:c.x,y:c.y},E.dispatch({type:"ADD_CONNECTION",payload:n.strayConnection}),E.dispatch({type:"ADD_HANDLES",payload:[n.strayConnectionHandle]});var N=x(e),C=O(x(t),null,b(c,N),N),I=o(C,4),A=(I[0],I[1]),T=I[2];I[3];n.handles=[A,T].map(function(t){return i({},t,{id:a()})}),n.connection.handles=n.handles.map(function(t){return t.id}),E.dispatch({type:"ADD_HANDLES",payload:n.handles}),E.dispatch({type:"REPLACE_CONNECTION_POINT_IDS",payload:n.connection})}y=c}});c("mouseup",function(){s("mousemove",w),l&&(v(l),h("DEFAULT")),p({type:"CONNECT_POINTS",data:n},!1)},!0)}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(4),a=n(8),u=n(7),c=u.addListener,s=u.removeListener,l=n(6),f=n(3),d=f.addToSelection,p=f.clearSelection,y=(f.isSelected,n(15)),h=n(5),v=h.setCursor,g=h.releaseOverride,E=n(14),b=n(1),O=n(36),w=n(16),x=n(2),N=x.getPointById,m=n(0),C=m.types,I={strayConnection:null,selectedPoint:null};t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;if(!l(t))throw new Error("Invalid position.");var n={},u=a();n.point={id:u,x:t.x,y:t.y},b.dispatch({type:"ADD_POINT",payload:n.point}),p(),d(C.POINT,u);var f=!1,h=void 0,x=t,m=a(),A=a(),T=void 0,D=void 0;if(e.strayConnection){var S=e.strayConnection;n.strayConnection=S;var P=w(N(S.points[0]),(0,i.getHandleById)(S.handles[0]),null,t);D=P,n.newCompletedConnectionHandle={id:a(),x:P[2].x,y:P[2].y},n.completedConnection={id:S.id,points:[S.points[0],n.point.id],handles:[S.handles[0],n.newCompletedConnectionHandle.id]},b.dispatch({type:"ADD_HANDLES",payload:[n.newCompletedConnectionHandle]}),b.dispatch({type:"REPLACE_CONNECTION_POINT_IDS",payload:n.completedConnection}),T=(0,i.getHandleById)(S.handles[0]);var _=E(T,P[1]);n.movedHandle={id:S.handles[0],positionChange:_},b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[n.movedHandle.id]),positionChange:_}})}else e.selectedPoint&&(n.lineConnection={id:a(),points:[e.selectedPoint,u],handles:[null,null]},b.dispatch({type:"ADD_CONNECTION",payload:n.lineConnection}));var L=c("mousemove",function(i){if(f||!(Math.hypot(x.x-i.x,x.y-i.y)<10)){if(f){var c=E(x,i);if(b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[m]),positionChange:c}}),n.newHandle.x=i.x,n.newHandle.y=i.y,e.strayConnection){var s=n.newCompletedConnectionHandle,l=n.newCompletedConnectionHandle.id,d=O(i,t);b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[l]),positionChange:E(s,d)}}),n.newCompletedConnectionHandle.x=d.x,n.newCompletedConnectionHandle.y=d.y}else if(n.lineConnection){var p=w(N(e.selectedPoint),null,O(i,t),t),y=o(p,4),g=(y[0],y[1]),I=y[2];y[3];b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[n.lineConnectionRightHandle.id]),positionChange:E(n.lineConnectionRightHandle,g)}}),n.lineConnectionRightHandle.x=g.x,n.lineConnectionRightHandle.y=g.y,b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[n.lineConnectionLeftHandle.id]),positionChange:E(n.lineConnectionLeftHandle,I)}}),n.lineConnectionLeftHandle.x=I.x,n.lineConnectionLeftHandle.y=I.y}}else if(f=!0,h=v("PEN",{override:!0}),n.newConnection={id:A,points:[u,null],handles:[m,null]},n.newHandle={x:i.x,y:i.y,id:m},b.dispatch({type:"ADD_CONNECTION",payload:n.newConnection}),b.dispatch({type:"ADD_HANDLES",payload:[n.newHandle]}),e.strayConnection){n.movedHandle.positionChange=E(D[1],T),b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[n.movedHandle.id]),positionChange:n.movedHandle.positionChange}});var S=E(n.newCompletedConnectionHandle,i);b.dispatch({type:"MOVE",payload:{selection:r({},C.HANDLE,[n.newCompletedConnectionHandle.id]),positionChange:S}}),n.newCompletedConnectionHandle.x=i.x,n.newCompletedConnectionHandle.y=i.y}else if(n.lineConnection){n.lineConnectionRightHandle={id:a(),x:i.x,y:i.y};var P=w(N(e.selectedPoint),null,n.lineConnectionRightHandle,t)[1];n.lineConnectionLeftHandle={id:a(),x:P.x,y:P.y},n.lineConnection.handles=[n.lineConnectionLeftHandle.id,n.lineConnectionRightHandle.id],b.dispatch({type:"ADD_HANDLES",payload:[n.lineConnectionLeftHandle,n.lineConnectionRightHandle]}),b.dispatch({type:"REPLACE_CONNECTION_POINT_IDS",payload:n.lineConnection})}x=i}});c("mouseup",function(){s("mousemove",L),h&&(g(h),v("DEFAULT")),y({type:"ADD_PEN_POINT",data:n},!1)},!0)}},function(t,e,n){"use strict";var r=n(4),o=n(2),i=n(2),a=i.getPointConnections,u=n(13),c=u.addGuide,s=n(3),l=s.getSelectedOfType,f=n(5),d=f.setCursor,p=n(0),y=p.types,h=n(16);t.exports=function(t,e){if(e){var n=e.value,i=e.type;if(i===y.CONN){n.closestPoint;d("PEN_ADD_POINT"),c(y.POINT,n.closestPoint)}else if(i===y.POINT){var u=l(y.POINT);1===u.length?u[0]!==n.id?(d("PEN_SELECT_POINT"),c(y.LINE,{from:(0,o.getPointById)(u[0]),to:n})):d("PEN_SELECT_POINT"):d("PEN_ADD_POINT")}else i===y.HANDLE&&d("DEFAULT")}else{c(y.POINT,t);var s=l(y.POINT);if(1===s.length){for(var f=!1,p=a(s[0]),v=0;v<p.length;v+=1)null===p[v].points[1]&&(f=p[v],v=p.length);if(f){var g=h((0,o.getPointById)(s[0]),(0,r.getHandleById)(f.handles[0]),null,t);c(y.CONN,g)}else c(y.LINE,{from:(0,o.getPointById)(s[0]),to:t});d("PEN_ADD_POINT")}}}},function(t,e,n){"use strict";var r=n(17),o=r.setTool,i=[{icon:"default-cursor.png",toolKey:"v",id:"movetool",position:{x:7,y:7}},{icon:"pen-cursor.png",toolKey:"p",id:"pentool",position:{x:7,y:7}}];t.exports=function(){i.map(function(t){var e=t.icon,n=t.toolKey,r=t.id,i=t.position,a=document.createElement("BUTTON");return a.classList.add("tool"),a.id=r,a.style.backgroundImage='url("static/images/'+e+'")',a.style.backgroundPositionX=i.x+"px",a.style.backgroundPositionY=i.y+"px",a.setAttribute("data-tool-key",n),"movetool"===r&&a.classList.add("active"),a.onclick=function(){return o(n)},a}).forEach(function(t){document.getElementById("toolbar").appendChild(t)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjYzI4ODcxNThkZWI1Y2ZkYmU1ZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcG9pbnRzL2dldFBvaW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVzL2dldEhhbmRsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2N1cnNvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvaXNWYWxpZFBvc2l0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9saXN0ZW5lcnMvbGlzdGVuZXJzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zaG9ydGlkL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9hbHBoYWJldC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29ubmVjdGlvbnMvZ2V0Q29ubmVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy9nZXRDb250ZXh0LmpzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXIvZ3VpZGVzLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9nZXRQb3NEaWZmZXJlbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hY3Rpb25zL2hpc3RvcnkvYWRkQWN0aW9uVG9IaXN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9iZXppZXIvcXVhZHJhdGljVG9DdWJpY0Jlemllci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG9vbHMvdG9vbHMuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29ubmVjdGlvbnMvY29ubmVjdGlvbklkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0aW9ucy9nZXRDb25uZWN0aW9uUG9pbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9nZXRJbnRlcm1lZGlhdGVOdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2NhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci9wcmltaXRpdmVzLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aW9ucy9yZXNvbHZlQWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy90b1Bvc2l0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9lbmNvZGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2NyZWF0ZVN0b3JlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvaXNQbGFpbk9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL19TeW1ib2wuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2NvbXBvc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rpb25zL2NhbGNCZXppZXJQb2ludEF0LmpzIiwid2VicGFjazovLy8uL3NyYy90b29scy9tb3ZlL29uTW92ZU1vdXNlRG93bi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvbWlycm9yUG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy9nZXRDYW52YXNPZmZzZXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Nob3J0aWQvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9yYW5kb20vcmFuZG9tLWZyb20tc2VlZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9saWIvcmFuZG9tL3JhbmRvbS1ieXRlLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Nob3J0aWQvbGliL2RlY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9saWIvYnVpbGQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Nob3J0aWQvbGliL2lzLXZhbGlkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi91dGlsL2NsdXN0ZXItd29ya2VyLWlkLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc29sdmUvcmVzb2x2ZU9iamVjdEF0UG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fYmFzZUdldFRhZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL19yb290LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvX2ZyZWVHbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fZ2V0UmF3VGFnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvX29iamVjdFRvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvX2dldFByb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL19vdmVyQXJnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvaXNPYmplY3RMaWtlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2xpYi9wb255ZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVkdXgvZXMvY29tYmluZVJlZHVjZXJzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9iaW5kQWN0aW9uQ3JlYXRvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2FwcGx5TWlkZGxld2FyZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVkdXgtbG9nZ2VyL2Rpc3QvcmVkdXgtbG9nZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWR1Y2Vycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdWNlcnMvaGlzdG9yeVJlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlZHVjZXJzL3BvaW50UmVkdWNlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdWNlcnMvc2VsZWN0aW9uUmVkdWNlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdWNlcnMvY29ubmVjdGlvblJlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rpb25zL2NoZWNrVmFsaWRDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWR1Y2Vycy9oYW5kbGVSZWR1Y2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0aW9ucy9nZXRDbG9zZXN0UG9pbnRPbkNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rpb25zL2dldFBvaW50c0JldHdlZW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hhbmRsZXMvZ2V0SGFuZGxlQXRQb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyL2Nvbm5lY3Rpb25zL3JlbmRlckNvbm5lY3Rpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9jaGVja1R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci9jb25uZWN0aW9ucy9yZW5kZXJIYW5kbGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXIvcG9pbnRzL3JlbmRlclBvaW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVzb2x2ZS9yZXNvbHZlT2JqZWN0SWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvaGlzdG9yeS91bmRvLmpzIiwid2VicGFjazovLy8uL3NyYy9hY3Rpb25zL2FjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvY29tbW9uL21vdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvcG9pbnQvYWRkUG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvcG9pbnQvYWRkUGVuUG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvY29ubmVjdGlvbi9hZGRDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vc3BsaXRDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vc3BsaXRMaW5lQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aW9ucy9jb25uZWN0aW9uL2Nvbm5lY3RQb2ludHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvY29ubmVjdGlvbi9hZGRTdHJheUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvY29ubmVjdGlvbi9jb21wbGV0ZVN0cmF5Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aW9ucy9jb25uZWN0aW9uL3JlcGxhY2VDb25uZWN0aW9uUG9pbnRJZHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvaGFuZGxlL2FkZEhhbmRsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvaGlzdG9yeS9yZWRvLmpzIiwid2VicGFjazovLy8uL3NyYy90b29scy9tb3ZlL2FkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xzL3Blbi9vblBlbk1vdXNlRG93bi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29ubmVjdGlvbnMvZ2V0U3RyYXlDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9iZXppZXIvc3BsaXRDdWJpY0Jlemllci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG9vbHMvcGVuL29uUGVuQ29ubmVjdFBvaW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG9vbHMvcGVuL29uUGVuQWRkUG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2xzL3Blbi9vblBlbk1vdXNlTW92ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG9vbHMvdG9vbGJhci5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY29sb3JzIiwiUFJJTUFSWSIsIlBSSU1BUllfTElHSFQiLCJQUklNQVJZX0xJR0hURVIiLCJXSElURSIsInR5cGVzIiwiUE9JTlQiLCJDT05OIiwiSEFORExFIiwiTElORSIsInR5cGVSZWR1Y2VycyIsIl9fUE9JTlQiLCJfX0NPTk5FQ1RJT04iLCJfX0hBTkRMRSIsInRvb2xzIiwiUEVOIiwidiIsIk1PVkUiLCJjdXJzb3JzIiwiREVGQVVMVCIsIlBFTl9BRERfUE9JTlQiLCJQRU5fU0VMRUNUX1BPSU5UIiwiQ09OVkVSVF9BTkNIT1JfUE9JTlQiLCJkZWZhdWx0VG9vbEN1cnNvcnMiLCJrZXlzIiwiU0hJRlQiLCJDT05UUk9MIiwiQUxUIiwiQVJST1dfVVAiLCJBUlJPV19MRUZUIiwiQVJST1dfRE9XTiIsIkFSUk9XX1JJR0hUIiwiX3JlcXVpcmUiLCJjcmVhdGVTdG9yZSIsImFwcGx5TWlkZGxld2FyZSIsIl9yZXF1aXJlMiIsImNyZWF0ZUxvZ2dlciIsInJlZHVjZXJzIiwibWlkZGxld2FyZSIsImNvbGxhcHNlZCIsImdldEFsbFBvaW50cyIsIl9zdG9yZSRnZXRTdGF0ZTIiLCJzdG9yZSIsImdldFN0YXRlIiwicG9pbnRzIiwicEFyciIsImxlbmd0aCIsIl9wb2ludHMka2V5cyRpIiwieCIsInkiLCJwdXNoIiwiaWQiLCJnZXRBbGxDb25uZWN0aW9ucyIsImNhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMiLCJnZXRQb2ludEJ5SWQiLCJFcnJvciIsImdldFBvaW50QXRQb3NpdGlvbiIsInBvc2l0aW9uIiwiY2xvc2VzdFBvaW50IiwicG9pbnREaXN0YW5jZSIsImRpc3RhbmNlIiwiZ2V0UG9pbnRIYW5kbGVJZHMiLCJjb25uZWN0aW9ucyIsImhhbmRsZXMiLCJwb2ludEluZGV4IiwiaW5kZXhPZiIsImdldFBvaW50Q29ubmVjdGlvbnMiLCJjQXJyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsImZyb20iLCJ2YWxpZGF0ZVR5cGUiLCJ0eXBlIiwiX3ZhbGlkYXRlZFR5cGVzIiwiZGlzcGF0Y2giLCJwYXlsb2FkIiwiZ2V0U2VsZWN0ZWRPZlR5cGUiLCJzZWxlY3Rpb24iLCJhZGRUb1NlbGVjdGlvbiIsInJlbW92ZUZyb21TZWxlY3Rpb24iLCJpdGVtSW5kZXgiLCJpc1NlbGVjdGVkIiwiY2xlYXJTZWxlY3Rpb24iLCJjb3B5U2VsZWN0aW9uIiwiY3VycmVudFNlbGVjdGlvbiIsImNvcHkiLCJjb25jYXQiLCJpc1ZhbGlkU2VsZWN0aW9uIiwiaXNWYWxpZCIsIm9iamVjdHNPZlR5cGUiLCJmb3JFYWNoIiwiZ2V0QWxsSGFuZGxlcyIsImhhbmRsZUFyciIsImdldEhhbmRsZUJ5SWQiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsInNob3J0aWQiLCJjdXJzb3JJbWFnZU1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbWFnZSIsIkltYWdlIiwic3JjIiwiY3VycmVudEN1cnNvciIsIm92ZXJyaWRlIiwic2V0Q3Vyc29yIiwiY3Vyc29yIiwib3B0cyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIm92ZXJyaWRlSWQiLCJnZXRDdXJzb3IiLCJyZWxlYXNlT3ZlcnJpZGUiLCJyZW1vdmVMaXN0ZW5lciIsIl9saXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsImZ1bmMiLCJzaG91bGRSZW1vdmVTZWxmIiwiX2FyZ3VtZW50cyIsInJ1bkxpc3RlbmVycyIsIl9sZW4iLCJhcmdzIiwiX2tleSIsIl9saXN0ZW5lcnMkdHlwZSIsImFwcGx5IiwicmVzZXQiLCJzaHVmZmxlZCIsInNldENoYXJhY3RlcnMiLCJfYWxwaGFiZXRfIiwiYWxwaGFiZXQiLCJPUklHSU5BTCIsInVuaXF1ZSIsInNwbGl0IiwiZmlsdGVyIiwiaXRlbSIsImluZCIsImxhc3RJbmRleE9mIiwiam9pbiIsImNoYXJhY3RlcnMiLCJzZXRTZWVkIiwic2VlZCIsInJhbmRvbUZyb21TZWVkIiwicHJldmlvdXNTZWVkIiwic2h1ZmZsZSIsImNoYXJhY3RlckluZGV4Iiwic291cmNlQXJyYXkiLCJ0YXJnZXRBcnJheSIsInIiLCJuZXh0VmFsdWUiLCJNYXRoIiwiZmxvb3IiLCJzcGxpY2UiLCJnZXRTaHVmZmxlZCIsImxvb2t1cCIsImluZGV4IiwiZ2V0Q2xvc2VzdFBvaW50T25Db25uZWN0aW9uIiwidG9Db25uZWN0aW9uSWQiLCJnZXRDb25uZWN0aW9uQnlJZCIsImdldENvbm5lY3Rpb25BdFBvc2l0aW9uIiwiY29ubmVjdGlvbiIsImdldENvbnRleHQiLCJyZW5kZXJDb25uZWN0aW9ucyIsInJlbmRlclBvaW50cyIsImlzVmFsaWRQb3NpdGlvbiIsInJlc2V0R3VpZGVzIiwibGFzdFBvc2l0aW9uIiwiY3R4IiwiY2xlYXJSZWN0Iiwibm9Qb3NpdGlvbiIsInVzZUxhc3RQb3NpdGlvbiIsImRyYXdJbWFnZSIsImNhbnZhcyIsImNoZWNrVHlwZSIsImd1aWRlcyIsImFkZEd1aWRlIiwidmFsdWUiLCJnZXRHdWlkZXNPZlR5cGUiLCJnZXRQb3NEaWZmZXJlbmNlIiwib2xkUG9zIiwibmV3UG9zIiwicmVzb2x2ZUFjdGlvbiIsImFjdGlvbiIsImV4ZWN1dGVJbW1lZGlhdGVseSIsImRhdGEiLCJpZ25vcmVTZWxlY3Rpb24iLCJjYWxjTmV3SGFuZGxlcyIsInAwIiwicDMiLCJwMSIsIl9zbGljZWRUb0FycmF5Iiwic2xpY2VJdGVyYXRvciIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwibmV4dCIsImRvbmUiLCJlcnIiLCJUeXBlRXJyb3IiLCJwMiIsIl9jYWxjTmV3SGFuZGxlcyIsIl9jYWxjTmV3SGFuZGxlczIiLCJuZXdQMiIsIl9jYWxjTmV3SGFuZGxlczMiLCJfY2FsY05ld0hhbmRsZXM0IiwibmV3UDEiLCJ0b1Bvc2l0aW9uIiwicmVzb2x2ZU9iamVjdEF0UG9zaXRpb24iLCJfcmVxdWlyZTMiLCJyZW5kZXIiLCJvbk1vdmVNb3VzZURvd24iLCJvblBlbk1vdXNlRG93biIsIm9uUGVuTW91c2VNb3ZlIiwibW91c2VEb3duTGlzdGVuZXJzIiwibW91c2VNb3ZlTGlzdGVuZXJzIiwibW91c2VVcExpc3RlbmVycyIsImN1cnJlbnRUb29sIiwic2V0VG9vbCIsImtleSIsImVsQXJyIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImdldEF0dHJpYnV0ZSIsImFkZCIsIm9uVG9vbE1vdXNlRG93biIsImUiLCJvblRvb2xNb3VzZU1vdmUiLCJvblRvb2xNb3VzZVVwIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJ3aW5kb3ciLCJhIiwiYiIsInNvcnQiLCJnZXRQb2ludHMiLCJfYyRwb2ludHMiLCJfYyRoYW5kbGVzIiwiZ2V0SW50ZXJtZWRpYXRlTnVtYmVyIiwidCIsImRYIiwiYWJzIiwiZFkiLCJyZW5kZXJDaXJjbGUiLCJyYWRpdXMiLCJjb2xvciIsInN0cm9rZSIsImZpbGxTdHlsZSIsIl9wb2ludHMkaSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiY2xvc2VQYXRoIiwiZmlsbCIsImxpbmVXaWR0aCIsIndpZHRoIiwic3Ryb2tlU3R5bGUiLCJyZW5kZXJMaW5lIiwidG8iLCJtb3ZlVG8iLCJsaW5lVG8iLCJyZW5kZXJDdWJpY0JlemllciIsInBvaW50IiwiX3BvaW50cyIsImJlemllckN1cnZlVG8iLCJyZW5kZXJRdWFkcmF0aWNCZXppZXIiLCJfcG9pbnRzMiIsInF1YWRyYXRpY0N1cnZlVG8iLCJpc0tleURvd24iLCJhY3RpdmVLZXlzIiwidW5kbyIsInJlZG8iLCJvbktleVVwIiwiX3JlZiIsIm9uS2V5RG93biIsIl9yZWYyIiwicmVwZWF0IiwidG9Mb3dlckNhc2UiLCJyZXNvbHZlQWN0aW9uQ3JlYXRvciIsImFjdGlvbnMiLCJ1bmRvT3JSZWRvIiwicmVzb2x2ZU5lc3RlZEFjdGlvbiIsIl9hY3Rpb25zJGkiLCJhY3Rpb25DcmVhdG9yIiwicmVzdWx0IiwiaGlzdG9yeSIsImFjdGlvbkJlZm9yZSIsImdldExlZnRPZmZzZXQiLCJnZXRUb3BPZmZzZXQiLCJjbGllbnRYIiwiY2xpZW50WSIsImVuY29kZSIsIm51bWJlciIsImxvb3BDb3VudGVyIiwic3RyIiwicmFuZG9tQnl0ZSIsInBvdyIsIl9fd2VicGFja19leHBvcnRzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NyZWF0ZVN0b3JlX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2NvbWJpbmVSZWR1Y2Vyc19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19iaW5kQWN0aW9uQ3JlYXRvcnNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fYXBwbHlNaWRkbGV3YXJlX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX2NvbXBvc2VfXyIsInJlZHVjZXIiLCJwcmVsb2FkZWRTdGF0ZSIsImVuaGFuY2VyIiwiZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycyIsIm5leHRMaXN0ZW5lcnMiLCJjdXJyZW50TGlzdGVuZXJzIiwic2xpY2UiLCJjdXJyZW50U3RhdGUiLCJzdWJzY3JpYmUiLCJsaXN0ZW5lciIsImlzU3Vic2NyaWJlZCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9sb2Rhc2hfZXNfaXNQbGFpbk9iamVjdF9fIiwiaXNEaXNwYXRjaGluZyIsImN1cnJlbnRSZWR1Y2VyIiwibGlzdGVuZXJzIiwicmVwbGFjZVJlZHVjZXIiLCJuZXh0UmVkdWNlciIsIkFjdGlvblR5cGVzIiwiSU5JVCIsIm9ic2VydmFibGUiLCJvdXRlclN1YnNjcmliZSIsIm9ic2VydmVyIiwib2JzZXJ2ZVN0YXRlIiwidW5zdWJzY3JpYmUiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfc3ltYm9sX29ic2VydmFibGVfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3N5bWJvbF9vYnNlcnZhYmxlX18iLCJpc1BsYWluT2JqZWN0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19pc09iamVjdExpa2VfanNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fYmFzZUdldFRhZ19qc19fIiwib2JqZWN0VGFnIiwicHJvdG8iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2dldFByb3RvdHlwZV9qc19fIiwiQ3RvciIsImZ1bmNUb1N0cmluZyIsIm9iamVjdEN0b3JTdHJpbmciLCJmdW5jUHJvdG8iLCJvYmplY3RQcm90byIsInRvU3RyaW5nIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19yb290X2pzX18iLCJjb21wb3NlIiwiZnVuY3MiLCJhcmciLCJyZWR1Y2UiLCJnZXRDb25uZWN0aW9uUG9pbnRzIiwiY2FsY1BhcnQiLCJ3aGljaCIsInUiLCJfZ2V0Q29ubmVjdGlvblBvaW50cyIsIl9nZXRDb25uZWN0aW9uUG9pbnRzMiIsInJlc29sdmVPYmplY3RJZCIsIl9yZXF1aXJlNCIsImFkZEFjdGlvblRvSGlzdG9yeSIsImFkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMiLCJfcmVxdWlyZTUiLCJpbml0aWFsUG9zaXRpb24iLCJvYmplY3RJZCIsIndhc1NlbGVjdGVkQmVmb3JlQ2xpY2siLCJtb3VzZU1vdmVkIiwiY3Vyc29yT3ZlcnJpZGVJZCIsImxpc3RlbmVySWQiLCJjdXJyZW50UG9zaXRpb24iLCJwb3NpdGlvbkNoYW5nZSIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0Iiwic291cmNlIiwiZGVmYXVsdE9wdHMiLCJtaXJyb3JMZW5ndGgiLCJvcmlnaW4iLCJvWCIsIm9ZIiwibWlycm9yIiwicG9zaXRpb25Ub01pcnJvciIsInBvc2l0aW9uUmFkIiwiYXRhbjIiLCJwb3MiLCJtaXJyb3JSYWQiLCJtaXJyb3JlZFJhZCIsInNpbiIsImNvcyIsIm5ld1giLCJuZXdZIiwiY3JlYXRlVG9vbEJhciIsIm9ua2V5ZG93biIsIm9ua2V5dXAiLCJvbm1vdXNlZG93biIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZXVwIiwiZ2V0Q2FudmFzUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ0b3AiLCJzZWVkVmFsdWUiLCJ3b3JrZXIiLCJ3b3JrZXJJZCIsImNsdXN0ZXJXb3JrZXJJZCIsIm5ld0NoYXJhY3RlcnMiLCJnZW5lcmF0ZSIsImJ1aWxkIiwiZGVjb2RlIiwiZ2V0TmV4dFZhbHVlIiwiX3NlZWRfIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwicmFuZG9tIiwiZGVzdCIsIlVpbnQ4QXJyYXkiLCJtc0NyeXB0byIsInZlcnNpb24iLCJzdWJzdHIiLCJzZWNvbmRzIiwiRGF0ZSIsIm5vdyIsIlJFRFVDRV9USU1FIiwicHJldmlvdXNTZWNvbmRzIiwiY291bnRlciIsImlzU2hvcnRJZCIsImxlbiIsImdldEhhbmRsZUF0UG9zaXRpb24iLCJoYW5kbGUiLCJjb25uZWN0aW9uQW5kUG9pbnQiLCJiYXNlR2V0VGFnIiwidW5kZWZpbmVkVGFnIiwibnVsbFRhZyIsInN5bVRvU3RyaW5nVGFnIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19nZXRSYXdUYWdfanNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fb2JqZWN0VG9TdHJpbmdfanNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fU3ltYm9sX2pzX18iLCJ0b1N0cmluZ1RhZyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZnJlZUdsb2JhbF9qc19fIiwiZnJlZVNlbGYiLCJzZWxmIiwicm9vdCIsImdsb2JhbCIsImZyZWVHbG9iYWwiLCJnZXRSYXdUYWciLCJpc093biIsInRhZyIsInVubWFza2VkIiwibmF0aXZlT2JqZWN0VG9TdHJpbmciLCJvYmplY3RUb1N0cmluZyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fb3ZlckFyZ19qc19fIiwiZ2V0UHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJvdmVyQXJnIiwidHJhbnNmb3JtIiwiaXNPYmplY3RMaWtlIiwiX3BvbnlmaWxsIiwiX3BvbnlmaWxsMiIsImRlZmF1bHQiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIiwic3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsIiwiX1N5bWJvbCIsImdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlIiwiYWN0aW9uVHlwZSIsImFzc2VydFJlZHVjZXJTaGFwZSIsInN1YnN0cmluZyIsImNvbWJpbmVSZWR1Y2VycyIsInJlZHVjZXJLZXlzIiwiZmluYWxSZWR1Y2VycyIsImZpbmFsUmVkdWNlcktleXMiLCJzaGFwZUFzc2VydGlvbkVycm9yIiwic3RhdGUiLCJoYXNDaGFuZ2VkIiwibmV4dFN0YXRlIiwicHJldmlvdXNTdGF0ZUZvcktleSIsIm5leHRTdGF0ZUZvcktleSIsImVycm9yTWVzc2FnZSIsImJpbmRBY3Rpb25DcmVhdG9yIiwiYmluZEFjdGlvbkNyZWF0b3JzIiwiYWN0aW9uQ3JlYXRvcnMiLCJib3VuZEFjdGlvbkNyZWF0b3JzIiwibWlkZGxld2FyZXMiLCJfZGlzcGF0Y2giLCJjaGFpbiIsIm1pZGRsZXdhcmVBUEkiLCJtYXAiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NvbXBvc2VfXyIsInN1cGVyXyIsImNyZWF0ZSIsIndyaXRhYmxlIiwiZiIsIk4iLCJ0ZXN0IiwicHJlZmlsdGVyIiwibm9ybWFsaXplIiwiaCIsImxocyIsInJocyIsInciLCJTIiwiaXNOYU4iLCJwYXRoIiwia2luZCIsIkYiLCJncm91cENvbGxhcHNlZCIsImdyb3VwIiwibG9nIiwidGV4dCIsIlAiLCJncm91cEVuZCIsInRpbWVzdGFtcCIsImR1cmF0aW9uIiwiU3RyaW5nIiwidG9GaXhlZCIsImxvZ2dlciIsImFjdGlvblRyYW5zZm9ybWVyIiwidGl0bGVGb3JtYXR0ZXIiLCJsZXZlbCIsImRpZmYiLCJzdGFydGVkIiwic3RhcnRlZFRpbWUiLCJwcmV2U3RhdGUiLCJlcnJvciIsInRvb2siLCJrIiwiaiIsIkQiLCJFIiwidGl0bGUiLCJBIiwiTyIsIkMiLCJMIiwiVCIsIk0iLCJfIiwic3RhdGVUcmFuc2Zvcm1lciIsImVycm9yVHJhbnNmb3JtZXIiLCJwcmVkaWNhdGUiLCJsb2dFcnJvcnMiLCJkaWZmUHJlZGljYXRlIiwiY29uc29sZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJwZXJmb3JtYW5jZSIsIkRlZXBEaWZmIiwiZGVmaW5lUHJvcGVydGllcyIsIm9ic2VydmFibGVEaWZmIiwiYXBwbHlEaWZmIiwiYXBwbHlDaGFuZ2UiLCJyZXZlcnRDaGFuZ2UiLCJpc0NvbmZsaWN0Iiwibm9Db25mbGljdCIsInRyYW5zZm9ybWVyIiwiZGVmYXVsdHMiLCJkZWZhdWx0U3RhdGUiLCJmdXR1cmUiLCJfZGVmaW5lUHJvcGVydHkiLCJfYWN0aW9uJHBheWxvYWQiLCJ0b01vdmUiLCJuZXdTdGF0ZSIsIl9zdGF0ZSRpZCIsIl9hY3Rpb24kcGF5bG9hZDIiLCJjaGVja1ZhbGlkQ29ubmVjdGlvbiIsImNoZWNrSWRBcnJheSIsImlkQXJyIiwiaW52YWxpZElkQXJyYXkiLCJpbnZhbGlkQ29ubmVjdGlvbiIsIl9oYW5kbGVzJF9pIiwiaGFuZGxlSWRzIiwiY2FsY0JlemllclBvaW50QXQiLCJnZXRQb2ludHNCZXR3ZWVuIiwiY2xvc2VzdEFwcHJveCIsInNlY29uZEFwcHJveCIsImJlemllclBvaW50IiwidFN0YXJ0IiwidEVuZCIsImdldFBvaW50IiwiY2xvc2VzdEhhbmRsZSIsImNsb3Nlc3REaXN0YW5jZSIsInJlbmRlckhhbmRsZXMiLCJndWlkZSIsImxpbmUiLCJ0eXBlQXJyIiwiaXNWYWxpZFR5cGUiLCJyZW5kZXJIYW5kbGUiLCJpc0hhbmRsZVNlbGVjdGVkIiwiaGFuZGxlQ29sb3IiLCJzZWxlY3RlZFBvaW50cyIsInBvaW50R3VpZGVzIiwiX3Jlc29sdmVycyIsInJlc29sdmVycyIsIm1vdmUiLCJhZGRQb2ludCIsImFkZFBlblBvaW50IiwiYWRkQ29ubmVjdGlvbiIsInNwbGl0Q29ubmVjdGlvbiIsInNwbGl0TGluZUNvbm5lY3Rpb24iLCJjb25uZWN0UG9pbnRzIiwiYWRkU3RyYXlDb25uZWN0aW9uIiwiY29tcGxldGVTdHJheUNvbm5lY3Rpb24iLCJyZXBsYWNlQ29ubmVjdGlvblBvaW50SWRzIiwiYWRkSGFuZGxlcyIsInJldmVyc2UiLCJmcmVlemUiLCJBRERfUE9JTlQiLCJERUxFVEVfUE9JTlQiLCJBRERfUEVOX1BPSU5UIiwiQUREX0NPTk5FQ1RJT04iLCJERUxFVEVfQ09OTkVDVElPTiIsIlNQTElUX0NPTk5FQ1RJT04iLCJTUExJVF9MSU5FX0NPTk5FQ1RJT04iLCJDT05ORUNUX1BPSU5UUyIsIkFERF9TVFJBWV9DT05ORUNUSU9OIiwiQ09NUExFVEVfU1RSQVlfQ09OTkVDVElPTiIsIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFMiLCJBRERfSEFORExFUyIsIkRFTEVURV9IQU5ETEVTIiwidG9BY3Rpb24iLCJuZXdIYW5kbGUiLCJuZXdDb25uZWN0aW9uIiwibW92ZWRIYW5kbGUiLCJzdHJheUNvbm5lY3Rpb24iLCJjb21wbGV0ZWRDb25uZWN0aW9uIiwibmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSIsImxpbmVDb25uZWN0aW9uIiwibGluZUNvbm5lY3Rpb25IYW5kbGVzIiwib2xkQ29ubmVjdGlvbiIsIm5ld1BvaW50cyIsImlkcyIsIl9jb25uZWN0aW9uJHBvaW50cyIsImFJZCIsImJJZCIsIl9uZXdQb2ludHMiLCJwNCIsInA1IiwibmV3UG9pbnQiLCJzdHJheUNvbm5lY3Rpb25IYW5kbGUiLCJwb2ludElkIiwiY29ubmVjdGlvbklkIiwiaGFuZGxlSWQiLCJoYW5kbGVQb3NpdGlvbiIsInBvaW50SWRzIiwibmV3U2VsZWN0aW9uIiwiYWRkSW1wbGljaXRseVNlbGVjdGVkIiwiYWRkQXJyYXlUb1NlbGVjdGlvbiIsImdldFN0cmF5Q29ubmVjdGlvbiIsInNwbGl0Q3ViaWNCZXppZXIiLCJfcmVxdWlyZTYiLCJfcmVxdWlyZTciLCJfcmVxdWlyZTgiLCJvblBlbkNvbm5lY3RQb2ludHMiLCJvblBlbkFkZFBvaW50IiwiY3VycmVudFBvaW50cyIsInNpYmxpbmciLCJuZXdQb2ludElkIiwibmV3Q29ubmVjdGlvbklkIiwibmV3SGFuZGxlSWQiLCJzZWxlY3RlZFBvaW50IiwieDEiLCJ5MSIsIngyIiwieTIiLCJ4MyIsInkzIiwieDQiLCJ5NCIsIngxMiIsInkxMiIsIngyMyIsInkyMyIsIngzNCIsInkzNCIsIngxMjMiLCJ5MTIzIiwieDIzNCIsInkyMzQiLCJtaXJyb3JQb3NpdGlvbiIsInF1YWRyYXRpY1RvQ3ViaWNCZXppZXIiLCJzZWxlY3RlZFBvaW50SWQiLCJjbGlja2VkUG9pbnRJZCIsImh5cG90IiwiX3F1YWRyYXRpY1RvQ3ViaWNCZXppMyIsIl9xdWFkcmF0aWNUb0N1YmljQmV6aTQiLCJzdHJheUNvbm5lY3Rpb25IYW5kbGVJZCIsIl9xdWFkcmF0aWNUb0N1YmljQmV6aSIsIl9xdWFkcmF0aWNUb0N1YmljQmV6aTIiLCJfZ2V0SGFuZGxlcyIsIm9yaWdpbmFsTW92ZWRIYW5kbGUiLCJzdHJheUNvbm5lY3Rpb25Qb2ludHMiLCJoYW5kbGVQb3MiLCJoYW5kbGVNaXJyb3JJZCIsIm5ld1Bvc2l0aW9uIiwibGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZSIsImxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZSIsImxlZnRIYW5kbGUiLCJfZ2V0UG9pbnRzIiwiaWNvbiIsInRvb2xLZXkiLCJ0b29sRWwiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kUG9zaXRpb25YIiwiYmFja2dyb3VuZFBvc2l0aW9uWSIsInNldEF0dHJpYnV0ZSIsIm9uY2xpY2siLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsU0FBQVAsRUFBQVEsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVYsRUFBQVEsSUFDQUcsT0FBQUMsZUFBQVosRUFBQVEsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFmLEdBQ0EsR0FBQVEsR0FBQVIs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S0FBTSxpQkFDTkMsUUFBUyxJQUNUaHBCLEdBQUksVUFDSk0sVUFDRVQsRUFBRyxFQUNIQyxFQUFHLElBS1R4RSxHQUFPRCxRQUFVLFdBQ01zQyxFQUFNOGQsSUFBSSxTQUFBak4sR0FBcUMsR0FBbEN1YSxHQUFrQ3ZhLEVBQWxDdWEsS0FBTUMsRUFBNEJ4YSxFQUE1QndhLFFBQVNocEIsRUFBbUJ3TyxFQUFuQnhPLEdBQUlNLEVBQWVrTyxFQUFmbE8sU0FDN0Myb0IsRUFBUzVsQixTQUFTNmxCLGNBQWMsU0FhdEMsT0FaQUQsR0FBTy9kLFVBQVVHLElBQUksUUFDckI0ZCxFQUFPanBCLEdBQUtBLEVBQ1ppcEIsRUFBT0UsTUFBTUMsZ0JBQWIsc0JBQXFETCxFQUFyRCxLQUNBRSxFQUFPRSxNQUFNRSxvQkFBeUIvb0IsRUFBU1QsRUFBL0MsS0FDQW9wQixFQUFPRSxNQUFNRyxvQkFBeUJocEIsRUFBU1IsRUFBL0MsS0FDQW1wQixFQUFPTSxhQUFhLGdCQUFpQlAsR0FFMUIsYUFBUGhwQixHQUNGaXBCLEVBQU8vZCxVQUFVRyxJQUFJLFVBR3ZCNGQsRUFBT08sUUFBVSxpQkFBTTFlLEdBQVFrZSxJQUN4QkMsSUFHSXZtQixRQUFRLFNBQUN1bUIsR0FDcEI1bEIsU0FBU0MsZUFBZSxXQUFXbW1CLFlBQVlSIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzNyk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb2xvcnM6IHtcbiAgICBQUklNQVJZOiBcIiMyOWFhZjRcIixcbiAgICBQUklNQVJZX0xJR0hUOiBcIiM2OGJlZjJcIixcbiAgICBQUklNQVJZX0xJR0hURVI6IFwiI2M0ZTlmZlwiLFxuICAgIFdISVRFOiBcIiNmZmZcIlxuICB9LFxuXG4gIHR5cGVzOiB7XG4gICAgUE9JTlQ6IFwiX19QT0lOVFwiLFxuICAgIENPTk46IFwiX19DT05ORUNUSU9OXCIsXG4gICAgSEFORExFOiBcIl9fSEFORExFXCIsXG4gICAgTElORTogXCJfX0xJTkVcIlxuICB9LFxuXG4gIC8vIE1hcCBiZXR3ZWVuIHR5cGVzIGFuZCByZWR1Y2Vyc1xuICB0eXBlUmVkdWNlcnM6IHtcbiAgICBcIl9fUE9JTlRcIjogXCJwb2ludHNcIixcbiAgICBcIl9fQ09OTkVDVElPTlwiOiBcImNvbm5lY3Rpb25zXCIsXG4gICAgXCJfX0hBTkRMRVwiOiBcImhhbmRsZXNcIlxuICB9LFxuXG4gIHRvb2xzOiB7XG4gICAgLyoqXG4gICAgICogbG93ZXJjYXNlIGxldHRlcnMgd2lsbCBiZSBpbmNsdWRlZCB3aXRoIHRoZSBzdHJpbmcga2V5c1xuICAgICAqL1xuICAgIHA6IFwiUEVOXCIsXG4gICAgUEVOOiBcIlBFTlwiLFxuXG4gICAgdjogXCJNT1ZFXCIsXG4gICAgTU9WRTogXCJNT1ZFXCJcbiAgfSxcblxuICBjdXJzb3JzOiB7XG4gICAgLy8gQ29tbW9uIGN1cnNvcnNcbiAgICBERUZBVUxUOiBcImRlZmF1bHQtY3Vyc29yLnBuZ1wiLFxuICAgIE1PVkU6IFwiZGVmYXVsdC1tb3ZlLWN1cnNvci5wbmdcIixcblxuICAgIC8vIFBlbiBjdXJzb3JzXG4gICAgUEVOOiBcInBlbi1jdXJzb3IucG5nXCIsXG4gICAgUEVOX0FERF9QT0lOVDogXCJwZW4tYWRkLXBvaW50LWN1cnNvci5wbmdcIixcbiAgICBQRU5fU0VMRUNUX1BPSU5UOiBcInBlbi1zZWxlY3QtcG9pbnQtY3Vyc29yLnBuZ1wiLFxuICAgIENPTlZFUlRfQU5DSE9SX1BPSU5UOiBcImNvbnZlcnQtYW5jaG9yLXBvaW50LWN1cnNvci5wbmdcIlxuICB9LFxuXG4gIC8qKlxuICAgKiBHaXZlbiBhbnkgdG9vbCwgdGhpcyBzaG91bGQgcmV0dXJuIGl0J3MgZGVmYXVsdCBjdXJzb3IuXG4gICAqIChjdXJzb3Igd2hlbiBubyBvYmplY3QgaXMgaW4gdGhlIGludGVyYWN0aW9uIHJhbmdlIG9mIDE1cHgpXG4gICAqL1xuICBkZWZhdWx0VG9vbEN1cnNvcnM6IHtcbiAgICBNT1ZFOiBcIkRFRkFVTFRcIixcbiAgICBQRU46IFwiUEVOXCJcbiAgfSxcblxuICBrZXlzOiB7XG4gICAgU0hJRlQ6IFwiU2hpZnRcIixcbiAgICBDT05UUk9MOiBcIkNvbnRyb2xcIixcbiAgICBBTFQ6IFwiQWx0XCIsXG4gICAgQVJST1dfVVA6IFwiQXJyb3dVcFwiLFxuICAgIEFSUk9XX0xFRlQ6IFwiQXJyb3dMZWZ0XCIsXG4gICAgQVJST1dfRE9XTjogXCJBcnJvd0Rvd25cIixcbiAgICBBUlJPV19SSUdIVDogXCJBcnJvd1JpZ2h0XCJcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpLFxuICAgIGNyZWF0ZVN0b3JlID0gX3JlcXVpcmUuY3JlYXRlU3RvcmUsXG4gICAgYXBwbHlNaWRkbGV3YXJlID0gX3JlcXVpcmUuYXBwbHlNaWRkbGV3YXJlO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MiksXG4gICAgY3JlYXRlTG9nZ2VyID0gX3JlcXVpcmUyLmNyZWF0ZUxvZ2dlcjtcblxudmFyIHJlZHVjZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Myk7XG5cbnZhciBtaWRkbGV3YXJlID0gdm9pZCAwO1xuXG5pZiAodHJ1ZSkge1xuICBtaWRkbGV3YXJlID0gYXBwbHlNaWRkbGV3YXJlKGNyZWF0ZUxvZ2dlcih7IGNvbGxhcHNlZDogdHJ1ZSB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU3RvcmUocmVkdWNlcnMsIG1pZGRsZXdhcmUpO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCksXG4gICAgZ2V0QWxsQ29ubmVjdGlvbnMgPSBfcmVxdWlyZS5nZXRBbGxDb25uZWN0aW9ucztcblxudmFyIGNhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcG9pbnQgd2l0aCBhIHNwZWNpZmljIGlkXG4gKlxuICogUmV0dXJucyBudWxsIGlmIG5vIHBvaW50IGhhcyBzYWlkIGlkLlxuICovXG5leHBvcnRzLmdldFBvaW50QnlJZCA9IGZ1bmN0aW9uIGdldFBvaW50QnlJZChpZCkge1xuICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaWQuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICdcIiArIGlkICsgXCInXCIpO1xuICB9XG5cbiAgdmFyIF9zdG9yZSRnZXRTdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCksXG4gICAgICBwb2ludHMgPSBfc3RvcmUkZ2V0U3RhdGUucG9pbnRzO1xuXG4gIHJldHVybiBwb2ludHNbaWRdIHx8IG51bGw7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGN1cnJlbnQgcG9pbnRzXG4gKi9cbmZ1bmN0aW9uIGdldEFsbFBvaW50cygpIHtcbiAgdmFyIF9zdG9yZSRnZXRTdGF0ZTIgPSBzdG9yZS5nZXRTdGF0ZSgpLFxuICAgICAgcG9pbnRzID0gX3N0b3JlJGdldFN0YXRlMi5wb2ludHM7XG5cbiAgdmFyIHBBcnIgPSBbXTtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwb2ludHMpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgX3BvaW50cyRrZXlzJGkgPSBwb2ludHNba2V5c1tpXV0sXG4gICAgICAgIHggPSBfcG9pbnRzJGtleXMkaS54LFxuICAgICAgICB5ID0gX3BvaW50cyRrZXlzJGkueTtcblxuICAgIHBBcnIucHVzaCh7IHg6IHgsIHk6IHksIGlkOiBrZXlzW2ldIH0pO1xuICB9XG4gIHJldHVybiBwQXJyO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBubyBwb2ludCBpcyBjbG9zZXIgdGhhbiAxNXB4XG4gKi9cbmV4cG9ydHMuZ2V0UG9pbnRBdFBvc2l0aW9uID0gZnVuY3Rpb24gZ2V0UG9pbnRBdFBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gIHZhciBwb2ludHMgPSBnZXRBbGxQb2ludHMoKTtcbiAgdmFyIGNsb3Nlc3RQb2ludCA9IHZvaWQgMDtcbiAgdmFyIHBvaW50RGlzdGFuY2UgPSB2b2lkIDA7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBwb2ludHNbaV0pO1xuICAgIGlmICghY2xvc2VzdFBvaW50IHx8IGRpc3RhbmNlIDwgcG9pbnREaXN0YW5jZSkge1xuICAgICAgY2xvc2VzdFBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgcG9pbnREaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwb2ludERpc3RhbmNlIDwgMjI1ID8gY2xvc2VzdFBvaW50IDogbnVsbDsgLy8gMTVweFxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIGlkcyBvZiBldmVyeSBoYW5kbGUgdGhhdCBpc1xuICogY29ubmVjdGVkIHRvIHRoYXQgcG9pbnQuXG4gKi9cbmV4cG9ydHMuZ2V0UG9pbnRIYW5kbGVJZHMgPSBmdW5jdGlvbiBnZXRQb2ludEhhbmRsZUlkcyhpZCkge1xuICB2YXIgY29ubmVjdGlvbnMgPSBnZXRBbGxDb25uZWN0aW9ucygpO1xuICB2YXIgaGFuZGxlcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgcG9pbnRJbmRleCA9IGNvbm5lY3Rpb25zW2ldLnBvaW50cy5pbmRleE9mKGlkKTtcbiAgICBpZiAocG9pbnRJbmRleCA+IC0xKSB7XG4gICAgICBoYW5kbGVzLnB1c2goY29ubmVjdGlvbnNbaV0uaGFuZGxlc1twb2ludEluZGV4XSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGhhbmRsZXM7XG59O1xuXG5leHBvcnRzLmdldFBvaW50Q29ubmVjdGlvbnMgPSBmdW5jdGlvbiBnZXRQb2ludENvbm5lY3Rpb25zKGlkKSB7XG4gIGlmICghaWQgfHwgdHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJ1wiICsgaWQgKyBcIidcIik7XG4gIH1cblxuICB2YXIgY0FyciA9IFtdO1xuICB2YXIgY29ubmVjdGlvbnMgPSBzdG9yZS5nZXRTdGF0ZSgpLmNvbm5lY3Rpb25zO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY29ubmVjdGlvbnMpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoY29ubmVjdGlvbnNba2V5c1tpXV0ucG9pbnRzLmluZGV4T2YoaWQpICE9PSAtMSkge1xuICAgICAgY0Fyci5wdXNoKGNvbm5lY3Rpb25zW2tleXNbaV1dKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY0Fycjtcbn07XG5cbmV4cG9ydHMuZ2V0QWxsUG9pbnRzID0gZ2V0QWxsUG9pbnRzO1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCksXG4gICAgdHlwZVJlZHVjZXJzID0gX3JlcXVpcmUudHlwZVJlZHVjZXJzO1xuXG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3ZhbGlkYXRlZFR5cGVzID0gW107IC8vIFRvIGF2b2lkIHVubmVjZXNzYXJ5IGdldFN0YXRlIGNhbGxzXG5cbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZSh0eXBlKSB7XG4gIGlmIChfdmFsaWRhdGVkVHlwZXMuaW5kZXhPZih0eXBlKSA+IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF0eXBlIHx8IHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyB0eXBlICsgXCInLlwiKTtcbiAgfVxuXG4gIHN0b3JlLmRpc3BhdGNoKHtcbiAgICB0eXBlOiBcIkFERF9TRUxFQ1RJT05fVFlQRVwiLFxuICAgIHBheWxvYWQ6IHR5cGVcbiAgfSk7XG5cbiAgX3ZhbGlkYXRlZFR5cGVzLnB1c2godHlwZSk7XG59XG5cbmZ1bmN0aW9uIGdldFNlbGVjdGVkT2ZUeXBlKHR5cGUpIHtcbiAgdmFsaWRhdGVUeXBlKHR5cGUpO1xuICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS5zZWxlY3Rpb25bdHlwZV07XG59XG5leHBvcnRzLmdldFNlbGVjdGVkT2ZUeXBlID0gZ2V0U2VsZWN0ZWRPZlR5cGU7XG5cbmV4cG9ydHMuYWRkVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiBhZGRUb1NlbGVjdGlvbih0eXBlLCBpZCkge1xuICB2YXIgc2VsZWN0ZWRPZlR5cGUgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlKTtcbiAgaWYgKHNlbGVjdGVkT2ZUeXBlLmluZGV4T2YoaWQpIDwgMCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiQUREX1RPX1NFTEVDVElPTlwiLFxuICAgICAgcGF5bG9hZDogeyB0eXBlOiB0eXBlLCBpZDogaWQgfVxuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnRzLnJlbW92ZUZyb21TZWxlY3Rpb24gPSBmdW5jdGlvbiByZW1vdmVGcm9tU2VsZWN0aW9uKHR5cGUsIGlkKSB7XG4gIHZhciBpdGVtSW5kZXggPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlKS5pbmRleE9mKGlkKTtcbiAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJSRU1PVkVfRlJPTV9TRUxFQ1RJT05cIixcbiAgICAgIHBheWxvYWQ6IHsgdHlwZTogdHlwZSwgaXRlbUluZGV4OiBpdGVtSW5kZXggfVxuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnRzLmlzU2VsZWN0ZWQgPSBmdW5jdGlvbiBpc1NlbGVjdGVkKHR5cGUsIGlkKSB7XG4gIHJldHVybiBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlKS5pbmRleE9mKGlkKSA+IC0xO1xufTtcblxuZXhwb3J0cy5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgdHlwZTogXCJDTEVBUl9TRUxFQ1RJT05cIlxuICB9KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCBhIG5ldyBhcnJheSBmb3IgZWFjaCB0eXBlXG4gKiB3aXRoIHRoZSBjdXJyZW50IGlkcyBzZWxlY3RlZCBmb3Igc2FpZCB0eXBlLlxuICovXG5leHBvcnRzLmNvcHlTZWxlY3Rpb24gPSBmdW5jdGlvbiBjb3B5U2VsZWN0aW9uKCkge1xuICB2YXIgY3VycmVudFNlbGVjdGlvbiA9IHN0b3JlLmdldFN0YXRlKCkuc2VsZWN0aW9uO1xuXG4gIHZhciBjb3B5ID0ge307XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY3VycmVudFNlbGVjdGlvbik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvcHlba2V5c1tpXV0gPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGN1cnJlbnRTZWxlY3Rpb25ba2V5c1tpXV0pKTtcbiAgfVxuICByZXR1cm4gY29weTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYWxsIG9iamVjdHMgaW4gdGhlIHNlbGVjdGlvbiBleGlzdC5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHVuZG8taW5nIG9iamVjdCBjcmVhdGlvbi5cbiAqL1xuZXhwb3J0cy5pc1ZhbGlkU2VsZWN0aW9uID0gZnVuY3Rpb24gaXNWYWxpZFNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgdmFyIGlzVmFsaWQgPSB0cnVlO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0aW9uKTtcblxuICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgdmFyIG9iamVjdHNPZlR5cGUgPSBzdG9yZS5nZXRTdGF0ZSgpW3R5cGVSZWR1Y2Vyc1trZXlzW2ldXV07XG5cbiAgICBzZWxlY3Rpb25ba2V5c1tpXV0uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIGlmICghb2JqZWN0c09mVHlwZVtpZF0pIHtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpc1ZhbGlkICYmIGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgX2xvb3AoaSk7XG4gIH1cblxuICByZXR1cm4gaXNWYWxpZDtcbn07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5mdW5jdGlvbiBnZXRBbGxIYW5kbGVzKCkge1xuICB2YXIgaGFuZGxlcyA9IHN0b3JlLmdldFN0YXRlKCkuaGFuZGxlcztcbiAgdmFyIGhhbmRsZUFyciA9IFtdO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoaGFuZGxlcyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGhhbmRsZUFyci5wdXNoKGhhbmRsZXNba2V5c1tpXV0pO1xuICB9XG5cbiAgcmV0dXJuIGhhbmRsZUFycjtcbn1cbmV4cG9ydHMuZ2V0QWxsSGFuZGxlcyA9IGdldEFsbEhhbmRsZXM7XG5cbmV4cG9ydHMuZ2V0SGFuZGxlQnlJZCA9IGZ1bmN0aW9uIGdldEhhbmRsZUJ5SWQoaWQpIHtcbiAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkuaGFuZGxlc1tpZF0gfHwgbnVsbDtcbn07XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBzaG9ydGlkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICBjdXJzb3JzID0gX3JlcXVpcmUuY3Vyc29ycztcblxudmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xudmFyIGN1cnNvckltYWdlTWFwID0ge307XG5cbntcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjdXJzb3JzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaW1hZ2Uuc3JjID0gXCJzdGF0aWMvaW1hZ2VzL1wiICsgY3Vyc29yc1trZXlzW2ldXTtcbiAgICBjdXJzb3JJbWFnZU1hcFtrZXlzW2ldXSA9IGltYWdlO1xuICB9XG59XG5cbnZhciBjdXJyZW50Q3Vyc29yID0gXCJERUZBVUxUXCI7XG52YXIgb3ZlcnJpZGUgPSBudWxsO1xuXG4vKipcbiAqIENoYW5nZXMgdGhlIGN1cnNvciBvbiBjYW52YXMgaG92ZXIuXG4gKlxuICogWW91IGNhbiBzZXQgb3ZlcnJpZGUgdG8gdHJ1ZSBpbiB0aGUgb3B0cyBvYmplY3QgdG8gZW5zdXJlXG4gKiB0aGF0IG5vIG90aGVyIHBhcnQgb2YgdGhlIGFwcGxpY2F0aW9uIGNoYW5nZXMgdGhlIGN1cnNvci5cbiAqXG4gKiBPdmVycmlkZSBiZWluZyBhY3RpdmUgbWVhbnMgdGhhdCB0aGUgY3Vyc29yIGNhbm5vdCBiZSBjaGFuZ2VkXG4gKiB1bmxlc3MgdGhlIGNvcnJlY3Qgb3ZlcnJpZGVJZCBpcyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucyBvYmplY3QuXG4gKlxuICogVGhlIG92ZXJyaWRlSWQgaXMgcmV0dXJuZWQgd2hlbiBvdmVycmlkaW5nLlxuICovXG5leHBvcnRzLnNldEN1cnNvciA9IGZ1bmN0aW9uIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gIGlmICghb3B0cyB8fCAodHlwZW9mIG9wdHMgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvcHRzKSkgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbnMuIEV4cGVjdGVkIG9iamVjdCBidXQgZ290ICdcIiArIG9wdHMgKyBcIicuXCIpO1xuICB9XG5cbiAgaWYgKG92ZXJyaWRlICYmIG9wdHMub3ZlcnJpZGVJZCAhPT0gb3ZlcnJpZGUpIHtcbiAgICBpZiAob3B0cy5vdmVycmlkZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGRvdWJsZSBvdmVycmlkZS5cIik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY3Vyc29yc1tjdXJzb3JdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjdXJzb3IgJ1wiICsgY3Vyc29yICsgXCInLlwiKTtcbiAgfVxuXG4gIGlmIChjdXJzb3IgPT09IGN1cnJlbnRDdXJzb3IpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjdXJyZW50Q3Vyc29yID0gY3Vyc29yO1xuICB2YXIgY3Vyc29yU3R5bGUgPSBcInVybCgvc3RhdGljL2ltYWdlcy9cIiArIGN1cnNvcnNbY3Vyc29yXSArIFwiKSwgZGVmYXVsdFwiO1xuXG4gIC8vIGNhbnZhcy5zdHlsZS5jdXJzb3IgPSBjdXJzb3JTdHlsZTtcblxuICBpZiAob3B0cy5vdmVycmlkZSkge1xuICAgIG92ZXJyaWRlID0gc2hvcnRpZCgpO1xuICAgIHJldHVybiBvdmVycmlkZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0cy5nZXRDdXJzb3IgPSBmdW5jdGlvbiBnZXRDdXJzb3IoKSB7XG4gIHJldHVybiBjdXJzb3JJbWFnZU1hcFtjdXJyZW50Q3Vyc29yXTtcbn07XG5cbmV4cG9ydHMucmVsZWFzZU92ZXJyaWRlID0gZnVuY3Rpb24gcmVsZWFzZU92ZXJyaWRlKGlkKSB7XG4gIGlmIChvdmVycmlkZSA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG92ZXJyaWRlIGlzIHByZXNlbnQuXCIpO1xuICB9XG5cbiAgaWYgKGlkICE9PSBvdmVycmlkZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCBvdmVycmlkZUlkLiBFeHBlY3RlZCAnXCIgKyBvdmVycmlkZSArIFwiJyBidXQgZ290ICdcIiArIGlkICsgXCInLlwiKTtcbiAgfVxuXG4gIG92ZXJyaWRlID0gbnVsbDtcbn07XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNWYWxpZFBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gIHJldHVybiBwb3NpdGlvbiAmJiAodHlwZW9mIHBvc2l0aW9uID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocG9zaXRpb24pKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcG9zaXRpb24ueCA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgcG9zaXRpb24ueSA9PT0gXCJudW1iZXJcIjtcbn07XG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBzaG9ydGlkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9saXN0ZW5lcnMgPSB7fTtcblxuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgaWQpIHtcbiAgaWYgKCF0eXBlIHx8IHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyB0eXBlICsgXCInLlwiKTtcbiAgfVxuXG4gIGlmICghaWQgfHwgdHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJ1wiICsgaWQgKyBcIicuXCIpO1xuICB9XG5cbiAgaWYgKF9saXN0ZW5lcnNbdHlwZV0gJiYgX2xpc3RlbmVyc1t0eXBlXVtpZF0pIHtcbiAgICBkZWxldGUgX2xpc3RlbmVyc1t0eXBlXVtpZF07XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLnJlbW92ZUxpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXI7XG5cbmV4cG9ydHMuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBmdW5jLCBzaG91bGRSZW1vdmVTZWxmKSB7XG4gIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xuXG4gIGlmICghdHlwZSB8fCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdHlwZS4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJ1wiICsgdHlwZSArIFwiJy5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGZ1bmMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHRoZSAybmQgYXJndW1lbnQgdG8gYmUgYSBmdW5jdGlvbi4gR290ICdcIiArIGZ1bmMgKyBcIidcIik7XG4gIH1cblxuICBpZiAoIV9saXN0ZW5lcnNbdHlwZV0pIHtcbiAgICBfbGlzdGVuZXJzW3R5cGVdID0ge307XG4gIH1cblxuICB2YXIgaWQgPSBzaG9ydGlkKCk7XG5cbiAgaWYgKHNob3VsZFJlbW92ZVNlbGYpIHtcbiAgICBfbGlzdGVuZXJzW3R5cGVdW2lkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBfYXJndW1lbnRzKTtcbiAgICAgIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGlkKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIF9saXN0ZW5lcnNbdHlwZV1baWRdID0gZnVuYztcbiAgfVxuXG4gIHJldHVybiBpZDtcbn07XG5cbmV4cG9ydHMucnVuTGlzdGVuZXJzID0gZnVuY3Rpb24gcnVuTGlzdGVuZXJzKHR5cGUpIHtcbiAgaWYgKCF0eXBlIHx8IHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyB0eXBlICsgXCInLlwiKTtcbiAgfVxuXG4gIGlmICghX2xpc3RlbmVyc1t0eXBlXSB8fCBfdHlwZW9mKF9saXN0ZW5lcnNbdHlwZV0pICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhfbGlzdGVuZXJzW3R5cGVdKTtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHZhciBfbGlzdGVuZXJzJHR5cGU7XG5cbiAgICAoX2xpc3RlbmVycyR0eXBlID0gX2xpc3RlbmVyc1t0eXBlXSlba2V5c1tpXV0uYXBwbHkoX2xpc3RlbmVycyR0eXBlLCBhcmdzKTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgcmFuZG9tRnJvbVNlZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblxudmFyIE9SSUdJTkFMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXy0nO1xudmFyIGFscGhhYmV0O1xudmFyIHByZXZpb3VzU2VlZDtcblxudmFyIHNodWZmbGVkO1xuXG5mdW5jdGlvbiByZXNldCgpIHtcbiAgICBzaHVmZmxlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzZXRDaGFyYWN0ZXJzKF9hbHBoYWJldF8pIHtcbiAgICBpZiAoIV9hbHBoYWJldF8pIHtcbiAgICAgICAgaWYgKGFscGhhYmV0ICE9PSBPUklHSU5BTCkge1xuICAgICAgICAgICAgYWxwaGFiZXQgPSBPUklHSU5BTDtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChfYWxwaGFiZXRfID09PSBhbHBoYWJldCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9hbHBoYWJldF8ubGVuZ3RoICE9PSBPUklHSU5BTC5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdXN0b20gYWxwaGFiZXQgZm9yIHNob3J0aWQgbXVzdCBiZSAnICsgT1JJR0lOQUwubGVuZ3RoICsgJyB1bmlxdWUgY2hhcmFjdGVycy4gWW91IHN1Ym1pdHRlZCAnICsgX2FscGhhYmV0Xy5sZW5ndGggKyAnIGNoYXJhY3RlcnM6ICcgKyBfYWxwaGFiZXRfKTtcbiAgICB9XG5cbiAgICB2YXIgdW5pcXVlID0gX2FscGhhYmV0Xy5zcGxpdCgnJykuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0sIGluZCwgYXJyKXtcbiAgICAgICByZXR1cm4gaW5kICE9PSBhcnIubGFzdEluZGV4T2YoaXRlbSk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pcXVlLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0N1c3RvbSBhbHBoYWJldCBmb3Igc2hvcnRpZCBtdXN0IGJlICcgKyBPUklHSU5BTC5sZW5ndGggKyAnIHVuaXF1ZSBjaGFyYWN0ZXJzLiBUaGVzZSBjaGFyYWN0ZXJzIHdlcmUgbm90IHVuaXF1ZTogJyArIHVuaXF1ZS5qb2luKCcsICcpKTtcbiAgICB9XG5cbiAgICBhbHBoYWJldCA9IF9hbHBoYWJldF87XG4gICAgcmVzZXQoKTtcbn1cblxuZnVuY3Rpb24gY2hhcmFjdGVycyhfYWxwaGFiZXRfKSB7XG4gICAgc2V0Q2hhcmFjdGVycyhfYWxwaGFiZXRfKTtcbiAgICByZXR1cm4gYWxwaGFiZXQ7XG59XG5cbmZ1bmN0aW9uIHNldFNlZWQoc2VlZCkge1xuICAgIHJhbmRvbUZyb21TZWVkLnNlZWQoc2VlZCk7XG4gICAgaWYgKHByZXZpb3VzU2VlZCAhPT0gc2VlZCkge1xuICAgICAgICByZXNldCgpO1xuICAgICAgICBwcmV2aW91c1NlZWQgPSBzZWVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2h1ZmZsZSgpIHtcbiAgICBpZiAoIWFscGhhYmV0KSB7XG4gICAgICAgIHNldENoYXJhY3RlcnMoT1JJR0lOQUwpO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VBcnJheSA9IGFscGhhYmV0LnNwbGl0KCcnKTtcbiAgICB2YXIgdGFyZ2V0QXJyYXkgPSBbXTtcbiAgICB2YXIgciA9IHJhbmRvbUZyb21TZWVkLm5leHRWYWx1ZSgpO1xuICAgIHZhciBjaGFyYWN0ZXJJbmRleDtcblxuICAgIHdoaWxlIChzb3VyY2VBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHIgPSByYW5kb21Gcm9tU2VlZC5uZXh0VmFsdWUoKTtcbiAgICAgICAgY2hhcmFjdGVySW5kZXggPSBNYXRoLmZsb29yKHIgKiBzb3VyY2VBcnJheS5sZW5ndGgpO1xuICAgICAgICB0YXJnZXRBcnJheS5wdXNoKHNvdXJjZUFycmF5LnNwbGljZShjaGFyYWN0ZXJJbmRleCwgMSlbMF0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0QXJyYXkuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIGdldFNodWZmbGVkKCkge1xuICAgIGlmIChzaHVmZmxlZCkge1xuICAgICAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gICAgfVxuICAgIHNodWZmbGVkID0gc2h1ZmZsZSgpO1xuICAgIHJldHVybiBzaHVmZmxlZDtcbn1cblxuLyoqXG4gKiBsb29rdXAgc2h1ZmZsZWQgbGV0dGVyXG4gKiBAcGFyYW0gaW5kZXhcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGxvb2t1cChpbmRleCkge1xuICAgIHZhciBhbHBoYWJldFNodWZmbGVkID0gZ2V0U2h1ZmZsZWQoKTtcbiAgICByZXR1cm4gYWxwaGFiZXRTaHVmZmxlZFtpbmRleF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGNoYXJhY3RlcnM6IGNoYXJhY3RlcnMsXG4gICAgc2VlZDogc2V0U2VlZCxcbiAgICBsb29rdXA6IGxvb2t1cCxcbiAgICBzaHVmZmxlZDogZ2V0U2h1ZmZsZWRcbn07XG5cblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgZ2V0Q2xvc2VzdFBvaW50T25Db25uZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpLFxuICAgIHRvQ29ubmVjdGlvbklkID0gX3JlcXVpcmUudG9Db25uZWN0aW9uSWQ7XG5cbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbmV4cG9ydHMuZ2V0Q29ubmVjdGlvbkJ5SWQgPSBmdW5jdGlvbiBnZXRDb25uZWN0aW9uQnlJZChpZCkge1xuICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS5jb25uZWN0aW9uc1tpZF0gfHwgbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGdldEFsbENvbm5lY3Rpb25zKCkge1xuICB2YXIgY29ubmVjdGlvbnMgPSBzdG9yZS5nZXRTdGF0ZSgpLmNvbm5lY3Rpb25zO1xuXG4gIHZhciBjQXJyID0gW107XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY29ubmVjdGlvbnMpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjQXJyLnB1c2goY29ubmVjdGlvbnNba2V5c1tpXV0pO1xuICB9XG4gIHJldHVybiBjQXJyO1xufVxuZXhwb3J0cy5nZXRBbGxDb25uZWN0aW9ucyA9IGdldEFsbENvbm5lY3Rpb25zO1xuXG5leHBvcnRzLmdldENvbm5lY3Rpb25BdFBvc2l0aW9uID0gZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbkF0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgdmFyIGNvbm5lY3Rpb25zID0gZ2V0QWxsQ29ubmVjdGlvbnMoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbm5lY3Rpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdmFyIGNsb3Nlc3RQb2ludCA9IGdldENsb3Nlc3RQb2ludE9uQ29ubmVjdGlvbihjb25uZWN0aW9uc1tpXSwgcG9zaXRpb24pO1xuICAgIGlmIChjbG9zZXN0UG9pbnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNsb3Nlc3RQb2ludDogY2xvc2VzdFBvaW50LFxuICAgICAgICBjb25uZWN0aW9uOiBjb25uZWN0aW9uc1tpXVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBnZXRDb250ZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG52YXIgcmVuZGVyQ29ubmVjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcbnZhciByZW5kZXJQb2ludHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcbnZhciBpc1ZhbGlkUG9zaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpLFxuICAgIGdldEN1cnNvciA9IF9yZXF1aXJlLmdldEN1cnNvcjtcblxudmFyIF9yZXF1aXJlMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpLFxuICAgIHJlc2V0R3VpZGVzID0gX3JlcXVpcmUyLnJlc2V0R3VpZGVzO1xuXG52YXIgY3R4SGVpZ2h0ID0gODAwO1xudmFyIGN0eFdpZHRoID0gODAwO1xuXG52YXIgbGFzdFBvc2l0aW9uID0gdm9pZCAwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlcihwb3NpdGlvbikge1xuICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgdmFyIGN0eCA9IGdldENvbnRleHQoKTtcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHhXaWR0aCwgY3R4SGVpZ2h0KTtcblxuICByZW5kZXJDb25uZWN0aW9ucygpO1xuICByZW5kZXJQb2ludHMoKTtcblxuICByZXNldEd1aWRlcygpO1xuXG4gIGlmICghb3B0cy5ub1Bvc2l0aW9uKSB7XG4gICAgLy8gU2tpcHMgYWxsIHBvc2l0aW9uIGJhc2VkIGRyYXdzIGFuZCBjaGVja3NcbiAgICBpZiAoIW9wdHMudXNlTGFzdFBvc2l0aW9uKSB7XG4gICAgICBsYXN0UG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zaXRpb24gPSBsYXN0UG9zaXRpb247XG4gICAgfVxuXG4gICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24ocG9zaXRpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvc2l0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBjdHguZHJhd0ltYWdlKGdldEN1cnNvcigpLCBwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XG52YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRDb250ZXh0KCkge1xuICByZXR1cm4gY3R4O1xufTtcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KSxcbiAgICBjaGVja1R5cGUgPSBfcmVxdWlyZS5jaGVja1R5cGU7XG5cbnZhciBndWlkZXMgPSB7fTtcblxuZXhwb3J0cy5hZGRHdWlkZSA9IGZ1bmN0aW9uIGFkZEd1aWRlKHR5cGUsIHZhbHVlKSB7XG4gIGNoZWNrVHlwZSh0eXBlKTtcblxuICBpZiAoIUFycmF5LmlzQXJyYXkoZ3VpZGVzW3R5cGVdKSkge1xuICAgIGd1aWRlc1t0eXBlXSA9IFt2YWx1ZV07XG4gIH0gZWxzZSB7XG4gICAgZ3VpZGVzW3R5cGVdLnB1c2godmFsdWUpO1xuICB9XG59O1xuXG5leHBvcnRzLnJlc2V0R3VpZGVzID0gZnVuY3Rpb24gcmVzZXRHdWlkZXMoKSB7XG4gIGd1aWRlcyA9IHt9O1xufTtcblxuZXhwb3J0cy5nZXRHdWlkZXNPZlR5cGUgPSBmdW5jdGlvbiBnZXRHdWlkZXNPZlR5cGUodHlwZSkge1xuICBjaGVja1R5cGUodHlwZSk7XG4gIHJldHVybiBndWlkZXNbdHlwZV0gfHwgW107XG59O1xuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBnZXRQb3NEaWZmZXJlbmNlID0gZnVuY3Rpb24gZ2V0UG9zRGlmZmVyZW5jZShvbGRQb3MsIG5ld1Bvcykge1xuICByZXR1cm4ge1xuICAgIHg6IG5ld1Bvcy54IC0gb2xkUG9zLngsXG4gICAgeTogbmV3UG9zLnkgLSBvbGRQb3MueVxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQb3NEaWZmZXJlbmNlO1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSxcbiAgICBjb3B5U2VsZWN0aW9uID0gX3JlcXVpcmUuY29weVNlbGVjdGlvbjtcblxudmFyIHJlc29sdmVBY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxuLyoqXG4gKiBBbiBhY3Rpb24gcGFzc2VkIG5lZWRzIHRvIGhhdmUgdHdvIHByb3BlcnRpZXMuXG4gKiAgICAtIHR5cGUgPT4gdG8gZmluZCB0aGUgYWN0aW9uIGNyZWF0b3JcbiAqICAgIC0gZGF0YSA9PiB3aGF0IHRvIHBhc3MgdG8gdGhlIGFjdGlvbiBjcmVhdG9yXG4gKiBcbiAqIFdlIGdldCB0aGUgdGhpcmQgcHJvcGVydHkgb3Vyc2VsdmVzXG4gKiAgICAtIHNlbGVjdGlvbiA9PiB0aGUgc2VsZWN0aW9uIHN0YXRlIGF0IHRoYXQgcG9pbnQgaW4gaGlzdG9yeVxuICpcbiAqIFRoZSByZWRvIHBhcnQgb2YgdGhlIGFjdGlvbiBpcyBleGVjdXRlZCBieSBkZWZhdXQgYmVmb3JlIHRoZVxuICogYWN0aW9uIGlzIGFkZGVkIHRvIHRoZSBoaXN0b3J5LiBUaGlzIGNhbiBiZSBkaXNhYmxlZCBieSBzZXR0aW5nXG4gKiBleGVjdXRlSW1tZWRpYXRlbHkgdG8gZmFsc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWRkQWN0aW9uKGFjdGlvbikge1xuICB2YXIgZXhlY3V0ZUltbWVkaWF0ZWx5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlO1xuXG4gIGlmICghYWN0aW9uIHx8ICh0eXBlb2YgYWN0aW9uID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoYWN0aW9uKSkgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjdGlvbi4gRXhwZWN0ZWQgb2JqZWN0IGJ1dCBnb3QgJ1wiICsgYWN0aW9uICsgXCInLlwiKTtcbiAgfVxuXG4gIGlmICghYWN0aW9uLnR5cGUgfHwgdHlwZW9mIGFjdGlvbi50eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyBhY3Rpb24udHlwZSArIFwiJy5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbi5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBkYXRhLiBFeHBlY3RlZCBhbnkgYnV0IGdvdCAnXCIgKyBhY3Rpb24uZGF0YSArIFwiJy5cIik7XG4gIH1cblxuICBhY3Rpb24uc2VsZWN0aW9uID0gY29weVNlbGVjdGlvbigpO1xuXG4gIGlmIChleGVjdXRlSW1tZWRpYXRlbHkpIHtcbiAgICByZXNvbHZlQWN0aW9uKGFjdGlvbiwgeyBpZ25vcmVTZWxlY3Rpb246IHRydWUgfSk7XG4gIH1cbiAgc3RvcmUuZGlzcGF0Y2goe1xuICAgIHR5cGU6IFwiQUREX0FDVElPTl9UT19ISVNUT1JZXCIsXG4gICAgcGF5bG9hZDogYWN0aW9uXG4gIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbmZ1bmN0aW9uIGNhbGNOZXdIYW5kbGVzKHAwLCBwMywgcDEpIHtcbiAgcmV0dXJuIFt7IC8vIHAyXG4gICAgeDogcDEueCArIChwMy54IC0gcDEueCkgKiAwLjQsXG4gICAgeTogcDEueSArIChwMy55IC0gcDEueSkgKiAwLjRcbiAgfSwgeyAvLyBwM1xuICAgIHg6IHAwLnggKyAocDMueCAtIHAwLngpICogMC44NSxcbiAgICB5OiBwMC55ICsgKHAzLnkgLSBwMC55KSAqIDAuODVcbiAgfV07XG59XG5cbi8qKlxuICogUXVhZHJhdGljIG1lYW5zIHRoYXQgdGhyZWUgcG9pbnRzIGFyZSBwcmVzZW50LCB3aGlsc3QgY3ViaWMgbWVhbnNcbiAqIGZvdXIgYXJlLlxuICpcbiAqIFRoaXMgdGFrZXMgaW4gdGhyZWUgcG9pbnRzLCBidXQgb25lIG9mIHRoZSBoYW5kbGVzIChwMSwgcDIpIG11c3QgYmVcbiAqIHBvc2l0aW9uIGFuZCBvbmUgbXVzdCBiZSBudWxsLlxuICpcbiAqIFRoaXMgcmV0dXJucyBmb3VyIG5ldyBwb2ludHMsIGJ1dCB0aGUgaGFuZGxlIHRoYXQgd2FzIHByZXNlbnQgd2lsbFxuICogaGF2ZSBhIDE1JSBzbWFsbGVyIG1hZ25pdHVkZSBhbmQgdGhlIG90aGVyIGhhbmRsZSB3aWxsIGhhdmUgMjUlXG4gKiBvZiBpdCdzIG1hZ25pdHV0ZS5cbiAqXG4gKiBUaGlzIG1ha2VzIHRoZSBjdXJ2ZSBmZWVsIG1vcmUgbmF0dXJhbC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBxdWFkcmF0aWNUb0N1YmljQmV6aWVyKHAwLCBwMSwgcDIsIHAzKSB7XG4gIGlmIChwMSA9PT0gbnVsbCkge1xuICAgIGlmIChwMiA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgcDIgbm90IHRvIGJlIG51bGwuXCIpO1xuICAgIH1cblxuICAgIC8vIEZsaXBwaW5nXG5cbiAgICB2YXIgX2NhbGNOZXdIYW5kbGVzID0gY2FsY05ld0hhbmRsZXMocDMsIHAyLCBwMCksXG4gICAgICAgIF9jYWxjTmV3SGFuZGxlczIgPSBfc2xpY2VkVG9BcnJheShfY2FsY05ld0hhbmRsZXMsIDIpLFxuICAgICAgICBuZXdQMiA9IF9jYWxjTmV3SGFuZGxlczJbMF0sXG4gICAgICAgIG5ld1AxID0gX2NhbGNOZXdIYW5kbGVzMlsxXTtcblxuICAgIHJldHVybiBbcDAsIG5ld1AxLCBuZXdQMiwgcDNdO1xuICB9XG5cbiAgaWYgKHAyID09PSBudWxsKSB7XG4gICAgaWYgKHAxID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBwMSBub3QgdG8gYmUgbnVsbC5cIik7XG4gICAgfVxuXG4gICAgdmFyIF9jYWxjTmV3SGFuZGxlczMgPSBjYWxjTmV3SGFuZGxlcyhwMCwgcDEsIHAzKSxcbiAgICAgICAgX2NhbGNOZXdIYW5kbGVzNCA9IF9zbGljZWRUb0FycmF5KF9jYWxjTmV3SGFuZGxlczMsIDIpLFxuICAgICAgICBfbmV3UCA9IF9jYWxjTmV3SGFuZGxlczRbMF0sXG4gICAgICAgIF9uZXdQMiA9IF9jYWxjTmV3SGFuZGxlczRbMV07XG5cbiAgICByZXR1cm4gW3AwLCBfbmV3UDIsIF9uZXdQLCBwM107XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBlaXRoZXIgcDEgb3IgcDIgdG8gYmUgbnVsbC5cIik7XG59O1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCksXG4gICAgdG9vbHMgPSBfcmVxdWlyZS50b29scyxcbiAgICBkZWZhdWx0VG9vbEN1cnNvcnMgPSBfcmVxdWlyZS5kZWZhdWx0VG9vbEN1cnNvcnM7XG5cbnZhciB0b1Bvc2l0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuICAgIHJ1bkxpc3RlbmVycyA9IF9yZXF1aXJlMi5ydW5MaXN0ZW5lcnM7XG5cbnZhciByZXNvbHZlT2JqZWN0QXRQb3NpdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXG52YXIgX3JlcXVpcmUzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcbiAgICBzZXRDdXJzb3IgPSBfcmVxdWlyZTMuc2V0Q3Vyc29yO1xuXG52YXIgcmVuZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbi8vIG1vdXNlZG93blxudmFyIG9uTW92ZU1vdXNlRG93biA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xudmFyIG9uUGVuTW91c2VEb3duID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7XG5cbi8vIG1vdXNlbW92ZVxudmFyIG9uUGVuTW91c2VNb3ZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7XG5cbnZhciBQRU4gPSB0b29scy5QRU4sXG4gICAgTU9WRSA9IHRvb2xzLk1PVkU7XG5cblxudmFyIG1vdXNlRG93bkxpc3RlbmVycyA9IHtcbiAgTU9WRTogb25Nb3ZlTW91c2VEb3duLFxuICBQRU46IG9uUGVuTW91c2VEb3duXG59O1xuXG52YXIgbW91c2VNb3ZlTGlzdGVuZXJzID0ge1xuICBNT1ZFOiB1bmRlZmluZWQsXG4gIFBFTjogb25QZW5Nb3VzZU1vdmVcbn07XG5cbnZhciBtb3VzZVVwTGlzdGVuZXJzID0ge307XG5cbnZhciBjdXJyZW50VG9vbCA9IE1PVkU7XG5cbmV4cG9ydHMuc2V0VG9vbCA9IGZ1bmN0aW9uIHNldFRvb2woa2V5KSB7XG4gIGlmICh0b29sc1trZXldICYmIHRvb2xzW2tleV0gIT09IGN1cnJlbnRUb29sKSB7XG4gICAgY3VycmVudFRvb2wgPSB0b29sc1trZXldO1xuICAgIHNldEN1cnNvcihjdXJyZW50VG9vbCk7XG4gICAgcmVuZGVyKG51bGwsIHsgdXNlTGFzdFBvc2l0aW9uOiB0cnVlIH0pO1xuICB9XG5cbiAgdmFyIGVsQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRvb2wta2V5XVwiKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbEFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGVsQXJyW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgaWYgKGVsQXJyW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtdG9vbC1rZXlcIikgPT09IGtleSkge1xuICAgICAgZWxBcnJbaV0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMub25Ub29sTW91c2VEb3duID0gZnVuY3Rpb24gb25Ub29sTW91c2VEb3duKGUpIHtcbiAgdmFyIHBvc2l0aW9uID0gdG9Qb3NpdGlvbihlKTtcblxuICB2YXIgb2JqID0gcmVzb2x2ZU9iamVjdEF0UG9zaXRpb24ocG9zaXRpb24pO1xuICBpZiAoIW9iaikge1xuICAgIHNldEN1cnNvcihkZWZhdWx0VG9vbEN1cnNvcnNbY3VycmVudFRvb2xdKTtcbiAgfVxuXG4gIGlmIChtb3VzZURvd25MaXN0ZW5lcnNbY3VycmVudFRvb2xdKSB7XG4gICAgbW91c2VEb3duTGlzdGVuZXJzW2N1cnJlbnRUb29sXShwb3NpdGlvbiwgb2JqKTtcbiAgfVxuXG4gIHJlbmRlcihwb3NpdGlvbik7XG59O1xuXG5leHBvcnRzLm9uVG9vbE1vdXNlTW92ZSA9IGZ1bmN0aW9uIG9uVG9vbE1vdXNlTW92ZShlKSB7XG4gIHZhciBwb3NpdGlvbiA9IHRvUG9zaXRpb24oZSk7XG4gIHJ1bkxpc3RlbmVycyhcIm1vdXNlbW92ZVwiLCBwb3NpdGlvbik7XG5cbiAgdmFyIG9iaiA9IHJlc29sdmVPYmplY3RBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKCFvYmopIHtcbiAgICBzZXRDdXJzb3IoZGVmYXVsdFRvb2xDdXJzb3JzW2N1cnJlbnRUb29sXSk7XG4gIH1cblxuICBpZiAobW91c2VNb3ZlTGlzdGVuZXJzW2N1cnJlbnRUb29sXSkge1xuICAgIG1vdXNlTW92ZUxpc3RlbmVyc1tjdXJyZW50VG9vbF0ocG9zaXRpb24sIG9iaik7XG4gIH1cblxuICByZW5kZXIocG9zaXRpb24pO1xufTtcblxuZXhwb3J0cy5vblRvb2xNb3VzZVVwID0gZnVuY3Rpb24gb25Ub29sTW91c2VVcChlKSB7XG4gIHZhciBwb3NpdGlvbiA9IHRvUG9zaXRpb24oZSk7XG4gIHJ1bkxpc3RlbmVycyhcIm1vdXNldXBcIiwgcG9zaXRpb24pO1xuXG4gIHZhciBvYmogPSByZXNvbHZlT2JqZWN0QXRQb3NpdGlvbihwb3NpdGlvbik7XG4gIGlmICghb2JqKSB7XG4gICAgc2V0Q3Vyc29yKGRlZmF1bHRUb29sQ3Vyc29yc1tjdXJyZW50VG9vbF0pO1xuICB9XG5cbiAgaWYgKG1vdXNlVXBMaXN0ZW5lcnNbY3VycmVudFRvb2xdKSB7XG4gICAgbW91c2VVcExpc3RlbmVyc1tjdXJyZW50VG9vbF0ocG9zaXRpb24sIG9iaik7XG4gIH1cblxuICByZW5kZXIocG9zaXRpb24pO1xufTtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG52YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdG9Db25uZWN0aW9uSWQgPSBmdW5jdGlvbiB0b0Nvbm5lY3Rpb25JZChhLCBiKSB7XG4gIHJldHVybiBbYSwgYl0uc29ydCgpLmpvaW4oXCItXCIpO1xufTtcblxuZXhwb3J0cy50b0Nvbm5lY3Rpb25JZCA9IHRvQ29ubmVjdGlvbklkO1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIGdldFBvaW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG4gICAgZ2V0SGFuZGxlQnlJZCA9IF9yZXF1aXJlLmdldEhhbmRsZUJ5SWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0Q29ubmVjdGlvblBvaW50cyhjKSB7XG4gIC8qKlxuICAgKiBXZSBuZWVkIHRvIGRvIGl0IGxpa2UgdGhpcyBiZWNhdXNlIG9mIGNpcmN1bGFyIGZpbGUgcmVxdWlyZXMuXG4gICAqL1xuICB2YXIgZ2V0UG9pbnRCeUlkID0gZ2V0UG9pbnRzLmdldFBvaW50QnlJZDtcblxuICB2YXIgX2MkcG9pbnRzID0gX3NsaWNlZFRvQXJyYXkoYy5wb2ludHMsIDIpLFxuICAgICAgcDAgPSBfYyRwb2ludHNbMF0sXG4gICAgICBwMyA9IF9jJHBvaW50c1sxXTtcblxuICB2YXIgX2MkaGFuZGxlcyA9IF9zbGljZWRUb0FycmF5KGMuaGFuZGxlcywgMiksXG4gICAgICBwMSA9IF9jJGhhbmRsZXNbMF0sXG4gICAgICBwMiA9IF9jJGhhbmRsZXNbMV07XG5cbiAgaWYgKCFwMSAmJiAhcDIgJiYgIXAzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb25uZWN0aW9uLlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcDEgaGFuZGxlIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGhhbmRsZXMgbWF5IGJlIGRlbGV0ZWQgYWZ0ZXIgdGhlIGNvbm5lY3Rpb24gaXMgY3JlYXRlZCwgc29cbiAgICogdGhlcmUncyBhIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGNvbm5lY3Rpb24gaGFzIHR3byBwb2ludHMgYnV0IG5vIGhhbmRsZXMuXG4gICAqL1xuICByZXR1cm4gW2dldFBvaW50QnlJZChwMCksIHAxID8gZ2V0SGFuZGxlQnlJZChwMSkgOiBudWxsLCBwMiA/IGdldEhhbmRsZUJ5SWQocDIpIDogbnVsbCwgcDMgPyBnZXRQb2ludEJ5SWQocDMpIDogbnVsbF07XG59O1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogYSBhbmQgYiBhcmUgYW55IG51bWJlcnMuXG4gKiB0IHNob3VsZCBiZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDFcbiAqL1xudmFyIGdldEludGVybWVkaWF0ZU51bWJlciA9IGZ1bmN0aW9uIGdldEludGVybWVkaWF0ZU51bWJlcihhLCBiLCB0KSB7XG4gIHJldHVybiBhICogKDEgLSB0KSArIGIgKiB0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRJbnRlcm1lZGlhdGVOdW1iZXI7XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKGEsIGIpIHtcbiAgdmFyIGRYID0gTWF0aC5hYnMoYS54IC0gYi54KTsgLy8gZGlmZmVyZW5jZSBvbiB4IGF4aXNcbiAgdmFyIGRZID0gTWF0aC5hYnMoYS55IC0gYi55KTsgLy8gZGlmZmVyZW5jZSBvbiB5IGF4aXNcbiAgcmV0dXJuIGRYICogZFggKyBkWSAqIGRZOyAvLyBzaG91dG91dCBweXRoYWdvcmFzXG59O1xuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgZ2V0Q29udGV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xudmFyIGlzVmFsaWRQb3NpdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbmV4cG9ydHMucmVuZGVyQ2lyY2xlID0gZnVuY3Rpb24gcmVuZGVyQ2lyY2xlKHBvaW50cywgcmFkaXVzLCBjb2xvciwgc3Ryb2tlKSB7XG4gIHZhciBjdHggPSBnZXRDb250ZXh0KCk7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KHBvaW50cykpIHtcbiAgICBwb2ludHMgPSBbcG9pbnRzXTtcbiAgfVxuXG4gIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgX3BvaW50cyRpID0gcG9pbnRzW2ldLFxuICAgICAgICB4ID0gX3BvaW50cyRpLngsXG4gICAgICAgIHkgPSBfcG9pbnRzJGkueTtcblxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcblxuICAgIGlmIChzdHJva2UpIHtcbiAgICAgIGlmICgodHlwZW9mIHN0cm9rZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN0cm9rZSkpICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3Ryb2tlLiBFeHBlY3RlZCBvYmplY3QgYnV0IGdvdCAnXCIgKyBzdHJva2UgKyBcIicuXCIpO1xuICAgICAgfVxuXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcbiAgICAgIGN0eC5saW5lV2lkdGggPSBzdHJva2Uud2lkdGggfHwgMTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZS5jb2xvciB8fCBcIiMwMDAwMDBcIjtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMucmVuZGVyTGluZSA9IGZ1bmN0aW9uIHJlbmRlckxpbmUoZnJvbSwgdG8pIHtcbiAgdmFyIGNvbG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBcIiM0NDRcIjtcbiAgdmFyIHdpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAxO1xuXG4gIHZhciBjdHggPSBnZXRDb250ZXh0KCk7XG5cbiAgaWYgKCFpc1ZhbGlkUG9zaXRpb24oZnJvbSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvc2l0aW9uICdmcm9tJy5cIik7XG4gIH1cblxuICBpZiAoIWlzVmFsaWRQb3NpdGlvbih0bykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvc2l0aW9uICd0bycuXCIpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjb2xvciAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29sb3IuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICdcIiArIGNvbG9yICsgXCInLlwiKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygd2lkdGggIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHdpZHRoLiBFeHBlY3RlZCBudW1iZXIgYnV0IGdvdCAnXCIgKyB3aWR0aCArIFwiJy5cIik7XG4gIH1cblxuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xuICBjdHgubGluZVRvKHRvLngsIHRvLnkpO1xuICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICBjdHguc3Ryb2tlKCk7XG59O1xuXG5leHBvcnRzLnJlbmRlckN1YmljQmV6aWVyID0gZnVuY3Rpb24gcmVuZGVyQ3ViaWNCZXppZXIocG9pbnRzKSB7XG4gIHZhciBsaW5lV2lkdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7XG4gIHZhciBjb2xvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogXCIjNDQ0XCI7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KHBvaW50cykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvaW50cy4gRXhwZWN0ZWQgYXJyYXkgYnV0IGdvdCBcIiArIHBvaW50cyArIFwiLlwiKTtcbiAgfVxuXG4gIGlmIChwb2ludHMubGVuZ3RoICE9PSA0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb2ludHMuIEV4cGVjdGVkIDQgYnV0IGdvdCBcIiArIHBvaW50cy5sZW5ndGggKyBcIi5cIik7XG4gIH1cblxuICBwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICBpZiAoIWlzVmFsaWRQb3NpdGlvbihwb2ludCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24gYXQgaW5kZXggXCIgKyBpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfcG9pbnRzID0gX3NsaWNlZFRvQXJyYXkocG9pbnRzLCA0KSxcbiAgICAgIHAwID0gX3BvaW50c1swXSxcbiAgICAgIHAxID0gX3BvaW50c1sxXSxcbiAgICAgIHAyID0gX3BvaW50c1syXSxcbiAgICAgIHAzID0gX3BvaW50c1szXTtcblxuICB2YXIgY3R4ID0gZ2V0Q29udGV4dCgpO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyhwMC54LCBwMC55KTtcbiAgY3R4LmJlemllckN1cnZlVG8ocDEueCwgcDEueSwgcDIueCwgcDIueSwgcDMueCwgcDMueSk7XG4gIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuICBjdHguc3Ryb2tlKCk7XG59O1xuXG5leHBvcnRzLnJlbmRlclF1YWRyYXRpY0JlemllciA9IGZ1bmN0aW9uIHJlbmRlclF1YWRyYXRpY0Jlemllcihwb2ludHMpIHtcbiAgdmFyIGxpbmVXaWR0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTtcbiAgdmFyIGNvbG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBcIiM0NDRcIjtcblxuICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9pbnRzLiBFeHBlY3RlZCBhcnJheSBidXQgZ290IFwiICsgcG9pbnRzICsgXCIuXCIpO1xuICB9XG5cbiAgaWYgKHBvaW50cy5sZW5ndGggIT09IDMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvaW50cy4gRXhwZWN0ZWQgMyBidXQgZ290IFwiICsgcG9pbnRzLmxlbmd0aCArIFwiLlwiKTtcbiAgfVxuXG4gIHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCwgaSkge1xuICAgIGlmICghaXNWYWxpZFBvc2l0aW9uKHBvaW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbiBhdCBpbmRleCBcIiArIGkpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9wb2ludHMyID0gX3NsaWNlZFRvQXJyYXkocG9pbnRzLCAzKSxcbiAgICAgIHAwID0gX3BvaW50czJbMF0sXG4gICAgICBwMSA9IF9wb2ludHMyWzFdLFxuICAgICAgcDIgPSBfcG9pbnRzMlsyXTtcblxuICB2YXIgY3R4ID0gZ2V0Q29udGV4dCgpO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyhwMC54LCBwMC55KTtcbiAgY3R4LnF1YWRyYXRpY0N1cnZlVG8ocDEueCwgcDEueSwgcDIueCwgcDIueSk7XG4gIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuICBjdHguc3Ryb2tlKCk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB0b29scyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLFxuICAgIGtleXMgPSBfcmVxdWlyZS5rZXlzO1xuXG52YXIgdW5kbyA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpO1xudmFyIHJlZG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTtcblxudmFyIGFjdGl2ZUtleXMgPSB7fTtcblxuZnVuY3Rpb24gaXNLZXlEb3duKGtleSkge1xuICBpZiAodHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQga2V5LiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyBrZXkgKyBcIicuXCIpO1xuICB9XG5cbiAgcmV0dXJuIGFjdGl2ZUtleXNba2V5XSB8fCBmYWxzZTtcbn1cblxuZXhwb3J0cy5vbktleVVwID0gZnVuY3Rpb24gb25LZXlVcChfcmVmKSB7XG4gIHZhciBrZXkgPSBfcmVmLmtleTtcblxuICBpZiAodHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQga2V5LiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyBrZXkgKyBcIicuXCIpO1xuICB9XG5cbiAgYWN0aXZlS2V5c1trZXldID0gZmFsc2U7XG59O1xuXG5leHBvcnRzLm9uS2V5RG93biA9IGZ1bmN0aW9uIG9uS2V5RG93bihfcmVmMikge1xuICB2YXIga2V5ID0gX3JlZjIua2V5LFxuICAgICAgcmVwZWF0ID0gX3JlZjIucmVwZWF0O1xuXG4gIGlmIChyZXBlYXQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQga2V5LiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyBrZXkgKyBcIicuXCIpO1xuICB9XG5cbiAgLy8gV2luZG93c1xuICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IFwielwiICYmIGlzS2V5RG93bihrZXlzLkNPTlRST0wpICYmIGlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgIHJlZG8oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJ6XCIgJiYgaXNLZXlEb3duKGtleXMuQ09OVFJPTCkpIHtcbiAgICB1bmRvKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTWFjT1MgLSBNZXRhIGlzIENvbW1hbmRcbiAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSBcInpcIiAmJiBpc0tleURvd24oXCJNZXRhXCIpICYmIGlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgIHJlZG8oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJ6XCIgJiYgaXNLZXlEb3duKFwiTWV0YVwiKSkge1xuICAgIHVuZG8oKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0b29scy5zZXRUb29sKGtleSk7IC8vIE9ubHkgY2hhbmdlcyB0byB0b29sIGlmIGtleSBpcyBhIHZhbGlkIHRvb2wuXG5cbiAgYWN0aXZlS2V5c1trZXldID0gdHJ1ZTtcbn07XG5cbmV4cG9ydHMuaXNLZXlEb3duID0gaXNLZXlEb3duO1xuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuLyoqXG4gKiBBbiBhY3Rpb24gaXMgY29tcG9zZWQgb2YgdGhyZWUgcHJvcGVydGllcy5cbiAqXG4gKiAgICB0eXBlIC0gVGhlIG5hbWUgb2YgdGhlIGFjdGlvbiwgdXNlZCB0byByZXNvbHZlIHRoZSBhY3Rpb24gY3JlYXRvclxuICogICAgZGF0YSAtIFBhc3NlZCB0byB0aGUgYWN0aW9uIGNyZWF0b3JcbiAqICAgIHNlbGVjdGlvbiAtIFRoZSBzZWxlY3Rpb24gdG8gcmVzdG9yZSB3aGVuIHRoZSBhY3Rpb24gaXMgZXhlY3V0ZWRcbiAqXG4gKiBBbiBhY3Rpb24gbWF5IHJldHVybiBhZiBhcnJheSBvZiBhY3Rpb25zIHRvIGV4ZWN1dGUuXG4gKlxuICogQSB0b3AgbGV2ZWwgYWN0aW9uIG11c3QgaGF2ZSBhIHNlbGVjdGlvbiwgYnV0IHN1Yi1hY3Rpb25zIHNob3VsZCBub3QuXG4gKlxuICogRXZlcnkgYWN0aW9uIGNyZWF0b3Igc2hvdWxkIGJlIGFibGUgdG8gZXhlY3V0ZSBhbmQgcmV2ZXJzZSBpdHNlbGYgZ2l2ZW5cbiAqIHRob3NlIHRocmVlIHByb3BlcnRpZXMuXG4gKi9cblxudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbnZhciBhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMyksXG4gICAgaXNWYWxpZFNlbGVjdGlvbiA9IF9yZXF1aXJlLmlzVmFsaWRTZWxlY3Rpb24sXG4gICAgY2xlYXJTZWxlY3Rpb24gPSBfcmVxdWlyZS5jbGVhclNlbGVjdGlvbjtcblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBhcHByb3ByaWF0ZSBhY3Rpb24gY3JlYXRvciBmb3IgdGhlIHR5cGUgcHJvdmlkZWQuXG4gKlxuICogRWFjaCBhY3Rpb24gY3JlYXRvciBtb2R1bGUgc2hvdWxkIGhhdmUgYSByZWRvIGFuZCB1bmRvXG4gKiBleHBvcnQgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgaW4gYW4gYWN0aW9uIGFuZCByZXR1cm5zXG4gKiBhIGRpc3BhdGNoYWJsZSBvYmplY3QuXG4gKi9cblxuXG5mdW5jdGlvbiByZXNvbHZlQWN0aW9uQ3JlYXRvcih0eXBlLCB1bmRvKSB7XG4gIGlmICghYWN0aW9uc1t0eXBlXSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGFjdGlvbiBvZiB0eXBlICdcIiArIHR5cGUgKyBcIicuXCIpO1xuICB9XG5cbiAgdmFyIHVuZG9PclJlZG8gPSB1bmRvID8gXCJ1bmRvXCIgOiBcInJlZG9cIjtcblxuICBpZiAoX3R5cGVvZihhY3Rpb25zW3R5cGVdKSA9PT0gXCJvYmplY3RcIikge1xuICAgIGlmICh0eXBlb2YgYWN0aW9uc1t0eXBlXVt1bmRvT3JSZWRvXSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjdGlvbiBjcmVhdG9yIG9mIHR5cGU6ICdcIiArIHR5cGUgKyBcIicuIENvdWxkIG5vdCAnXCIgKyB1bmRvT3JSZWRvICsgXCInLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdGlvbnNbdHlwZV1bdW5kb09yUmVkb107XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbnNbdHlwZV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8qKlxuICAgICAqIEhpZ2hlciBvcmRlciBhY3Rpb24gY3JlYXRvci4gSXQgcmV0dXJucyBhbiBhcnJheSBvZiBhY3Rpb25zLlxuICAgICAqXG4gICAgICogSGlnaGVyIG9yZGVyIGFjdGlvbiBjcmVhdG9ycyBjYW4ndCBiZSBmbGlwcGVkLCBidXQgdGhlIGFjdGlvbnNcbiAgICAgKiBjcmVhdG9ycyB0aGF0IHRoZXkgcmV0dXJuIGNhbiBiZS5cbiAgICAgKi9cbiAgICByZXR1cm4gYWN0aW9uc1t0eXBlXTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWN0aW9uIGNyZWF0b3Igb2YgdHlwZTogJ1wiICsgdHlwZSArIFwiJy5cIik7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVOZXN0ZWRBY3Rpb24oYWN0aW9ucywgdW5kbykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgX2FjdGlvbnMkaSA9IGFjdGlvbnNbaV0sXG4gICAgICAgIHR5cGUgPSBfYWN0aW9ucyRpLnR5cGUsXG4gICAgICAgIGRhdGEgPSBfYWN0aW9ucyRpLmRhdGE7XG5cblxuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gcmVzb2x2ZUFjdGlvbkNyZWF0b3IodHlwZSwgdW5kbyk7XG4gICAgdmFyIHJlc3VsdCA9IGFjdGlvbkNyZWF0b3IoZGF0YSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICByZXNvbHZlTmVzdGVkQWN0aW9uKHJlc3VsdCwgdW5kbyk7IC8vIG9oIGJveVxuICAgIH0gZWxzZSB7XG4gICAgICBzdG9yZS5kaXNwYXRjaChyZXN1bHQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFByZWRvbWluYW50bHkgdXNlZCBieSB0aGUgdW5kby9yZWRvIG1lY2hhbmlzbS5cbiAqXG4gKiBUYWtlcyBpbiBhbiBhY3Rpb24gYW5kIGV4ZWN1dGVzIG9yIHJldmVyc2VzIHRoYXQgYWN0aW9uIGRlcGVuZGluZ1xuICogb24gdGhlIG9wdGlvbnMgcGFzc2VkLlxuICpcbiAqIE9wdGlvbnM6XG4gKiAgICB1bmRvICAgICAgICAgICAgLSBpZiBzZXQgdG8gdHJ1ZSwgdGhlIGFjdGlvbiBpcyByZXZlcnNlZC5cbiAqICAgIGlnbm9yZVNlbGVjdGlvbiAtIGlmIHNldCB0byB0cnVlLCB0aGUgY3VycmVudCBzZWxlY3Rpb24gaXMgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZCB3aGF0c29ldmVyLlxuICpcbiAqIGlnbm9yZVNlbGVjdGlvbiBzaG91bGQgZXhjbHVzaXZlbHkgYmUgdXNlZCBieSB0aGUgYWRkQWN0aW9uVG9IaXN0b3J5XG4gKiBtb2R1bGUuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVzb2x2ZUFjdGlvbihhY3Rpb24pIHtcbiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gIGlmICghb3B0cyB8fCAodHlwZW9mIG9wdHMgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvcHRzKSkgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbnMuIEV4cGVjdGVkIG9iamVjdCBidXQgZ290ICdcIiArIG9wdHMgKyBcIicuXCIpO1xuICB9XG5cbiAgdmFyIHR5cGUgPSBhY3Rpb24udHlwZSxcbiAgICAgIGRhdGEgPSBhY3Rpb24uZGF0YSxcbiAgICAgIHNlbGVjdGlvbiA9IGFjdGlvbi5zZWxlY3Rpb247XG5cbiAgdmFyIHVuZG8gPSBvcHRzLnVuZG8gfHwgZmFsc2U7XG5cbiAgdmFyIGFjdGlvbkNyZWF0b3IgPSByZXNvbHZlQWN0aW9uQ3JlYXRvcih0eXBlLCB1bmRvKTtcbiAgdmFyIHJlc3VsdCA9IGFjdGlvbkNyZWF0b3IoZGF0YSk7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xuICAgIHJlc29sdmVOZXN0ZWRBY3Rpb24ocmVzdWx0LCB1bmRvKTtcbiAgfSBlbHNlIHtcbiAgICBzdG9yZS5kaXNwYXRjaChyZXN1bHQpO1xuICB9XG5cbiAgaWYgKCFvcHRzLmlnbm9yZVNlbGVjdGlvbikge1xuICAgIGlmICh1bmRvKSB7XG4gICAgICAvKipcbiAgICAgICAqIE9uIG9iamVjdCBjcmVhdGlvbiwgdGhvc2Ugb2JqZWN0cyB3aWxsIGJlIHNlbGVjdGVkLlxuICAgICAgICpcbiAgICAgICAqIElmIHdlJ3JlIHVuZG9pbmcgYW4gb2JqZWN0IGNyZWF0aW9uLCB0aGVuIHRoZSBzZWxlY3Rpb24gd2lsbFxuICAgICAgICogY29udGFpbiBvYmplY3RzIHRoYXQgZG9uJ3QgZXhpc3QuXG4gICAgICAgKlxuICAgICAgICogSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgcmVzdG9yZSB0aGUgc2VsZWN0aW9uIG9mIHRoZSBhY3Rpb24gYmVmb3JlXG4gICAgICAgKiBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3ZSBjbGVhciB0aGUgc2VsZWN0aW9uLlxuICAgICAgICovXG4gICAgICBpZiAoIWlzVmFsaWRTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgICAgICB2YXIgaGlzdG9yeSA9IHN0b3JlLmdldFN0YXRlKCkuaGlzdG9yeS5oaXN0b3J5O1xuXG4gICAgICAgIGlmICghaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICBjbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBhY3Rpb25CZWZvcmUgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJSRVNUT1JFX1NFTEVDVElPTlwiLFxuICAgICAgICAgICAgcGF5bG9hZDogYWN0aW9uQmVmb3JlLnNlbGVjdGlvblxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJSRVNUT1JFX1NFTEVDVElPTlwiLFxuICAgICAgICBwYXlsb2FkOiBzZWxlY3Rpb25cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSxcbiAgICBnZXRMZWZ0T2Zmc2V0ID0gX3JlcXVpcmUuZ2V0TGVmdE9mZnNldCxcbiAgICBnZXRUb3BPZmZzZXQgPSBfcmVxdWlyZS5nZXRUb3BPZmZzZXQ7XG5cbnZhciB0b1Bvc2l0aW9uID0gZnVuY3Rpb24gdG9Qb3NpdGlvbihlKSB7XG4gIHJldHVybiB7XG4gICAgeDogZS5jbGllbnRYIC0gZ2V0TGVmdE9mZnNldCgpLFxuICAgIHk6IGUuY2xpZW50WSAtIGdldFRvcE9mZnNldCgpXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvUG9zaXRpb247XG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHJhbmRvbUJ5dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblxuZnVuY3Rpb24gZW5jb2RlKGxvb2t1cCwgbnVtYmVyKSB7XG4gICAgdmFyIGxvb3BDb3VudGVyID0gMDtcbiAgICB2YXIgZG9uZTtcblxuICAgIHZhciBzdHIgPSAnJztcblxuICAgIHdoaWxlICghZG9uZSkge1xuICAgICAgICBzdHIgPSBzdHIgKyBsb29rdXAoICggKG51bWJlciA+PiAoNCAqIGxvb3BDb3VudGVyKSkgJiAweDBmICkgfCByYW5kb21CeXRlKCkgKTtcbiAgICAgICAgZG9uZSA9IG51bWJlciA8IChNYXRoLnBvdygxNiwgbG9vcENvdW50ZXIgKyAxICkgKTtcbiAgICAgICAgbG9vcENvdW50ZXIrKztcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlbmNvZGU7XG5cblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NyZWF0ZVN0b3JlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2NvbWJpbmVSZWR1Y2Vyc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19iaW5kQWN0aW9uQ3JlYXRvcnNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fYXBwbHlNaWRkbGV3YXJlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX2NvbXBvc2VfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fdXRpbHNfd2FybmluZ19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjcmVhdGVTdG9yZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY3JlYXRlU3RvcmVfX1tcImJcIl07IH0pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY29tYmluZVJlZHVjZXJzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19jb21iaW5lUmVkdWNlcnNfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYmluZEFjdGlvbkNyZWF0b3JzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19iaW5kQWN0aW9uQ3JlYXRvcnNfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYXBwbHlNaWRkbGV3YXJlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19hcHBseU1pZGRsZXdhcmVfX1tcImFcIl07IH0pO1xuLyogaGFybW9ueSByZWV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY29tcG9zZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fY29tcG9zZV9fW1wiYVwiXTsgfSk7XG5cblxuXG5cblxuXG5cbi8qXG4qIFRoaXMgaXMgYSBkdW1teSBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgZnVuY3Rpb24gbmFtZSBoYXMgYmVlbiBhbHRlcmVkIGJ5IG1pbmlmaWNhdGlvbi5cbiogSWYgdGhlIGZ1bmN0aW9uIGhhcyBiZWVuIG1pbmlmaWVkIGFuZCBOT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLCB3YXJuIHRoZSB1c2VyLlxuKi9cbmZ1bmN0aW9uIGlzQ3J1c2hlZCgpIHt9XG5cbmlmIChmYWxzZSkge1xuICB3YXJuaW5nKCdZb3UgYXJlIGN1cnJlbnRseSB1c2luZyBtaW5pZmllZCBjb2RlIG91dHNpZGUgb2YgTk9ERV9FTlYgPT09IFxcJ3Byb2R1Y3Rpb25cXCcuICcgKyAnVGhpcyBtZWFucyB0aGF0IHlvdSBhcmUgcnVubmluZyBhIHNsb3dlciBkZXZlbG9wbWVudCBidWlsZCBvZiBSZWR1eC4gJyArICdZb3UgY2FuIHVzZSBsb29zZS1lbnZpZnkgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJ0b3NoL2xvb3NlLWVudmlmeSkgZm9yIGJyb3dzZXJpZnkgJyArICdvciBEZWZpbmVQbHVnaW4gZm9yIHdlYnBhY2sgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwMzAwMzEpICcgKyAndG8gZW5zdXJlIHlvdSBoYXZlIHRoZSBjb3JyZWN0IGNvZGUgZm9yIHlvdXIgcHJvZHVjdGlvbiBidWlsZC4nKTtcbn1cblxuXG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFjdGlvblR5cGVzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJiXCJdID0gY3JlYXRlU3RvcmU7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX2xvZGFzaF9lc19pc1BsYWluT2JqZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfc3ltYm9sX29ic2VydmFibGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9zeW1ib2xfb2JzZXJ2YWJsZV9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3N5bWJvbF9vYnNlcnZhYmxlX18pO1xuXG5cblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbnZhciBBY3Rpb25UeXBlcyA9IHtcbiAgSU5JVDogJ0BAcmVkdXgvSU5JVCdcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFJlZHV4IHN0b3JlIHRoYXQgaG9sZHMgdGhlIHN0YXRlIHRyZWUuXG4gICAqIFRoZSBvbmx5IHdheSB0byBjaGFuZ2UgdGhlIGRhdGEgaW4gdGhlIHN0b3JlIGlzIHRvIGNhbGwgYGRpc3BhdGNoKClgIG9uIGl0LlxuICAgKlxuICAgKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG4gICAqIHBhcnRzIG9mIHRoZSBzdGF0ZSB0cmVlIHJlc3BvbmQgdG8gYWN0aW9ucywgeW91IG1heSBjb21iaW5lIHNldmVyYWwgcmVkdWNlcnNcbiAgICogaW50byBhIHNpbmdsZSByZWR1Y2VyIGZ1bmN0aW9uIGJ5IHVzaW5nIGBjb21iaW5lUmVkdWNlcnNgLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWR1Y2VyIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBuZXh0IHN0YXRlIHRyZWUsIGdpdmVuXG4gICAqIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBhY3Rpb24gdG8gaGFuZGxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2FueX0gW3ByZWxvYWRlZFN0YXRlXSBUaGUgaW5pdGlhbCBzdGF0ZS4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAgICogdG8gaHlkcmF0ZSB0aGUgc3RhdGUgZnJvbSB0aGUgc2VydmVyIGluIHVuaXZlcnNhbCBhcHBzLCBvciB0byByZXN0b3JlIGFcbiAgICogcHJldmlvdXNseSBzZXJpYWxpemVkIHVzZXIgc2Vzc2lvbi5cbiAgICogSWYgeW91IHVzZSBgY29tYmluZVJlZHVjZXJzYCB0byBwcm9kdWNlIHRoZSByb290IHJlZHVjZXIgZnVuY3Rpb24sIHRoaXMgbXVzdCBiZVxuICAgKiBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZSBhcyBgY29tYmluZVJlZHVjZXJzYCBrZXlzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZW5oYW5jZXJdIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAgICogdG8gZW5oYW5jZSB0aGUgc3RvcmUgd2l0aCB0aGlyZC1wYXJ0eSBjYXBhYmlsaXRpZXMgc3VjaCBhcyBtaWRkbGV3YXJlLFxuICAgKiB0aW1lIHRyYXZlbCwgcGVyc2lzdGVuY2UsIGV0Yy4gVGhlIG9ubHkgc3RvcmUgZW5oYW5jZXIgdGhhdCBzaGlwcyB3aXRoIFJlZHV4XG4gICAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdG9yZX0gQSBSZWR1eCBzdG9yZSB0aGF0IGxldHMgeW91IHJlYWQgdGhlIHN0YXRlLCBkaXNwYXRjaCBhY3Rpb25zXG4gICAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAgICovXG59O2Z1bmN0aW9uIGNyZWF0ZVN0b3JlKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlLCBlbmhhbmNlcikge1xuICB2YXIgX3JlZjI7XG5cbiAgaWYgKHR5cGVvZiBwcmVsb2FkZWRTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW5oYW5jZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgZW5oYW5jZXIgPSBwcmVsb2FkZWRTdGF0ZTtcbiAgICBwcmVsb2FkZWRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgZW5oYW5jZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5oYW5jZXIoY3JlYXRlU3RvcmUpKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIHJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciBjdXJyZW50UmVkdWNlciA9IHJlZHVjZXI7XG4gIHZhciBjdXJyZW50U3RhdGUgPSBwcmVsb2FkZWRTdGF0ZTtcbiAgdmFyIGN1cnJlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgdmFyIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzO1xuICB2YXIgaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKG5leHRMaXN0ZW5lcnMgPT09IGN1cnJlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIHRoZSBzdGF0ZSB0cmVlIG1hbmFnZWQgYnkgdGhlIHN0b3JlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7YW55fSBUaGUgY3VycmVudCBzdGF0ZSB0cmVlIG9mIHlvdXIgYXBwbGljYXRpb24uXG4gICAqL1xuICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjaGFuZ2UgbGlzdGVuZXIuIEl0IHdpbGwgYmUgY2FsbGVkIGFueSB0aW1lIGFuIGFjdGlvbiBpcyBkaXNwYXRjaGVkLFxuICAgKiBhbmQgc29tZSBwYXJ0IG9mIHRoZSBzdGF0ZSB0cmVlIG1heSBwb3RlbnRpYWxseSBoYXZlIGNoYW5nZWQuIFlvdSBtYXkgdGhlblxuICAgKiBjYWxsIGBnZXRTdGF0ZSgpYCB0byByZWFkIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgaW5zaWRlIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogWW91IG1heSBjYWxsIGBkaXNwYXRjaCgpYCBmcm9tIGEgY2hhbmdlIGxpc3RlbmVyLCB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogY2F2ZWF0czpcbiAgICpcbiAgICogMS4gVGhlIHN1YnNjcmlwdGlvbnMgYXJlIHNuYXBzaG90dGVkIGp1c3QgYmVmb3JlIGV2ZXJ5IGBkaXNwYXRjaCgpYCBjYWxsLlxuICAgKiBJZiB5b3Ugc3Vic2NyaWJlIG9yIHVuc3Vic2NyaWJlIHdoaWxlIHRoZSBsaXN0ZW5lcnMgYXJlIGJlaW5nIGludm9rZWQsIHRoaXNcbiAgICogd2lsbCBub3QgaGF2ZSBhbnkgZWZmZWN0IG9uIHRoZSBgZGlzcGF0Y2goKWAgdGhhdCBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuXG4gICAqIEhvd2V2ZXIsIHRoZSBuZXh0IGBkaXNwYXRjaCgpYCBjYWxsLCB3aGV0aGVyIG5lc3RlZCBvciBub3QsIHdpbGwgdXNlIGEgbW9yZVxuICAgKiByZWNlbnQgc25hcHNob3Qgb2YgdGhlIHN1YnNjcmlwdGlvbiBsaXN0LlxuICAgKlxuICAgKiAyLiBUaGUgbGlzdGVuZXIgc2hvdWxkIG5vdCBleHBlY3QgdG8gc2VlIGFsbCBzdGF0ZSBjaGFuZ2VzLCBhcyB0aGUgc3RhdGVcbiAgICogbWlnaHQgaGF2ZSBiZWVuIHVwZGF0ZWQgbXVsdGlwbGUgdGltZXMgZHVyaW5nIGEgbmVzdGVkIGBkaXNwYXRjaCgpYCBiZWZvcmVcbiAgICogdGhlIGxpc3RlbmVyIGlzIGNhbGxlZC4gSXQgaXMsIGhvd2V2ZXIsIGd1YXJhbnRlZWQgdGhhdCBhbGwgc3Vic2NyaWJlcnNcbiAgICogcmVnaXN0ZXJlZCBiZWZvcmUgdGhlIGBkaXNwYXRjaCgpYCBzdGFydGVkIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGxhdGVzdFxuICAgKiBzdGF0ZSBieSB0aGUgdGltZSBpdCBleGl0cy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQSBjYWxsYmFjayB0byBiZSBpbnZva2VkIG9uIGV2ZXJ5IGRpc3BhdGNoLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoaXMgY2hhbmdlIGxpc3RlbmVyLlxuICAgKi9cbiAgZnVuY3Rpb24gc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHZhciBpc1N1YnNjcmliZWQgPSB0cnVlO1xuXG4gICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgIG5leHRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICBpZiAoIWlzU3Vic2NyaWJlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuXG4gICAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgICB2YXIgaW5kZXggPSBuZXh0TGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgbmV4dExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbiBhY3Rpb24uIEl0IGlzIHRoZSBvbmx5IHdheSB0byB0cmlnZ2VyIGEgc3RhdGUgY2hhbmdlLlxuICAgKlxuICAgKiBUaGUgYHJlZHVjZXJgIGZ1bmN0aW9uLCB1c2VkIHRvIGNyZWF0ZSB0aGUgc3RvcmUsIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAqIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGdpdmVuIGBhY3Rpb25gLiBJdHMgcmV0dXJuIHZhbHVlIHdpbGxcbiAgICogYmUgY29uc2lkZXJlZCB0aGUgKipuZXh0Kiogc3RhdGUgb2YgdGhlIHRyZWUsIGFuZCB0aGUgY2hhbmdlIGxpc3RlbmVyc1xuICAgKiB3aWxsIGJlIG5vdGlmaWVkLlxuICAgKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIHBsYWluIG9iamVjdCBhY3Rpb25zLiBJZiB5b3Ugd2FudCB0b1xuICAgKiBkaXNwYXRjaCBhIFByb21pc2UsIGFuIE9ic2VydmFibGUsIGEgdGh1bmssIG9yIHNvbWV0aGluZyBlbHNlLCB5b3UgbmVlZCB0b1xuICAgKiB3cmFwIHlvdXIgc3RvcmUgY3JlYXRpbmcgZnVuY3Rpb24gaW50byB0aGUgY29ycmVzcG9uZGluZyBtaWRkbGV3YXJlLiBGb3JcbiAgICogZXhhbXBsZSwgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgYHJlZHV4LXRodW5rYCBwYWNrYWdlLiBFdmVuIHRoZVxuICAgKiBtaWRkbGV3YXJlIHdpbGwgZXZlbnR1YWxseSBkaXNwYXRjaCBwbGFpbiBvYmplY3QgYWN0aW9ucyB1c2luZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiBBIHBsYWluIG9iamVjdCByZXByZXNlbnRpbmcg4oCcd2hhdCBjaGFuZ2Vk4oCdLiBJdCBpc1xuICAgKiBhIGdvb2QgaWRlYSB0byBrZWVwIGFjdGlvbnMgc2VyaWFsaXphYmxlIHNvIHlvdSBjYW4gcmVjb3JkIGFuZCByZXBsYXkgdXNlclxuICAgKiBzZXNzaW9ucywgb3IgdXNlIHRoZSB0aW1lIHRyYXZlbGxpbmcgYHJlZHV4LWRldnRvb2xzYC4gQW4gYWN0aW9uIG11c3QgaGF2ZVxuICAgKiBhIGB0eXBlYCBwcm9wZXJ0eSB3aGljaCBtYXkgbm90IGJlIGB1bmRlZmluZWRgLiBJdCBpcyBhIGdvb2QgaWRlYSB0byB1c2VcbiAgICogc3RyaW5nIGNvbnN0YW50cyBmb3IgYWN0aW9uIHR5cGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGb3IgY29udmVuaWVuY2UsIHRoZSBzYW1lIGFjdGlvbiBvYmplY3QgeW91IGRpc3BhdGNoZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCwgaWYgeW91IHVzZSBhIGN1c3RvbSBtaWRkbGV3YXJlLCBpdCBtYXkgd3JhcCBgZGlzcGF0Y2goKWAgdG9cbiAgICogcmV0dXJuIHNvbWV0aGluZyBlbHNlIChmb3IgZXhhbXBsZSwgYSBQcm9taXNlIHlvdSBjYW4gYXdhaXQpLlxuICAgKi9cbiAgZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgaWYgKCFPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX2xvZGFzaF9lc19pc1BsYWluT2JqZWN0X19bXCJhXCIgLyogZGVmYXVsdCAqL10pKGFjdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWN0aW9ucyBtdXN0IGJlIHBsYWluIG9iamVjdHMuICcgKyAnVXNlIGN1c3RvbSBtaWRkbGV3YXJlIGZvciBhc3luYyBhY3Rpb25zLicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYWN0aW9uLnR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbWF5IG5vdCBoYXZlIGFuIHVuZGVmaW5lZCBcInR5cGVcIiBwcm9wZXJ0eS4gJyArICdIYXZlIHlvdSBtaXNzcGVsbGVkIGEgY29uc3RhbnQ/Jyk7XG4gICAgfVxuXG4gICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlcnMgbWF5IG5vdCBkaXNwYXRjaCBhY3Rpb25zLicpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRSZWR1Y2VyKGN1cnJlbnRTdGF0ZSwgYWN0aW9uKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzID0gbmV4dExpc3RlbmVycztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSByZWR1Y2VyIGN1cnJlbnRseSB1c2VkIGJ5IHRoZSBzdG9yZSB0byBjYWxjdWxhdGUgdGhlIHN0YXRlLlxuICAgKlxuICAgKiBZb3UgbWlnaHQgbmVlZCB0aGlzIGlmIHlvdXIgYXBwIGltcGxlbWVudHMgY29kZSBzcGxpdHRpbmcgYW5kIHlvdSB3YW50IHRvXG4gICAqIGxvYWQgc29tZSBvZiB0aGUgcmVkdWNlcnMgZHluYW1pY2FsbHkuIFlvdSBtaWdodCBhbHNvIG5lZWQgdGhpcyBpZiB5b3VcbiAgICogaW1wbGVtZW50IGEgaG90IHJlbG9hZGluZyBtZWNoYW5pc20gZm9yIFJlZHV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0UmVkdWNlciBUaGUgcmVkdWNlciBmb3IgdGhlIHN0b3JlIHRvIHVzZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VSZWR1Y2VyKG5leHRSZWR1Y2VyKSB7XG4gICAgaWYgKHR5cGVvZiBuZXh0UmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbmV4dFJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyO1xuICAgIGRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZXMuSU5JVCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm9wZXJhYmlsaXR5IHBvaW50IGZvciBvYnNlcnZhYmxlL3JlYWN0aXZlIGxpYnJhcmllcy5cbiAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIG9ic2VydmFibGUgcHJvcG9zYWw6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9ic2VydmFibGVcbiAgICovXG4gIGZ1bmN0aW9uIG9ic2VydmFibGUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgb3V0ZXJTdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgcmV0dXJuIF9yZWYgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtaW5pbWFsIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG1ldGhvZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlciBBbnkgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gb2JzZXJ2ZXIuXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cbiAgICAgICAqIEByZXR1cm5zIHtzdWJzY3JpcHRpb259IEFuIG9iamVjdCB3aXRoIGFuIGB1bnN1YnNjcmliZWAgbWV0aG9kIHRoYXQgY2FuXG4gICAgICAgKiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlIHRoZSBvYnNlcnZhYmxlIGZyb20gdGhlIHN0b3JlLCBhbmQgcHJldmVudCBmdXJ0aGVyXG4gICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAqL1xuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGdldFN0YXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBvdXRlclN1YnNjcmliZShvYnNlcnZlU3RhdGUpO1xuICAgICAgICByZXR1cm4geyB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmUgfTtcbiAgICAgIH1cbiAgICB9LCBfcmVmW19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9zeW1ib2xfb2JzZXJ2YWJsZV9fX2RlZmF1bHQuYV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LCBfcmVmO1xuICB9XG5cbiAgLy8gV2hlbiBhIHN0b3JlIGlzIGNyZWF0ZWQsIGFuIFwiSU5JVFwiIGFjdGlvbiBpcyBkaXNwYXRjaGVkIHNvIHRoYXQgZXZlcnlcbiAgLy8gcmVkdWNlciByZXR1cm5zIHRoZWlyIGluaXRpYWwgc3RhdGUuIFRoaXMgZWZmZWN0aXZlbHkgcG9wdWxhdGVzXG4gIC8vIHRoZSBpbml0aWFsIHN0YXRlIHRyZWUuXG4gIGRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZXMuSU5JVCB9KTtcblxuICByZXR1cm4gX3JlZjIgPSB7XG4gICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuICAgIGdldFN0YXRlOiBnZXRTdGF0ZSxcbiAgICByZXBsYWNlUmVkdWNlcjogcmVwbGFjZVJlZHVjZXJcbiAgfSwgX3JlZjJbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3N5bWJvbF9vYnNlcnZhYmxlX19fZGVmYXVsdC5hXSA9IG9ic2VydmFibGUsIF9yZWYyO1xufVxuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fYmFzZUdldFRhZ19qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19nZXRQcm90b3R5cGVfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9faXNPYmplY3RMaWtlX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblxuXG5cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9faXNPYmplY3RMaWtlX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHZhbHVlKSB8fCBPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19iYXNlR2V0VGFnX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHZhbHVlKSAhPSBvYmplY3RUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fZ2V0UHJvdG90eXBlX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiZcbiAgICBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKGlzUGxhaW5PYmplY3QpO1xuXG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19yb290X2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblxuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX3Jvb3RfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5TeW1ib2w7XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoU3ltYm9sKTtcblxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGRlZmF1bHQgKi9cbi8qKlxuICogUHJpbnRzIGEgd2FybmluZyBpbiB0aGUgY29uc29sZSBpZiBpdCBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIHdhcm5pbmcgbWVzc2FnZS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbiAgdHJ5IHtcbiAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IGlmIHlvdSBlbmFibGVcbiAgICAvLyBcImJyZWFrIG9uIGFsbCBleGNlcHRpb25zXCIgaW4geW91ciBjb25zb2xlLFxuICAgIC8vIGl0IHdvdWxkIHBhdXNlIHRoZSBleGVjdXRpb24gYXQgdGhpcyBsaW5lLlxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICB9IGNhdGNoIChlKSB7fVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWVtcHR5ICovXG59XG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IGNvbXBvc2U7XG4vKipcbiAqIENvbXBvc2VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LiBUaGUgcmlnaHRtb3N0XG4gKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3JcbiAqIHRoZSByZXN1bHRpbmcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBvYnRhaW5lZCBieSBjb21wb3NpbmcgdGhlIGFyZ3VtZW50IGZ1bmN0aW9uc1xuICogZnJvbSByaWdodCB0byBsZWZ0LiBGb3IgZXhhbXBsZSwgY29tcG9zZShmLCBnLCBoKSBpcyBpZGVudGljYWwgdG8gZG9pbmdcbiAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGZ1bmNzWzBdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmNzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYShiLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG59XG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXG52YXIgZ2V0Q29ubmVjdGlvblBvaW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xudmFyIGdldEludGVybWVkaWF0ZU51bWJlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG4vKipcbiAqIFRha2VzIGluIGEgY29ubmVjdGlvbiBhbmQgYSB0IHZhbHVlIGFuZCByZXR1cm5zIHRoZSBwb2ludFxuICogb24gdGhlIGNvbm5lY3Rpb24gYXQgc2FpZCB0IHZhbHVlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNhbGNCZXppZXJQb2ludEF0KGNvbm5lY3Rpb24sIHQpIHtcbiAgdmFyIF9nZXRDb25uZWN0aW9uUG9pbnRzID0gZ2V0Q29ubmVjdGlvblBvaW50cyhjb25uZWN0aW9uKSxcbiAgICAgIF9nZXRDb25uZWN0aW9uUG9pbnRzMiA9IF9zbGljZWRUb0FycmF5KF9nZXRDb25uZWN0aW9uUG9pbnRzLCA0KSxcbiAgICAgIHAwID0gX2dldENvbm5lY3Rpb25Qb2ludHMyWzBdLFxuICAgICAgcDEgPSBfZ2V0Q29ubmVjdGlvblBvaW50czJbMV0sXG4gICAgICBwMiA9IF9nZXRDb25uZWN0aW9uUG9pbnRzMlsyXSxcbiAgICAgIHAzID0gX2dldENvbm5lY3Rpb25Qb2ludHMyWzNdO1xuXG4gIGlmICghcDEgJiYgIXAyKSB7XG4gICAgdmFyIF94ID0gZ2V0SW50ZXJtZWRpYXRlTnVtYmVyKHAwLngsIHAzLngsIHQpO1xuICAgIHZhciBfeSA9IGdldEludGVybWVkaWF0ZU51bWJlcihwMC55LCBwMy55LCB0KTtcbiAgICByZXR1cm4geyB4OiBfeCwgeTogX3kgfTtcbiAgfVxuXG4gIHZhciB1ID0gMSAtIHQ7XG5cbiAgZnVuY3Rpb24gY2FsY1BhcnQod2hpY2gpIHtcbiAgICB2YXIgcCA9IE1hdGgucG93KHUsIDMpICogcDBbd2hpY2hdOyAvLyBmaXJzdCB0ZXJtXG4gICAgcCArPSAzICogdCAqIE1hdGgucG93KHUsIDIpICogcDFbd2hpY2hdOyAvLyBzZWNvbmQgdGVybVxuICAgIHAgKz0gMyAqIHUgKiBNYXRoLnBvdyh0LCAyKSAqIHAyW3doaWNoXTsgLy8gdGhpcmQgdGVybVxuICAgIHAgKz0gTWF0aC5wb3codCwgMykgKiBwM1t3aGljaF07IC8vIGZvdXJ0aCB0ZXJtXG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICB2YXIgeCA9IGNhbGNQYXJ0KFwieFwiKTtcbiAgdmFyIHkgPSBjYWxjUGFydChcInlcIik7XG5cbiAgcmV0dXJuIHsgeDogeCwgeTogeSwgdDogdCB9O1xufTtcblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgcmVzb2x2ZU9iamVjdElkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuICAgIGlzS2V5RG93biA9IF9yZXF1aXJlLmlzS2V5RG93bjtcblxudmFyIF9yZXF1aXJlMiA9IF9fd2VicGFja19yZXF1aXJlX18oMCksXG4gICAga2V5cyA9IF9yZXF1aXJlMi5rZXlzLFxuICAgIHR5cGVzID0gX3JlcXVpcmUyLnR5cGVzO1xuXG52YXIgX3JlcXVpcmUzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcbiAgICBhZGRMaXN0ZW5lciA9IF9yZXF1aXJlMy5hZGRMaXN0ZW5lcixcbiAgICByZW1vdmVMaXN0ZW5lciA9IF9yZXF1aXJlMy5yZW1vdmVMaXN0ZW5lcjtcblxudmFyIF9yZXF1aXJlNCA9IF9fd2VicGFja19yZXF1aXJlX18oNSksXG4gICAgc2V0Q3Vyc29yID0gX3JlcXVpcmU0LnNldEN1cnNvcixcbiAgICByZWxlYXNlT3ZlcnJpZGUgPSBfcmVxdWlyZTQucmVsZWFzZU92ZXJyaWRlO1xuXG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIGFkZEFjdGlvblRvSGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xudmFyIGFkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblxudmFyIF9yZXF1aXJlNSA9IF9fd2VicGFja19yZXF1aXJlX18oMyksXG4gICAgY2xlYXJTZWxlY3Rpb24gPSBfcmVxdWlyZTUuY2xlYXJTZWxlY3Rpb24sXG4gICAgYWRkVG9TZWxlY3Rpb24gPSBfcmVxdWlyZTUuYWRkVG9TZWxlY3Rpb24sXG4gICAgaXNTZWxlY3RlZCA9IF9yZXF1aXJlNS5pc1NlbGVjdGVkLFxuICAgIGNvcHlTZWxlY3Rpb24gPSBfcmVxdWlyZTUuY29weVNlbGVjdGlvbixcbiAgICByZW1vdmVGcm9tU2VsZWN0aW9uID0gX3JlcXVpcmU1LnJlbW92ZUZyb21TZWxlY3Rpb247XG5cbnZhciBnZXRQb3NEaWZmZXJlbmNlID0gZnVuY3Rpb24gZ2V0UG9zRGlmZmVyZW5jZShvbGRQb3MsIG5ld1Bvcykge1xuICByZXR1cm4ge1xuICAgIHg6IG5ld1Bvcy54IC0gb2xkUG9zLngsXG4gICAgeTogbmV3UG9zLnkgLSBvbGRQb3MueVxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXNvbHZlTW92ZU1vdXNlRG93bihpbml0aWFsUG9zaXRpb24sIG9iaikge1xuICBpZiAoIW9iaikge1xuICAgIGNsZWFyU2VsZWN0aW9uKCk7IC8vIFdlIHNpbXBseSBjbGVhciB0aGUgc2VsZWN0aW9uXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHZhbHVlID0gb2JqLnZhbHVlLFxuICAgICAgdHlwZSA9IG9iai50eXBlO1xuXG5cbiAgdmFyIG9iamVjdElkID0gcmVzb2x2ZU9iamVjdElkKHR5cGUsIHZhbHVlKTtcbiAgdmFyIHdhc1NlbGVjdGVkQmVmb3JlQ2xpY2sgPSBpc1NlbGVjdGVkKHR5cGUsIG9iamVjdElkKTtcblxuICB2YXIgbW91c2VNb3ZlZCA9IGZhbHNlO1xuICB2YXIgY3Vyc29yT3ZlcnJpZGVJZCA9IHZvaWQgMDtcbiAgdmFyIGxhc3RQb3NpdGlvbiA9IGluaXRpYWxQb3NpdGlvbjtcbiAgdmFyIHNlbGVjdGlvbiA9IHZvaWQgMDtcblxuICAvKipcbiAgICogUnVucyB3aGlsc3QgdGhlIG1vdXNlIGlzIGRvd24sIGluY3JlbWVudGFsbHkgdXBkYXRlcyB0aGVcbiAgICogcG9zaXRpb24gb2YgYWxsIHNlbGVjdGVkIG9iamVjdHNcbiAgICovXG4gIHZhciBsaXN0ZW5lcklkID0gYWRkTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24gKGN1cnJlbnRQb3NpdGlvbikge1xuICAgIGlmICghbW91c2VNb3ZlZCkge1xuICAgICAgbW91c2VNb3ZlZCA9IHRydWU7XG4gICAgICBjdXJzb3JPdmVycmlkZUlkID0gc2V0Q3Vyc29yKFwiTU9WRVwiLCB7IG92ZXJyaWRlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIE1vdmluZyB0aGUgb2JqZWN0c1xuICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UobGFzdFBvc2l0aW9uLCBjdXJyZW50UG9zaXRpb24pXG4gICAgICB9XG4gICAgfSk7XG4gICAgbGFzdFBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uO1xuICB9KTtcblxuICAvKipcbiAgICogUnVucyB3aGVuIHRoZSBtb3VzZSBpcyByZWxlYXNlZC5cbiAgICpcbiAgICogUmVtb3ZlcyB0aGUgbW91c2Vtb3ZlIGxpc3RlbmVyIGFib3ZlIGFuZCBjcmVhdGVzIGEgbmV3IGFjdGlvbiB0aGF0XG4gICAqIG1vdmVzIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBiZXR3ZWVuIHRoZSBpbml0aWFsIGFuZCBsYXN0IHBvc2l0aW9uLlxuICAgKlxuICAgKiBEb2VzIG5vdCBjcmVhdGUgYW4gYWN0aW9uIGlmIHRoZSBtb3VzZSB3YXMgbm90IG1vdmVkLlxuICAgKi9cbiAgYWRkTGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBsaXN0ZW5lcklkKTtcblxuICAgIC8vIFJlbGVhc2luZyB0aGUgY3Vyc29yIG92ZXJyaWRlLlxuICAgIGlmICh0eXBlb2YgY3Vyc29yT3ZlcnJpZGVJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmVsZWFzZU92ZXJyaWRlKGN1cnNvck92ZXJyaWRlSWQpO1xuICAgICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGVzIHRoZSBtb3ZlIGFjdGlvbiBpZiB0aGUgbW91c2Ugd2FzIG1vdmVkXG4gICAgaWYgKG1vdXNlTW92ZWQpIHtcbiAgICAgIGFkZEFjdGlvblRvSGlzdG9yeSh7XG4gICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sXG4gICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoaW5pdGlhbFBvc2l0aW9uLCBsYXN0UG9zaXRpb24pXG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoIW1vdXNlTW92ZWQgJiYgd2FzU2VsZWN0ZWRCZWZvcmVDbGljaykge1xuICAgICAgaWYgKGlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgICAgICAvLyBXZSByZW1vdmUgdGhlIG9iamVjdCBmcm9tIHRoZSBzZWxlY3Rpb24gaWYgdGhlIHNoaWZ0IGtleSB3YXMgZG93blxuICAgICAgICByZW1vdmVGcm9tU2VsZWN0aW9uKHR5cGUsIG9iamVjdElkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgZXZlcnl0aGluZyBidXQgdGhlIG9iamVjdCBmcm9tIHRoZSBzZWxlY3Rpb24gaWYgdGhlXG4gICAgICAgICAqIHNoaWZ0IGtleSB3YXMgbm90IGRvd24uXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhclNlbGVjdGlvbigpO1xuICAgICAgICBhZGRUb1NlbGVjdGlvbih0eXBlLCBvYmplY3RJZCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB0cnVlKTtcblxuICAvKipcbiAgICogVGhlIG9iamVjdCBjbGlja2VkIG9uIHdpbGwgYmUgc2VsZWN0ZWQsIGJ1dCBpZiB0aGVcbiAgICogc2hpZnQga2V5IHdhcyBub3QgZG93biwgdGhlbiB3ZSByZW1vdmUgYWxsIG90aGVyIG9iamVjdHMuXG4gICAqL1xuICBpZiAoIXdhc1NlbGVjdGVkQmVmb3JlQ2xpY2spIHtcbiAgICBpZiAoIWlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgYWRkVG9TZWxlY3Rpb24odHlwZSwgb2JqZWN0SWQpO1xuICB9XG5cbiAgc2VsZWN0aW9uID0gYWRkSW1wbGljaXRseVNlbGVjdGVkT2JqZWN0cyhjb3B5U2VsZWN0aW9uKCkpO1xufTtcblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgZGVmYXVsdE9wdHMgPSB7XG4gIG1pcnJvckxlbmd0aDogdHJ1ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtaXJyb3JQb3NpdGlvbihwb3NpdGlvbiwgb3JpZ2luKSB7XG4gIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBkZWZhdWx0T3B0cztcblxuICB2YXIgb1ggPSBvcmlnaW4ueDtcbiAgdmFyIG9ZID0gb3JpZ2luLnk7XG5cbiAgaWYgKG9wdHMubWlycm9yTGVuZ3RoKSB7XG4gICAgLy8gSGVyZSB3ZSBqdXN0IHJldmVyc2UgdGhlIHggYW5kIHkgY29vcmRzIG9mIHRoZSBoYW5kbGUuXG4gICAgdmFyIG5ld1ggPSAocG9zaXRpb24ueCAtIG9YKSAqIC0xO1xuICAgIHZhciBuZXdZID0gKHBvc2l0aW9uLnkgLSBvWSkgKiAtMTtcblxuICAgIHJldHVybiB7XG4gICAgICB4OiBuZXdYICsgb1gsXG4gICAgICB5OiBuZXdZICsgb1lcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBtaXJyb3IgPSBfZXh0ZW5kcyh7fSwgb3B0cy5wb3NpdGlvblRvTWlycm9yKTtcblxuICAgIC8qKlxuICAgICAqIFJlZmVyZW5jZSBmb3IgdGhlIG1hdGggYmVoaW5kIHJvdGF0aW5nIGEgdmVjdG9yLlxuICAgICAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NjA3NjQwL3JvdGF0aW5nLWEtdmVjdG9yLWluLTNkLXNwYWNlXG4gICAgICovXG5cbiAgICB2YXIgcG9zaXRpb25SYWQgPSBNYXRoLmF0YW4yKHBvcy55IC0gb1ksIHBvcy54IC0gb1gpO1xuICAgIHZhciBtaXJyb3JSYWQgPSBNYXRoLmF0YW4yKG1pcnJvci55IC0gb1ksIG1pcnJvci54IC0gb1gpO1xuICAgIHZhciBtaXJyb3JlZFJhZCA9IHBvc2l0aW9uUmFkIC0gbWlycm9yUmFkICsgTWF0aC5QSTsgLy8gKyBQSSB0byBmbGlwIGl0XG5cbiAgICB2YXIgc2luID0gTWF0aC5zaW4obWlycm9yZWRSYWQpO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhtaXJyb3JlZFJhZCk7XG5cbiAgICAvLyBUcmFuc2xhdGUgdGhlIHBvc2l0aW9uIGFzIGlmIHRoZSBvcmlnaW4gKHBvaW50KSBpcyAoMCwwKS5cbiAgICBtaXJyb3IueCAtPSBvWDtcbiAgICBtaXJyb3IueSAtPSBvWTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGFjdHVhbCByb3RhdGlvblxuICAgICAqXG4gICAgICogICAgeCcgPSB4IGNvcyDOuCAtIHkgc2luIM64XG4gICAgICogICAgeScgPSB4IHNpbiDOuCArIHkgY29zIM64XG4gICAgICovXG4gICAgdmFyIF9uZXdYID0gbWlycm9yLnggKiBjb3MgLSBtaXJyb3IueSAqIHNpbjtcbiAgICB2YXIgX25ld1kgPSBtaXJyb3IueCAqIHNpbiArIG1pcnJvci55ICogY29zO1xuXG4gICAgLy8gVHJhbnNsYXRlIHBvc2l0aW9uIGJhY2tcbiAgICBtaXJyb3IueCA9IF9uZXdYICsgb1g7XG4gICAgbWlycm9yLnkgPSBfbmV3WSArIG9ZO1xuXG4gICAgcmV0dXJuIG1pcnJvcjtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KSxcbiAgICBvblRvb2xNb3VzZURvd24gPSBfcmVxdWlyZS5vblRvb2xNb3VzZURvd24sXG4gICAgb25Ub29sTW91c2VNb3ZlID0gX3JlcXVpcmUub25Ub29sTW91c2VNb3ZlLFxuICAgIG9uVG9vbE1vdXNlVXAgPSBfcmVxdWlyZS5vblRvb2xNb3VzZVVwO1xuXG52YXIgdG9Qb3NpdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xudmFyIHJlbmRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCksXG4gICAgb25LZXlEb3duID0gX3JlcXVpcmUyLm9uS2V5RG93bixcbiAgICBvbktleVVwID0gX3JlcXVpcmUyLm9uS2V5VXA7XG5cbnZhciBjcmVhdGVUb29sQmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7XG5cbnZhciBjYW52cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuXG53aW5kb3cub25rZXlkb3duID0gb25LZXlEb3duO1xud2luZG93Lm9ua2V5dXAgPSBvbktleVVwO1xuXG5jYW52YXMub25tb3VzZWRvd24gPSBvblRvb2xNb3VzZURvd247XG5jYW52YXMub25tb3VzZW1vdmUgPSBvblRvb2xNb3VzZU1vdmU7XG5jYW52YXMub25tb3VzZXVwID0gb25Ub29sTW91c2VVcDtcblxuY3JlYXRlVG9vbEJhcigpO1xuXG5yZW5kZXIobnVsbCwgeyBub1Bvc2l0aW9uOiB0cnVlIH0pOyAvLyBJbml0aWFsIHJlbmRlclxuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcbnZhciBnZXRDYW52YXNSZWN0ID0gZnVuY3Rpb24gZ2V0Q2FudmFzUmVjdCgpIHtcbiAgcmV0dXJuIGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn07XG5cbmV4cG9ydHMuZ2V0TGVmdE9mZnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGdldENhbnZhc1JlY3QoKS5sZWZ0O1xufTtcbmV4cG9ydHMuZ2V0VG9wT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0Q2FudmFzUmVjdCgpLnRvcDtcbn07XG5cbi8qKiovIH0pLFxuLyogMzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGFscGhhYmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbnZhciBlbmNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcbnZhciBkZWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcbnZhciBidWlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xudmFyIGlzVmFsaWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblxuLy8gaWYgeW91IGFyZSB1c2luZyBjbHVzdGVyIG9yIG11bHRpcGxlIHNlcnZlcnMgdXNlIHRoaXMgdG8gbWFrZSBlYWNoIGluc3RhbmNlXG4vLyBoYXMgYSB1bmlxdWUgdmFsdWUgZm9yIHdvcmtlclxuLy8gTm90ZTogSSBkb24ndCBrbm93IGlmIHRoaXMgaXMgYXV0b21hdGljYWxseSBzZXQgd2hlbiB1c2luZyB0aGlyZFxuLy8gcGFydHkgY2x1c3RlciBzb2x1dGlvbnMgc3VjaCBhcyBwbTIuXG52YXIgY2x1c3RlcldvcmtlcklkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkgfHwgMDtcblxuLyoqXG4gKiBTZXQgdGhlIHNlZWQuXG4gKiBIaWdobHkgcmVjb21tZW5kZWQgaWYgeW91IGRvbid0IHdhbnQgcGVvcGxlIHRvIHRyeSB0byBmaWd1cmUgb3V0IHlvdXIgaWQgc2NoZW1hLlxuICogZXhwb3NlZCBhcyBzaG9ydGlkLnNlZWQoaW50KVxuICogQHBhcmFtIHNlZWQgSW50ZWdlciB2YWx1ZSB0byBzZWVkIHRoZSByYW5kb20gYWxwaGFiZXQuICBBTFdBWVMgVVNFIFRIRSBTQU1FIFNFRUQgb3IgeW91IG1pZ2h0IGdldCBvdmVybGFwcy5cbiAqL1xuZnVuY3Rpb24gc2VlZChzZWVkVmFsdWUpIHtcbiAgICBhbHBoYWJldC5zZWVkKHNlZWRWYWx1ZSk7XG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vKipcbiAqIFNldCB0aGUgY2x1c3RlciB3b3JrZXIgb3IgbWFjaGluZSBpZFxuICogZXhwb3NlZCBhcyBzaG9ydGlkLndvcmtlcihpbnQpXG4gKiBAcGFyYW0gd29ya2VySWQgd29ya2VyIG11c3QgYmUgcG9zaXRpdmUgaW50ZWdlci4gIE51bWJlciBsZXNzIHRoYW4gMTYgaXMgcmVjb21tZW5kZWQuXG4gKiByZXR1cm5zIHNob3J0aWQgbW9kdWxlIHNvIGl0IGNhbiBiZSBjaGFpbmVkLlxuICovXG5mdW5jdGlvbiB3b3JrZXIod29ya2VySWQpIHtcbiAgICBjbHVzdGVyV29ya2VySWQgPSB3b3JrZXJJZDtcbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8qKlxuICpcbiAqIHNldHMgbmV3IGNoYXJhY3RlcnMgdG8gdXNlIGluIHRoZSBhbHBoYWJldFxuICogcmV0dXJucyB0aGUgc2h1ZmZsZWQgYWxwaGFiZXRcbiAqL1xuZnVuY3Rpb24gY2hhcmFjdGVycyhuZXdDaGFyYWN0ZXJzKSB7XG4gICAgaWYgKG5ld0NoYXJhY3RlcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbHBoYWJldC5jaGFyYWN0ZXJzKG5ld0NoYXJhY3RlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBhbHBoYWJldC5zaHVmZmxlZCgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHVuaXF1ZSBpZFxuICogUmV0dXJucyBzdHJpbmcgaWRcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gIHJldHVybiBidWlsZChjbHVzdGVyV29ya2VySWQpO1xufVxuXG4vLyBFeHBvcnQgYWxsIG90aGVyIGZ1bmN0aW9ucyBhcyBwcm9wZXJ0aWVzIG9mIHRoZSBnZW5lcmF0ZSBmdW5jdGlvblxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmF0ZTtcbm1vZHVsZS5leHBvcnRzLmdlbmVyYXRlID0gZ2VuZXJhdGU7XG5tb2R1bGUuZXhwb3J0cy5zZWVkID0gc2VlZDtcbm1vZHVsZS5leHBvcnRzLndvcmtlciA9IHdvcmtlcjtcbm1vZHVsZS5leHBvcnRzLmNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzO1xubW9kdWxlLmV4cG9ydHMuZGVjb2RlID0gZGVjb2RlO1xubW9kdWxlLmV4cG9ydHMuaXNWYWxpZCA9IGlzVmFsaWQ7XG5cblxuLyoqKi8gfSksXG4vKiA0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vLyBGb3VuZCB0aGlzIHNlZWQtYmFzZWQgcmFuZG9tIGdlbmVyYXRvciBzb21ld2hlcmVcbi8vIEJhc2VkIG9uIFRoZSBDZW50cmFsIFJhbmRvbWl6ZXIgMS4zIChDKSAxOTk3IGJ5IFBhdWwgSG91bGUgKGhvdWxlQG1zYy5jb3JuZWxsLmVkdSlcblxudmFyIHNlZWQgPSAxO1xuXG4vKipcbiAqIHJldHVybiBhIHJhbmRvbSBudW1iZXIgYmFzZWQgb24gYSBzZWVkXG4gKiBAcGFyYW0gc2VlZFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0TmV4dFZhbHVlKCkge1xuICAgIHNlZWQgPSAoc2VlZCAqIDkzMDEgKyA0OTI5NykgJSAyMzMyODA7XG4gICAgcmV0dXJuIHNlZWQvKDIzMzI4MC4wKTtcbn1cblxuZnVuY3Rpb24gc2V0U2VlZChfc2VlZF8pIHtcbiAgICBzZWVkID0gX3NlZWRfO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBuZXh0VmFsdWU6IGdldE5leHRWYWx1ZSxcbiAgICBzZWVkOiBzZXRTZWVkXG59O1xuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGNyeXB0byA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmICh3aW5kb3cuY3J5cHRvIHx8IHdpbmRvdy5tc0NyeXB0byk7IC8vIElFIDExIHVzZXMgd2luZG93Lm1zQ3J5cHRvXG5cbmZ1bmN0aW9uIHJhbmRvbUJ5dGUoKSB7XG4gICAgaWYgKCFjcnlwdG8gfHwgIWNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikgJiAweDMwO1xuICAgIH1cbiAgICB2YXIgZGVzdCA9IG5ldyBVaW50OEFycmF5KDEpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZGVzdCk7XG4gICAgcmV0dXJuIGRlc3RbMF0gJiAweDMwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJhbmRvbUJ5dGU7XG5cblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGFscGhhYmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuLyoqXG4gKiBEZWNvZGUgdGhlIGlkIHRvIGdldCB0aGUgdmVyc2lvbiBhbmQgd29ya2VyXG4gKiBNYWlubHkgZm9yIGRlYnVnZ2luZyBhbmQgdGVzdGluZy5cbiAqIEBwYXJhbSBpZCAtIHRoZSBzaG9ydGlkLWdlbmVyYXRlZCBpZC5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlKGlkKSB7XG4gICAgdmFyIGNoYXJhY3RlcnMgPSBhbHBoYWJldC5zaHVmZmxlZCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHZlcnNpb246IGNoYXJhY3RlcnMuaW5kZXhPZihpZC5zdWJzdHIoMCwgMSkpICYgMHgwZixcbiAgICAgICAgd29ya2VyOiBjaGFyYWN0ZXJzLmluZGV4T2YoaWQuc3Vic3RyKDEsIDEpKSAmIDB4MGZcbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlY29kZTtcblxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBlbmNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcbnZhciBhbHBoYWJldCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbi8vIElnbm9yZSBhbGwgbWlsbGlzZWNvbmRzIGJlZm9yZSBhIGNlcnRhaW4gdGltZSB0byByZWR1Y2UgdGhlIHNpemUgb2YgdGhlIGRhdGUgZW50cm9weSB3aXRob3V0IHNhY3JpZmljaW5nIHVuaXF1ZW5lc3MuXG4vLyBUaGlzIG51bWJlciBzaG91bGQgYmUgdXBkYXRlZCBldmVyeSB5ZWFyIG9yIHNvIHRvIGtlZXAgdGhlIGdlbmVyYXRlZCBpZCBzaG9ydC5cbi8vIFRvIHJlZ2VuZXJhdGUgYG5ldyBEYXRlKCkgLSAwYCBhbmQgYnVtcCB0aGUgdmVyc2lvbi4gQWx3YXlzIGJ1bXAgdGhlIHZlcnNpb24hXG52YXIgUkVEVUNFX1RJTUUgPSAxNDU5NzA3NjA2NTE4O1xuXG4vLyBkb24ndCBjaGFuZ2UgdW5sZXNzIHdlIGNoYW5nZSB0aGUgYWxnb3Mgb3IgUkVEVUNFX1RJTUVcbi8vIG11c3QgYmUgYW4gaW50ZWdlciBhbmQgbGVzcyB0aGFuIDE2XG52YXIgdmVyc2lvbiA9IDY7XG5cbi8vIENvdW50ZXIgaXMgdXNlZCB3aGVuIHNob3J0aWQgaXMgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGluIG9uZSBzZWNvbmQuXG52YXIgY291bnRlcjtcblxuLy8gUmVtZW1iZXIgdGhlIGxhc3QgdGltZSBzaG9ydGlkIHdhcyBjYWxsZWQgaW4gY2FzZSBjb3VudGVyIGlzIG5lZWRlZC5cbnZhciBwcmV2aW91c1NlY29uZHM7XG5cbi8qKlxuICogR2VuZXJhdGUgdW5pcXVlIGlkXG4gKiBSZXR1cm5zIHN0cmluZyBpZFxuICovXG5mdW5jdGlvbiBidWlsZChjbHVzdGVyV29ya2VySWQpIHtcblxuICAgIHZhciBzdHIgPSAnJztcblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIFJFRFVDRV9USU1FKSAqIDAuMDAxKTtcblxuICAgIGlmIChzZWNvbmRzID09PSBwcmV2aW91c1NlY29uZHMpIHtcbiAgICAgICAgY291bnRlcisrO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICBwcmV2aW91c1NlY29uZHMgPSBzZWNvbmRzO1xuICAgIH1cblxuICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIHZlcnNpb24pO1xuICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIGNsdXN0ZXJXb3JrZXJJZCk7XG4gICAgaWYgKGNvdW50ZXIgPiAwKSB7XG4gICAgICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIGNvdW50ZXIpO1xuICAgIH1cbiAgICBzdHIgPSBzdHIgKyBlbmNvZGUoYWxwaGFiZXQubG9va3VwLCBzZWNvbmRzKTtcblxuICAgIHJldHVybiBzdHI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnVpbGQ7XG5cblxuLyoqKi8gfSksXG4vKiA0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGFscGhhYmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuZnVuY3Rpb24gaXNTaG9ydElkKGlkKSB7XG4gICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09ICdzdHJpbmcnIHx8IGlkLmxlbmd0aCA8IDYgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgY2hhcmFjdGVycyA9IGFscGhhYmV0LmNoYXJhY3RlcnMoKTtcbiAgICB2YXIgbGVuID0gaWQubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47aSsrKSB7XG4gICAgICAgIGlmIChjaGFyYWN0ZXJzLmluZGV4T2YoaWRbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU2hvcnRJZDtcblxuXG4vKioqLyB9KSxcbi8qIDQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gMDtcblxuXG4vKioqLyB9KSxcbi8qIDQ2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMiksXG4gICAgZ2V0UG9pbnRBdFBvc2l0aW9uID0gX3JlcXVpcmUuZ2V0UG9pbnRBdFBvc2l0aW9uO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCksXG4gICAgZ2V0Q29ubmVjdGlvbkF0UG9zaXRpb24gPSBfcmVxdWlyZTIuZ2V0Q29ubmVjdGlvbkF0UG9zaXRpb247XG5cbnZhciBnZXRIYW5kbGVBdFBvc2l0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVzb2x2ZU9iamVjdEF0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNsb3Nlc3QgaGFuZGxlIGlmIGl0J3MgY2xvc2UgZW5vdWdoLlxuICAgKi9cbiAgdmFyIGhhbmRsZSA9IGdldEhhbmRsZUF0UG9zaXRpb24ocG9zaXRpb24pO1xuICBpZiAoaGFuZGxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiX19IQU5ETEVcIixcbiAgICAgIHZhbHVlOiBoYW5kbGVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwb2ludCBvbiBhIHBhdGggaWYgaXQncyBjbG9zZSBlbm91Z2guXG4gICAqL1xuICB2YXIgcG9pbnQgPSBnZXRQb2ludEF0UG9zaXRpb24ocG9zaXRpb24pO1xuICBpZiAocG9pbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJfX1BPSU5UXCIsXG4gICAgICB2YWx1ZTogcG9pbnRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIGNvbm5lY3Rpb24gaWYgYSBjb25uZWN0aW9uXG4gICAqIGlzIHJldHVybmVkLlxuICAgKi9cbiAgdmFyIGNvbm5lY3Rpb25BbmRQb2ludCA9IGdldENvbm5lY3Rpb25BdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKGNvbm5lY3Rpb25BbmRQb2ludCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIl9fQ09OTkVDVElPTlwiLFxuICAgICAgdmFsdWU6IGNvbm5lY3Rpb25BbmRQb2ludFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKiovIH0pLFxuLyogNDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19TeW1ib2xfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fZ2V0UmF3VGFnX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX29iamVjdFRvU3RyaW5nX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxuXG5cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHN5bVRvU3RyaW5nVGFnID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19TeW1ib2xfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXSA/IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fU3ltYm9sX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10udG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnO1xuICB9XG4gIHJldHVybiAoc3ltVG9TdHJpbmdUYWcgJiYgc3ltVG9TdHJpbmdUYWcgaW4gT2JqZWN0KHZhbHVlKSlcbiAgICA/IE9iamVjdChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2dldFJhd1RhZ19qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSh2YWx1ZSlcbiAgICA6IE9iamVjdChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX29iamVjdFRvU3RyaW5nX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHZhbHVlKTtcbn1cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChiYXNlR2V0VGFnKTtcblxuXG4vKioqLyB9KSxcbi8qIDQ4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZnJlZUdsb2JhbF9qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19mcmVlR2xvYmFsX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10gfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChyb290KTtcblxuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoZnJlZUdsb2JhbCk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0pLFxuLyogNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19TeW1ib2xfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fU3ltYm9sX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10gPyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1N5bWJvbF9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUdldFRhZ2Agd2hpY2ggaWdub3JlcyBgU3ltYm9sLnRvU3RyaW5nVGFnYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmF3IGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGdldFJhd1RhZyh2YWx1ZSkge1xuICB2YXIgaXNPd24gPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyksXG4gICAgICB0YWcgPSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG5cbiAgdHJ5IHtcbiAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHVubWFza2VkID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge31cblxuICB2YXIgcmVzdWx0ID0gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIGlmICh1bm1hc2tlZCkge1xuICAgIGlmIChpc093bikge1xuICAgICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKGdldFJhd1RhZyk7XG5cblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKG9iamVjdFRvU3RyaW5nKTtcblxuXG4vKioqLyB9KSxcbi8qIDUyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fb3ZlckFyZ19qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgZ2V0UHJvdG90eXBlID0gT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fb3ZlckFyZ19qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKShPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCk7XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoZ2V0UHJvdG90eXBlKTtcblxuXG4vKioqLyB9KSxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAob3ZlckFyZyk7XG5cblxuLyoqKi8gfSksXG4vKiA1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKGlzT2JqZWN0TGlrZSk7XG5cblxuLyoqKi8gfSksXG4vKiA1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXG5cbi8qKiovIH0pLFxuLyogNTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBtb2R1bGUpIHtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9wb255ZmlsbCA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXG52YXIgX3BvbnlmaWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BvbnlmaWxsKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgcm9vdDsgLyogZ2xvYmFsIHdpbmRvdyAqL1xuXG5cbmlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBnbG9iYWw7XG59IGVsc2UgaWYgKHRydWUpIHtcbiAgcm9vdCA9IG1vZHVsZTtcbn0gZWxzZSB7XG4gIHJvb3QgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xufVxuXG52YXIgcmVzdWx0ID0gKDAsIF9wb255ZmlsbDJbJ2RlZmF1bHQnXSkocm9vdCk7XG5leHBvcnRzWydkZWZhdWx0J10gPSByZXN1bHQ7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOCksIF9fd2VicGFja19yZXF1aXJlX18oNTcpKG1vZHVsZSkpKVxuXG4vKioqLyB9KSxcbi8qIDU3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdGlmKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xyXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcclxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn07XHJcblxuXG4vKioqLyB9KSxcbi8qIDU4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzWydkZWZhdWx0J10gPSBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGw7XG5mdW5jdGlvbiBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGwocm9vdCkge1xuXHR2YXIgcmVzdWx0O1xuXHR2YXIgX1N5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgX1N5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChfU3ltYm9sLm9ic2VydmFibGUpIHtcblx0XHRcdHJlc3VsdCA9IF9TeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gX1N5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0X1N5bWJvbC5vYnNlcnZhYmxlID0gcmVzdWx0O1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRyZXN1bHQgPSAnQEBvYnNlcnZhYmxlJztcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59O1xuXG4vKioqLyB9KSxcbi8qIDU5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSBjb21iaW5lUmVkdWNlcnM7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jcmVhdGVTdG9yZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2xvZGFzaF9lc19pc1BsYWluT2JqZWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX3V0aWxzX3dhcm5pbmdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXG5cblxuXG5mdW5jdGlvbiBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbikge1xuICB2YXIgYWN0aW9uVHlwZSA9IGFjdGlvbiAmJiBhY3Rpb24udHlwZTtcbiAgdmFyIGFjdGlvbk5hbWUgPSBhY3Rpb25UeXBlICYmICdcIicgKyBhY3Rpb25UeXBlLnRvU3RyaW5nKCkgKyAnXCInIHx8ICdhbiBhY3Rpb24nO1xuXG4gIHJldHVybiAnR2l2ZW4gYWN0aW9uICcgKyBhY3Rpb25OYW1lICsgJywgcmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkLiAnICsgJ1RvIGlnbm9yZSBhbiBhY3Rpb24sIHlvdSBtdXN0IGV4cGxpY2l0bHkgcmV0dXJuIHRoZSBwcmV2aW91cyBzdGF0ZS4gJyArICdJZiB5b3Ugd2FudCB0aGlzIHJlZHVjZXIgdG8gaG9sZCBubyB2YWx1ZSwgeW91IGNhbiByZXR1cm4gbnVsbCBpbnN0ZWFkIG9mIHVuZGVmaW5lZC4nO1xufVxuXG5mdW5jdGlvbiBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKGlucHV0U3RhdGUsIHJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSkge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY3JlYXRlU3RvcmVfX1tcImFcIiAvKiBBY3Rpb25UeXBlcyAqL10uSU5JVCA/ICdwcmVsb2FkZWRTdGF0ZSBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU3RvcmUnIDogJ3ByZXZpb3VzIHN0YXRlIHJlY2VpdmVkIGJ5IHRoZSByZWR1Y2VyJztcblxuICBpZiAocmVkdWNlcktleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdTdG9yZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcmVkdWNlci4gTWFrZSBzdXJlIHRoZSBhcmd1bWVudCBwYXNzZWQgJyArICd0byBjb21iaW5lUmVkdWNlcnMgaXMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgcmVkdWNlcnMuJztcbiAgfVxuXG4gIGlmICghT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9sb2Rhc2hfZXNfaXNQbGFpbk9iamVjdF9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKShpbnB1dFN0YXRlKSkge1xuICAgIHJldHVybiAnVGhlICcgKyBhcmd1bWVudE5hbWUgKyAnIGhhcyB1bmV4cGVjdGVkIHR5cGUgb2YgXCInICsge30udG9TdHJpbmcuY2FsbChpbnB1dFN0YXRlKS5tYXRjaCgvXFxzKFthLXp8QS1aXSspLylbMV0gKyAnXCIuIEV4cGVjdGVkIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgJyArICgna2V5czogXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCInKTtcbiAgfVxuXG4gIHZhciB1bmV4cGVjdGVkS2V5cyA9IE9iamVjdC5rZXlzKGlucHV0U3RhdGUpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFyZWR1Y2Vycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICF1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XTtcbiAgfSk7XG5cbiAgdW5leHBlY3RlZEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlW2tleV0gPSB0cnVlO1xuICB9KTtcblxuICBpZiAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAnVW5leHBlY3RlZCAnICsgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDEgPyAna2V5cycgOiAna2V5JykgKyAnICcgKyAoJ1wiJyArIHVuZXhwZWN0ZWRLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiIGZvdW5kIGluICcgKyBhcmd1bWVudE5hbWUgKyAnLiAnKSArICdFeHBlY3RlZCB0byBmaW5kIG9uZSBvZiB0aGUga25vd24gcmVkdWNlciBrZXlzIGluc3RlYWQ6ICcgKyAoJ1wiJyArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiLiBVbmV4cGVjdGVkIGtleXMgd2lsbCBiZSBpZ25vcmVkLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFJlZHVjZXJTaGFwZShyZWR1Y2Vycykge1xuICBPYmplY3Qua2V5cyhyZWR1Y2VycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHJlZHVjZXIgPSByZWR1Y2Vyc1trZXldO1xuICAgIHZhciBpbml0aWFsU3RhdGUgPSByZWR1Y2VyKHVuZGVmaW5lZCwgeyB0eXBlOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NyZWF0ZVN0b3JlX19bXCJhXCIgLyogQWN0aW9uVHlwZXMgKi9dLklOSVQgfSk7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gJyArICdJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgJyArICdleHBsaWNpdGx5IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5ICcgKyAnbm90IGJlIHVuZGVmaW5lZC4gSWYgeW91IGRvblxcJ3Qgd2FudCB0byBzZXQgYSB2YWx1ZSBmb3IgdGhpcyByZWR1Y2VyLCAnICsgJ3lvdSBjYW4gdXNlIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuJyk7XG4gICAgfVxuXG4gICAgdmFyIHR5cGUgPSAnQEByZWR1eC9QUk9CRV9VTktOT1dOX0FDVElPTl8nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpLnNwbGl0KCcnKS5qb2luKCcuJyk7XG4gICAgaWYgKHR5cGVvZiByZWR1Y2VyKHVuZGVmaW5lZCwgeyB0eXBlOiB0eXBlIH0pID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VyIFwiJyArIGtleSArICdcIiByZXR1cm5lZCB1bmRlZmluZWQgd2hlbiBwcm9iZWQgd2l0aCBhIHJhbmRvbSB0eXBlLiAnICsgKCdEb25cXCd0IHRyeSB0byBoYW5kbGUgJyArIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY3JlYXRlU3RvcmVfX1tcImFcIiAvKiBBY3Rpb25UeXBlcyAqL10uSU5JVCArICcgb3Igb3RoZXIgYWN0aW9ucyBpbiBcInJlZHV4LypcIiAnKSArICduYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSAnICsgJ2N1cnJlbnQgc3RhdGUgZm9yIGFueSB1bmtub3duIGFjdGlvbnMsIHVubGVzcyBpdCBpcyB1bmRlZmluZWQsICcgKyAnaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlICcgKyAnYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLCBidXQgY2FuIGJlIG51bGwuJyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBUdXJucyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBkaWZmZXJlbnQgcmVkdWNlciBmdW5jdGlvbnMsIGludG8gYSBzaW5nbGVcbiAqIHJlZHVjZXIgZnVuY3Rpb24uIEl0IHdpbGwgY2FsbCBldmVyeSBjaGlsZCByZWR1Y2VyLCBhbmQgZ2F0aGVyIHRoZWlyIHJlc3VsdHNcbiAqIGludG8gYSBzaW5nbGUgc3RhdGUgb2JqZWN0LCB3aG9zZSBrZXlzIGNvcnJlc3BvbmQgdG8gdGhlIGtleXMgb2YgdGhlIHBhc3NlZFxuICogcmVkdWNlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlZHVjZXJzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgY29ycmVzcG9uZCB0byBkaWZmZXJlbnRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zIHRoYXQgbmVlZCB0byBiZSBjb21iaW5lZCBpbnRvIG9uZS4gT25lIGhhbmR5IHdheSB0byBvYnRhaW5cbiAqIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzIHJlZHVjZXJzYCBzeW50YXguIFRoZSByZWR1Y2VycyBtYXkgbmV2ZXIgcmV0dXJuXG4gKiB1bmRlZmluZWQgZm9yIGFueSBhY3Rpb24uIEluc3RlYWQsIHRoZXkgc2hvdWxkIHJldHVybiB0aGVpciBpbml0aWFsIHN0YXRlXG4gKiBpZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZW0gd2FzIHVuZGVmaW5lZCwgYW5kIHRoZSBjdXJyZW50IHN0YXRlIGZvciBhbnlcbiAqIHVucmVjb2duaXplZCBhY3Rpb24uXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHJlZHVjZXIgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGV2ZXJ5IHJlZHVjZXIgaW5zaWRlIHRoZVxuICogcGFzc2VkIG9iamVjdCwgYW5kIGJ1aWxkcyBhIHN0YXRlIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlLlxuICovXG5mdW5jdGlvbiBjb21iaW5lUmVkdWNlcnMocmVkdWNlcnMpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgZmluYWxSZWR1Y2VycyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZHVjZXJLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IHJlZHVjZXJLZXlzW2ldO1xuXG4gICAgaWYgKGZhbHNlKSB7XG4gICAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdhcm5pbmcoJ05vIHJlZHVjZXIgcHJvdmlkZWQgZm9yIGtleSBcIicgKyBrZXkgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG4gICAgfVxuICB9XG4gIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlDYWNoZSA9IHZvaWQgMDtcbiAgaWYgKGZhbHNlKSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlID0ge307XG4gIH1cblxuICB2YXIgc2hhcGVBc3NlcnRpb25FcnJvciA9IHZvaWQgMDtcbiAgdHJ5IHtcbiAgICBhc3NlcnRSZWR1Y2VyU2hhcGUoZmluYWxSZWR1Y2Vycyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzaGFwZUFzc2VydGlvbkVycm9yID0gZTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiBjb21iaW5hdGlvbigpIHtcbiAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgICBpZiAoc2hhcGVBc3NlcnRpb25FcnJvcikge1xuICAgICAgdGhyb3cgc2hhcGVBc3NlcnRpb25FcnJvcjtcbiAgICB9XG5cbiAgICBpZiAoZmFsc2UpIHtcbiAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbiwgdW5leHBlY3RlZEtleUNhY2hlKTtcbiAgICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuICAgICAgICB3YXJuaW5nKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBuZXh0U3RhdGUgPSB7fTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgZmluYWxSZWR1Y2VyS2V5cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfa2V5ID0gZmluYWxSZWR1Y2VyS2V5c1tfaV07XG4gICAgICB2YXIgcmVkdWNlciA9IGZpbmFsUmVkdWNlcnNbX2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW19rZXldO1xuICAgICAgdmFyIG5leHRTdGF0ZUZvcktleSA9IHJlZHVjZXIocHJldmlvdXNTdGF0ZUZvcktleSwgYWN0aW9uKTtcbiAgICAgIGlmICh0eXBlb2YgbmV4dFN0YXRlRm9yS2V5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2UoX2tleSwgYWN0aW9uKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBuZXh0U3RhdGVbX2tleV0gPSBuZXh0U3RhdGVGb3JLZXk7XG4gICAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBuZXh0U3RhdGVGb3JLZXkgIT09IHByZXZpb3VzU3RhdGVGb3JLZXk7XG4gICAgfVxuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59XG5cbi8qKiovIH0pLFxuLyogNjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IGJpbmRBY3Rpb25DcmVhdG9ycztcbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKGFjdGlvbkNyZWF0b3IuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUdXJucyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBhY3Rpb24gY3JlYXRvcnMsIGludG8gYW4gb2JqZWN0IHdpdGggdGhlXG4gKiBzYW1lIGtleXMsIGJ1dCB3aXRoIGV2ZXJ5IGZ1bmN0aW9uIHdyYXBwZWQgaW50byBhIGBkaXNwYXRjaGAgY2FsbCBzbyB0aGV5XG4gKiBtYXkgYmUgaW52b2tlZCBkaXJlY3RseS4gVGhpcyBpcyBqdXN0IGEgY29udmVuaWVuY2UgbWV0aG9kLCBhcyB5b3UgY2FuIGNhbGxcbiAqIGBzdG9yZS5kaXNwYXRjaChNeUFjdGlvbkNyZWF0b3JzLmRvU29tZXRoaW5nKCkpYCB5b3Vyc2VsZiBqdXN0IGZpbmUuXG4gKlxuICogRm9yIGNvbnZlbmllbmNlLCB5b3UgY2FuIGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQsXG4gKiBhbmQgZ2V0IGEgZnVuY3Rpb24gaW4gcmV0dXJuLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fSBhY3Rpb25DcmVhdG9ycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBhY3Rpb25cbiAqIGNyZWF0b3IgZnVuY3Rpb25zLiBPbmUgaGFuZHkgd2F5IHRvIG9idGFpbiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhc2BcbiAqIHN5bnRheC4gWW91IG1heSBhbHNvIHBhc3MgYSBzaW5nbGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZGlzcGF0Y2ggVGhlIGBkaXNwYXRjaGAgZnVuY3Rpb24gYXZhaWxhYmxlIG9uIHlvdXIgUmVkdXhcbiAqIHN0b3JlLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbnxPYmplY3R9IFRoZSBvYmplY3QgbWltaWNraW5nIHRoZSBvcmlnaW5hbCBvYmplY3QsIGJ1dCB3aXRoXG4gKiBldmVyeSBhY3Rpb24gY3JlYXRvciB3cmFwcGVkIGludG8gdGhlIGBkaXNwYXRjaGAgY2FsbC4gSWYgeW91IHBhc3NlZCBhXG4gKiBmdW5jdGlvbiBhcyBgYWN0aW9uQ3JlYXRvcnNgLCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgYWxzbyBiZSBhIHNpbmdsZVxuICogZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9ycyhhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyAhPT0gJ29iamVjdCcgfHwgYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBY3Rpb25DcmVhdG9ycyBleHBlY3RlZCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgaW5zdGVhZCByZWNlaXZlZCAnICsgKGFjdGlvbkNyZWF0b3JzID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGFjdGlvbkNyZWF0b3JzKSArICcuICcgKyAnRGlkIHlvdSB3cml0ZSBcImltcG9ydCBBY3Rpb25DcmVhdG9ycyBmcm9tXCIgaW5zdGVhZCBvZiBcImltcG9ydCAqIGFzIEFjdGlvbkNyZWF0b3JzIGZyb21cIj8nKTtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWN0aW9uQ3JlYXRvcnMpO1xuICB2YXIgYm91bmRBY3Rpb25DcmVhdG9ycyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICB2YXIgYWN0aW9uQ3JlYXRvciA9IGFjdGlvbkNyZWF0b3JzW2tleV07XG4gICAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBib3VuZEFjdGlvbkNyZWF0b3JzW2tleV0gPSBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9yLCBkaXNwYXRjaCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBib3VuZEFjdGlvbkNyZWF0b3JzO1xufVxuXG4vKioqLyB9KSxcbi8qIDYxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSBhcHBseU1pZGRsZXdhcmU7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jb21wb3NlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBzdG9yZSBlbmhhbmNlciB0aGF0IGFwcGxpZXMgbWlkZGxld2FyZSB0byB0aGUgZGlzcGF0Y2ggbWV0aG9kXG4gKiBvZiB0aGUgUmVkdXggc3RvcmUuIFRoaXMgaXMgaGFuZHkgZm9yIGEgdmFyaWV0eSBvZiB0YXNrcywgc3VjaCBhcyBleHByZXNzaW5nXG4gKiBhc3luY2hyb25vdXMgYWN0aW9ucyBpbiBhIGNvbmNpc2UgbWFubmVyLCBvciBsb2dnaW5nIGV2ZXJ5IGFjdGlvbiBwYXlsb2FkLlxuICpcbiAqIFNlZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UgYXMgYW4gZXhhbXBsZSBvZiB0aGUgUmVkdXggbWlkZGxld2FyZS5cbiAqXG4gKiBCZWNhdXNlIG1pZGRsZXdhcmUgaXMgcG90ZW50aWFsbHkgYXN5bmNocm9ub3VzLCB0aGlzIHNob3VsZCBiZSB0aGUgZmlyc3RcbiAqIHN0b3JlIGVuaGFuY2VyIGluIHRoZSBjb21wb3NpdGlvbiBjaGFpbi5cbiAqXG4gKiBOb3RlIHRoYXQgZWFjaCBtaWRkbGV3YXJlIHdpbGwgYmUgZ2l2ZW4gdGhlIGBkaXNwYXRjaGAgYW5kIGBnZXRTdGF0ZWAgZnVuY3Rpb25zXG4gKiBhcyBuYW1lZCBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgVGhlIG1pZGRsZXdhcmUgY2hhaW4gdG8gYmUgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBzdG9yZSBlbmhhbmNlciBhcHBseWluZyB0aGUgbWlkZGxld2FyZS5cbiAqL1xuZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWlkZGxld2FyZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBtaWRkbGV3YXJlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlU3RvcmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlLCBlbmhhbmNlcikge1xuICAgICAgdmFyIHN0b3JlID0gY3JlYXRlU3RvcmUocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKTtcbiAgICAgIHZhciBfZGlzcGF0Y2ggPSBzdG9yZS5kaXNwYXRjaDtcbiAgICAgIHZhciBjaGFpbiA9IFtdO1xuXG4gICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IHN0b3JlLmdldFN0YXRlLFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmUobWlkZGxld2FyZUFQSSk7XG4gICAgICB9KTtcbiAgICAgIF9kaXNwYXRjaCA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY29tcG9zZV9fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmFwcGx5KHVuZGVmaW5lZCwgY2hhaW4pKHN0b3JlLmRpc3BhdGNoKTtcblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdG9yZSwge1xuICAgICAgICBkaXNwYXRjaDogX2Rpc3BhdGNoXG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xufVxuXG4vKioqLyB9KSxcbi8qIDYyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHshZnVuY3Rpb24oZSx0KXsgdHJ1ZT90KGV4cG9ydHMpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSx0KTp0KGUucmVkdXhMb2dnZXI9ZS5yZWR1eExvZ2dlcnx8e30pfSh0aGlzLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSx0KXtlLnN1cGVyXz10LGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pfWZ1bmN0aW9uIHIoZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImtpbmRcIix7dmFsdWU6ZSxlbnVtZXJhYmxlOiEwfSksdCYmdC5sZW5ndGgmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGF0aFwiLHt2YWx1ZTp0LGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGUsdCxyKXtuLnN1cGVyXy5jYWxsKHRoaXMsXCJFXCIsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJsaHNcIix7dmFsdWU6dCxlbnVtZXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJyaHNcIix7dmFsdWU6cixlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gbyhlLHQpe28uc3VwZXJfLmNhbGwodGhpcyxcIk5cIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInJoc1wiLHt2YWx1ZTp0LGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBpKGUsdCl7aS5zdXBlcl8uY2FsbCh0aGlzLFwiRFwiLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibGhzXCIse3ZhbHVlOnQsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIGEoZSx0LHIpe2Euc3VwZXJfLmNhbGwodGhpcyxcIkFcIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImluZGV4XCIse3ZhbHVlOnQsZW51bWVyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXRlbVwiLHt2YWx1ZTpyLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBmKGUsdCxyKXt2YXIgbj1lLnNsaWNlKChyfHx0KSsxfHxlLmxlbmd0aCk7cmV0dXJuIGUubGVuZ3RoPXQ8MD9lLmxlbmd0aCt0OnQsZS5wdXNoLmFwcGx5KGUsbiksZX1mdW5jdGlvbiB1KGUpe3ZhciB0PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6TihlKTtyZXR1cm5cIm9iamVjdFwiIT09dD90OmU9PT1NYXRoP1wibWF0aFwiOm51bGw9PT1lP1wibnVsbFwiOkFycmF5LmlzQXJyYXkoZSk/XCJhcnJheVwiOlwiW29iamVjdCBEYXRlXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpP1wiZGF0ZVwiOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUudG9TdHJpbmcmJi9eXFwvLipcXC8vLnRlc3QoZS50b1N0cmluZygpKT9cInJlZ2V4cFwiOlwib2JqZWN0XCJ9ZnVuY3Rpb24gbChlLHQscixjLHMsZCxwKXtzPXN8fFtdLHA9cHx8W107dmFyIGc9cy5zbGljZSgwKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZCl7aWYoYyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmYyhnLGQpKXJldHVybjtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjP1widW5kZWZpbmVkXCI6TihjKSkpe2lmKGMucHJlZmlsdGVyJiZjLnByZWZpbHRlcihnLGQpKXJldHVybjtpZihjLm5vcm1hbGl6ZSl7dmFyIGg9Yy5ub3JtYWxpemUoZyxkLGUsdCk7aCYmKGU9aFswXSx0PWhbMV0pfX19Zy5wdXNoKGQpfVwicmVnZXhwXCI9PT11KGUpJiZcInJlZ2V4cFwiPT09dSh0KSYmKGU9ZS50b1N0cmluZygpLHQ9dC50b1N0cmluZygpKTt2YXIgeT1cInVuZGVmaW5lZFwiPT10eXBlb2YgZT9cInVuZGVmaW5lZFwiOk4oZSksdj1cInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOk4odCksYj1cInVuZGVmaW5lZFwiIT09eXx8cCYmcFtwLmxlbmd0aC0xXS5saHMmJnBbcC5sZW5ndGgtMV0ubGhzLmhhc093blByb3BlcnR5KGQpLG09XCJ1bmRlZmluZWRcIiE9PXZ8fHAmJnBbcC5sZW5ndGgtMV0ucmhzJiZwW3AubGVuZ3RoLTFdLnJocy5oYXNPd25Qcm9wZXJ0eShkKTtpZighYiYmbSlyKG5ldyBvKGcsdCkpO2Vsc2UgaWYoIW0mJmIpcihuZXcgaShnLGUpKTtlbHNlIGlmKHUoZSkhPT11KHQpKXIobmV3IG4oZyxlLHQpKTtlbHNlIGlmKFwiZGF0ZVwiPT09dShlKSYmZS10IT09MClyKG5ldyBuKGcsZSx0KSk7ZWxzZSBpZihcIm9iamVjdFwiPT09eSYmbnVsbCE9PWUmJm51bGwhPT10KWlmKHAuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxocz09PWV9KS5sZW5ndGgpZSE9PXQmJnIobmV3IG4oZyxlLHQpKTtlbHNle2lmKHAucHVzaCh7bGhzOmUscmhzOnR9KSxBcnJheS5pc0FycmF5KGUpKXt2YXIgdztlLmxlbmd0aDtmb3Iodz0wO3c8ZS5sZW5ndGg7dysrKXc+PXQubGVuZ3RoP3IobmV3IGEoZyx3LG5ldyBpKHZvaWQgMCxlW3ddKSkpOmwoZVt3XSx0W3ddLHIsYyxnLHcscCk7Zm9yKDt3PHQubGVuZ3RoOylyKG5ldyBhKGcsdyxuZXcgbyh2b2lkIDAsdFt3KytdKSkpfWVsc2V7dmFyIHg9T2JqZWN0LmtleXMoZSksUz1PYmplY3Qua2V5cyh0KTt4LmZvckVhY2goZnVuY3Rpb24obixvKXt2YXIgaT1TLmluZGV4T2Yobik7aT49MD8obChlW25dLHRbbl0scixjLGcsbixwKSxTPWYoUyxpKSk6bChlW25dLHZvaWQgMCxyLGMsZyxuLHApfSksUy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2wodm9pZCAwLHRbZV0scixjLGcsZSxwKX0pfXAubGVuZ3RoPXAubGVuZ3RoLTF9ZWxzZSBlIT09dCYmKFwibnVtYmVyXCI9PT15JiZpc05hTihlKSYmaXNOYU4odCl8fHIobmV3IG4oZyxlLHQpKSl9ZnVuY3Rpb24gYyhlLHQscixuKXtyZXR1cm4gbj1ufHxbXSxsKGUsdCxmdW5jdGlvbihlKXtlJiZuLnB1c2goZSl9LHIpLG4ubGVuZ3RoP246dm9pZCAwfWZ1bmN0aW9uIHMoZSx0LHIpe2lmKHIucGF0aCYmci5wYXRoLmxlbmd0aCl7dmFyIG4sbz1lW3RdLGk9ci5wYXRoLmxlbmd0aC0xO2ZvcihuPTA7bjxpO24rKylvPW9bci5wYXRoW25dXTtzd2l0Y2goci5raW5kKXtjYXNlXCJBXCI6cyhvW3IucGF0aFtuXV0sci5pbmRleCxyLml0ZW0pO2JyZWFrO2Nhc2VcIkRcIjpkZWxldGUgb1tyLnBhdGhbbl1dO2JyZWFrO2Nhc2VcIkVcIjpjYXNlXCJOXCI6b1tyLnBhdGhbbl1dPXIucmhzfX1lbHNlIHN3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpzKGVbdF0sci5pbmRleCxyLml0ZW0pO2JyZWFrO2Nhc2VcIkRcIjplPWYoZSx0KTticmVhaztjYXNlXCJFXCI6Y2FzZVwiTlwiOmVbdF09ci5yaHN9cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQscil7aWYoZSYmdCYmciYmci5raW5kKXtmb3IodmFyIG49ZSxvPS0xLGk9ci5wYXRoP3IucGF0aC5sZW5ndGgtMTowOysrbzxpOylcInVuZGVmaW5lZFwiPT10eXBlb2YgbltyLnBhdGhbb11dJiYobltyLnBhdGhbb11dPVwibnVtYmVyXCI9PXR5cGVvZiByLnBhdGhbb10/W106e30pLG49bltyLnBhdGhbb11dO3N3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpzKHIucGF0aD9uW3IucGF0aFtvXV06bixyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmRlbGV0ZSBuW3IucGF0aFtvXV07YnJlYWs7Y2FzZVwiRVwiOmNhc2VcIk5cIjpuW3IucGF0aFtvXV09ci5yaHN9fX1mdW5jdGlvbiBwKGUsdCxyKXtpZihyLnBhdGgmJnIucGF0aC5sZW5ndGgpe3ZhciBuLG89ZVt0XSxpPXIucGF0aC5sZW5ndGgtMTtmb3Iobj0wO248aTtuKyspbz1vW3IucGF0aFtuXV07c3dpdGNoKHIua2luZCl7Y2FzZVwiQVwiOnAob1tyLnBhdGhbbl1dLHIuaW5kZXgsci5pdGVtKTticmVhaztjYXNlXCJEXCI6b1tyLnBhdGhbbl1dPXIubGhzO2JyZWFrO2Nhc2VcIkVcIjpvW3IucGF0aFtuXV09ci5saHM7YnJlYWs7Y2FzZVwiTlwiOmRlbGV0ZSBvW3IucGF0aFtuXV19fWVsc2Ugc3dpdGNoKHIua2luZCl7Y2FzZVwiQVwiOnAoZVt0XSxyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmVbdF09ci5saHM7YnJlYWs7Y2FzZVwiRVwiOmVbdF09ci5saHM7YnJlYWs7Y2FzZVwiTlwiOmU9ZihlLHQpfXJldHVybiBlfWZ1bmN0aW9uIGcoZSx0LHIpe2lmKGUmJnQmJnImJnIua2luZCl7dmFyIG4sbyxpPWU7Zm9yKG89ci5wYXRoLmxlbmd0aC0xLG49MDtuPG87bisrKVwidW5kZWZpbmVkXCI9PXR5cGVvZiBpW3IucGF0aFtuXV0mJihpW3IucGF0aFtuXV09e30pLGk9aVtyLnBhdGhbbl1dO3N3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpwKGlbci5wYXRoW25dXSxyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmlbci5wYXRoW25dXT1yLmxoczticmVhaztjYXNlXCJFXCI6aVtyLnBhdGhbbl1dPXIubGhzO2JyZWFrO2Nhc2VcIk5cIjpkZWxldGUgaVtyLnBhdGhbbl1dfX19ZnVuY3Rpb24gaChlLHQscil7aWYoZSYmdCl7dmFyIG49ZnVuY3Rpb24obil7ciYmIXIoZSx0LG4pfHxkKGUsdCxuKX07bChlLHQsbil9fWZ1bmN0aW9uIHkoZSl7cmV0dXJuXCJjb2xvcjogXCIrRltlXS5jb2xvcitcIjsgZm9udC13ZWlnaHQ6IGJvbGRcIn1mdW5jdGlvbiB2KGUpe3ZhciB0PWUua2luZCxyPWUucGF0aCxuPWUubGhzLG89ZS5yaHMsaT1lLmluZGV4LGE9ZS5pdGVtO3N3aXRjaCh0KXtjYXNlXCJFXCI6cmV0dXJuW3Iuam9pbihcIi5cIiksbixcIuKGklwiLG9dO2Nhc2VcIk5cIjpyZXR1cm5bci5qb2luKFwiLlwiKSxvXTtjYXNlXCJEXCI6cmV0dXJuW3Iuam9pbihcIi5cIildO2Nhc2VcIkFcIjpyZXR1cm5bci5qb2luKFwiLlwiKStcIltcIitpK1wiXVwiLGFdO2RlZmF1bHQ6cmV0dXJuW119fWZ1bmN0aW9uIGIoZSx0LHIsbil7dmFyIG89YyhlLHQpO3RyeXtuP3IuZ3JvdXBDb2xsYXBzZWQoXCJkaWZmXCIpOnIuZ3JvdXAoXCJkaWZmXCIpfWNhdGNoKGUpe3IubG9nKFwiZGlmZlwiKX1vP28uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLmtpbmQsbj12KGUpO3IubG9nLmFwcGx5KHIsW1wiJWMgXCIrRlt0XS50ZXh0LHkodCldLmNvbmNhdChQKG4pKSl9KTpyLmxvZyhcIuKAlOKAlCBubyBkaWZmIOKAlOKAlFwiKTt0cnl7ci5ncm91cEVuZCgpfWNhdGNoKGUpe3IubG9nKFwi4oCU4oCUIGRpZmYgZW5kIOKAlOKAlCBcIil9fWZ1bmN0aW9uIG0oZSx0LHIsbil7c3dpdGNoKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6TihlKSl7Y2FzZVwib2JqZWN0XCI6cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVtuXT9lW25dLmFwcGx5KGUsUChyKSk6ZVtuXTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiBlKHQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ZS50aW1lc3RhbXAscj1lLmR1cmF0aW9uO3JldHVybiBmdW5jdGlvbihlLG4sbyl7dmFyIGk9W1wiYWN0aW9uXCJdO3JldHVybiBpLnB1c2goXCIlY1wiK1N0cmluZyhlLnR5cGUpKSx0JiZpLnB1c2goXCIlY0AgXCIrbiksciYmaS5wdXNoKFwiJWMoaW4gXCIrby50b0ZpeGVkKDIpK1wiIG1zKVwiKSxpLmpvaW4oXCIgXCIpfX1mdW5jdGlvbiB4KGUsdCl7dmFyIHI9dC5sb2dnZXIsbj10LmFjdGlvblRyYW5zZm9ybWVyLG89dC50aXRsZUZvcm1hdHRlcixpPXZvaWQgMD09PW8/dyh0KTpvLGE9dC5jb2xsYXBzZWQsZj10LmNvbG9ycyx1PXQubGV2ZWwsbD10LmRpZmYsYz1cInVuZGVmaW5lZFwiPT10eXBlb2YgdC50aXRsZUZvcm1hdHRlcjtlLmZvckVhY2goZnVuY3Rpb24obyxzKXt2YXIgZD1vLnN0YXJ0ZWQscD1vLnN0YXJ0ZWRUaW1lLGc9by5hY3Rpb24saD1vLnByZXZTdGF0ZSx5PW8uZXJyb3Isdj1vLnRvb2ssdz1vLm5leHRTdGF0ZSx4PWVbcysxXTt4JiYodz14LnByZXZTdGF0ZSx2PXguc3RhcnRlZC1kKTt2YXIgUz1uKGcpLGs9XCJmdW5jdGlvblwiPT10eXBlb2YgYT9hKGZ1bmN0aW9uKCl7cmV0dXJuIHd9LGcsbyk6YSxqPUQocCksRT1mLnRpdGxlP1wiY29sb3I6IFwiK2YudGl0bGUoUykrXCI7XCI6XCJcIixBPVtcImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjtcIl07QS5wdXNoKEUpLHQudGltZXN0YW1wJiZBLnB1c2goXCJjb2xvcjogZ3JheTsgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7XCIpLHQuZHVyYXRpb24mJkEucHVzaChcImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjtcIik7dmFyIE89aShTLGosdik7dHJ5e2s/Zi50aXRsZSYmYz9yLmdyb3VwQ29sbGFwc2VkLmFwcGx5KHIsW1wiJWMgXCIrT10uY29uY2F0KEEpKTpyLmdyb3VwQ29sbGFwc2VkKE8pOmYudGl0bGUmJmM/ci5ncm91cC5hcHBseShyLFtcIiVjIFwiK09dLmNvbmNhdChBKSk6ci5ncm91cChPKX1jYXRjaChlKXtyLmxvZyhPKX12YXIgTj1tKHUsUyxbaF0sXCJwcmV2U3RhdGVcIiksUD1tKHUsUyxbU10sXCJhY3Rpb25cIiksQz1tKHUsUyxbeSxoXSxcImVycm9yXCIpLEY9bSh1LFMsW3ddLFwibmV4dFN0YXRlXCIpO2lmKE4paWYoZi5wcmV2U3RhdGUpe3ZhciBMPVwiY29sb3I6IFwiK2YucHJldlN0YXRlKGgpK1wiOyBmb250LXdlaWdodDogYm9sZFwiO3JbTl0oXCIlYyBwcmV2IHN0YXRlXCIsTCxoKX1lbHNlIHJbTl0oXCJwcmV2IHN0YXRlXCIsaCk7aWYoUClpZihmLmFjdGlvbil7dmFyIFQ9XCJjb2xvcjogXCIrZi5hY3Rpb24oUykrXCI7IGZvbnQtd2VpZ2h0OiBib2xkXCI7cltQXShcIiVjIGFjdGlvbiAgICBcIixULFMpfWVsc2UgcltQXShcImFjdGlvbiAgICBcIixTKTtpZih5JiZDKWlmKGYuZXJyb3Ipe3ZhciBNPVwiY29sb3I6IFwiK2YuZXJyb3IoeSxoKStcIjsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI7cltDXShcIiVjIGVycm9yICAgICBcIixNLHkpfWVsc2UgcltDXShcImVycm9yICAgICBcIix5KTtpZihGKWlmKGYubmV4dFN0YXRlKXt2YXIgXz1cImNvbG9yOiBcIitmLm5leHRTdGF0ZSh3KStcIjsgZm9udC13ZWlnaHQ6IGJvbGRcIjtyW0ZdKFwiJWMgbmV4dCBzdGF0ZVwiLF8sdyl9ZWxzZSByW0ZdKFwibmV4dCBzdGF0ZVwiLHcpO2wmJmIoaCx3LHIsayk7dHJ5e3IuZ3JvdXBFbmQoKX1jYXRjaChlKXtyLmxvZyhcIuKAlOKAlCBsb2cgZW5kIOKAlOKAlFwiKX19KX1mdW5jdGlvbiBTKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHQ9T2JqZWN0LmFzc2lnbih7fSxMLGUpLHI9dC5sb2dnZXIsbj10LnN0YXRlVHJhbnNmb3JtZXIsbz10LmVycm9yVHJhbnNmb3JtZXIsaT10LnByZWRpY2F0ZSxhPXQubG9nRXJyb3JzLGY9dC5kaWZmUHJlZGljYXRlO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiByKXJldHVybiBmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9fX07aWYoZS5nZXRTdGF0ZSYmZS5kaXNwYXRjaClyZXR1cm4gY29uc29sZS5lcnJvcihcIltyZWR1eC1sb2dnZXJdIHJlZHV4LWxvZ2dlciBub3QgaW5zdGFsbGVkLiBNYWtlIHN1cmUgdG8gcGFzcyBsb2dnZXIgaW5zdGFuY2UgYXMgbWlkZGxld2FyZTpcXG4vLyBMb2dnZXIgd2l0aCBkZWZhdWx0IG9wdGlvbnNcXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdyZWR1eC1sb2dnZXInXFxuY29uc3Qgc3RvcmUgPSBjcmVhdGVTdG9yZShcXG4gIHJlZHVjZXIsXFxuICBhcHBseU1pZGRsZXdhcmUobG9nZ2VyKVxcbilcXG4vLyBPciB5b3UgY2FuIGNyZWF0ZSB5b3VyIG93biBsb2dnZXIgd2l0aCBjdXN0b20gb3B0aW9ucyBodHRwOi8vYml0Lmx5L3JlZHV4LWxvZ2dlci1vcHRpb25zXFxuaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXFxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcXG4gIC8vIC4uLm9wdGlvbnNcXG59KTtcXG5jb25zdCBzdG9yZSA9IGNyZWF0ZVN0b3JlKFxcbiAgcmVkdWNlcixcXG4gIGFwcGx5TWlkZGxld2FyZShsb2dnZXIpXFxuKVxcblwiKSxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9fX07dmFyIHU9W107cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0U3RhdGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihsKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYhaShyLGwpKXJldHVybiBlKGwpO3ZhciBjPXt9O3UucHVzaChjKSxjLnN0YXJ0ZWQ9Ty5ub3coKSxjLnN0YXJ0ZWRUaW1lPW5ldyBEYXRlLGMucHJldlN0YXRlPW4ocigpKSxjLmFjdGlvbj1sO3ZhciBzPXZvaWQgMDtpZihhKXRyeXtzPWUobCl9Y2F0Y2goZSl7Yy5lcnJvcj1vKGUpfWVsc2Ugcz1lKGwpO2MudG9vaz1PLm5vdygpLWMuc3RhcnRlZCxjLm5leHRTdGF0ZT1uKHIoKSk7dmFyIGQ9dC5kaWZmJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBmP2YocixsKTp0LmRpZmY7aWYoeCh1LE9iamVjdC5hc3NpZ24oe30sdCx7ZGlmZjpkfSkpLHUubGVuZ3RoPTAsYy5lcnJvcil0aHJvdyBjLmVycm9yO3JldHVybiBzfX19fXZhciBrLGosRT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgQXJyYXkodCsxKS5qb2luKGUpfSxBPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEUoXCIwXCIsdC1lLnRvU3RyaW5nKCkubGVuZ3RoKStlfSxEPWZ1bmN0aW9uKGUpe3JldHVybiBBKGUuZ2V0SG91cnMoKSwyKStcIjpcIitBKGUuZ2V0TWludXRlcygpLDIpK1wiOlwiK0EoZS5nZXRTZWNvbmRzKCksMikrXCIuXCIrQShlLmdldE1pbGxpc2Vjb25kcygpLDMpfSxPPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBwZXJmb3JtYW5jZSYmbnVsbCE9PXBlcmZvcm1hbmNlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2U6RGF0ZSxOPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9LFA9ZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAscj1BcnJheShlLmxlbmd0aCk7dDxlLmxlbmd0aDt0Kyspclt0XT1lW3RdO3JldHVybiByfXJldHVybiBBcnJheS5mcm9tKGUpfSxDPVtdO2s9XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZ2xvYmFsP1widW5kZWZpbmVkXCI6TihnbG9iYWwpKSYmZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxqPWsuRGVlcERpZmYsaiYmQy5wdXNoKGZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGomJmsuRGVlcERpZmY9PT1jJiYoay5EZWVwRGlmZj1qLGo9dm9pZCAwKX0pLHQobixyKSx0KG8sciksdChpLHIpLHQoYSxyKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjLHtkaWZmOnt2YWx1ZTpjLGVudW1lcmFibGU6ITB9LG9ic2VydmFibGVEaWZmOnt2YWx1ZTpsLGVudW1lcmFibGU6ITB9LGFwcGx5RGlmZjp7dmFsdWU6aCxlbnVtZXJhYmxlOiEwfSxhcHBseUNoYW5nZTp7dmFsdWU6ZCxlbnVtZXJhYmxlOiEwfSxyZXZlcnRDaGFuZ2U6e3ZhbHVlOmcsZW51bWVyYWJsZTohMH0saXNDb25mbGljdDp7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygan0sZW51bWVyYWJsZTohMH0sbm9Db25mbGljdDp7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gQyYmKEMuZm9yRWFjaChmdW5jdGlvbihlKXtlKCl9KSxDPW51bGwpLGN9LGVudW1lcmFibGU6ITB9fSk7dmFyIEY9e0U6e2NvbG9yOlwiIzIxOTZGM1wiLHRleHQ6XCJDSEFOR0VEOlwifSxOOntjb2xvcjpcIiM0Q0FGNTBcIix0ZXh0OlwiQURERUQ6XCJ9LEQ6e2NvbG9yOlwiI0Y0NDMzNlwiLHRleHQ6XCJERUxFVEVEOlwifSxBOntjb2xvcjpcIiMyMTk2RjNcIix0ZXh0OlwiQVJSQVk6XCJ9fSxMPXtsZXZlbDpcImxvZ1wiLGxvZ2dlcjpjb25zb2xlLGxvZ0Vycm9yczohMCxjb2xsYXBzZWQ6dm9pZCAwLHByZWRpY2F0ZTp2b2lkIDAsZHVyYXRpb246ITEsdGltZXN0YW1wOiEwLHN0YXRlVHJhbnNmb3JtZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGFjdGlvblRyYW5zZm9ybWVyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxlcnJvclRyYW5zZm9ybWVyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxjb2xvcnM6e3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJpbmhlcml0XCJ9LHByZXZTdGF0ZTpmdW5jdGlvbigpe3JldHVyblwiIzlFOUU5RVwifSxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5cIiMwM0E5RjRcIn0sbmV4dFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuXCIjNENBRjUwXCJ9LGVycm9yOmZ1bmN0aW9uKCl7cmV0dXJuXCIjRjIwNDA0XCJ9fSxkaWZmOiExLGRpZmZQcmVkaWNhdGU6dm9pZCAwLHRyYW5zZm9ybWVyOnZvaWQgMH0sVD1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSx0PWUuZGlzcGF0Y2gscj1lLmdldFN0YXRlO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHI/UygpKHtkaXNwYXRjaDp0LGdldFN0YXRlOnJ9KTp2b2lkIGNvbnNvbGUuZXJyb3IoXCJcXG5bcmVkdXgtbG9nZ2VyIHYzXSBCUkVBS0lORyBDSEFOR0VcXG5bcmVkdXgtbG9nZ2VyIHYzXSBTaW5jZSAzLjAuMCByZWR1eC1sb2dnZXIgZXhwb3J0cyBieSBkZWZhdWx0IGxvZ2dlciB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXFxuW3JlZHV4LWxvZ2dlciB2M10gQ2hhbmdlXFxuW3JlZHV4LWxvZ2dlciB2M10gaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXFxuW3JlZHV4LWxvZ2dlciB2M10gdG9cXG5bcmVkdXgtbG9nZ2VyIHYzXSBpbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tICdyZWR1eC1sb2dnZXInXFxuXCIpfTtlLmRlZmF1bHRzPUwsZS5jcmVhdGVMb2dnZXI9UyxlLmxvZ2dlcj1ULGUuZGVmYXVsdD1ULE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSkpXG5cbi8qKiovIH0pLFxuLyogNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCksXG4gICAgY29tYmluZVJlZHVjZXJzID0gX3JlcXVpcmUuY29tYmluZVJlZHVjZXJzO1xuXG52YXIgaGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xudmFyIHBvaW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xudmFyIHNlbGVjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpO1xudmFyIGNvbm5lY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7XG52YXIgaGFuZGxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbWJpbmVSZWR1Y2Vycyh7XG4gIGhpc3Rvcnk6IGhpc3RvcnksXG4gIHBvaW50czogcG9pbnRzLFxuICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zLFxuICBoYW5kbGVzOiBoYW5kbGVzXG59KTtcblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIGRlZmF1bHRTdGF0ZSA9IHtcbiAgaGlzdG9yeTogW10sXG4gIGZ1dHVyZTogW11cbn07XG5cbnZhciBtYXhMZW4gPSA1MDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGRlZmF1bHRTdGF0ZTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIkNMRUFSX0hJU1RPUllcIjpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRTdGF0ZTtcbiAgICAgIH1cbiAgICBjYXNlIFwiQUREX0FDVElPTl9UT19ISVNUT1JZXCI6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgICBoaXN0b3J5OiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLmhpc3Rvcnkuc2xpY2Uoc3RhdGUuaGlzdG9yeS5sZW5ndGggPT09IG1heExlbiA/IDEgOiAwKSksIFthY3Rpb24ucGF5bG9hZF0pLFxuICAgICAgICAgIGZ1dHVyZTogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgY2FzZSBcIlVORE9cIjpcbiAgICAgIHtcbiAgICAgICAgaWYgKHN0YXRlLmhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgICAgICBmdXR1cmU6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGUuZnV0dXJlKSwgW3N0YXRlLmhpc3Rvcnlbc3RhdGUuaGlzdG9yeS5sZW5ndGggLSAxXV0pLFxuICAgICAgICAgIGhpc3Rvcnk6IHN0YXRlLmhpc3Rvcnkuc3BsaWNlKDAsIHN0YXRlLmhpc3RvcnkubGVuZ3RoIC0gMSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgY2FzZSBcIlJFRE9cIjpcbiAgICAgIHtcbiAgICAgICAgaWYgKHN0YXRlLmZ1dHVyZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgICAgIGhpc3Rvcnk6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGUuaGlzdG9yeSksIFtzdGF0ZS5mdXR1cmVbc3RhdGUuZnV0dXJlLmxlbmd0aCAtIDFdXSksXG4gICAgICAgICAgZnV0dXJlOiBzdGF0ZS5mdXR1cmUuc3BsaWNlKDAsIHN0YXRlLmZ1dHVyZS5sZW5ndGggLSAxKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlLnR5cGVzO1xuXG52YXIgZGVmYXVsdFN0YXRlID0ge1xuICBcImFcIjoge1xuICAgIHg6IDQwLFxuICAgIHk6IDQwXG4gIH0sXG4gIFwiYlwiOiB7XG4gICAgeDogNDAwLFxuICAgIHk6IDIwMFxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlZHVjZXIoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZGVmYXVsdFN0YXRlO1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwiTU9WRVwiOlxuICAgICAge1xuICAgICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYWN0aW9uJHBheWxvYWQuc2VsZWN0aW9uLFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2UgPSBfYWN0aW9uJHBheWxvYWQucG9zaXRpb25DaGFuZ2U7XG5cbiAgICAgICAgdmFyIHRvTW92ZSA9IHNlbGVjdGlvblt0eXBlcy5QT0lOVF07XG5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRvTW92ZSkpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3U3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9Nb3ZlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgdmFyIGlkID0gdG9Nb3ZlW2ldO1xuICAgICAgICAgIHZhciBfc3RhdGUkaWQgPSBzdGF0ZVtpZF0sXG4gICAgICAgICAgICAgIHggPSBfc3RhdGUkaWQueCxcbiAgICAgICAgICAgICAgeSA9IF9zdGF0ZSRpZC55O1xuXG4gICAgICAgICAgbmV3U3RhdGVbaWRdID0gX2V4dGVuZHMoe30sIHN0YXRlW2lkXSwge1xuICAgICAgICAgICAgeDogeCArIHBvc2l0aW9uQ2hhbmdlLngsXG4gICAgICAgICAgICB5OiB5ICsgcG9zaXRpb25DaGFuZ2UueVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfVxuICAgIGNhc2UgXCJBRERfUE9JTlRcIjpcbiAgICAgIHtcbiAgICAgICAgdmFyIF9hY3Rpb24kcGF5bG9hZDIgPSBhY3Rpb24ucGF5bG9hZCxcbiAgICAgICAgICAgIF94MiA9IF9hY3Rpb24kcGF5bG9hZDIueCxcbiAgICAgICAgICAgIF95ID0gX2FjdGlvbiRwYXlsb2FkMi55LFxuICAgICAgICAgICAgX2lkID0gX2FjdGlvbiRwYXlsb2FkMi5pZDtcblxuICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCBfZGVmaW5lUHJvcGVydHkoe30sIF9pZCwgeyB4OiBfeDIsIHk6IF95IH0pKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiREVMRVRFX1BPSU5UXCI6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZSkucmVkdWNlKGZ1bmN0aW9uIChuZXdTdGF0ZSwga2V5KSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gYWN0aW9uLnBheWxvYWQpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBzdGF0ZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogNjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBkZWZhdWx0U3RhdGUgPSB7fTtcblxuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGUgaWQgbmVlZHMgdG8gYmUgYWRkZWQvcmVtb3ZlZCBpcyBjaGVja2VkXG4gKiBieSB0aGUgc2VsZWN0aW9uLmpzIG1ldGhvZHMuXG4gKiBUaGlzIHJlZHVjZXIgYXNzdW1lcyBpZHMgYmVpbmcgcmVtb3ZlZCBleGlzdCBpbiB0aGUgYXJyYXlcbiAqIGFuZCBpZHMgdGhhdCBhcmUgYmVpbmcgYWRkZWQgZG9uJ3QuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVkdWNlcigpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBkZWZhdWx0U3RhdGU7XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgXCJBRERfU0VMRUNUSU9OX1RZUEVcIjpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwgX2RlZmluZVByb3BlcnR5KHt9LCBhY3Rpb24ucGF5bG9hZCwgW10pKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiQUREX1RPX1NFTEVDVElPTlwiOlxuICAgICAge1xuICAgICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQsXG4gICAgICAgICAgICBpZCA9IF9hY3Rpb24kcGF5bG9hZC5pZCxcbiAgICAgICAgICAgIHR5cGUgPSBfYWN0aW9uJHBheWxvYWQudHlwZTtcblxuICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0YXRlLCBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGUsIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGVbdHlwZV0pLCBbaWRdKSkpO1xuICAgICAgfVxuICAgIGNhc2UgXCJSRU1PVkVfRlJPTV9TRUxFQ1RJT05cIjpcbiAgICAgIHtcbiAgICAgICAgdmFyIF9hY3Rpb24kcGF5bG9hZDIgPSBhY3Rpb24ucGF5bG9hZCxcbiAgICAgICAgICAgIF90eXBlID0gX2FjdGlvbiRwYXlsb2FkMi50eXBlLFxuICAgICAgICAgICAgaXRlbUluZGV4ID0gX2FjdGlvbiRwYXlsb2FkMi5pdGVtSW5kZXg7XG5cbiAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwgX2RlZmluZVByb3BlcnR5KHt9LCBfdHlwZSwgc3RhdGVbX3R5cGVdLmZpbHRlcihmdW5jdGlvbiAoaWQsIGkpIHtcbiAgICAgICAgICByZXR1cm4gaSAhPT0gaXRlbUluZGV4O1xuICAgICAgICB9KSkpO1xuICAgICAgfVxuICAgIGNhc2UgXCJDTEVBUl9TRUxFQ1RJT05cIjpcbiAgICAgIHtcbiAgICAgICAgLy8gV2UgdHVybiBldmVyeSBhcnJheSBpbnRvIGEgbmV3IGVtcHR5IGFycmF5IVxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7fTtcblxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHN0YXRlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgbmV3U3RhdGVba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgIH1cbiAgICBjYXNlIFwiUkVTVE9SRV9TRUxFQ1RJT05cIjpcbiAgICAgIHtcbiAgICAgICAgLy8gV2Ugc2ltcGx5IHBhc3MgaW4gdGhlIG9sZCBzdGF0ZS4uLlxuICAgICAgICB2YXIgX25ld1N0YXRlID0gX2V4dGVuZHMoe30sIGFjdGlvbi5wYXlsb2FkKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogLi4uYnV0IG5vdCBzbyBmYXN0IGJ1Y2tvLCB3ZSBtaWdodCBoYXZlIG5ldyB0eXBlcyBpbiB0aGVcbiAgICAgICAgICogdmFsaWRhdGVkIHR5cGVzIHRoYXQgZGlkbid0IGV4aXN0cyBpbiB0aGUgc3RhdGUgYmVpbmdcbiAgICAgICAgICogcmVzdG9yZWQuXG4gICAgICAgICAqIFRvIGFtZW5kIHRoYXQgd2Ugc2ltcGx5IGFkZCBhcnJheXMgZm9yIHRoZSBuZXcgdmFsaWRhdGVkXG4gICAgICAgICAqIHR5cGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIF9rZXlzID0gT2JqZWN0LmtleXMoc3RhdGUpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX2tleXMubGVuZ3RoOyBfaSArPSAxKSB7XG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KF9uZXdTdGF0ZVtfa2V5c1tfaV1dKSkge1xuICAgICAgICAgICAgX25ld1N0YXRlW19rZXlzW19pXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX25ld1N0YXRlO1xuICAgICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSxcbiAgICB0b0Nvbm5lY3Rpb25JZCA9IF9yZXF1aXJlLnRvQ29ubmVjdGlvbklkO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCksXG4gICAgY2hlY2tWYWxpZENvbm5lY3Rpb24gPSBfcmVxdWlyZTIuY2hlY2tWYWxpZENvbm5lY3Rpb24sXG4gICAgY2hlY2tJZEFycmF5ID0gX3JlcXVpcmUyLmNoZWNrSWRBcnJheTtcblxudmFyIGEgPSBcImFcIjtcbnZhciBiID0gXCJiXCI7XG52YXIgeCA9IFwieFwiO1xudmFyIHkgPSBcInlcIjtcblxudmFyIGRlZmF1bHRTdGF0ZSA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgdG9Db25uZWN0aW9uSWQoYSwgYiksIHtcbiAgaWQ6IHRvQ29ubmVjdGlvbklkKGEsIGIpLFxuICBwb2ludHM6IFthLCBiXSxcbiAgaGFuZGxlczogW3gsIHldXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZWR1Y2VyKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGRlZmF1bHRTdGF0ZTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIkFERF9DT05ORUNUSU9OXCI6XG4gICAgICB7XG4gICAgICAgIGNoZWNrVmFsaWRDb25uZWN0aW9uKGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgdmFyIGlkID0gYWN0aW9uLnBheWxvYWQuaWQ7XG5cblxuICAgICAgICBpZiAoc3RhdGVbaWRdKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgYWxyZWFkeSBhIGNvbm5lY3Rpb24gYnkgdGhlIGlkICdcIiArIGlkICsgXCInXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwgX2RlZmluZVByb3BlcnR5KHt9LCBpZCwgYWN0aW9uLnBheWxvYWQpKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiUkVQTEFDRV9DT05ORUNUSU9OX1BPSU5UX0lEU1wiOlxuICAgICAge1xuICAgICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQsXG4gICAgICAgICAgICBfaWQgPSBfYWN0aW9uJHBheWxvYWQuaWQsXG4gICAgICAgICAgICBoYW5kbGVzID0gX2FjdGlvbiRwYXlsb2FkLmhhbmRsZXMsXG4gICAgICAgICAgICBwb2ludHMgPSBfYWN0aW9uJHBheWxvYWQucG9pbnRzO1xuXG5cbiAgICAgICAgaWYgKCFzdGF0ZVtfaWRdKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29ubmVjdGlvbiBieSBpZCAnXCIgKyBfaWQgKyBcIicgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhbmRsZXMpIHtcbiAgICAgICAgICBjaGVja0lkQXJyYXkoaGFuZGxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50cykge1xuICAgICAgICAgIGNoZWNrSWRBcnJheShwb2ludHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBzdGF0ZSwgX2RlZmluZVByb3BlcnR5KHt9LCBfaWQsIF9leHRlbmRzKHt9LCBzdGF0ZVtfaWRdLCB7XG4gICAgICAgICAgaGFuZGxlczogaGFuZGxlcyB8fCBzdGF0ZVtfaWRdLmhhbmRsZXMsXG4gICAgICAgICAgcG9pbnRzOiBwb2ludHMgfHwgc3RhdGVbX2lkXS5wb2ludHNcbiAgICAgICAgfSkpKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiREVMRVRFX0NPTk5FQ1RJT05cIjpcbiAgICAgIHtcbiAgICAgICAgdmFyIF9pZDIgPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoc3RhdGUpLnJlZHVjZShmdW5jdGlvbiAobmV3U3RhdGUsIGtleSkge1xuICAgICAgICAgIGlmIChrZXkgIT09IF9pZDIpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBzdGF0ZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIGludmFsaWRDb25uZWN0aW9uID0gZnVuY3Rpb24gaW52YWxpZENvbm5lY3Rpb24oKSB7XG4gIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29ubmVjdGlvbi5cIik7XG59O1xudmFyIGludmFsaWRJZEFycmF5ID0gZnVuY3Rpb24gaW52YWxpZElkQXJyYXkoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaWQgYXJyYXkuXCIpO1xufTtcblxuZnVuY3Rpb24gY2hlY2tJZEFycmF5KGlkQXJyKSB7XG4gIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7XG5cbiAgaWYgKGlkQXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgaW52YWxpZElkQXJyYXkoKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaWRBcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAvLyBDaGVja2luZyBmb3Igb2JqZWN0c1xuICAgIGlmIChpZEFycltpXSAmJiBfdHlwZW9mKGlkQXJyW2ldKSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgaW52YWxpZElkQXJyYXkoKTtcbiAgICB9XG5cbiAgICAvLyBBbGwgaWRzIHNob3VsZCBiZSBhIHN0cmluZyBvciBudWxsLlxuICAgIGlmICh0eXBlb2YgaWRBcnJbaV0gIT09IFwic3RyaW5nXCIgJiYgX3R5cGVvZihpZEFycltpXSkgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGludmFsaWRJZEFycmF5KCk7XG4gICAgfVxuICB9XG59XG5leHBvcnRzLmNoZWNrSWRBcnJheSA9IGNoZWNrSWRBcnJheTtcblxuLyoqXG4gKiBUaGlzIGlzIG5vdCBleHRlbnNpdmUsIGJ1dCBzaG91bGQgY2F0Y2ggbW9zdCBlcnJvcnMuXG4gKi9cbmV4cG9ydHMuY2hlY2tWYWxpZENvbm5lY3Rpb24gPSBmdW5jdGlvbiBjaGVja1ZhbGlkQ29ubmVjdGlvbihfcmVmKSB7XG4gIHZhciBpZCA9IF9yZWYuaWQsXG4gICAgICBwb2ludHMgPSBfcmVmLnBvaW50cyxcbiAgICAgIGhhbmRsZXMgPSBfcmVmLmhhbmRsZXM7XG5cbiAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICBpbnZhbGlkQ29ubmVjdGlvbigpO1xuICB9XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KHBvaW50cykgfHwgIUFycmF5LmlzQXJyYXkoaGFuZGxlcykpIHtcbiAgICBpbnZhbGlkQ29ubmVjdGlvbigpO1xuICB9XG5cbiAgLy8gVGhlIGZpcnN0IHBvaW50IG11c3QgYWx3YXlzIGJlIHByZXNlbnRcbiAgaWYgKCFwb2ludHNbMF0pIHtcbiAgICBpbnZhbGlkQ29ubmVjdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBzZWNvbmQgcG9pbnQgaXMgbm90IHByZXNlbnQsIGEgaGFuZGxlIG11c3QgYmUgcHJlc2VudFxuICAgKiBmb3IgdGhlIGZpcnN0IHBvaW50LlxuICAgKi9cbiAgaWYgKCFwb2ludHNbMV0gJiYgIWhhbmRsZXNbMF0pIHtcbiAgICBpbnZhbGlkQ29ubmVjdGlvbigpO1xuICB9XG5cbiAgY2hlY2tJZEFycmF5KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocG9pbnRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGhhbmRsZXMpKSwgNCk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDY5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCksXG4gICAgdHlwZXMgPSBfcmVxdWlyZS50eXBlcztcblxudmFyIGRlZmF1bHRTdGF0ZSA9IHtcbiAgeDogeyB4OiAyNDAsIHk6IDIwLCBpZDogXCJ4XCIgfSxcbiAgeTogeyB4OiAzNjAsIHk6IDUwMCwgaWQ6IFwieVwiIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVkdWNlcigpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBkZWZhdWx0U3RhdGU7XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHNbMV07XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgXCJNT1ZFXCI6XG4gICAgICB7XG4gICAgICAgIHZhciBfYWN0aW9uJHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZCxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IF9hY3Rpb24kcGF5bG9hZC5zZWxlY3Rpb24sXG4gICAgICAgICAgICBwb3NpdGlvbkNoYW5nZSA9IF9hY3Rpb24kcGF5bG9hZC5wb3NpdGlvbkNoYW5nZTtcblxuICAgICAgICB2YXIgdG9Nb3ZlID0gc2VsZWN0aW9uW3R5cGVzLkhBTkRMRV07XG5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRvTW92ZSkpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3U3RhdGUgPSBfZXh0ZW5kcyh7fSwgc3RhdGUpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9Nb3ZlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgdmFyIGlkID0gdG9Nb3ZlW2ldO1xuICAgICAgICAgIHZhciBfc3RhdGUkaWQgPSBzdGF0ZVtpZF0sXG4gICAgICAgICAgICAgIHggPSBfc3RhdGUkaWQueCxcbiAgICAgICAgICAgICAgeSA9IF9zdGF0ZSRpZC55O1xuXG4gICAgICAgICAgbmV3U3RhdGVbaWRdID0gX2V4dGVuZHMoe30sIHN0YXRlW2lkXSwge1xuICAgICAgICAgICAgeDogeCArIHBvc2l0aW9uQ2hhbmdlLngsXG4gICAgICAgICAgICB5OiB5ICsgcG9zaXRpb25DaGFuZ2UueVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfVxuICAgIGNhc2UgXCJBRERfSEFORExFU1wiOlxuICAgICAge1xuICAgICAgICB2YXIgX25ld1N0YXRlID0gX2V4dGVuZHMoe30sIHN0YXRlKTtcbiAgICAgICAgdmFyIGhhbmRsZXMgPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgaGFuZGxlcy5sZW5ndGg7IF9pICs9IDEpIHtcbiAgICAgICAgICB2YXIgX2hhbmRsZXMkX2kgPSBoYW5kbGVzW19pXSxcbiAgICAgICAgICAgICAgX2lkID0gX2hhbmRsZXMkX2kuaWQsXG4gICAgICAgICAgICAgIF94MiA9IF9oYW5kbGVzJF9pLngsXG4gICAgICAgICAgICAgIF95ID0gX2hhbmRsZXMkX2kueTtcblxuICAgICAgICAgIF9uZXdTdGF0ZVtfaWRdID0geyB4OiBfeDIsIHk6IF95LCBpZDogX2lkIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX25ld1N0YXRlO1xuICAgICAgfVxuICAgIGNhc2UgXCJERUxFVEVfSEFORExFU1wiOlxuICAgICAge1xuICAgICAgICB2YXIgaGFuZGxlSWRzID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZSkucmVkdWNlKGZ1bmN0aW9uIChuZXdTdGF0ZSwga2V5KSB7XG4gICAgICAgICAgaWYgKGhhbmRsZUlkcy5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gc3RhdGVba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgICB9LCB7fSk7XG4gICAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICB9XG59O1xuXG4vKioqLyB9KSxcbi8qIDcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjYWxjQmV6aWVyUG9pbnRBdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xudmFyIGNhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcbnZhciBnZXRJbnRlcm1lZGlhdGVOdW1iZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcbnZhciBnZXRQb2ludHNCZXR3ZWVuID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cbnZhciBudW1BcHByb3hQb2ludHMgPSA0MDtcblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBwb2ludCBmcm9tIGEgcG9zaXRpb24gdG8gdGhlIGJlemllciBjdXJ2ZSB0aGF0XG4gKiByZXByZXNlbnRzIHRoZSBjb25uZWN0aW9uLlxuICpcbiAqIElmIHRoZSBjbG9zZXN0IHBvaW50IGlzIG92ZXIgMTVweCBhd2F5IG51bGwgaXMgcmV0dXJuZWQuXG4gKlxuICogRWxzZSBpdCByZXR1cm5zIGFuIHBvaW50LlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldENsb3Nlc3RQb2ludE9uQ29ubmVjdGlvbihjLCBwb3NpdGlvbikge1xuICBpZiAoYy5wb2ludHMuaW5kZXhPZihudWxsKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBjbG9zZXN0QXBwcm94ID0gdm9pZCAwO1xuICB2YXIgc2Vjb25kQXBwcm94ID0gdm9pZCAwO1xuXG4gIC8qKlxuICAgKiBGaW5kaW5nIHRoZSBpbml0aWFsIGFwcHJveGltYXRpb24gcG9pbnRzXG4gICAqL1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUFwcHJveFBvaW50czsgaSArPSAxKSB7XG4gICAgdmFyIHQgPSBpIC8gKG51bUFwcHJveFBvaW50cyAtIDEpO1xuICAgIHZhciBiZXppZXJQb2ludCA9IGNhbGNCZXppZXJQb2ludEF0KGMsIGdldEludGVybWVkaWF0ZU51bWJlcigwLCAxLCB0KSk7XG5cbiAgICB2YXIgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBiZXppZXJQb2ludCk7XG4gICAgdmFyIHBvaW50ID0ge1xuICAgICAgeDogYmV6aWVyUG9pbnQueCxcbiAgICAgIHk6IGJlemllclBvaW50LnksXG4gICAgICBkaXN0YW5jZTogZGlzdGFuY2UsXG4gICAgICB0OiB0XG4gICAgfTtcblxuICAgIGlmICghY2xvc2VzdEFwcHJveCB8fCBkaXN0YW5jZSA8IGNsb3Nlc3RBcHByb3guZGlzdGFuY2UpIHtcbiAgICAgIHNlY29uZEFwcHJveCA9IGNsb3Nlc3RBcHByb3g7XG4gICAgICBjbG9zZXN0QXBwcm94ID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghc2Vjb25kQXBwcm94IHx8IGRpc3RhbmNlIDwgc2Vjb25kQXBwcm94LmRpc3RhbmNlKSB7XG4gICAgICBzZWNvbmRBcHByb3ggPSBwb2ludDtcbiAgICB9XG4gIH1cblxuICBpZiAoY2xvc2VzdEFwcHJveC5kaXN0YW5jZSA+IDIyNSkge1xuICAgIC8vIDE1cHhcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBwb2ludHMgPSBnZXRQb2ludHNCZXR3ZWVuKGMsIDIwLCBjbG9zZXN0QXBwcm94LnQsIHNlY29uZEFwcHJveC50KTtcbiAgdmFyIGNsb3Nlc3RQb2ludCA9IHZvaWQgMDtcblxuICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcG9pbnRzLmxlbmd0aDsgX2kgKz0gMSkge1xuICAgIHZhciBfZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBwb2ludHNbX2ldKTtcbiAgICBpZiAoIWNsb3Nlc3RQb2ludCB8fCBfZGlzdGFuY2UgPCBjbG9zZXN0UG9pbnQuZGlzdGFuY2UpIHtcbiAgICAgIGNsb3Nlc3RQb2ludCA9IHtcbiAgICAgICAgeDogcG9pbnRzW19pXS54LFxuICAgICAgICB5OiBwb2ludHNbX2ldLnksXG4gICAgICAgIHQ6IHBvaW50c1tfaV0udCxcbiAgICAgICAgZGlzdGFuY2U6IF9kaXN0YW5jZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2xvc2VzdFBvaW50O1xufTtcblxuLyoqKi8gfSksXG4vKiA3MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgZ2V0SW50ZXJtZWRpYXRlTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG52YXIgY2FsY0JlemllclBvaW50QXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblxuLyoqXG4gKiBjIGlzIHRoZSBjb25uZWN0aW9uLlxuICogbiBpcyB0aGUgbnVtYmVyIG9mIHBvaW50cy5cbiAqIHRTdGFydCBpcyB0aGUgdCB2YWx1ZSBvZiB0aGUgZmlyc3QgcG9pbnQuXG4gKiB0RW5kIGlzIHRoZSB0IHZhbHVlIG9mIHRoZSBsYXN0IHBvaW50LlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFBvaW50c0JldHdlZW4oYywgbiwgdFN0YXJ0LCB0RW5kKSB7XG4gIHZhciBwb2ludHMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkgKz0gMSkge1xuICAgIHZhciB0ID0gZ2V0SW50ZXJtZWRpYXRlTnVtYmVyKHRTdGFydCwgdEVuZCwgaSAvIG4pO1xuICAgIHZhciBwb2ludCA9IGNhbGNCZXppZXJQb2ludEF0KGMsIHQpO1xuICAgIHBvaW50cy5wdXNoKHBvaW50KTtcbiAgfVxuXG4gIHJldHVybiBwb2ludHM7XG59O1xuXG4vKioqLyB9KSxcbi8qIDcyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG4gICAgZ2V0QWxsSGFuZGxlcyA9IF9yZXF1aXJlLmdldEFsbEhhbmRsZXM7XG5cbnZhciBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLFxuICAgIGdldFBvaW50QnlJZCA9IF9yZXF1aXJlMi5nZXRQb2ludEJ5SWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0SGFuZGxlQXRQb3NpdGlvbihwb3NpdGlvbiwgZ2V0UG9pbnQpIHtcbiAgdmFyIGhhbmRsZXMgPSBnZXRBbGxIYW5kbGVzKCk7XG4gIHZhciBjbG9zZXN0SGFuZGxlID0gdm9pZCAwO1xuICB2YXIgY2xvc2VzdERpc3RhbmNlID0gdm9pZCAwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHZhciBkaXN0YW5jZSA9IGNhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMocG9zaXRpb24sIGhhbmRsZXNbaV0pO1xuICAgIGlmICghY2xvc2VzdERpc3RhbmNlIHx8IGRpc3RhbmNlIDwgY2xvc2VzdERpc3RhbmNlKSB7XG4gICAgICBjbG9zZXN0SGFuZGxlID0gaGFuZGxlc1tpXTtcbiAgICAgIGNsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjbG9zZXN0RGlzdGFuY2UgPCAyMjUpIHtcbiAgICAvLyAxNXB4XG4gICAgcmV0dXJuIGNsb3Nlc3RIYW5kbGU7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKiovIH0pLFxuLyogNzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyksXG4gICAgZ2V0R3VpZGVzT2ZUeXBlID0gX3JlcXVpcmUuZ2V0R3VpZGVzT2ZUeXBlO1xuXG52YXIgZ2V0Q29udGV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xudmFyIGdldENvbm5lY3Rpb25Qb2ludHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9yZXF1aXJlMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApLFxuICAgIGdldEFsbENvbm5lY3Rpb25zID0gX3JlcXVpcmUyLmdldEFsbENvbm5lY3Rpb25zO1xuXG52YXIgcmVuZGVySGFuZGxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpO1xuXG52YXIgX3JlcXVpcmUzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyksXG4gICAgcmVuZGVyTGluZSA9IF9yZXF1aXJlMy5yZW5kZXJMaW5lLFxuICAgIHJlbmRlckN1YmljQmV6aWVyID0gX3JlcXVpcmUzLnJlbmRlckN1YmljQmV6aWVyLFxuICAgIHJlbmRlclF1YWRyYXRpY0JlemllciA9IF9yZXF1aXJlMy5yZW5kZXJRdWFkcmF0aWNCZXppZXI7XG5cbnZhciBfcmVxdWlyZTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLFxuICAgIHR5cGVzID0gX3JlcXVpcmU0LnR5cGVzLFxuICAgIGNvbG9ycyA9IF9yZXF1aXJlNC5jb2xvcnM7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVuZGVyQ29ubmVjdGlvbnMoKSB7XG4gIHZhciBjb25uZWN0aW9ucyA9IGdldEFsbENvbm5lY3Rpb25zKCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgcG9pbnRzID0gZ2V0Q29ubmVjdGlvblBvaW50cyhjb25uZWN0aW9uc1tpXSk7XG4gICAgaWYgKHBvaW50cy5pbmRleE9mKG51bGwpID09PSAtMSkge1xuICAgICAgLy8gQWxsIHBvaW50cyBleGlzdFxuICAgICAgcmVuZGVyQ3ViaWNCZXppZXIocG9pbnRzKTtcbiAgICB9IGVsc2UgaWYgKHBvaW50c1swXSAmJiBwb2ludHNbM10pIHtcbiAgICAgIC8vIE5vdCBhIHN0cmF5IGNvbm5lY3Rpb25cbiAgICAgIC8vIFN0cmFpZ2h0IGxpbmVcbiAgICAgIGlmICghcG9pbnRzWzFdICYmICFwb2ludHNbMl0pIHtcbiAgICAgICAgcmVuZGVyTGluZShwb2ludHNbMF0sIHBvaW50c1szXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAzIHBvaW50cyBleGlzdFxuICAgICAgICByZW5kZXJRdWFkcmF0aWNCZXppZXIocG9pbnRzLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9KSk7IC8vIFdpbGwgaGF2ZSAzIHBvaW50c1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERyYXdpbmcgdGhlIGhhbmRsZXMgKGFuZCBoYW5kbGUgbGluZXMpXG4gICAgcmVuZGVySGFuZGxlcyhjb25uZWN0aW9uc1tpXSk7XG4gIH1cblxuICBnZXRHdWlkZXNPZlR5cGUodHlwZXMuQ09OTikuZm9yRWFjaChmdW5jdGlvbiAoZ3VpZGUpIHtcbiAgICByZW5kZXJDdWJpY0JlemllcihndWlkZSwgMSwgY29sb3JzLlBSSU1BUlkpO1xuICB9KTtcblxuICBnZXRHdWlkZXNPZlR5cGUodHlwZXMuTElORSkuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgIHZhciBjdHggPSBnZXRDb250ZXh0KCk7XG5cbiAgICByZW5kZXJMaW5lKGxpbmUuZnJvbSwgbGluZS50bywgY29sb3JzLlBSSU1BUlksIDEpO1xuICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlLnR5cGVzO1xuXG52YXIgdHlwZUFyciA9IFtdO1xuXG57XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModHlwZXMpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0eXBlQXJyLnB1c2godHlwZXNba2V5c1tpXV0pO1xuICB9XG59XG5cbmV4cG9ydHMuaXNWYWxpZFR5cGUgPSBmdW5jdGlvbiBpc1ZhbGlkVHlwZSgpIHtcbiAgcmV0dXJuIHR5cGVBcnIuaW5kZXhPZih0eXBlKSA+IC0xO1xufTtcblxuZXhwb3J0cy5jaGVja1R5cGUgPSBmdW5jdGlvbiBjaGVja1R5cGUodHlwZSkge1xuICBpZiAodHlwZUFyci5pbmRleE9mKHR5cGUpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdHlwZSAnXCIgKyB0eXBlICsgXCInLlwiKTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuICAgIGdldEhhbmRsZUJ5SWQgPSBfcmVxdWlyZS5nZXRIYW5kbGVCeUlkO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSxcbiAgICBnZXRTZWxlY3RlZE9mVHlwZSA9IF9yZXF1aXJlMi5nZXRTZWxlY3RlZE9mVHlwZTtcblxudmFyIF9yZXF1aXJlMyA9IF9fd2VicGFja19yZXF1aXJlX18oMiksXG4gICAgZ2V0UG9pbnRCeUlkID0gX3JlcXVpcmUzLmdldFBvaW50QnlJZDtcblxudmFyIF9yZXF1aXJlNCA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpLFxuICAgIHJlbmRlckNpcmNsZSA9IF9yZXF1aXJlNC5yZW5kZXJDaXJjbGUsXG4gICAgcmVuZGVyTGluZSA9IF9yZXF1aXJlNC5yZW5kZXJMaW5lO1xuXG52YXIgZ2V0Q29udGV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICBjb2xvcnMgPSBfcmVxdWlyZTUuY29sb3JzO1xuXG52YXIgUFJJTUFSWSA9IGNvbG9ycy5QUklNQVJZLFxuICAgIFBSSU1BUllfTElHSFQgPSBjb2xvcnMuUFJJTUFSWV9MSUdIVDtcblxuXG5mdW5jdGlvbiByZW5kZXJIYW5kbGUocG9pbnQsIGhhbmRsZSwgb3B0cykge1xuICB2YXIgaXNIYW5kbGVTZWxlY3RlZCA9IGdldFNlbGVjdGVkT2ZUeXBlKFwiX19IQU5ETEVcIikuaW5kZXhPZihoYW5kbGUuaWQpID4gLTE7XG5cbiAgLyoqIFxuICAgKiBEcmF3aW5nIHRoZSBsaW5lIGJldHdlZW4gdGhlIHBvaW50IGFuZCBoYW5kbGUuXG4gICAqXG4gICAqIENoZWNrIGlzIGNvbm5lY3Rpb24gc2VsZWN0ZWQgYXN3ZWxsIHdoZW4gaW1wbGVtZW50ZWQuXG4gICAqL1xuICB2YXIgbGluZUNvbG9yID0gaXNIYW5kbGVTZWxlY3RlZCA/IFBSSU1BUllfTElHSFQgOiBcIiNhYWFcIjtcbiAgcmVuZGVyTGluZShwb2ludCwgaGFuZGxlLCBsaW5lQ29sb3IsIDEpO1xuXG4gIC8vIERyYXdpbmcgdGhlIGhhbmRsZSBpdHNlbGZcbiAgdmFyIGhhbmRsZUNvbG9yID0gaXNIYW5kbGVTZWxlY3RlZCA/IFBSSU1BUlkgOiBcIiM5OTlcIjtcbiAgdmFyIGhhbmRsZVNpemUgPSBpc0hhbmRsZVNlbGVjdGVkID8gNCA6IDM7XG4gIHJlbmRlckNpcmNsZShoYW5kbGUsIGhhbmRsZVNpemUsIGhhbmRsZUNvbG9yKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZW5kZXJIYW5kbGVzKGNvbm5lY3Rpb24pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25uZWN0aW9uLmhhbmRsZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoY29ubmVjdGlvbi5oYW5kbGVzW2ldICYmIGNvbm5lY3Rpb24ucG9pbnRzW2ldKSB7XG5cbiAgICAgIHZhciBoYW5kbGUgPSBnZXRIYW5kbGVCeUlkKGNvbm5lY3Rpb24uaGFuZGxlc1tpXSk7XG4gICAgICB2YXIgcG9pbnQgPSBnZXRQb2ludEJ5SWQoY29ubmVjdGlvbi5wb2ludHNbaV0pO1xuXG4gICAgICByZW5kZXJIYW5kbGUocG9pbnQsIGhhbmRsZSk7XG4gICAgfVxuICB9XG59O1xuXG4vKioqLyB9KSxcbi8qIDc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpLFxuICAgIGdldEd1aWRlc09mVHlwZSA9IF9yZXF1aXJlLmdldEd1aWRlc09mVHlwZTtcblxudmFyIF9yZXF1aXJlMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyksXG4gICAgZ2V0U2VsZWN0ZWRPZlR5cGUgPSBfcmVxdWlyZTIuZ2V0U2VsZWN0ZWRPZlR5cGU7XG5cbnZhciBfcmVxdWlyZTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLFxuICAgIGdldEFsbFBvaW50cyA9IF9yZXF1aXJlMy5nZXRBbGxQb2ludHM7XG5cbnZhciBfcmVxdWlyZTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxcbiAgICByZW5kZXJDaXJjbGUgPSBfcmVxdWlyZTQucmVuZGVyQ2lyY2xlO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICBjb2xvcnMgPSBfcmVxdWlyZTUuY29sb3JzLFxuICAgIHR5cGVzID0gX3JlcXVpcmU1LnR5cGVzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlclBvaW50cygpIHtcbiAgdmFyIHBvaW50cyA9IGdldEFsbFBvaW50cygpO1xuICB2YXIgc2VsZWN0ZWRQb2ludHMgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlcy5QT0lOVCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdmFyIGlzUG9pbnRTZWxlY3RlZCA9IHNlbGVjdGVkUG9pbnRzLmluZGV4T2YocG9pbnRzW2ldLmlkKSA+IC0xO1xuICAgIGlmIChpc1BvaW50U2VsZWN0ZWQpIHtcbiAgICAgIHJlbmRlckNpcmNsZShwb2ludHNbaV0sIDUsIGNvbG9ycy5XSElURSwgeyBjb2xvcjogY29sb3JzLlBSSU1BUlksIHdpZHRoOiAyIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXJDaXJjbGUocG9pbnRzW2ldLCA0LCBjb2xvcnMuUFJJTUFSWSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHBvaW50R3VpZGVzID0gZ2V0R3VpZGVzT2ZUeXBlKHR5cGVzLlBPSU5UKTtcbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHBvaW50R3VpZGVzLmxlbmd0aDsgX2kgKz0gMSkge1xuICAgIHJlbmRlckNpcmNsZShwb2ludEd1aWRlc1tfaV0sIDQsIGNvbG9ycy5QUklNQVJZKTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA3NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3Jlc29sdmVycztcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlLnR5cGVzO1xuXG52YXIgUE9JTlQgPSB0eXBlcy5QT0lOVCxcbiAgICBDT05OID0gdHlwZXMuQ09OTixcbiAgICBIQU5ETEUgPSB0eXBlcy5IQU5ETEU7XG5cblxudmFyIHJlc29sdmVycyA9IChfcmVzb2x2ZXJzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVzb2x2ZXJzLCBQT0lOVCwgZnVuY3Rpb24gKHgpIHtcbiAgcmV0dXJuIHguaWQ7XG59KSwgX2RlZmluZVByb3BlcnR5KF9yZXNvbHZlcnMsIEhBTkRMRSwgZnVuY3Rpb24gKHgpIHtcbiAgcmV0dXJuIHguaWQ7XG59KSwgX2RlZmluZVByb3BlcnR5KF9yZXNvbHZlcnMsIENPTk4sIGZ1bmN0aW9uICh4KSB7XG4gIHJldHVybiB4LmNvbm5lY3Rpb24uaWQ7XG59KSwgX3Jlc29sdmVycyk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaWRzIG9mIG9iamVjdCBmZXRjaGVkIHRocm91Z2ggdGhlXG4gKiByZXNvbHZlT2JqZWN0QXRQb3NpdGlvbiBmdW5jdGlvbi5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXNvbHZlT2JqZWN0SWQodHlwZSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiByZXNvbHZlcnNbdHlwZV0gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdHlwZTogJ1wiICsgdHlwZSArIFwiJy5cIik7XG4gIH1cblxuICByZXR1cm4gcmVzb2x2ZXJzW3R5cGVdKHZhbHVlKTtcbn07XG5cbi8qKiovIH0pLFxuLyogNzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHJlc29sdmVBY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG52YXIgcmVuZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdW5kbygpIHtcbiAgdmFyIGhpc3RvcnkgPSBzdG9yZS5nZXRTdGF0ZSgpLmhpc3RvcnkuaGlzdG9yeTtcblxuICBpZiAoIWhpc3RvcnkubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGFjdGlvbiA9IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlVORE9cIiB9KTtcblxuICByZXNvbHZlQWN0aW9uKGFjdGlvbiwgeyB1bmRvOiB0cnVlIH0pO1xuICByZW5kZXIobnVsbCwgeyB1c2VMYXN0UG9zaXRpb246IHRydWUgfSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIENvbW1vbiBhY3Rpb25zXG52YXIgbW92ZSA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXG4vLyBQb2ludCBhY3Rpb25zXG52YXIgYWRkUG9pbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcbnZhciBhZGRQZW5Qb2ludCA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXG4vLyBDb25uZWN0aW9uIGFjdGlvbnNcbnZhciBhZGRDb25uZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG52YXIgc3BsaXRDb25uZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG52YXIgc3BsaXRMaW5lQ29ubmVjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xudmFyIGNvbm5lY3RQb2ludHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTtcbnZhciBhZGRTdHJheUNvbm5lY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcbnZhciBjb21wbGV0ZVN0cmF5Q29ubmVjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oODgpO1xudmFyIHJlcGxhY2VDb25uZWN0aW9uUG9pbnRJZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KTtcblxuLy8gSGFuZGxlIGFjdGlvbnNcbnZhciBhZGRIYW5kbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7XG5cbnZhciByZXZlcnNlID0gZnVuY3Rpb24gcmV2ZXJzZShfcmVmKSB7XG4gIHZhciB1bmRvID0gX3JlZi51bmRvLFxuICAgICAgcmVkbyA9IF9yZWYucmVkbztcbiAgcmV0dXJuIHtcbiAgICByZWRvOiB1bmRvLFxuICAgIHVuZG86IHJlZG9cbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIC8vIENvbW1vblxuICBNT1ZFOiBtb3ZlLFxuXG4gIC8vIFBvaW50IGFjdGlvbnNcbiAgQUREX1BPSU5UOiBhZGRQb2ludCxcbiAgREVMRVRFX1BPSU5UOiByZXZlcnNlKGFkZFBvaW50KSxcbiAgQUREX1BFTl9QT0lOVDogYWRkUGVuUG9pbnQsXG5cbiAgLy8gQ29ubmVjdGlvbiBhY3Rpb25zXG4gIEFERF9DT05ORUNUSU9OOiBhZGRDb25uZWN0aW9uLFxuICBERUxFVEVfQ09OTkVDVElPTjogcmV2ZXJzZShhZGRDb25uZWN0aW9uKSxcbiAgU1BMSVRfQ09OTkVDVElPTjogc3BsaXRDb25uZWN0aW9uLFxuICBTUExJVF9MSU5FX0NPTk5FQ1RJT046IHNwbGl0TGluZUNvbm5lY3Rpb24sXG4gIENPTk5FQ1RfUE9JTlRTOiBjb25uZWN0UG9pbnRzLFxuICBBRERfU1RSQVlfQ09OTkVDVElPTjogYWRkU3RyYXlDb25uZWN0aW9uLFxuICBDT01QTEVURV9TVFJBWV9DT05ORUNUSU9OOiBjb21wbGV0ZVN0cmF5Q29ubmVjdGlvbixcbiAgUkVQTEFDRV9DT05ORUNUSU9OX1BPSU5UX0lEUzogcmVwbGFjZUNvbm5lY3Rpb25Qb2ludElkcyxcblxuICAvLyBIYW5kbGUgYWN0aW9uc1xuICBBRERfSEFORExFUzogYWRkSGFuZGxlcyxcbiAgREVMRVRFX0hBTkRMRVM6IHJldmVyc2UoYWRkSGFuZGxlcylcbn0pO1xuXG4vKioqLyB9KSxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB0b0FjdGlvbiA9IGZ1bmN0aW9uIHRvQWN0aW9uKHNlbGVjdGlvbiwgcG9zaXRpb25DaGFuZ2UpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIk1PVkVcIixcbiAgICBwYXlsb2FkOiB7XG4gICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgIHBvc2l0aW9uQ2hhbmdlOiBwb3NpdGlvbkNoYW5nZVxuICAgIH1cbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZWRvOiBmdW5jdGlvbiByZWRvKF9yZWYpIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gX3JlZi5zZWxlY3Rpb24sXG4gICAgICAgIHBvc2l0aW9uQ2hhbmdlID0gX3JlZi5wb3NpdGlvbkNoYW5nZTtcbiAgICByZXR1cm4gdG9BY3Rpb24oc2VsZWN0aW9uLCBwb3NpdGlvbkNoYW5nZSk7XG4gIH0sXG4gIHVuZG86IGZ1bmN0aW9uIHVuZG8oX3JlZjIpIHtcbiAgICB2YXIgc2VsZWN0aW9uID0gX3JlZjIuc2VsZWN0aW9uLFxuICAgICAgICBwb3NpdGlvbkNoYW5nZSA9IF9yZWYyLnBvc2l0aW9uQ2hhbmdlO1xuICAgIHJldHVybiB0b0FjdGlvbihzZWxlY3Rpb24sIHtcbiAgICAgIHg6IHBvc2l0aW9uQ2hhbmdlLnggKiAtMSxcbiAgICAgIHk6IHBvc2l0aW9uQ2hhbmdlLnkgKiAtMVxuICAgIH0pO1xuICB9XG59O1xuXG4vKioqLyB9KSxcbi8qIDgxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBpc1ZhbGlkUG9zaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVkbzogZnVuY3Rpb24gcmVkbyhwb2ludCkge1xuICAgIGlmICghaXNWYWxpZFBvc2l0aW9uKHBvaW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbi5cIik7XG4gICAgfVxuXG4gICAgaWYgKCFwb2ludC5pZCB8fCB0eXBlb2YgcG9pbnQuaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9pbnQgaWQuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICdcIiArIHBvaW50LmlkICsgXCInLlwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJBRERfUE9JTlRcIixcbiAgICAgIHBheWxvYWQ6IHBvaW50XG4gICAgfTtcbiAgfSxcbiAgdW5kbzogZnVuY3Rpb24gdW5kbyhfcmVmKSB7XG4gICAgdmFyIGlkID0gX3JlZi5pZDtcblxuICAgIGlmICghaWQgfHwgdHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvaW50IGlkLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnXCIgKyBpZCArIFwiJy5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiREVMRVRFX1BPSU5UXCIsXG4gICAgICBwYXlsb2FkOiBpZFxuICAgIH07XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogODIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlLnR5cGVzO1xuXG4vKipcbiAqIFwiUGVuIHBvaW50XCIganVzdCBtZWFucyB0aGF0IHRoZSBwb2ludCB3YXMgZHJhZ2dlZC9jb25uZWN0ZWRcbiAqIG9yIHNvbWUgb3RoZXIgd2FzIGFwcGxpZWQgdG8gaXQgb3RoZXIgdGhhbiBjcmVhdGluZyBhIHNpbmdsZVxuICogcG9pbnQuXG4gKlxuICogSSBjYW4ndCBmaW5kIGEgYmV0dGVyIG5hbWUgZm9yIHRoaXMsIEknbSBzb3JyeS5cbiAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWRkUGVuUG9pbnQoZGF0YSkge1xuICB2YXIgcG9pbnQgPSBkYXRhLnBvaW50LFxuICAgICAgbmV3SGFuZGxlID0gZGF0YS5uZXdIYW5kbGUsXG4gICAgICBuZXdDb25uZWN0aW9uID0gZGF0YS5uZXdDb25uZWN0aW9uLFxuICAgICAgbW92ZWRIYW5kbGUgPSBkYXRhLm1vdmVkSGFuZGxlLFxuICAgICAgc3RyYXlDb25uZWN0aW9uID0gZGF0YS5zdHJheUNvbm5lY3Rpb24sXG4gICAgICBjb21wbGV0ZWRDb25uZWN0aW9uID0gZGF0YS5jb21wbGV0ZWRDb25uZWN0aW9uLFxuICAgICAgbmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSA9IGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSxcbiAgICAgIGxpbmVDb25uZWN0aW9uID0gZGF0YS5saW5lQ29ubmVjdGlvbixcbiAgICAgIGxpbmVDb25uZWN0aW9uSGFuZGxlcyA9IGRhdGEubGluZUNvbm5lY3Rpb25IYW5kbGVzO1xuXG5cbiAgdmFyIGFjdGlvbnMgPSBbeyAvLyBUaGUgaW5pdGlhbCBwb2ludCB0aGF0IHdhcyBjcmVhdGVkIHdoZW4gd2UgY2xpY2tlZC5cbiAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgIGRhdGE6IHBvaW50XG4gIH1dO1xuXG4gIC8qKlxuICAgKiBUaGUgaGFuZGxlIGFuZCBjb25uZWN0aW9uIGZvciB0aGUgTkVXIHN0cmF5IGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIFRoaXMgaXMgTk9UIHRoZSBoYW5kbGUgZm9yIHRoZSBjb25uZWN0aW9uIHRoYXQgdGhpcyBwb2ludFxuICAgKiBjb21wbGV0ZXMgKGlmIGl0IGRvZXMpLlxuICAgKi9cbiAgaWYgKG5ld0hhbmRsZSkge1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgICBkYXRhOiBuZXdDb25uZWN0aW9uXG4gICAgfSk7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgIGRhdGE6IFtuZXdIYW5kbGVdXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgY29ubmVjdGlvbiBjcmVhdGVkIGlmIHRoZXJlIHdhcyBubyBzdHJheSBjb25uZWN0aW9uXG4gICAqIG9uIHRoZSBzZWxlY3RlZCBwb2ludCB3aGVuIHRoZSBuZXcgcG9pbnQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIFRoaXMgY29ubmVjdGlvbiB3aWxsIG5vdCBoYXZlIGEgcDIgaGFuZGxlLCBidXQgd2lsbCBoYXZlIGEgcDMgaGFuZGxlXG4gICAqIGlmIHRoZSBtb3VzZSB3YXMgbW92ZWQuXG4gICAqL1xuICBpZiAobGluZUNvbm5lY3Rpb24pIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgICAgZGF0YTogbGluZUNvbm5lY3Rpb25cbiAgICB9KTtcblxuICAgIC8vIFRoZSBwMyBoYW5kbGUgaWYgdGhlIG1vdXNlIHdhcyBtb3ZlZC5cbiAgICBpZiAobGluZUNvbm5lY3Rpb25IYW5kbGVzKSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiBcIkFERF9IQU5ETEVTXCIsXG4gICAgICAgIGRhdGE6IFtsaW5lQ29ubmVjdGlvbkhhbmRsZXNdXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgc3RyYXkgYWN0aW9uIHRoYXQgd2FzIGNvbXBsZXRlZC5cbiAgICpcbiAgICogVGhlIG5ldyBoYW5kbGUgaWQgKGlmIHByZXNlbnQpIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlXG4gICAqIGNvbXBsZXRlZENvbm5lY3Rpb24gb2JqZWN0LlxuICAgKi9cbiAgaWYgKGNvbXBsZXRlZENvbm5lY3Rpb24pIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIG9sZENvbm5lY3Rpb246IHN0cmF5Q29ubmVjdGlvbixcbiAgICAgICAgbmV3Q29ubmVjdGlvbjogY29tcGxldGVkQ29ubmVjdGlvblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVGhlIGhhbmRsZSB0aGF0IHdhcyBwcmVzZW50IG9uIHRoZSBjb21wbGV0ZWRDb25uZWN0aW9uIChwMikuXG4gICAgaWYgKG1vdmVkSGFuZGxlKSB7XG4gICAgICB2YXIgaWQgPSBtb3ZlZEhhbmRsZS5pZCxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZSA9IG1vdmVkSGFuZGxlLnBvc2l0aW9uQ2hhbmdlO1xuXG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlbGVjdGlvbjogX2RlZmluZVByb3BlcnR5KHt9LCB0eXBlcy5IQU5ETEUsIFtpZF0pLFxuICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBwb3NpdGlvbkNoYW5nZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbmV3IGhhbmRsZSBmb3IgdGhlIGNvbXBsZXRlZCBjb25uZWN0aW9uIChwMykuXG4gICAgaWYgKCFuZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlKSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiBcIkFERF9IQU5ETEVTXCIsXG4gICAgICAgIGRhdGE6IFtuZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59O1xuXG4vKioqLyB9KSxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpLFxuICAgIHRvQ29ubmVjdGlvbklkID0gX3JlcXVpcmUudG9Db25uZWN0aW9uSWQ7XG5cbmV4cG9ydHMucmVkbyA9IGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciBwb2ludHMgPSBfcmVmLnBvaW50cyxcbiAgICAgIGhhbmRsZXMgPSBfcmVmLmhhbmRsZXMsXG4gICAgICBpZCA9IF9yZWYuaWQ7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIHBvaW50czogcG9pbnRzLFxuICAgICAgaGFuZGxlczogaGFuZGxlc1xuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydHMudW5kbyA9IGZ1bmN0aW9uIChfcmVmMikge1xuICB2YXIgaWQgPSBfcmVmMi5pZDtcblxuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiREVMRVRFX0NPTk5FQ1RJT05cIixcbiAgICBwYXlsb2FkOiBpZFxuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiA4NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9yZWYpIHtcbiAgdmFyIGNvbm5lY3Rpb24gPSBfcmVmLmNvbm5lY3Rpb24sXG4gICAgICBuZXdQb2ludHMgPSBfcmVmLm5ld1BvaW50cyxcbiAgICAgIGlkcyA9IF9yZWYuaWRzO1xuXG4gIHZhciBhY3Rpb25zID0gW107XG5cbiAgdmFyIF9jb25uZWN0aW9uJHBvaW50cyA9IF9zbGljZWRUb0FycmF5KGNvbm5lY3Rpb24ucG9pbnRzLCAyKSxcbiAgICAgIGFJZCA9IF9jb25uZWN0aW9uJHBvaW50c1swXSxcbiAgICAgIGJJZCA9IF9jb25uZWN0aW9uJHBvaW50c1sxXTsgLy8gVGhlc2UgYXJlIHRoZSBwb2ludCBpZHMsIG5vdCB0aGUgYWN0dWFsIHBvaW50cy5cblxuICAvKipcbiAgICogcDAgaXMgYSAodGhlIGxlZnQgaGFuZCBwb2ludClcbiAgICogcDYgaXMgYiAodGhlIHJpZ2h0IGhhbmQgcG9pbnQpXG4gICAqIHAzIGlzIHRoZSBuZXcgcG9pbnQuXG4gICAqXG4gICAqIFdlIGRvbid0IG5lZWQgdG8gdXNlIHAwIG9yIHA2LCB0aGV5J3JlIHRoZSBleGFjdCBzYW1lIGFzIGEgYW5kIGIuXG4gICAqXG4gICAqIFRoZSBvdGhlciBwb2ludHMgKHAxLCBwMiwgcDQsIHA1KSBhcmUgdGhlIGhhbmRsZXMuXG4gICAqL1xuXG5cbiAgdmFyIF9uZXdQb2ludHMgPSBfc2xpY2VkVG9BcnJheShuZXdQb2ludHMsIDcpLFxuICAgICAgcDAgPSBfbmV3UG9pbnRzWzBdLFxuICAgICAgcDEgPSBfbmV3UG9pbnRzWzFdLFxuICAgICAgcDIgPSBfbmV3UG9pbnRzWzJdLFxuICAgICAgcDMgPSBfbmV3UG9pbnRzWzNdLFxuICAgICAgcDQgPSBfbmV3UG9pbnRzWzRdLFxuICAgICAgcDUgPSBfbmV3UG9pbnRzWzVdLFxuICAgICAgcDYgPSBfbmV3UG9pbnRzWzZdOyAvLyBGcm9tIHRoZSBzcGxpdEN1YmljQmV6aWVyIGZ1bmN0aW9uXG5cbiAgLy8gV2UgcmVtb3ZlIHRoZSBvbGQgY29ubmVjdGlvblxuXG5cbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIkRFTEVURV9DT05ORUNUSU9OXCIsXG4gICAgZGF0YTogY29ubmVjdGlvblxuICB9KTtcblxuICAvLyBBbmQgYWRkIHRoZSBuZXcgcG9pbnRcbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgIGRhdGE6IHAzXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBOb3RpY2UgaG93IHdlIGdpdmUgdGhlIGlkcyBvZiB0aGUgcG9pbnRzIGZvciB0aGUgZmlyc3RcbiAgICogYW5kIGxhc3QgcGFyYW1ldGVyLCBub3QgdGhlIGFjdHVhbCBwb2ludHMgdGhlbXNlbHZlcy5cbiAgICpcbiAgICogcDEsIHAyLCBwMywgcDQgYXJlIGFjdHVhbCBwb2ludHMgYnV0IGhhdmUgYmVlbiBnaXZlbiBpZHMgYnlcbiAgICogdGhlIGxpc3RlbmVyLlxuICAgKi9cbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgZGF0YToge1xuICAgICAgaWQ6IGlkc1swXSxcbiAgICAgIHBvaW50czogW2FJZCwgcDMuaWRdLFxuICAgICAgaGFuZGxlczogW3AxLmlkLCBwMi5pZF1cbiAgICB9XG4gIH0pO1xuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiB7XG4gICAgICBpZDogaWRzWzFdLFxuICAgICAgcG9pbnRzOiBbcDMuaWQsIGJJZF0sXG4gICAgICBoYW5kbGVzOiBbcDQuaWQsIHA1LmlkXVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gQWRkaW5nIHRoZSBoYW5kbGVzXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgIGRhdGE6IFtwMSwgcDIsIHA0LCBwNV1cbiAgfSk7XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59O1xuXG4vKioqLyB9KSxcbi8qIDg1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgaWRzID0gX3JlZi5pZHMsXG4gICAgICBjb25uZWN0aW9uID0gX3JlZi5jb25uZWN0aW9uLFxuICAgICAgbmV3UG9pbnQgPSBfcmVmLm5ld1BvaW50O1xuXG4gIHZhciBhY3Rpb25zID0gW107XG5cbiAgdmFyIF9jb25uZWN0aW9uJHBvaW50cyA9IF9zbGljZWRUb0FycmF5KGNvbm5lY3Rpb24ucG9pbnRzLCAyKSxcbiAgICAgIGFJZCA9IF9jb25uZWN0aW9uJHBvaW50c1swXSxcbiAgICAgIGJJZCA9IF9jb25uZWN0aW9uJHBvaW50c1sxXTsgLy8gVGhlc2UgYXJlIHRoZSBwb2ludCBpZHMsIG5vdCB0aGUgYWN0dWFsIHBvaW50cy5cblxuICAvLyBXZSByZW1vdmUgdGhlIG9sZCBjb25uZWN0aW9uXG5cblxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiREVMRVRFX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiBjb25uZWN0aW9uXG4gIH0pO1xuXG4gIC8vIEFuZCBhZGQgdGhlIG5ldyBwb2ludFxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX1BPSU5UXCIsXG4gICAgZGF0YTogbmV3UG9pbnRcbiAgfSk7XG5cbiAgLy8gQWRkaW5nIHRoZSB0d28gbmV3IGNvbm5lY3Rpb25zXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBpZHNbMF0sXG4gICAgICBwb2ludHM6IFthSWQsIG5ld1BvaW50LmlkXSxcbiAgICAgIGhhbmRsZXM6IFtudWxsLCBudWxsXVxuICAgIH1cbiAgfSk7XG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBpZHNbMV0sXG4gICAgICBwb2ludHM6IFtuZXdQb2ludC5pZCwgYklkXSxcbiAgICAgIGhhbmRsZXM6IFtudWxsLCBudWxsXVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59O1xuXG4vKioqLyB9KSxcbi8qIDg2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29ubmVjdFBvaW50cyhfcmVmKSB7XG4gIHZhciBjb25uZWN0aW9uID0gX3JlZi5jb25uZWN0aW9uLFxuICAgICAgaGFuZGxlcyA9IF9yZWYuaGFuZGxlcyxcbiAgICAgIHN0cmF5Q29ubmVjdGlvbiA9IF9yZWYuc3RyYXlDb25uZWN0aW9uLFxuICAgICAgc3RyYXlDb25uZWN0aW9uSGFuZGxlID0gX3JlZi5zdHJheUNvbm5lY3Rpb25IYW5kbGU7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiBjb25uZWN0aW9uXG4gIH0pO1xuXG4gIGlmIChoYW5kbGVzKSB7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgIGRhdGE6IGhhbmRsZXNcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChzdHJheUNvbm5lY3Rpb24pIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgICAgZGF0YTogc3RyYXlDb25uZWN0aW9uXG4gICAgfSk7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgIGRhdGE6IFtzdHJheUNvbm5lY3Rpb25IYW5kbGVdXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gYWN0aW9ucztcbn07XG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgcG9pbnRJZCA9IF9yZWYucG9pbnRJZCxcbiAgICAgIGNvbm5lY3Rpb25JZCA9IF9yZWYuY29ubmVjdGlvbklkLFxuICAgICAgaGFuZGxlSWQgPSBfcmVmLmhhbmRsZUlkLFxuICAgICAgaGFuZGxlUG9zaXRpb24gPSBfcmVmLmhhbmRsZVBvc2l0aW9uO1xuICByZXR1cm4gW3tcbiAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgZGF0YToge1xuICAgICAgaWQ6IGNvbm5lY3Rpb25JZCxcbiAgICAgIHBvaW50czogW3BvaW50SWQsIG51bGxdLFxuICAgICAgaGFuZGxlczogW2hhbmRsZUlkLCBudWxsXVxuICAgIH1cbiAgfSwge1xuICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICBkYXRhOiBbe1xuICAgICAgeDogaGFuZGxlUG9zaXRpb24ueCxcbiAgICAgIHk6IGhhbmRsZVBvc2l0aW9uLnksXG4gICAgICBpZDogaGFuZGxlSWRcbiAgICB9XVxuICB9XTtcbn07XG5cbi8qKiovIH0pLFxuLyogODggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuICAgIGdldEhhbmRsZUJ5SWQgPSBfcmVxdWlyZS5nZXRIYW5kbGVCeUlkO1xuXG52YXIgZ2V0UG9zRGlmZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlMi50eXBlcztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgaGFuZGxlSWQgPSBfcmVmLmhhbmRsZUlkLFxuICAgICAgbmV3UG9pbnRzID0gX3JlZi5uZXdQb2ludHMsXG4gICAgICBwb2ludElkcyA9IF9yZWYucG9pbnRJZHMsXG4gICAgICBjb25uZWN0aW9uID0gX3JlZi5jb25uZWN0aW9uO1xuXG4gIHZhciBhY3Rpb25zID0gW107XG5cbiAgdmFyIF9uZXdQb2ludHMgPSBfc2xpY2VkVG9BcnJheShuZXdQb2ludHMsIDQpLFxuICAgICAgcDAgPSBfbmV3UG9pbnRzWzBdLFxuICAgICAgcDEgPSBfbmV3UG9pbnRzWzFdLFxuICAgICAgcDIgPSBfbmV3UG9pbnRzWzJdLFxuICAgICAgcDMgPSBfbmV3UG9pbnRzWzNdO1xuXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgLy8gcG9pbnRJZHMgaXMgbG9vc2VseSBkZWZpbmVkIGFzIHBvaW50IGFuZCBoYW5kbGUgaWRzIGhlcmUuXG4gICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgZGF0YToge1xuICAgICAgbmV3Q29ubmVjdGlvbjoge1xuICAgICAgICBpZDogY29ubmVjdGlvbi5pZCxcbiAgICAgICAgcG9pbnRzOiBbY29ubmVjdGlvbi5wb2ludHNbMF0sIHBvaW50SWRzWzNdXSxcbiAgICAgICAgaGFuZGxlczogW2Nvbm5lY3Rpb24uaGFuZGxlc1swXSwgcG9pbnRJZHNbMl1dXG4gICAgICB9LFxuICAgICAgb2xkQ29ubmVjdGlvbjogY29ubmVjdGlvblxuICAgIH1cbiAgfSk7XG5cbiAgLy8gVGhlIHBvaW50IGF0IHRoZSBjbGlja2VkIHBvc2l0aW9uXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfUE9JTlRcIixcbiAgICBkYXRhOiBfZXh0ZW5kcyh7fSwgcDMsIHsgaWQ6IHBvaW50SWRzWzNdIH0pXG4gIH0pO1xuXG4gIC8vIFRoZSBoYW5kbGUgZm9yIHRoZSBjbGlja2VkIHBvc2l0aW9uIHBvaW50IChzdGF0ZW1lbnQgYWJvdmUpLlxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICBkYXRhOiBbX2V4dGVuZHMoe30sIHAyLCB7IGlkOiBwb2ludElkc1syXSB9KV1cbiAgfSk7XG5cbiAgLy8gVGhlIGhhbmRsZSB0aGF0IHdhcyBwcmVzZW50IG9uIHRoZSBzdHJheSBjb25uZWN0aW9uXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgZGF0YToge1xuICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW2hhbmRsZUlkXSksXG4gICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShnZXRIYW5kbGVCeUlkKGNvbm5lY3Rpb24uaGFuZGxlc1swXSksIHAxKVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59O1xuXG4vKioqLyB9KSxcbi8qIDg5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbmV4cG9ydHMudW5kbyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciBvbGRDb25uZWN0aW9uID0gZGF0YS5vbGRDb25uZWN0aW9uO1xuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgcGF5bG9hZDogb2xkQ29ubmVjdGlvblxuICB9O1xufTtcblxuZXhwb3J0cy5yZWRvID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIG5ld0Nvbm5lY3Rpb24gPSBkYXRhLm5ld0Nvbm5lY3Rpb247XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIixcbiAgICBwYXlsb2FkOiBuZXdDb25uZWN0aW9uXG4gIH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDkwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBpc1ZhbGlkUG9zaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVkbzogZnVuY3Rpb24gcmVkbyhoYW5kbGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAoIWlzVmFsaWRQb3NpdGlvbihoYW5kbGVzW2ldKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhhbmRsZS5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghaGFuZGxlc1tpXS5pZCB8fCB0eXBlb2YgaGFuZGxlc1tpXS5pZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhhbmRsZSBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJ1wiICsgaGFuZGxlc1tpXS5pZCArIFwiJy5cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgIHBheWxvYWQ6IGhhbmRsZXNcbiAgICB9O1xuICB9LFxuICB1bmRvOiBmdW5jdGlvbiB1bmRvKGhhbmRsZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICghaGFuZGxlc1tpXS5pZCB8fCB0eXBlb2YgaGFuZGxlc1tpXS5pZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhhbmRsZSBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJ1wiICsgaGFuZGxlc1tpXS5pZCArIFwiJy5cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiREVMRVRFX0hBTkRMRVNcIixcbiAgICAgIHBheWxvYWQ6IGhhbmRsZXMubWFwKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBpZCA9IF9yZWYuaWQ7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH0pXG4gICAgfTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA5MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgcmVzb2x2ZUFjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xudmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbnZhciByZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZWRvKCkge1xuICB2YXIgZnV0dXJlID0gc3RvcmUuZ2V0U3RhdGUoKS5oaXN0b3J5LmZ1dHVyZTtcblxuICBpZiAoIWZ1dHVyZS5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWN0aW9uID0gZnV0dXJlW2Z1dHVyZS5sZW5ndGggLSAxXTtcbiAgcmVzb2x2ZUFjdGlvbihhY3Rpb24sIHsgdW5kbzogZmFsc2UgfSk7XG5cbiAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlJFRE9cIiB9KTtcbiAgcmVuZGVyKG51bGwsIHsgdXNlTGFzdFBvc2l0aW9uOiB0cnVlIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiA5MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSxcbiAgICBnZXRDb25uZWN0aW9uQnlJZCA9IF9yZXF1aXJlLmdldENvbm5lY3Rpb25CeUlkO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSxcbiAgICBnZXRQb2ludEhhbmRsZUlkcyA9IF9yZXF1aXJlMi5nZXRQb2ludEhhbmRsZUlkcztcblxudmFyIF9yZXF1aXJlMyA9IF9fd2VicGFja19yZXF1aXJlX18oMCksXG4gICAgdHlwZXMgPSBfcmVxdWlyZTMudHlwZXM7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzZWxlY3Rpb24gYW5kIGFkZHMgb2JqZWN0cyB0aGF0IGFyZSBpbXBsaWNpdGx5XG4gKiBzZWxlY3RlZCBieSBhbm90aGVyIG9iamVjdC5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqICAgIC0gTW92aW5nIGEgY29ubmVjdGlvbiBhbHNvIG1vdmVzIHRoZSBjb25uZWN0aW9uJ3MgcG9pbnRzXG4gKiAgICAtIE1vdmluZyBhIHBvaW50IGFsc28gbW92ZXMgdGhlIHBvaW50J3MgaGFuZGxlcy5cbiAqXG4gKiBTbyBpZiB5b3UgbW92ZSBhIGNvbm5lY3Rpb24sIHlvdSBtb3ZlIGl0cyBwb2ludHMsIGFuZCB0aG9zZVxuICogcG9pbnRzIHdpbGwgYWxzbyBtb3ZlIHRoZWlyIGhhbmRsZXMuXG4gKi9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMoc2VsZWN0aW9uKSB7XG4gIHZhciBuZXdTZWxlY3Rpb24gPSB7fTtcblxuICBmdW5jdGlvbiBhZGRUb1NlbGVjdGlvbih0eXBlLCBpZCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdTZWxlY3Rpb25bdHlwZV0pKSB7XG4gICAgICBuZXdTZWxlY3Rpb25bdHlwZV0gPSBbaWRdO1xuICAgIH0gZWxzZSBpZiAobmV3U2VsZWN0aW9uW3R5cGVdLmluZGV4T2YoaWQpID09PSAtMSkge1xuICAgICAgbmV3U2VsZWN0aW9uW3R5cGVdLnB1c2goaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZXJlIGlzIHByb2JhYmx5IHdoYXQgeW91IHdhbnQgdG8gZWRpdFxuICAgKi9cbiAgZnVuY3Rpb24gYWRkSW1wbGljaXRseVNlbGVjdGVkKHR5cGUsIGlkKSB7XG4gICAgaWYgKHR5cGUgPT09IHR5cGVzLlBPSU5UKSB7XG4gICAgICB2YXIgaGFuZGxlSWRzID0gZ2V0UG9pbnRIYW5kbGVJZHMoaWQpLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0pO1xuICAgICAgYWRkQXJyYXlUb1NlbGVjdGlvbih0eXBlcy5IQU5ETEUsIGhhbmRsZUlkcyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSB0eXBlcy5DT05OKSB7XG4gICAgICB2YXIgcG9pbnRJZHMgPSBnZXRDb25uZWN0aW9uQnlJZChpZCkucG9pbnRzO1xuICAgICAgYWRkQXJyYXlUb1NlbGVjdGlvbih0eXBlcy5QT0lOVCwgcG9pbnRJZHMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEFycmF5VG9TZWxlY3Rpb24odHlwZSwgaWRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGFkZFRvU2VsZWN0aW9uKHR5cGUsIGlkc1tpXSk7XG4gICAgICBhZGRJbXBsaWNpdGx5U2VsZWN0ZWQodHlwZSwgaWRzW2ldKTtcbiAgICB9XG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdGlvbik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHZhciB0eXBlID0ga2V5c1tpXTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdTZWxlY3Rpb25bdHlwZV0pKSB7XG4gICAgICBuZXdTZWxlY3Rpb25bdHlwZV0gPSBbXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlbGVjdGlvblt0eXBlXS5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgYWRkVG9TZWxlY3Rpb24odHlwZSwgc2VsZWN0aW9uW3R5cGVdW2pdKTtcbiAgICAgIGFkZEltcGxpY2l0bHlTZWxlY3RlZCh0eXBlLCBzZWxlY3Rpb25bdHlwZV1bal0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdTZWxlY3Rpb247XG59O1xuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBzaG9ydGlkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcbiAgICBhZGRMaXN0ZW5lciA9IF9yZXF1aXJlLmFkZExpc3RlbmVyLFxuICAgIHJlbW92ZUxpc3RlbmVyID0gX3JlcXVpcmUucmVtb3ZlTGlzdGVuZXI7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSxcbiAgICBpc0tleURvd24gPSBfcmVxdWlyZTIuaXNLZXlEb3duO1xuXG52YXIgZ2V0U3RyYXlDb25uZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG5cbnZhciBfcmVxdWlyZTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLFxuICAgIGdldFNlbGVjdGVkT2ZUeXBlID0gX3JlcXVpcmUzLmdldFNlbGVjdGVkT2ZUeXBlO1xuXG52YXIgX3JlcXVpcmU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcbiAgICBzZXRDdXJzb3IgPSBfcmVxdWlyZTQuc2V0Q3Vyc29yLFxuICAgIHJlbGVhc2VPdmVycmlkZSA9IF9yZXF1aXJlNC5yZWxlYXNlT3ZlcnJpZGU7XG5cbnZhciBzcGxpdEN1YmljQmV6aWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG52YXIgZ2V0Q29ubmVjdGlvblBvaW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xudmFyIGFkZEFjdGlvblRvSGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xudmFyIG9uTW92ZU1vdXNlRG93biA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlNS50eXBlcyxcbiAgICBjdXJzb3JzID0gX3JlcXVpcmU1LmN1cnNvcnMsXG4gICAga2V5cyA9IF9yZXF1aXJlNS5rZXlzO1xuXG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIHF1YWRyYXRpY1RvQ3ViaWNCZXppZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxudmFyIF9yZXF1aXJlNiA9IF9fd2VicGFja19yZXF1aXJlX18oMiksXG4gICAgZ2V0UG9pbnRCeUlkID0gX3JlcXVpcmU2LmdldFBvaW50QnlJZDtcblxudmFyIF9yZXF1aXJlNyA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG4gICAgZ2V0SGFuZGxlQnlJZCA9IF9yZXF1aXJlNy5nZXRIYW5kbGVCeUlkO1xuXG52YXIgZ2V0UG9zRGlmZmVyZW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXG52YXIgX3JlcXVpcmU4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSxcbiAgICBhZGRUb1NlbGVjdGlvbiA9IF9yZXF1aXJlOC5hZGRUb1NlbGVjdGlvbixcbiAgICBjbGVhclNlbGVjdGlvbiA9IF9yZXF1aXJlOC5jbGVhclNlbGVjdGlvbixcbiAgICBpc1NlbGVjdGVkID0gX3JlcXVpcmU4LmlzU2VsZWN0ZWQ7XG5cbnZhciBvblBlbkNvbm5lY3RQb2ludHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTtcbnZhciBvblBlbkFkZFBvaW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb25QZW5Nb3VzZURvd24oaW5pdGlhbFBvc2l0aW9uLCBvYmopIHtcbiAgaWYgKCFvYmopIHtcbiAgICAvKipcbiAgICAgKiBOb3RoaW5nIHdhcyBjbGlja2VkIG9uLCBsZXQncyBzZWUgaWYgdGhlcmUgYXJlIHNvbWUgc2VsZWN0ZWRcbiAgICAgKiBwb2ludHMuXG4gICAgICovXG4gICAgdmFyIHNlbGVjdGVkUG9pbnRzID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZXMuUE9JTlQpO1xuXG4gICAgaWYgKHNlbGVjdGVkUG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLyoqXG4gICAgICAgKiBBIHNpbmdsZSBzZWxlY3RlZCBwb2ludCBtZWFucyB3ZSBhcmUgZ29pbmcgdG8gYmUgY3JlYXRpbmcgYVxuICAgICAgICogcGF0aCBiZXR3ZWVuIHRoYXQgcG9pbnQgYW5kIHdoZXJlIHdlIGNsaWNrZWQuXG4gICAgICAgKlxuICAgICAgICogSWYgdGhlcmUncyBhIHN0cmF5IGNvbm5lY3Rpb24sIHdlIHVzZSBpdC5cbiAgICAgICAqL1xuICAgICAgdmFyIHN0cmF5Q29ubmVjdGlvbiA9IGdldFN0cmF5Q29ubmVjdGlvbihzZWxlY3RlZFBvaW50c1swXSk7XG4gICAgICBpZiAoc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgICAgIG9uUGVuQWRkUG9pbnQoaW5pdGlhbFBvc2l0aW9uLCB7XG4gICAgICAgICAgc3RyYXlDb25uZWN0aW9uOiBzdHJheUNvbm5lY3Rpb25cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblBlbkFkZFBvaW50KGluaXRpYWxQb3NpdGlvbiwge1xuICAgICAgICAgIHNlbGVjdGVkUG9pbnQ6IHNlbGVjdGVkUG9pbnRzWzBdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBvciBtdWx0aXBsZSBwb2ludHMgc2VsZWN0ZWQsIHNvIHdlIGNyZWF0ZSBhbiB1bmNvbm5lY3RlZCBwb2ludFxuICAgICAgb25QZW5BZGRQb2ludChpbml0aWFsUG9zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdmFsdWUgPSBvYmoudmFsdWUsXG4gICAgICB0eXBlID0gb2JqLnR5cGU7XG5cbiAgLyoqXG4gICAqIFdlIGNsaWNrZWQgb24gYSBjb25uZWN0aW9uIHdpdGggdGhlIHBlbiB0b29sLCBzbyB3ZVxuICAgKiBzcGxpdCB0aGUgY29ubmVjdGlvbi5cbiAgICovXG5cbiAgaWYgKHR5cGUgPT09IHR5cGVzLkNPTk4pIHtcbiAgICB2YXIgY29ubmVjdGlvbiA9IHZhbHVlLmNvbm5lY3Rpb24sXG4gICAgICAgIGNsb3Nlc3RQb2ludCA9IHZhbHVlLmNsb3Nlc3RQb2ludDtcbiAgICB2YXIgdCA9IGNsb3Nlc3RQb2ludC50OyAvLyB0IGlzIHdoZXJlIHdlIHNwbGl0IHRoZSBwYXRoXG5cbiAgICB2YXIgY3VycmVudFBvaW50cyA9IGdldENvbm5lY3Rpb25Qb2ludHMoY29ubmVjdGlvbik7XG5cbiAgICBpZiAoIWN1cnJlbnRQb2ludHNbMV0gJiYgIWN1cnJlbnRQb2ludHNbMl0pIHtcbiAgICAgIC8qKlxuICAgICAgICogTm8gaGFuZGxlcywgc28gd2UncmUgc3BsaXR0aW5nIGEgc3RyYWlnaHQgbGluZS5cbiAgICAgICAqL1xuICAgICAgdmFyIG5ld1BvaW50SWQgPSBzaG9ydGlkKCk7XG5cbiAgICAgIGNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICBhZGRUb1NlbGVjdGlvbih0eXBlcy5QT0lOVCwgbmV3UG9pbnRJZCk7XG5cbiAgICAgIGFkZEFjdGlvblRvSGlzdG9yeSh7XG4gICAgICAgIHR5cGU6IFwiU1BMSVRfTElORV9DT05ORUNUSU9OXCIsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZHM6IFtzaG9ydGlkKCksIHNob3J0aWQoKV0sXG4gICAgICAgICAgY29ubmVjdGlvbjogY29ubmVjdGlvbixcbiAgICAgICAgICBuZXdQb2ludDogX2V4dGVuZHMoe30sIGNsb3Nlc3RQb2ludCwge1xuICAgICAgICAgICAgaWQ6IG5ld1BvaW50SWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLyoqXG4gICAgICAgKiBTcGxpdHRpbmcgYSBjdWJpYyBiZXppZXJcbiAgICAgICAqL1xuICAgICAgdmFyIG5ld1BvaW50cyA9IHNwbGl0Q3ViaWNCZXppZXIoY3VycmVudFBvaW50cywgdCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3UG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIG5ld1BvaW50c1tpXS5pZCA9IHNob3J0aWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gcDIgYW5kIHA0IHdpbGwgYmUgc2libGluZ3NcbiAgICAgIG5ld1BvaW50c1syXS5zaWJsaW5nID0gbmV3UG9pbnRzWzRdLmlkO1xuICAgICAgbmV3UG9pbnRzWzRdLnNpYmxpbmcgPSBuZXdQb2ludHNbMl0uaWQ7XG5cbiAgICAgIC8vIFNlbGVjdGluZyB0aGUgbmV3IHBvaW50XG4gICAgICBjbGVhclNlbGVjdGlvbigpO1xuICAgICAgYWRkVG9TZWxlY3Rpb24odHlwZXMuUE9JTlQsIG5ld1BvaW50c1szXS5pZCk7XG5cbiAgICAgIGFkZEFjdGlvblRvSGlzdG9yeSh7XG4gICAgICAgIHR5cGU6IFwiU1BMSVRfQ09OTkVDVElPTlwiLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWRzOiBbc2hvcnRpZCgpLCBzaG9ydGlkKCldLFxuICAgICAgICAgIGNvbm5lY3Rpb246IGNvbm5lY3Rpb24sXG4gICAgICAgICAgbmV3UG9pbnRzOiBuZXdQb2ludHNcbiAgICAgICAgfVxuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBzZXRDdXJzb3IoXCJERUZBVUxUXCIpOyAvLyBUaGVyZSB3aWxsIGJlIGEgcG9pbnQgYmVsb3cgdGhlIG1vdXNlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHdlIGNsaWNrIGEgaGFuZGxlLCB3ZSBzaW1wbHkgbW92ZSBpdC5cbiAgICovXG4gIGlmICh0eXBlID09PSB0eXBlcy5IQU5ETEUpIHtcbiAgICBvbk1vdmVNb3VzZURvd24oaW5pdGlhbFBvc2l0aW9uLCBvYmopO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgd2hlcmUgdGhpbmdzIGdldCBmdW4uXG4gICAqL1xuICBpZiAodHlwZSA9PT0gdHlwZXMuUE9JTlQpIHtcbiAgICB2YXIgX3NlbGVjdGVkUG9pbnRzID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZXMuUE9JTlQpO1xuXG4gICAgaWYgKF9zZWxlY3RlZFBvaW50cy5sZW5ndGggPT09IDEgJiYgX3NlbGVjdGVkUG9pbnRzWzBdICE9PSB2YWx1ZS5pZCkge1xuICAgICAgb25QZW5Db25uZWN0UG9pbnRzKF9zZWxlY3RlZFBvaW50c1swXSwgdmFsdWUuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdlIGNsZWFyIHRoZSBzZWxlY3Rpb24gaWYgc2hpZnQgaXMgbm90IGJlaW5nIGhlbGRcbiAgICBpZiAoIWlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgLy8gVGhlIHBvaW50IGhvd2V2ZXIsIHdpbGwgYWx3YXlzIGJlIHNlbGVjdGVkXG4gICAgaWYgKCFpc1NlbGVjdGVkKHR5cGVzLlBPSU5ULCB2YWx1ZS5pZCkpIHtcbiAgICAgIGFkZFRvU2VsZWN0aW9uKHR5cGVzLlBPSU5ULCB2YWx1ZS5pZCk7XG4gICAgfVxuXG4gICAgdmFyIG1vdXNlTW92ZWQgPSBmYWxzZTtcbiAgICB2YXIgY3Vyc29yT3ZlcnJpZGVJZCA9IHZvaWQgMDtcbiAgICB2YXIgbGFzdFBvc2l0aW9uID0gaW5pdGlhbFBvc2l0aW9uO1xuXG4gICAgdmFyIF9zdHJheUNvbm5lY3Rpb24gPSBfc2VsZWN0ZWRQb2ludHMubGVuZ3RoID09PSAxID8gZ2V0U3RyYXlDb25uZWN0aW9uKF9zZWxlY3RlZFBvaW50c1swXSkgOiBudWxsO1xuXG4gICAgaWYgKCFfc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgICAvKipcbiAgICAgICAqIElmIHRoZXJlJ3Mgbm8gc3RyYXkgY29ubmVjdGlvbiB3ZSBjcmVhdGUgb25lIGlmIHRoZSBtb3VzZSBpc1xuICAgICAgICogbW92ZWQuXG4gICAgICAgKlxuICAgICAgICogT3RoZXJ3aXNlIG5vdGhpbmcgaGFwcGVucyBleGNlcHQgdGhhdCB0aGUgcG9pbnQgaXMgc2VsZWN0ZWQuXG4gICAgICAgKi9cblxuICAgICAgdmFyIG5ld0Nvbm5lY3Rpb25JZCA9IHNob3J0aWQoKTtcbiAgICAgIHZhciBuZXdIYW5kbGVJZCA9IHNob3J0aWQoKTtcblxuICAgICAgdmFyIGxpc3RlbmVySWQgPSBhZGRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoY3VycmVudFBvc2l0aW9uKSB7XG4gICAgICAgIGlmICghbW91c2VNb3ZlZCkge1xuICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyB0aGUgbmV3IHN0cmF5IGNvbm5lY3Rpb24gYW5kIGhhbmRsZVxuICAgICAgICAgIG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgICAgIGN1cnNvck92ZXJyaWRlSWQgPSBzZXRDdXJzb3IoXCJQRU5cIiwgeyBvdmVycmlkZTogdHJ1ZSB9KTtcblxuICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgaWQ6IG5ld0Nvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgcG9pbnRzOiBbdmFsdWUuaWQsIG51bGxdLFxuICAgICAgICAgICAgICBoYW5kbGVzOiBbbmV3SGFuZGxlSWQsIG51bGxdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgICAgICAgICAgcGF5bG9hZDogW3tcbiAgICAgICAgICAgICAgeDogY3VycmVudFBvc2l0aW9uLngsXG4gICAgICAgICAgICAgIHk6IGN1cnJlbnRQb3NpdGlvbi55LFxuICAgICAgICAgICAgICBpZDogbmV3SGFuZGxlSWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTW91c2Ugd2FzIGFscmVhZHkgbW92ZWQsIHNvIHdlIGp1c3QgdXBkYXRlIHRoZSBwb3NpdGlvbi5cbiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW25ld0hhbmRsZUlkXSksXG4gICAgICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBnZXRQb3NEaWZmZXJlbmNlKGxhc3RQb3NpdGlvbiwgY3VycmVudFBvc2l0aW9uKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdFBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uO1xuICAgICAgfSk7XG5cbiAgICAgIGFkZExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGxpc3RlbmVySWQpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY3Vyc29yT3ZlcnJpZGVJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJlbGVhc2VPdmVycmlkZShjdXJzb3JPdmVycmlkZUlkKTtcbiAgICAgICAgICBzZXRDdXJzb3IoXCJERUZBVUxUXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlcyB0aGUgYWN0aW9uIHRvIGNyZWF0ZSB0aGUgbmV3IHN0cmF5IGNvbm5lY3Rpb24uXG4gICAgICAgIGlmIChtb3VzZU1vdmVkICYmICFfc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgICAgICAgYWRkQWN0aW9uVG9IaXN0b3J5KHtcbiAgICAgICAgICAgIHR5cGU6IFwiQUREX1NUUkFZX0NPTk5FQ1RJT05cIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgcG9pbnRJZDogX3NlbGVjdGVkUG9pbnRzWzBdLFxuICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IG5ld0Nvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgaGFuZGxlSWQ6IG5ld0hhbmRsZUlkLFxuICAgICAgICAgICAgICBoYW5kbGVQb3NpdGlvbjogbGFzdFBvc2l0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogOTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSxcbiAgICBnZXRQb2ludENvbm5lY3Rpb25zID0gX3JlcXVpcmUuZ2V0UG9pbnRDb25uZWN0aW9ucztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRTdHJheUNvbm5lY3Rpb24ocG9pbnRJZCkge1xuICB2YXIgY29ubmVjdGlvbnMgPSBnZXRQb2ludENvbm5lY3Rpb25zKHBvaW50SWQpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoY29ubmVjdGlvbnNbaV0ucG9pbnRzWzFdID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gY29ubmVjdGlvbnNbaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKioqLyB9KSxcbi8qIDk1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxuLyoqXG4gKiBGb3IgYSBuaWNlIGdlb21ldHJpYyB2aXN1YWxpemF0aW9uIG9mIHRoZSBtYXRoLCBjaGVjayBiZWxvdy5cbiAqIGh0dHA6Ly93d3cuaXNjcmlwdGRlc2lnbi5jb20vP3NrZXRjaD10dXRvcmlhbC9zcGxpdEN1YmljQmV6aWVyXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3BsaXRDdWJpY0Jlemllcihwb2ludHMsIHQpIHtcbiAgdmFyIF9wb2ludHMgPSBfc2xpY2VkVG9BcnJheShwb2ludHMsIDQpLFxuICAgICAgcDEgPSBfcG9pbnRzWzBdLFxuICAgICAgcDIgPSBfcG9pbnRzWzFdLFxuICAgICAgcDMgPSBfcG9pbnRzWzJdLFxuICAgICAgcDQgPSBfcG9pbnRzWzNdO1xuXG4gIHZhciB4MSA9IHAxLng7XG4gIHZhciB5MSA9IHAxLnk7XG5cbiAgdmFyIHgyID0gcDIueDtcbiAgdmFyIHkyID0gcDIueTtcblxuICB2YXIgeDMgPSBwMy54O1xuICB2YXIgeTMgPSBwMy55O1xuXG4gIHZhciB4NCA9IHA0Lng7XG4gIHZhciB5NCA9IHA0Lnk7XG5cbiAgdmFyIHgxMiA9ICh4MiAtIHgxKSAqIHQgKyB4MTtcbiAgdmFyIHkxMiA9ICh5MiAtIHkxKSAqIHQgKyB5MTtcblxuICB2YXIgeDIzID0gKHgzIC0geDIpICogdCArIHgyO1xuICB2YXIgeTIzID0gKHkzIC0geTIpICogdCArIHkyO1xuXG4gIHZhciB4MzQgPSAoeDQgLSB4MykgKiB0ICsgeDM7XG4gIHZhciB5MzQgPSAoeTQgLSB5MykgKiB0ICsgeTM7XG5cbiAgdmFyIHgxMjMgPSAoeDIzIC0geDEyKSAqIHQgKyB4MTI7XG4gIHZhciB5MTIzID0gKHkyMyAtIHkxMikgKiB0ICsgeTEyO1xuXG4gIHZhciB4MjM0ID0gKHgzNCAtIHgyMykgKiB0ICsgeDIzO1xuICB2YXIgeTIzNCA9ICh5MzQgLSB5MjMpICogdCArIHkyMztcblxuICB2YXIgeDEyMzQgPSAoeDIzNCAtIHgxMjMpICogdCArIHgxMjM7XG4gIHZhciB5MTIzNCA9ICh5MjM0IC0geTEyMykgKiB0ICsgeTEyMztcblxuICAvKipcbiAgICogQ3JlZGl0IHRvIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NDA1NzU2LlxuICAgKlxuICAgKiBCZWxvdyBpcyBhYnNvbHV0ZWx5IGdvcmdlb3VzLlxuICAgKi9cbiAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MSB9LCAvLyBUaGUgbGVmdCBoYW5kIHBvaW50XG4gIHsgeDogeDEyLCB5OiB5MTIgfSwgeyB4OiB4MTIzLCB5OiB5MTIzIH0sIHsgeDogeDEyMzQsIHk6IHkxMjM0IH0sIC8vIFRoZSBuZXcgc3BsaXQgcG9pbnRcbiAgeyB4OiB4MjM0LCB5OiB5MjM0IH0sIHsgeDogeDM0LCB5OiB5MzQgfSwgeyB4OiB4NCwgeTogeTQgfV07XG59O1xuXG4vKioqLyB9KSxcbi8qIDk2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9nZXRIYW5kbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIHNob3J0aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuICAgIGFkZExpc3RlbmVyID0gX3JlcXVpcmUuYWRkTGlzdGVuZXIsXG4gICAgcmVtb3ZlTGlzdGVuZXIgPSBfcmVxdWlyZS5yZW1vdmVMaXN0ZW5lcjtcblxudmFyIGlzVmFsaWRQb3NpdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLFxuICAgIGFkZFRvU2VsZWN0aW9uID0gX3JlcXVpcmUyLmFkZFRvU2VsZWN0aW9uLFxuICAgIGNsZWFyU2VsZWN0aW9uID0gX3JlcXVpcmUyLmNsZWFyU2VsZWN0aW9uLFxuICAgIGlzU2VsZWN0ZWQgPSBfcmVxdWlyZTIuaXNTZWxlY3RlZDtcblxudmFyIGFkZEFjdGlvblRvSGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgX3JlcXVpcmUzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcbiAgICBzZXRDdXJzb3IgPSBfcmVxdWlyZTMuc2V0Q3Vyc29yLFxuICAgIHJlbGVhc2VPdmVycmlkZSA9IF9yZXF1aXJlMy5yZWxlYXNlT3ZlcnJpZGU7XG5cbnZhciBnZXRQb3NEaWZmZXJlbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIG1pcnJvclBvc2l0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG52YXIgcXVhZHJhdGljVG9DdWJpY0JlemllciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlcXVpcmU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSxcbiAgICBnZXRQb2ludEJ5SWQgPSBfcmVxdWlyZTQuZ2V0UG9pbnRCeUlkO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlNS50eXBlcztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBvblBlbkNvbm5lY3RQb2ludHMoc2VsZWN0ZWRQb2ludElkLCBjbGlja2VkUG9pbnRJZCkge1xuICB2YXIgZGF0YSA9IHtcbiAgICBzZWxlY3RlZFBvaW50SWQ6IHNlbGVjdGVkUG9pbnRJZCxcbiAgICBjbGlja2VkUG9pbnRJZDogY2xpY2tlZFBvaW50SWQsXG4gICAgY29ubmVjdGlvbjoge1xuICAgICAgaWQ6IHNob3J0aWQoKSxcbiAgICAgIHBvaW50czogW3NlbGVjdGVkUG9pbnRJZCwgY2xpY2tlZFBvaW50SWRdLFxuICAgICAgaGFuZGxlczogW251bGwsIG51bGxdXG4gICAgfVxuICB9O1xuXG4gIHN0b3JlLmRpc3BhdGNoKHtcbiAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgcGF5bG9hZDogZGF0YS5jb25uZWN0aW9uXG4gIH0pO1xuXG4gIGNsZWFyU2VsZWN0aW9uKCk7XG4gIGFkZFRvU2VsZWN0aW9uKHR5cGVzLlBPSU5ULCBjbGlja2VkUG9pbnRJZCk7XG5cbiAgdmFyIG1vdXNlTW92ZWQgPSBmYWxzZTtcbiAgdmFyIGN1cnNvck92ZXJyaWRlSWQgPSB2b2lkIDA7XG4gIHZhciBsYXN0UG9zaXRpb24gPSBfZXh0ZW5kcyh7fSwgZ2V0UG9pbnRCeUlkKGNsaWNrZWRQb2ludElkKSk7XG5cbiAgdmFyIGxpc3RlbmVySWQgPSBhZGRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICBpZiAoIW1vdXNlTW92ZWQgJiYgTWF0aC5oeXBvdChsYXN0UG9zaXRpb24ueCAtIHBvc2l0aW9uLngsIGxhc3RQb3NpdGlvbi55IC0gcG9zaXRpb24ueSkgPCAxMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbW91c2VNb3ZlZCkge1xuICAgICAgbW91c2VNb3ZlZCA9IHRydWU7XG4gICAgICBjdXJzb3JPdmVycmlkZUlkID0gc2V0Q3Vyc29yKFwiUEVOXCIsIHsgb3ZlcnJpZGU6IHRydWUgfSk7XG5cbiAgICAgIHZhciBzdHJheUNvbm5lY3Rpb25IYW5kbGVJZCA9IHNob3J0aWQoKTtcblxuICAgICAgZGF0YS5zdHJheUNvbm5lY3Rpb24gPSB7XG4gICAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICAgIHBvaW50czogW2NsaWNrZWRQb2ludElkLCBudWxsXSxcbiAgICAgICAgaGFuZGxlczogW3N0cmF5Q29ubmVjdGlvbkhhbmRsZUlkLCBudWxsXVxuICAgICAgfTtcbiAgICAgIGRhdGEuc3RyYXlDb25uZWN0aW9uSGFuZGxlID0ge1xuICAgICAgICBpZDogc3RyYXlDb25uZWN0aW9uSGFuZGxlSWQsXG4gICAgICAgIHg6IHBvc2l0aW9uLngsXG4gICAgICAgIHk6IHBvc2l0aW9uLnlcbiAgICAgIH07XG5cbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLCBwYXlsb2FkOiBkYXRhLnN0cmF5Q29ubmVjdGlvbiB9KTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfSEFORExFU1wiLCBwYXlsb2FkOiBbZGF0YS5zdHJheUNvbm5lY3Rpb25IYW5kbGVdIH0pO1xuXG4gICAgICB2YXIgb3JpZ2luID0gZ2V0UG9pbnRCeUlkKGNsaWNrZWRQb2ludElkKTtcblxuICAgICAgdmFyIF9xdWFkcmF0aWNUb0N1YmljQmV6aSA9IHF1YWRyYXRpY1RvQ3ViaWNCZXppZXIoZ2V0UG9pbnRCeUlkKHNlbGVjdGVkUG9pbnRJZCksIG51bGwsIG1pcnJvclBvc2l0aW9uKHBvc2l0aW9uLCBvcmlnaW4pLCBvcmlnaW4pLFxuICAgICAgICAgIF9xdWFkcmF0aWNUb0N1YmljQmV6aTIgPSBfc2xpY2VkVG9BcnJheShfcXVhZHJhdGljVG9DdWJpY0JlemksIDQpLFxuICAgICAgICAgIHAwID0gX3F1YWRyYXRpY1RvQ3ViaWNCZXppMlswXSxcbiAgICAgICAgICBwMSA9IF9xdWFkcmF0aWNUb0N1YmljQmV6aTJbMV0sXG4gICAgICAgICAgcDIgPSBfcXVhZHJhdGljVG9DdWJpY0JlemkyWzJdLFxuICAgICAgICAgIHAzID0gX3F1YWRyYXRpY1RvQ3ViaWNCZXppMlszXTtcblxuICAgICAgZGF0YS5oYW5kbGVzID0gW3AxLCBwMl0ubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcCwge1xuICAgICAgICAgIGlkOiBzaG9ydGlkKClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRhdGEuY29ubmVjdGlvbi5oYW5kbGVzID0gZGF0YS5oYW5kbGVzLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geC5pZDtcbiAgICAgIH0pO1xuXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgICAgcGF5bG9hZDogZGF0YS5oYW5kbGVzXG4gICAgICB9KTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgICAgIHBheWxvYWQ6IGRhdGEuY29ubmVjdGlvblxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfb3JpZ2luID0gZ2V0UG9pbnRCeUlkKGNsaWNrZWRQb2ludElkKTtcblxuICAgICAgdmFyIF9xdWFkcmF0aWNUb0N1YmljQmV6aTMgPSBxdWFkcmF0aWNUb0N1YmljQmV6aWVyKGdldFBvaW50QnlJZChzZWxlY3RlZFBvaW50SWQpLCBudWxsLCBtaXJyb3JQb3NpdGlvbihwb3NpdGlvbiwgX29yaWdpbiksIF9vcmlnaW4pLFxuICAgICAgICAgIF9xdWFkcmF0aWNUb0N1YmljQmV6aTQgPSBfc2xpY2VkVG9BcnJheShfcXVhZHJhdGljVG9DdWJpY0JlemkzLCA0KSxcbiAgICAgICAgICBfcCA9IF9xdWFkcmF0aWNUb0N1YmljQmV6aTRbMF0sXG4gICAgICAgICAgX3AyID0gX3F1YWRyYXRpY1RvQ3ViaWNCZXppNFsxXSxcbiAgICAgICAgICBfcDMgPSBfcXVhZHJhdGljVG9DdWJpY0Jlemk0WzJdLFxuICAgICAgICAgIF9wNCA9IF9xdWFkcmF0aWNUb0N1YmljQmV6aTRbM107XG5cbiAgICAgIC8vIFJpZ2h0IGhhbmRsZVxuXG5cbiAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICBzZWxlY3Rpb246IF9kZWZpbmVQcm9wZXJ0eSh7fSwgdHlwZXMuSEFORExFLCBbZGF0YS5oYW5kbGVzWzFdLmlkXSksXG4gICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZGF0YS5oYW5kbGVzWzFdLCBfcDIpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZGF0YS5oYW5kbGVzWzFdLnggPSBfcDIueDtcbiAgICAgIGRhdGEuaGFuZGxlc1sxXS55ID0gX3AyLnk7XG5cbiAgICAgIC8vIExlZnQgaGFuZGxlXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW2RhdGEuaGFuZGxlc1swXS5pZF0pLFxuICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBnZXRQb3NEaWZmZXJlbmNlKGRhdGEuaGFuZGxlc1swXSwgX3AzKVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZGF0YS5oYW5kbGVzWzBdLnggPSBfcDMueDtcbiAgICAgIGRhdGEuaGFuZGxlc1swXS55ID0gX3AzLnk7XG5cbiAgICAgIC8vIFVwZGF0aW5nIHN0cmF5IGNvbm5lY3Rpb24gaGFuZGxlIHBvc2l0aW9uXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW2RhdGEuc3RyYXlDb25uZWN0aW9uLmhhbmRsZXNbMF1dKSxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShkYXRhLnN0cmF5Q29ubmVjdGlvbkhhbmRsZSwgcG9zaXRpb24pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZGF0YS5zdHJheUNvbm5lY3Rpb25IYW5kbGUueCA9IHBvc2l0aW9uLng7XG4gICAgICBkYXRhLnN0cmF5Q29ubmVjdGlvbkhhbmRsZS55ID0gcG9zaXRpb24ueTtcbiAgICB9XG4gICAgbGFzdFBvc2l0aW9uID0gcG9zaXRpb247XG4gIH0pO1xuXG4gIGFkZExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbGlzdGVuZXJJZCk7XG5cbiAgICBpZiAoY3Vyc29yT3ZlcnJpZGVJZCkge1xuICAgICAgcmVsZWFzZU92ZXJyaWRlKGN1cnNvck92ZXJyaWRlSWQpO1xuICAgICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTtcbiAgICB9XG5cbiAgICBhZGRBY3Rpb25Ub0hpc3Rvcnkoe1xuICAgICAgdHlwZTogXCJDT05ORUNUX1BPSU5UU1wiLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0sIGZhbHNlKTtcbiAgfSwgdHJ1ZSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDk3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxudmFyIF9nZXRIYW5kbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIHNob3J0aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuICAgIGFkZExpc3RlbmVyID0gX3JlcXVpcmUuYWRkTGlzdGVuZXIsXG4gICAgcmVtb3ZlTGlzdGVuZXIgPSBfcmVxdWlyZS5yZW1vdmVMaXN0ZW5lcjtcblxudmFyIGlzVmFsaWRQb3NpdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLFxuICAgIGFkZFRvU2VsZWN0aW9uID0gX3JlcXVpcmUyLmFkZFRvU2VsZWN0aW9uLFxuICAgIGNsZWFyU2VsZWN0aW9uID0gX3JlcXVpcmUyLmNsZWFyU2VsZWN0aW9uLFxuICAgIGlzU2VsZWN0ZWQgPSBfcmVxdWlyZTIuaXNTZWxlY3RlZDtcblxudmFyIGFkZEFjdGlvblRvSGlzdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG52YXIgX3JlcXVpcmUzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcbiAgICBzZXRDdXJzb3IgPSBfcmVxdWlyZTMuc2V0Q3Vyc29yLFxuICAgIHJlbGVhc2VPdmVycmlkZSA9IF9yZXF1aXJlMy5yZWxlYXNlT3ZlcnJpZGU7XG5cbnZhciBnZXRQb3NEaWZmZXJlbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG52YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIG1pcnJvclBvc2l0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG52YXIgcXVhZHJhdGljVG9DdWJpY0JlemllciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX3JlcXVpcmU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSxcbiAgICBnZXRQb2ludEJ5SWQgPSBfcmVxdWlyZTQuZ2V0UG9pbnRCeUlkO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlNS50eXBlcztcblxudmFyIGRlZmF1bHRPcHRzID0ge1xuICBzdHJheUNvbm5lY3Rpb246IG51bGwsXG4gIHNlbGVjdGVkUG9pbnQ6IG51bGxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb25QZW5BZGRQb2ludChwb3NpdGlvbikge1xuICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZGVmYXVsdE9wdHM7XG5cbiAgaWYgKCFpc1ZhbGlkUG9zaXRpb24ocG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbi5cIik7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBkYXRhIG9iamVjdCB3aWxsIGxhdGVyIGJlIHBhc3NlZCBpbnRvIHRoZSBcIkFERF9QRU5fUE9JTlRcIlxuICAgKiBhY3Rpb24sIHdoaWNoIGhhcyBhIGxvdCBvZiBvcHRpb25hbCBmdW5jdGlvbmFsaXR5LlxuICAgKi9cbiAgdmFyIGRhdGEgPSB7fTtcblxuICB2YXIgcG9pbnRJZCA9IHNob3J0aWQoKTtcbiAgZGF0YS5wb2ludCA9IHtcbiAgICBpZDogcG9pbnRJZCxcbiAgICB4OiBwb3NpdGlvbi54LFxuICAgIHk6IHBvc2l0aW9uLnlcbiAgfTtcblxuICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiQUREX1BPSU5UXCIsIHBheWxvYWQ6IGRhdGEucG9pbnQgfSk7XG5cbiAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgYWRkVG9TZWxlY3Rpb24odHlwZXMuUE9JTlQsIHBvaW50SWQpO1xuXG4gIHZhciBtb3VzZU1vdmVkID0gZmFsc2U7XG4gIHZhciBjdXJzb3JPdmVycmlkZUlkID0gdm9pZCAwO1xuICB2YXIgbGFzdFBvc2l0aW9uID0gcG9zaXRpb247XG5cbiAgdmFyIGhhbmRsZUlkID0gc2hvcnRpZCgpO1xuICB2YXIgY29ubmVjdGlvbklkID0gc2hvcnRpZCgpO1xuXG4gIHZhciBvcmlnaW5hbE1vdmVkSGFuZGxlID0gdm9pZCAwO1xuICB2YXIgc3RyYXlDb25uZWN0aW9uUG9pbnRzID0gdm9pZCAwO1xuICB2YXIgbmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSA9IHZvaWQgMDtcblxuICAvKipcbiAgICogV2UgY29tcGxldGUgdGhlIHN0cmF5IGNvbm5lY3Rpb24gYnkgY29ubmVjdGluZyB0aGVcbiAgICogbmV3IHBvaW50IHRvIGl0LlxuICAgKi9cbiAgaWYgKG9wdHMuc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgdmFyIHN0cmF5Q29ubmVjdGlvbiA9IG9wdHMuc3RyYXlDb25uZWN0aW9uO1xuXG4gICAgZGF0YS5zdHJheUNvbm5lY3Rpb24gPSBzdHJheUNvbm5lY3Rpb247XG5cbiAgICB2YXIgbmV3UG9pbnRzID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihnZXRQb2ludEJ5SWQoc3RyYXlDb25uZWN0aW9uLnBvaW50c1swXSksICgwLCBfZ2V0SGFuZGxlcy5nZXRIYW5kbGVCeUlkKShzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSksIG51bGwsIHBvc2l0aW9uKTtcblxuICAgIHN0cmF5Q29ubmVjdGlvblBvaW50cyA9IG5ld1BvaW50cztcblxuICAgIC8qKlxuICAgICAqIFRoZSBoYW5kbGUgb2YgdGhlIG5ldyBwb2ludCBmb3IgdGhlIGNvbXBsZXRlZCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIG1vdXNlIGlzIG5vdCBtb3ZlZCwgcDIgb2YgdGhlIG5ldyBwb2ludHMgd2lsbCBiZSB1c2VkXG4gICAgICogZm9yIHRoZSBwb3NpdGlvbiBvZiB0aGUgaGFuZGxlLlxuICAgICAqXG4gICAgICogSWYgdGhlIG1vdXNlIGlzIG1vdmVkLCB0aGUgbWlycm9yIG9mIHRoZSBtb3VzZXVwIHBvc2l0aW9uIHdpbGxcbiAgICAgKiBiZSB0aGUgaGFuZGxlIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSA9IHtcbiAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICB4OiBuZXdQb2ludHNbMl0ueCxcbiAgICAgIHk6IG5ld1BvaW50c1syXS55XG4gICAgfTtcblxuICAgIGRhdGEuY29tcGxldGVkQ29ubmVjdGlvbiA9IHtcbiAgICAgIGlkOiBzdHJheUNvbm5lY3Rpb24uaWQsXG4gICAgICBwb2ludHM6IFtzdHJheUNvbm5lY3Rpb24ucG9pbnRzWzBdLCBkYXRhLnBvaW50LmlkXSxcbiAgICAgIGhhbmRsZXM6IFtzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSwgZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLmlkXVxuICAgIH07XG5cbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiQUREX0hBTkRMRVNcIiwgcGF5bG9hZDogW2RhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZV0gfSk7XG4gICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIiwgcGF5bG9hZDogZGF0YS5jb21wbGV0ZWRDb25uZWN0aW9uIH0pO1xuXG4gICAgLy8gTm93IHdlIG5lZWQgdG8gbW92ZSB0aGUgXCJtb3ZlZEhhbmRsZVwiXG4gICAgb3JpZ2luYWxNb3ZlZEhhbmRsZSA9ICgwLCBfZ2V0SGFuZGxlcy5nZXRIYW5kbGVCeUlkKShzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSk7XG4gICAgdmFyIHBvc2l0aW9uQ2hhbmdlID0gZ2V0UG9zRGlmZmVyZW5jZShvcmlnaW5hbE1vdmVkSGFuZGxlLCBuZXdQb2ludHNbMV0pO1xuICAgIGRhdGEubW92ZWRIYW5kbGUgPSB7XG4gICAgICBpZDogc3RyYXlDb25uZWN0aW9uLmhhbmRsZXNbMF0sXG4gICAgICBwb3NpdGlvbkNoYW5nZTogcG9zaXRpb25DaGFuZ2VcbiAgICB9O1xuXG4gICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHNlbGVjdGlvbjogX2RlZmluZVByb3BlcnR5KHt9LCB0eXBlcy5IQU5ETEUsIFtkYXRhLm1vdmVkSGFuZGxlLmlkXSksXG4gICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBwb3NpdGlvbkNoYW5nZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKG9wdHMuc2VsZWN0ZWRQb2ludCkge1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSdzIG5vdCBhIHN0cmF5IGNvbm5lY3Rpb24sIGJ1dCBhIHNpbmdsZVxuICAgICAqIHBvaW50IGlzIHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogVGhpcyBtZWFucyB0aGF0IHdlJ3JlIGNyZWF0aW5nIGEgbmV3IGNvbm5lY3Rpb24gd2l0aCBubyBwMCBoYW5kbGUuXG4gICAgICovXG5cbiAgICAvLyBUaGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBzZWxlY3RlZFBvaW50IGFuZCB0aGUgbmV3XG4gICAgZGF0YS5saW5lQ29ubmVjdGlvbiA9IHtcbiAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICBwb2ludHM6IFtvcHRzLnNlbGVjdGVkUG9pbnQsIHBvaW50SWRdLFxuICAgICAgaGFuZGxlczogW251bGwsIG51bGxdXG4gICAgfTtcblxuICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLCBwYXlsb2FkOiBkYXRhLmxpbmVDb25uZWN0aW9uIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdyBoZXJlIGNvbWVzIGFsbCB0aGUgYnVsbHNoaXRcbiAgICovXG4gIHZhciBsaXN0ZW5lcklkID0gYWRkTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24gKGN1cnJlbnRQb3NpdGlvbikge1xuICAgIGlmICghbW91c2VNb3ZlZCAmJiBNYXRoLmh5cG90KGxhc3RQb3NpdGlvbi54IC0gY3VycmVudFBvc2l0aW9uLngsIGxhc3RQb3NpdGlvbi55IC0gY3VycmVudFBvc2l0aW9uLnkpIDwgMTApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW1vdXNlTW92ZWQpIHtcbiAgICAgIG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgY3Vyc29yT3ZlcnJpZGVJZCA9IHNldEN1cnNvcihcIlBFTlwiLCB7IG92ZXJyaWRlOiB0cnVlIH0pO1xuXG4gICAgICAvLyBTaW5jZSB0aGUgbW91c2UgbW92ZWQsIHdlIGNyZWF0ZSBhIG5ldyBzdHJheSBjb25uZWN0aW9uIVxuICAgICAgZGF0YS5uZXdDb25uZWN0aW9uID0ge1xuICAgICAgICBpZDogY29ubmVjdGlvbklkLFxuICAgICAgICBwb2ludHM6IFtwb2ludElkLCBudWxsXSxcbiAgICAgICAgaGFuZGxlczogW2hhbmRsZUlkLCBudWxsXVxuICAgICAgfTtcbiAgICAgIGRhdGEubmV3SGFuZGxlID0ge1xuICAgICAgICB4OiBjdXJyZW50UG9zaXRpb24ueCxcbiAgICAgICAgeTogY3VycmVudFBvc2l0aW9uLnksXG4gICAgICAgIGlkOiBoYW5kbGVJZFxuICAgICAgfTtcblxuICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsIHBheWxvYWQ6IGRhdGEubmV3Q29ubmVjdGlvbiB9KTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfSEFORExFU1wiLCBwYXlsb2FkOiBbZGF0YS5uZXdIYW5kbGVdIH0pO1xuXG4gICAgICBpZiAob3B0cy5zdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtb3VzZSBtb3ZlZCBzbyB3ZSBoYXZlIHRvIGRpc2NhcmQgYm90aCBvZiB0aGUgc3RyYXlcbiAgICAgICAgICogY29ubmVjdGlvbiBoYW5kbGUgcG9zaXRpb25zLlxuICAgICAgICAgKi9cblxuICAgICAgICAvLyBNb3ZpbmcgcDEgKG1vdmVkSGFuZGxlKVxuICAgICAgICBkYXRhLm1vdmVkSGFuZGxlLnBvc2l0aW9uQ2hhbmdlID0gZ2V0UG9zRGlmZmVyZW5jZShzdHJheUNvbm5lY3Rpb25Qb2ludHNbMV0sIG9yaWdpbmFsTW92ZWRIYW5kbGUpO1xuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW2RhdGEubW92ZWRIYW5kbGUuaWRdKSxcbiAgICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBkYXRhLm1vdmVkSGFuZGxlLnBvc2l0aW9uQ2hhbmdlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNb3ZpbmcgcDIgKHRoZSBcIm5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGVcIikuXG4gICAgICAgIHZhciBfcG9zaXRpb25DaGFuZ2UgPSBnZXRQb3NEaWZmZXJlbmNlKGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSwgY3VycmVudFBvc2l0aW9uKTtcblxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGVzLkhBTkRMRSwgW2RhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS5pZF0pLFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IF9wb3NpdGlvbkNoYW5nZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS54ID0gY3VycmVudFBvc2l0aW9uLng7XG4gICAgICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS55ID0gY3VycmVudFBvc2l0aW9uLnk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEubGluZUNvbm5lY3Rpb24pIHtcbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlID0ge1xuICAgICAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICAgICAgeDogY3VycmVudFBvc2l0aW9uLngsXG4gICAgICAgICAgeTogY3VycmVudFBvc2l0aW9uLnlcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbGVmdEhhbmRsZSA9IHF1YWRyYXRpY1RvQ3ViaWNCZXppZXIoZ2V0UG9pbnRCeUlkKG9wdHMuc2VsZWN0ZWRQb2ludCksIG51bGwsIGRhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZSwgcG9zaXRpb24pWzFdO1xuXG4gICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb25MZWZ0SGFuZGxlID0ge1xuICAgICAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICAgICAgeDogbGVmdEhhbmRsZS54LFxuICAgICAgICAgIHk6IGxlZnRIYW5kbGUueVxuICAgICAgICB9O1xuXG4gICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb24uaGFuZGxlcyA9IFtkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZS5pZCwgZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlLmlkXTtcblxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgICAgICAgIHBheWxvYWQ6IFtkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZSwgZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlXVxuICAgICAgICB9KTtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIiwgcGF5bG9hZDogZGF0YS5saW5lQ29ubmVjdGlvbiB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLyoqXG4gICAgICAgKiBNb3VzZSBoYXMgYmVlbiBtb3ZlZCwgc28gd2UgdXBkYXRlIGEgZmV3IHRoaW5ncy5cbiAgICAgICAqL1xuICAgICAgdmFyIF9wb3NpdGlvbkNoYW5nZTIgPSBnZXRQb3NEaWZmZXJlbmNlKGxhc3RQb3NpdGlvbiwgY3VycmVudFBvc2l0aW9uKTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICBzZWxlY3Rpb246IF9kZWZpbmVQcm9wZXJ0eSh7fSwgdHlwZXMuSEFORExFLCBbaGFuZGxlSWRdKSxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZTogX3Bvc2l0aW9uQ2hhbmdlMlxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZGF0YS5uZXdIYW5kbGUueCA9IGN1cnJlbnRQb3NpdGlvbi54O1xuICAgICAgZGF0YS5uZXdIYW5kbGUueSA9IGN1cnJlbnRQb3NpdGlvbi55O1xuXG4gICAgICBpZiAob3B0cy5zdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgICAgdmFyIGhhbmRsZVBvcyA9IGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZTtcbiAgICAgICAgdmFyIGhhbmRsZU1pcnJvcklkID0gZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLmlkO1xuICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSBtaXJyb3JQb3NpdGlvbihjdXJyZW50UG9zaXRpb24sIHBvc2l0aW9uKTtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogX2RlZmluZVByb3BlcnR5KHt9LCB0eXBlcy5IQU5ETEUsIFtoYW5kbGVNaXJyb3JJZF0pLFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoaGFuZGxlUG9zLCBuZXdQb3NpdGlvbilcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLm5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGUueCA9IG5ld1Bvc2l0aW9uLng7XG4gICAgICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS55ID0gbmV3UG9zaXRpb24ueTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5saW5lQ29ubmVjdGlvbikge1xuICAgICAgICB2YXIgX3F1YWRyYXRpY1RvQ3ViaWNCZXppID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihnZXRQb2ludEJ5SWQob3B0cy5zZWxlY3RlZFBvaW50KSwgbnVsbCwgbWlycm9yUG9zaXRpb24oY3VycmVudFBvc2l0aW9uLCBwb3NpdGlvbiksIHBvc2l0aW9uKSxcbiAgICAgICAgICAgIF9xdWFkcmF0aWNUb0N1YmljQmV6aTIgPSBfc2xpY2VkVG9BcnJheShfcXVhZHJhdGljVG9DdWJpY0JlemksIDQpLFxuICAgICAgICAgICAgcDAgPSBfcXVhZHJhdGljVG9DdWJpY0JlemkyWzBdLFxuICAgICAgICAgICAgcDEgPSBfcXVhZHJhdGljVG9DdWJpY0JlemkyWzFdLFxuICAgICAgICAgICAgcDIgPSBfcXVhZHJhdGljVG9DdWJpY0JlemkyWzJdLFxuICAgICAgICAgICAgcDMgPSBfcXVhZHJhdGljVG9DdWJpY0JlemkyWzNdO1xuXG4gICAgICAgIC8vIFJpZ2h0IGhhbmRsZVxuXG5cbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogX2RlZmluZVByb3BlcnR5KHt9LCB0eXBlcy5IQU5ETEUsIFtkYXRhLmxpbmVDb25uZWN0aW9uUmlnaHRIYW5kbGUuaWRdKSxcbiAgICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBnZXRQb3NEaWZmZXJlbmNlKGRhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZSwgcDEpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlLnggPSBwMS54O1xuICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uUmlnaHRIYW5kbGUueSA9IHAxLnk7XG5cbiAgICAgICAgLy8gTGVmdCBoYW5kbGVcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogX2RlZmluZVByb3BlcnR5KHt9LCB0eXBlcy5IQU5ETEUsIFtkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZS5pZF0pLFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZGF0YS5saW5lQ29ubmVjdGlvbkxlZnRIYW5kbGUsIHAyKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvbkxlZnRIYW5kbGUueCA9IHAyLng7XG4gICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb25MZWZ0SGFuZGxlLnkgPSBwMi55O1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbjtcbiAgfSk7XG5cbiAgYWRkTGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBsaXN0ZW5lcklkKTtcblxuICAgIGlmIChjdXJzb3JPdmVycmlkZUlkKSB7XG4gICAgICByZWxlYXNlT3ZlcnJpZGUoY3Vyc29yT3ZlcnJpZGVJZCk7XG4gICAgICBzZXRDdXJzb3IoXCJERUZBVUxUXCIpO1xuICAgIH1cblxuICAgIHZhciBhY3Rpb24gPSB7XG4gICAgICB0eXBlOiBcIkFERF9QRU5fUE9JTlRcIixcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9O1xuXG4gICAgYWRkQWN0aW9uVG9IaXN0b3J5KGFjdGlvbiwgZmFsc2UpO1xuICB9LCB0cnVlKTtcbn07XG5cbi8qKiovIH0pLFxuLyogOTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9nZXRIYW5kbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9nZXRQb2ludHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLFxuICAgIGdldFBvaW50Q29ubmVjdGlvbnMgPSBfcmVxdWlyZS5nZXRQb2ludENvbm5lY3Rpb25zO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyksXG4gICAgYWRkR3VpZGUgPSBfcmVxdWlyZTIuYWRkR3VpZGU7XG5cbnZhciBfcmVxdWlyZTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLFxuICAgIGdldFNlbGVjdGVkT2ZUeXBlID0gX3JlcXVpcmUzLmdldFNlbGVjdGVkT2ZUeXBlO1xuXG52YXIgX3JlcXVpcmU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcbiAgICBzZXRDdXJzb3IgPSBfcmVxdWlyZTQuc2V0Q3Vyc29yO1xuXG52YXIgX3JlcXVpcmU1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKSxcbiAgICB0eXBlcyA9IF9yZXF1aXJlNS50eXBlcztcblxudmFyIHF1YWRyYXRpY1RvQ3ViaWNCZXppZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblxuZnVuY3Rpb24gc2V0UGVuQ3Vyc29yKHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IHR5cGVzLkNPTk4pIHtcbiAgICBzZXRDdXJzb3IoXCJQRU5fQUREX1BPSU5UXCIpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IHR5cGVzLkhBTkRMRSkge1xuICAgIHNldEN1cnNvcihcIkRFRkFVTFRcIik7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gdHlwZXMuUE9JTlQpIHtcbiAgICBzZXRDdXJzb3IoXCJQRU5fU0VMRUNUX1BPSU5UXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb25QZW5Nb3VzZU1vdmUocG9zaXRpb24sIG9iaikge1xuICBpZiAoIW9iaikge1xuICAgIC8vIFNob3cgZ3VpZGUgZm9yIG5ldyBwb2ludCBjcmVhdGlvblxuICAgIGFkZEd1aWRlKHR5cGVzLlBPSU5ULCBwb3NpdGlvbik7XG5cbiAgICB2YXIgc2VsZWN0ZWRQb2ludHMgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlcy5QT0lOVCk7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGVyZSdzIG9uZSBwb2ludCBzZWxlY3RlZCB3ZSB3YW50IHRvIGRyYXcgYSBndWlkZVxuICAgICAqIGJldHdlZW4gdGhlIHNlbGVjdGVkIGFuZCBwb3NzaWJsZSBuZXcgcG9pbnQuXG4gICAgICovXG4gICAgaWYgKHNlbGVjdGVkUG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIHN0cmF5Q29ubmVjdGlvbiA9IGZhbHNlO1xuXG4gICAgICB7XG4gICAgICAgIC8vIENoZWNraW5nIGZvciBzdHJheSBjb25uZWN0aW9uc1xuICAgICAgICB2YXIgY29ubmVjdGlvbnMgPSBnZXRQb2ludENvbm5lY3Rpb25zKHNlbGVjdGVkUG9pbnRzWzBdKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25uZWN0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChjb25uZWN0aW9uc1tpXS5wb2ludHNbMV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHN0cmF5Q29ubmVjdGlvbiA9IGNvbm5lY3Rpb25zW2ldO1xuICAgICAgICAgICAgaSA9IGNvbm5lY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBIHN0cmF5IGNvbm5lY3Rpb24gbWVhbnMgdGhhdCBhIGhhbmRsZSBoYXMgYmVlbiBkcmFnZ2VkIG91dFxuICAgICAgICogZnJvbSB0aGUgcG9pbnQuXG4gICAgICAgKlxuICAgICAgICogSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0byBkcmF3IGEgYmV6aWVyIGd1aWRlLCBidXQgd2Ugb25seVxuICAgICAgICogaGF2ZSBvbmUgaGFuZGxlLCBzbyB3ZSBuZWVkIHRvIG1ha2UgYXNzdW1wdGlvbnMgYWJvdXQgdGhlIG90aGVyLlxuICAgICAgICovXG4gICAgICBpZiAoc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgICAgIHZhciBuZXdQb2ludHMgPSBxdWFkcmF0aWNUb0N1YmljQmV6aWVyKCgwLCBfZ2V0UG9pbnRzLmdldFBvaW50QnlJZCkoc2VsZWN0ZWRQb2ludHNbMF0pLCAoMCwgX2dldEhhbmRsZXMuZ2V0SGFuZGxlQnlJZCkoc3RyYXlDb25uZWN0aW9uLmhhbmRsZXNbMF0pLCBudWxsLCBwb3NpdGlvbik7XG4gICAgICAgIGFkZEd1aWRlKHR5cGVzLkNPTk4sIG5ld1BvaW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlcmUgaXMgYSBzaW5nbGUgY29ubmVjdGlvbiBzZWxlY3RlZCB3aXRoIG5vIHN0cmF5IGNvbm5lY3Rpb25zLFxuICAgICAgICAgKiBzbyB3ZSBzaG91bGQgc2hvdyBhIGd1aWRlIGxpbmUgYmV0d2VlbiB0aGVtLlxuICAgICAgICAgKi9cbiAgICAgICAgYWRkR3VpZGUodHlwZXMuTElORSwge1xuICAgICAgICAgIGZyb206ICgwLCBfZ2V0UG9pbnRzLmdldFBvaW50QnlJZCkoc2VsZWN0ZWRQb2ludHNbMF0pLFxuICAgICAgICAgIHRvOiBwb3NpdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNldEN1cnNvcihcIlBFTl9BRERfUE9JTlRcIik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB2YWx1ZSA9IG9iai52YWx1ZSxcbiAgICAgIHR5cGUgPSBvYmoudHlwZTtcblxuXG4gIGlmICh0eXBlID09PSB0eXBlcy5DT05OKSB7XG4gICAgdmFyIGNsb3Nlc3RQb2ludCA9IHZhbHVlLmNsb3Nlc3RQb2ludDtcblxuICAgIHNldEN1cnNvcihcIlBFTl9BRERfUE9JTlRcIik7XG4gICAgYWRkR3VpZGUodHlwZXMuUE9JTlQsIHZhbHVlLmNsb3Nlc3RQb2ludCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gdHlwZXMuUE9JTlQpIHtcbiAgICB2YXIgX3NlbGVjdGVkUG9pbnRzID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZXMuUE9JTlQpO1xuICAgIGlmIChfc2VsZWN0ZWRQb2ludHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoX3NlbGVjdGVkUG9pbnRzWzBdICE9PSB2YWx1ZS5pZCkge1xuICAgICAgICAvLyBDb25uZWN0aW5nIHR3byBwb2ludHNcbiAgICAgICAgc2V0Q3Vyc29yKFwiUEVOX1NFTEVDVF9QT0lOVFwiKTtcbiAgICAgICAgYWRkR3VpZGUodHlwZXMuTElORSwge1xuICAgICAgICAgIGZyb206ICgwLCBfZ2V0UG9pbnRzLmdldFBvaW50QnlJZCkoX3NlbGVjdGVkUG9pbnRzWzBdKSxcbiAgICAgICAgICB0bzogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIb3ZlcmluZyBvdmVyIHNlbGVjdGVkIHBvaW50XG4gICAgICAgIHNldEN1cnNvcihcIlBFTl9TRUxFQ1RfUE9JTlRcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEN1cnNvcihcIlBFTl9BRERfUE9JTlRcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IHR5cGVzLkhBTkRMRSkge1xuICAgIHNldEN1cnNvcihcIkRFRkFVTFRcIik7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogOTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyksXG4gICAgc2V0VG9vbCA9IF9yZXF1aXJlLnNldFRvb2w7XG5cbnZhciB0b29scyA9IFt7XG4gIGljb246IFwiZGVmYXVsdC1jdXJzb3IucG5nXCIsXG4gIHRvb2xLZXk6IFwidlwiLFxuICBpZDogXCJtb3ZldG9vbFwiLFxuICBwb3NpdGlvbjoge1xuICAgIHg6IDcsXG4gICAgeTogN1xuICB9XG59LCB7XG4gIGljb246IFwicGVuLWN1cnNvci5wbmdcIixcbiAgdG9vbEtleTogXCJwXCIsXG4gIGlkOiBcInBlbnRvb2xcIixcbiAgcG9zaXRpb246IHtcbiAgICB4OiA3LFxuICAgIHk6IDdcbiAgfVxufV07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlVG9vbEJhcigpIHtcbiAgdmFyIHRvb2xFbGVtZW50cyA9IHRvb2xzLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBpY29uID0gX3JlZi5pY29uLFxuICAgICAgICB0b29sS2V5ID0gX3JlZi50b29sS2V5LFxuICAgICAgICBpZCA9IF9yZWYuaWQsXG4gICAgICAgIHBvc2l0aW9uID0gX3JlZi5wb3NpdGlvbjtcblxuICAgIHZhciB0b29sRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQlVUVE9OXCIpO1xuICAgIHRvb2xFbC5jbGFzc0xpc3QuYWRkKFwidG9vbFwiKTtcbiAgICB0b29sRWwuaWQgPSBpZDtcbiAgICB0b29sRWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXFxcInN0YXRpYy9pbWFnZXMvXCIgKyBpY29uICsgXCJcXFwiKVwiO1xuICAgIHRvb2xFbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25YID0gcG9zaXRpb24ueCArIFwicHhcIjtcbiAgICB0b29sRWwuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWSA9IHBvc2l0aW9uLnkgKyBcInB4XCI7XG4gICAgdG9vbEVsLnNldEF0dHJpYnV0ZShcImRhdGEtdG9vbC1rZXlcIiwgdG9vbEtleSk7XG5cbiAgICBpZiAoaWQgPT09IFwibW92ZXRvb2xcIikge1xuICAgICAgdG9vbEVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfVxuXG4gICAgdG9vbEVsLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2V0VG9vbCh0b29sS2V5KTtcbiAgICB9O1xuICAgIHJldHVybiB0b29sRWw7XG4gIH0pO1xuXG4gIHRvb2xFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0b29sRWwpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvb2xiYXJcIikuYXBwZW5kQ2hpbGQodG9vbEVsKTtcbiAgfSk7XG59O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDM3KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBjYzI4ODcxNThkZWI1Y2ZkYmU1ZCIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBjb2xvcnM6IHtcbiAgICBQUklNQVJZOiAgICAgICAgICBcIiMyOWFhZjRcIixcbiAgICBQUklNQVJZX0xJR0hUOiAgICBcIiM2OGJlZjJcIixcbiAgICBQUklNQVJZX0xJR0hURVI6ICBcIiNjNGU5ZmZcIixcbiAgICBXSElURTogXCIjZmZmXCIsXG4gIH0sXG5cbiAgdHlwZXM6IHtcbiAgICBQT0lOVDogXCJfX1BPSU5UXCIsXG4gICAgQ09OTjogXCJfX0NPTk5FQ1RJT05cIixcbiAgICBIQU5ETEU6IFwiX19IQU5ETEVcIixcbiAgICBMSU5FOiBcIl9fTElORVwiLFxuICB9LFxuXG4gIC8vIE1hcCBiZXR3ZWVuIHR5cGVzIGFuZCByZWR1Y2Vyc1xuICB0eXBlUmVkdWNlcnM6IHtcbiAgICBcIl9fUE9JTlRcIjogXCJwb2ludHNcIixcbiAgICBcIl9fQ09OTkVDVElPTlwiOiBcImNvbm5lY3Rpb25zXCIsXG4gICAgXCJfX0hBTkRMRVwiOiBcImhhbmRsZXNcIixcbiAgfSxcblxuICB0b29sczoge1xuICAgIC8qKlxuICAgICAqIGxvd2VyY2FzZSBsZXR0ZXJzIHdpbGwgYmUgaW5jbHVkZWQgd2l0aCB0aGUgc3RyaW5nIGtleXNcbiAgICAgKi9cbiAgICBwOiAgICBcIlBFTlwiLFxuICAgIFBFTjogIFwiUEVOXCIsXG5cbiAgICB2OiAgICBcIk1PVkVcIixcbiAgICBNT1ZFOiBcIk1PVkVcIixcbiAgfSxcblxuICBjdXJzb3JzOiB7XG4gICAgLy8gQ29tbW9uIGN1cnNvcnNcbiAgICBERUZBVUxUOiBcImRlZmF1bHQtY3Vyc29yLnBuZ1wiLFxuICAgIE1PVkU6IFwiZGVmYXVsdC1tb3ZlLWN1cnNvci5wbmdcIixcblxuICAgIC8vIFBlbiBjdXJzb3JzXG4gICAgUEVOOiBcInBlbi1jdXJzb3IucG5nXCIsXG4gICAgUEVOX0FERF9QT0lOVDogXCJwZW4tYWRkLXBvaW50LWN1cnNvci5wbmdcIixcbiAgICBQRU5fU0VMRUNUX1BPSU5UOiBcInBlbi1zZWxlY3QtcG9pbnQtY3Vyc29yLnBuZ1wiLFxuICAgIENPTlZFUlRfQU5DSE9SX1BPSU5UOiBcImNvbnZlcnQtYW5jaG9yLXBvaW50LWN1cnNvci5wbmdcIixcbiAgfSxcblxuICAvKipcbiAgICogR2l2ZW4gYW55IHRvb2wsIHRoaXMgc2hvdWxkIHJldHVybiBpdCdzIGRlZmF1bHQgY3Vyc29yLlxuICAgKiAoY3Vyc29yIHdoZW4gbm8gb2JqZWN0IGlzIGluIHRoZSBpbnRlcmFjdGlvbiByYW5nZSBvZiAxNXB4KVxuICAgKi9cbiAgZGVmYXVsdFRvb2xDdXJzb3JzOiB7XG4gICAgTU9WRTogXCJERUZBVUxUXCIsXG4gICAgUEVOOiBcIlBFTlwiLFxuICB9LFxuXG4gIGtleXM6IHtcbiAgICBTSElGVDogXCJTaGlmdFwiLFxuICAgIENPTlRST0w6IFwiQ29udHJvbFwiLFxuICAgIEFMVDogXCJBbHRcIixcbiAgICBBUlJPV19VUDogICAgIFwiQXJyb3dVcFwiLFxuICAgIEFSUk9XX0xFRlQ6ICAgXCJBcnJvd0xlZnRcIixcbiAgICBBUlJPV19ET1dOOiAgIFwiQXJyb3dEb3duXCIsXG4gICAgQVJST1dfUklHSFQ6ICBcIkFycm93UmlnaHRcIixcbiAgfSxcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29uc3RhbnRzLmpzIiwiY29uc3QgeyBjcmVhdGVTdG9yZSwgYXBwbHlNaWRkbGV3YXJlIH0gPSByZXF1aXJlKFwicmVkdXhcIik7XG5jb25zdCB7IGNyZWF0ZUxvZ2dlciB9ID0gcmVxdWlyZShcInJlZHV4LWxvZ2dlclwiKTtcblxuY29uc3QgcmVkdWNlcnMgPSByZXF1aXJlKFwiLi9yZWR1Y2Vycy9pbmRleFwiKTtcblxubGV0IG1pZGRsZXdhcmU7XG5cbmlmICh0cnVlKSB7XG4gIG1pZGRsZXdhcmUgPSBhcHBseU1pZGRsZXdhcmUoXG4gICAgY3JlYXRlTG9nZ2VyKHsgY29sbGFwc2VkOiB0cnVlIH0pLFxuICApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVN0b3JlKHJlZHVjZXJzLCBtaWRkbGV3YXJlKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdG9yZS5qcyIsImNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uL3N0b3JlXCIpO1xuY29uc3QgeyBnZXRBbGxDb25uZWN0aW9ucyB9ID0gcmVxdWlyZShcIi4uL2Nvbm5lY3Rpb25zL2dldENvbm5lY3Rpb25zXCIpO1xuY29uc3QgY2FsY0Rpc3RhbmNlQmV0d2VlblBvc2l0aW9ucyA9IHJlcXVpcmUoXCIuLi91dGlscy9jYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zXCIpO1xuXG4vKipcbiAqIFJldHVybnMgYSBwb2ludCB3aXRoIGEgc3BlY2lmaWMgaWRcbiAqXG4gKiBSZXR1cm5zIG51bGwgaWYgbm8gcG9pbnQgaGFzIHNhaWQgaWQuXG4gKi9cbmV4cG9ydHMuZ2V0UG9pbnRCeUlkID0gZnVuY3Rpb24gZ2V0UG9pbnRCeUlkKGlkKSB7XG4gIGlmICghaWQgfHwgdHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGlkLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHtpZH0nYCk7XG4gIH1cblxuICBjb25zdCB7IHBvaW50cyB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICByZXR1cm4gcG9pbnRzW2lkXSB8fCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGN1cnJlbnQgcG9pbnRzXG4gKi9cbmZ1bmN0aW9uIGdldEFsbFBvaW50cygpIHtcbiAgY29uc3QgeyBwb2ludHMgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgY29uc3QgcEFyciA9IFtdO1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocG9pbnRzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBwb2ludHNba2V5c1tpXV07XG4gICAgcEFyci5wdXNoKHsgeCwgeSwgaWQ6IGtleXNbaV0gfSk7XG4gIH1cbiAgcmV0dXJuIHBBcnI7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gKlxuICogUmV0dXJucyBudWxsIGlmIG5vIHBvaW50IGlzIGNsb3NlciB0aGFuIDE1cHhcbiAqL1xuZXhwb3J0cy5nZXRQb2ludEF0UG9zaXRpb24gPSBmdW5jdGlvbiBnZXRQb2ludEF0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgY29uc3QgcG9pbnRzID0gZ2V0QWxsUG9pbnRzKCk7XG4gIGxldCBjbG9zZXN0UG9pbnQ7XG4gIGxldCBwb2ludERpc3RhbmNlO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBwb2ludHNbaV0pO1xuICAgIGlmICghY2xvc2VzdFBvaW50IHx8IGRpc3RhbmNlIDwgcG9pbnREaXN0YW5jZSkge1xuICAgICAgY2xvc2VzdFBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgcG9pbnREaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwb2ludERpc3RhbmNlIDwgMjI1ID8gY2xvc2VzdFBvaW50IDogbnVsbDsgLy8gMTVweFxufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgaWRzIG9mIGV2ZXJ5IGhhbmRsZSB0aGF0IGlzXG4gKiBjb25uZWN0ZWQgdG8gdGhhdCBwb2ludC5cbiAqL1xuZXhwb3J0cy5nZXRQb2ludEhhbmRsZUlkcyA9IGZ1bmN0aW9uIGdldFBvaW50SGFuZGxlSWRzKGlkKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gZ2V0QWxsQ29ubmVjdGlvbnMoKTtcbiAgY29uc3QgaGFuZGxlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBwb2ludEluZGV4ID0gY29ubmVjdGlvbnNbaV0ucG9pbnRzLmluZGV4T2YoaWQpO1xuICAgIGlmIChwb2ludEluZGV4ID4gLTEpIHtcbiAgICAgIGhhbmRsZXMucHVzaChjb25uZWN0aW9uc1tpXS5oYW5kbGVzW3BvaW50SW5kZXhdKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaGFuZGxlcztcbn1cblxuZXhwb3J0cy5nZXRQb2ludENvbm5lY3Rpb25zID0gZnVuY3Rpb24gZ2V0UG9pbnRDb25uZWN0aW9ucyhpZCkge1xuICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7aWR9J2ApO1xuICB9XG5cbiAgY29uc3QgY0FyciA9IFtdO1xuICBjb25zdCBjb25uZWN0aW9ucyA9IHN0b3JlLmdldFN0YXRlKCkuY29ubmVjdGlvbnM7XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNvbm5lY3Rpb25zKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGNvbm5lY3Rpb25zW2tleXNbaV1dLnBvaW50cy5pbmRleE9mKGlkKSAhPT0gLTEpIHtcbiAgICAgIGNBcnIucHVzaChjb25uZWN0aW9uc1trZXlzW2ldXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNBcnI7XG59XG5cbmV4cG9ydHMuZ2V0QWxsUG9pbnRzID0gZ2V0QWxsUG9pbnRzO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wb2ludHMvZ2V0UG9pbnRzLmpzIiwiY29uc3QgeyB0eXBlUmVkdWNlcnMgfSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4vc3RvcmVcIik7XG5cbmNvbnN0IF92YWxpZGF0ZWRUeXBlcyA9IFtdOyAvLyBUbyBhdm9pZCB1bm5lY2Vzc2FyeSBnZXRTdGF0ZSBjYWxsc1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVR5cGUodHlwZSkge1xuICBpZiAoX3ZhbGlkYXRlZFR5cGVzLmluZGV4T2YodHlwZSkgPiAtMSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghdHlwZSB8fCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHt0eXBlfScuYCk7XG4gIH1cblxuICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgdHlwZTogXCJBRERfU0VMRUNUSU9OX1RZUEVcIixcbiAgICBwYXlsb2FkOiB0eXBlLFxuICB9KVxuXG4gIF92YWxpZGF0ZWRUeXBlcy5wdXNoKHR5cGUpO1xufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlKSB7XG4gIHZhbGlkYXRlVHlwZSh0eXBlKTtcbiAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkuc2VsZWN0aW9uW3R5cGVdO1xufVxuZXhwb3J0cy5nZXRTZWxlY3RlZE9mVHlwZSA9IGdldFNlbGVjdGVkT2ZUeXBlO1xuXG5leHBvcnRzLmFkZFRvU2VsZWN0aW9uID0gZnVuY3Rpb24gYWRkVG9TZWxlY3Rpb24odHlwZSwgaWQpIHtcbiAgY29uc3Qgc2VsZWN0ZWRPZlR5cGUgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlKTtcbiAgaWYgKHNlbGVjdGVkT2ZUeXBlLmluZGV4T2YoaWQpIDwgMCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiQUREX1RPX1NFTEVDVElPTlwiLFxuICAgICAgcGF5bG9hZDogeyB0eXBlLCBpZCB9LFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydHMucmVtb3ZlRnJvbVNlbGVjdGlvbiA9IGZ1bmN0aW9uIHJlbW92ZUZyb21TZWxlY3Rpb24odHlwZSwgaWQpIHtcbiAgY29uc3QgaXRlbUluZGV4ID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZSkuaW5kZXhPZihpZCk7XG4gIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiUkVNT1ZFX0ZST01fU0VMRUNUSU9OXCIsXG4gICAgICBwYXlsb2FkOiB7IHR5cGUsIGl0ZW1JbmRleCB9LFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydHMuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uIGlzU2VsZWN0ZWQodHlwZSwgaWQpIHtcbiAgcmV0dXJuIGdldFNlbGVjdGVkT2ZUeXBlKHR5cGUpLmluZGV4T2YoaWQpID4gLTE7XG59XG5cbmV4cG9ydHMuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbigpIHtcbiAgc3RvcmUuZGlzcGF0Y2goe1xuICAgIHR5cGU6IFwiQ0xFQVJfU0VMRUNUSU9OXCIsXG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggYSBuZXcgYXJyYXkgZm9yIGVhY2ggdHlwZVxuICogd2l0aCB0aGUgY3VycmVudCBpZHMgc2VsZWN0ZWQgZm9yIHNhaWQgdHlwZS5cbiAqL1xuZXhwb3J0cy5jb3B5U2VsZWN0aW9uID0gZnVuY3Rpb24gY29weVNlbGVjdGlvbigpIHtcbiAgY29uc3QgY3VycmVudFNlbGVjdGlvbiA9IHN0b3JlLmdldFN0YXRlKCkuc2VsZWN0aW9uO1xuICBcbiAgY29uc3QgY29weSA9IHt9O1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY3VycmVudFNlbGVjdGlvbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvcHlba2V5c1tpXV0gPSBbLi4uY3VycmVudFNlbGVjdGlvbltrZXlzW2ldXV07XG4gIH1cbiAgcmV0dXJuIGNvcHk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYWxsIG9iamVjdHMgaW4gdGhlIHNlbGVjdGlvbiBleGlzdC5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHVuZG8taW5nIG9iamVjdCBjcmVhdGlvbi5cbiAqL1xuZXhwb3J0cy5pc1ZhbGlkU2VsZWN0aW9uID0gZnVuY3Rpb24gaXNWYWxpZFNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3Rpb24pO1xuICBmb3IgKGxldCBpID0gMDsgaXNWYWxpZCAmJiBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IG9iamVjdHNPZlR5cGUgPSBzdG9yZS5nZXRTdGF0ZSgpW3R5cGVSZWR1Y2Vyc1trZXlzW2ldXV07XG5cbiAgICBzZWxlY3Rpb25ba2V5c1tpXV0uZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGlmICghb2JqZWN0c09mVHlwZVtpZF0pIHtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VsZWN0aW9uLmpzIiwiY29uc3Qgc3RvcmUgPSByZXF1aXJlKFwiLi4vc3RvcmVcIik7XG5cbmZ1bmN0aW9uIGdldEFsbEhhbmRsZXMoKSB7XG4gIGNvbnN0IGhhbmRsZXMgPSBzdG9yZS5nZXRTdGF0ZSgpLmhhbmRsZXM7XG4gIGNvbnN0IGhhbmRsZUFyciA9IFtdO1xuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhoYW5kbGVzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaGFuZGxlQXJyLnB1c2goaGFuZGxlc1trZXlzW2ldXSk7XG4gIH1cblxuICByZXR1cm4gaGFuZGxlQXJyO1xufVxuZXhwb3J0cy5nZXRBbGxIYW5kbGVzID0gZ2V0QWxsSGFuZGxlcztcblxuZXhwb3J0cy5nZXRIYW5kbGVCeUlkID0gZnVuY3Rpb24gZ2V0SGFuZGxlQnlJZChpZCkge1xuICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS5oYW5kbGVzW2lkXSB8fCBudWxsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2hhbmRsZXMvZ2V0SGFuZGxlcy5qcyIsImNvbnN0IHNob3J0aWQgPSByZXF1aXJlKFwic2hvcnRpZFwiKTtcbmNvbnN0IHsgY3Vyc29ycyB9ID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XG5jb25zdCBjdXJzb3JJbWFnZU1hcCA9IHt9O1xuXG57XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjdXJzb3JzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWFnZS5zcmMgPSBgc3RhdGljL2ltYWdlcy8ke2N1cnNvcnNba2V5c1tpXV19YDtcbiAgICBjdXJzb3JJbWFnZU1hcFtrZXlzW2ldXSA9IGltYWdlO1xuICB9XG59XG5cbmxldCBjdXJyZW50Q3Vyc29yID0gXCJERUZBVUxUXCI7XG5sZXQgb3ZlcnJpZGUgPSBudWxsO1xuXG4vKipcbiAqIENoYW5nZXMgdGhlIGN1cnNvciBvbiBjYW52YXMgaG92ZXIuXG4gKlxuICogWW91IGNhbiBzZXQgb3ZlcnJpZGUgdG8gdHJ1ZSBpbiB0aGUgb3B0cyBvYmplY3QgdG8gZW5zdXJlXG4gKiB0aGF0IG5vIG90aGVyIHBhcnQgb2YgdGhlIGFwcGxpY2F0aW9uIGNoYW5nZXMgdGhlIGN1cnNvci5cbiAqXG4gKiBPdmVycmlkZSBiZWluZyBhY3RpdmUgbWVhbnMgdGhhdCB0aGUgY3Vyc29yIGNhbm5vdCBiZSBjaGFuZ2VkXG4gKiB1bmxlc3MgdGhlIGNvcnJlY3Qgb3ZlcnJpZGVJZCBpcyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucyBvYmplY3QuXG4gKlxuICogVGhlIG92ZXJyaWRlSWQgaXMgcmV0dXJuZWQgd2hlbiBvdmVycmlkaW5nLlxuICovXG5leHBvcnRzLnNldEN1cnNvciA9IGZ1bmN0aW9uIHNldEN1cnNvcihjdXJzb3IsIG9wdHMgPSB7fSkge1xuICBpZiAoIW9wdHMgfHwgdHlwZW9mIG9wdHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgb3B0aW9ucy4gRXhwZWN0ZWQgb2JqZWN0IGJ1dCBnb3QgJyR7b3B0c30nLmApO1xuICB9XG5cbiAgaWYgKG92ZXJyaWRlICYmIG9wdHMub3ZlcnJpZGVJZCAhPT0gb3ZlcnJpZGUpIHtcbiAgICBpZiAob3B0cy5vdmVycmlkZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGRvdWJsZSBvdmVycmlkZS5cIik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY3Vyc29yc1tjdXJzb3JdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGN1cnNvciAnJHtjdXJzb3J9Jy5gKTtcbiAgfVxuXG4gIGlmIChjdXJzb3IgPT09IGN1cnJlbnRDdXJzb3IpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjdXJyZW50Q3Vyc29yID0gY3Vyc29yO1xuICBsZXQgY3Vyc29yU3R5bGUgPSBgdXJsKC9zdGF0aWMvaW1hZ2VzLyR7Y3Vyc29yc1tjdXJzb3JdfSksIGRlZmF1bHRgO1xuXG4gIC8vIGNhbnZhcy5zdHlsZS5jdXJzb3IgPSBjdXJzb3JTdHlsZTtcblxuICBpZiAob3B0cy5vdmVycmlkZSkge1xuICAgIG92ZXJyaWRlID0gc2hvcnRpZCgpO1xuICAgIHJldHVybiBvdmVycmlkZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnRzLmdldEN1cnNvciA9IGZ1bmN0aW9uIGdldEN1cnNvcigpIHtcbiAgcmV0dXJuIGN1cnNvckltYWdlTWFwW2N1cnJlbnRDdXJzb3JdO1xufVxuXG5leHBvcnRzLnJlbGVhc2VPdmVycmlkZSA9IGZ1bmN0aW9uIHJlbGVhc2VPdmVycmlkZShpZCkge1xuICBpZiAob3ZlcnJpZGUgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBvdmVycmlkZSBpcyBwcmVzZW50LlwiKTtcbiAgfVxuXG4gIGlmIChpZCAhPT0gb3ZlcnJpZGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBvdmVycmlkZUlkLiBFeHBlY3RlZCAnJHtvdmVycmlkZX0nIGJ1dCBnb3QgJyR7aWR9Jy5gKTtcbiAgfVxuXG4gIG92ZXJyaWRlID0gbnVsbDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy9jdXJzb3IuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzVmFsaWRQb3NpdGlvbihwb3NpdGlvbikge1xuICByZXR1cm4gKFxuICAgIHBvc2l0aW9uICYmXG4gICAgdHlwZW9mIHBvc2l0aW9uID09PSBcIm9iamVjdFwiICYmXG4gICAgdHlwZW9mIHBvc2l0aW9uLnggPT09IFwibnVtYmVyXCIgJiZcbiAgICB0eXBlb2YgcG9zaXRpb24ueSA9PT0gXCJudW1iZXJcIik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMvaXNWYWxpZFBvc2l0aW9uLmpzIiwiY29uc3Qgc2hvcnRpZCA9IHJlcXVpcmUoXCJzaG9ydGlkXCIpO1xuXG5jb25zdCBfbGlzdGVuZXJzID0ge307XG5cbmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGlkKSB7XG4gIGlmICghdHlwZSB8fCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0eXBlLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHt0eXBlfScuYCk7XG4gIH1cblxuICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7aWR9Jy5gKTtcbiAgfVxuXG4gIGlmIChcbiAgICBfbGlzdGVuZXJzW3R5cGVdICYmXG4gICAgX2xpc3RlbmVyc1t0eXBlXVtpZF1cbiAgKSB7XG4gICAgZGVsZXRlIF9saXN0ZW5lcnNbdHlwZV1baWRdO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5yZW1vdmVMaXN0ZW5lciA9IHJlbW92ZUxpc3RlbmVyO1xuXG5leHBvcnRzLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgZnVuYywgc2hvdWxkUmVtb3ZlU2VsZikge1xuICBpZiAoIXR5cGUgfHwgdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHlwZS4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7dHlwZX0nLmApO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHRoZSAybmQgYXJndW1lbnQgdG8gYmUgYSBmdW5jdGlvbi4gR290ICcke2Z1bmN9J2ApO1xuICB9XG5cbiAgaWYgKCFfbGlzdGVuZXJzW3R5cGVdKSB7XG4gICAgX2xpc3RlbmVyc1t0eXBlXSA9IHt9O1xuICB9XG5cbiAgY29uc3QgaWQgPSBzaG9ydGlkKCk7XG5cbiAgaWYgKHNob3VsZFJlbW92ZVNlbGYpIHtcbiAgICBfbGlzdGVuZXJzW3R5cGVdW2lkXSA9ICgpID0+IHtcbiAgICAgIGZ1bmMoLi4uYXJndW1lbnRzKTtcbiAgICAgIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGlkKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIF9saXN0ZW5lcnNbdHlwZV1baWRdID0gZnVuYztcbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuZXhwb3J0cy5ydW5MaXN0ZW5lcnMgPSBmdW5jdGlvbiBydW5MaXN0ZW5lcnModHlwZSwgLi4uYXJncykge1xuICBpZiAoIXR5cGUgfHwgdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHlwZS4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7dHlwZX0nLmApO1xuICB9XG5cbiAgaWYgKCFfbGlzdGVuZXJzW3R5cGVdIHx8IHR5cGVvZiBfbGlzdGVuZXJzW3R5cGVdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKF9saXN0ZW5lcnNbdHlwZV0pO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIF9saXN0ZW5lcnNbdHlwZV1ba2V5c1tpXV0oLi4uYXJncyk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9saXN0ZW5lcnMvbGlzdGVuZXJzLmpzIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9pbmRleCcpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciByYW5kb21Gcm9tU2VlZCA9IHJlcXVpcmUoJy4vcmFuZG9tL3JhbmRvbS1mcm9tLXNlZWQnKTtcblxudmFyIE9SSUdJTkFMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXy0nO1xudmFyIGFscGhhYmV0O1xudmFyIHByZXZpb3VzU2VlZDtcblxudmFyIHNodWZmbGVkO1xuXG5mdW5jdGlvbiByZXNldCgpIHtcbiAgICBzaHVmZmxlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzZXRDaGFyYWN0ZXJzKF9hbHBoYWJldF8pIHtcbiAgICBpZiAoIV9hbHBoYWJldF8pIHtcbiAgICAgICAgaWYgKGFscGhhYmV0ICE9PSBPUklHSU5BTCkge1xuICAgICAgICAgICAgYWxwaGFiZXQgPSBPUklHSU5BTDtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChfYWxwaGFiZXRfID09PSBhbHBoYWJldCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9hbHBoYWJldF8ubGVuZ3RoICE9PSBPUklHSU5BTC5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdXN0b20gYWxwaGFiZXQgZm9yIHNob3J0aWQgbXVzdCBiZSAnICsgT1JJR0lOQUwubGVuZ3RoICsgJyB1bmlxdWUgY2hhcmFjdGVycy4gWW91IHN1Ym1pdHRlZCAnICsgX2FscGhhYmV0Xy5sZW5ndGggKyAnIGNoYXJhY3RlcnM6ICcgKyBfYWxwaGFiZXRfKTtcbiAgICB9XG5cbiAgICB2YXIgdW5pcXVlID0gX2FscGhhYmV0Xy5zcGxpdCgnJykuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0sIGluZCwgYXJyKXtcbiAgICAgICByZXR1cm4gaW5kICE9PSBhcnIubGFzdEluZGV4T2YoaXRlbSk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pcXVlLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0N1c3RvbSBhbHBoYWJldCBmb3Igc2hvcnRpZCBtdXN0IGJlICcgKyBPUklHSU5BTC5sZW5ndGggKyAnIHVuaXF1ZSBjaGFyYWN0ZXJzLiBUaGVzZSBjaGFyYWN0ZXJzIHdlcmUgbm90IHVuaXF1ZTogJyArIHVuaXF1ZS5qb2luKCcsICcpKTtcbiAgICB9XG5cbiAgICBhbHBoYWJldCA9IF9hbHBoYWJldF87XG4gICAgcmVzZXQoKTtcbn1cblxuZnVuY3Rpb24gY2hhcmFjdGVycyhfYWxwaGFiZXRfKSB7XG4gICAgc2V0Q2hhcmFjdGVycyhfYWxwaGFiZXRfKTtcbiAgICByZXR1cm4gYWxwaGFiZXQ7XG59XG5cbmZ1bmN0aW9uIHNldFNlZWQoc2VlZCkge1xuICAgIHJhbmRvbUZyb21TZWVkLnNlZWQoc2VlZCk7XG4gICAgaWYgKHByZXZpb3VzU2VlZCAhPT0gc2VlZCkge1xuICAgICAgICByZXNldCgpO1xuICAgICAgICBwcmV2aW91c1NlZWQgPSBzZWVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2h1ZmZsZSgpIHtcbiAgICBpZiAoIWFscGhhYmV0KSB7XG4gICAgICAgIHNldENoYXJhY3RlcnMoT1JJR0lOQUwpO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VBcnJheSA9IGFscGhhYmV0LnNwbGl0KCcnKTtcbiAgICB2YXIgdGFyZ2V0QXJyYXkgPSBbXTtcbiAgICB2YXIgciA9IHJhbmRvbUZyb21TZWVkLm5leHRWYWx1ZSgpO1xuICAgIHZhciBjaGFyYWN0ZXJJbmRleDtcblxuICAgIHdoaWxlIChzb3VyY2VBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHIgPSByYW5kb21Gcm9tU2VlZC5uZXh0VmFsdWUoKTtcbiAgICAgICAgY2hhcmFjdGVySW5kZXggPSBNYXRoLmZsb29yKHIgKiBzb3VyY2VBcnJheS5sZW5ndGgpO1xuICAgICAgICB0YXJnZXRBcnJheS5wdXNoKHNvdXJjZUFycmF5LnNwbGljZShjaGFyYWN0ZXJJbmRleCwgMSlbMF0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0QXJyYXkuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIGdldFNodWZmbGVkKCkge1xuICAgIGlmIChzaHVmZmxlZCkge1xuICAgICAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gICAgfVxuICAgIHNodWZmbGVkID0gc2h1ZmZsZSgpO1xuICAgIHJldHVybiBzaHVmZmxlZDtcbn1cblxuLyoqXG4gKiBsb29rdXAgc2h1ZmZsZWQgbGV0dGVyXG4gKiBAcGFyYW0gaW5kZXhcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGxvb2t1cChpbmRleCkge1xuICAgIHZhciBhbHBoYWJldFNodWZmbGVkID0gZ2V0U2h1ZmZsZWQoKTtcbiAgICByZXR1cm4gYWxwaGFiZXRTaHVmZmxlZFtpbmRleF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGNoYXJhY3RlcnM6IGNoYXJhY3RlcnMsXG4gICAgc2VlZDogc2V0U2VlZCxcbiAgICBsb29rdXA6IGxvb2t1cCxcbiAgICBzaHVmZmxlZDogZ2V0U2h1ZmZsZWRcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9hbHBoYWJldC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjb25zdCBnZXRDbG9zZXN0UG9pbnRPbkNvbm5lY3Rpb24gPSByZXF1aXJlKFwiLi9nZXRDbG9zZXN0UG9pbnRPbkNvbm5lY3Rpb25cIik7XG5jb25zdCB7IHRvQ29ubmVjdGlvbklkIH0gPSByZXF1aXJlKFwiLi9jb25uZWN0aW9uSWRcIik7XG5jb25zdCBzdG9yZSA9IHJlcXVpcmUoXCIuLi9zdG9yZVwiKTtcblxuZXhwb3J0cy5nZXRDb25uZWN0aW9uQnlJZCA9IGZ1bmN0aW9uIGdldENvbm5lY3Rpb25CeUlkKGlkKSB7XG4gIHJldHVybiBzdG9yZS5nZXRTdGF0ZSgpLmNvbm5lY3Rpb25zW2lkXSB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRBbGxDb25uZWN0aW9ucygpIHtcbiAgY29uc3QgY29ubmVjdGlvbnMgPSBzdG9yZS5nZXRTdGF0ZSgpLmNvbm5lY3Rpb25zO1xuICBcbiAgY29uc3QgY0FyciA9IFtdO1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29ubmVjdGlvbnMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjQXJyLnB1c2goY29ubmVjdGlvbnNba2V5c1tpXV0pO1xuICB9XG4gIHJldHVybiBjQXJyO1xufVxuZXhwb3J0cy5nZXRBbGxDb25uZWN0aW9ucyA9IGdldEFsbENvbm5lY3Rpb25zO1xuXG5leHBvcnRzLmdldENvbm5lY3Rpb25BdFBvc2l0aW9uID0gZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbkF0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgY29uc3QgY29ubmVjdGlvbnMgPSBnZXRBbGxDb25uZWN0aW9ucygpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBjbG9zZXN0UG9pbnQgPSBnZXRDbG9zZXN0UG9pbnRPbkNvbm5lY3Rpb24oY29ubmVjdGlvbnNbaV0sIHBvc2l0aW9uKTtcbiAgICBpZiAoY2xvc2VzdFBvaW50KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjbG9zZXN0UG9pbnQsXG4gICAgICAgIGNvbm5lY3Rpb246IGNvbm5lY3Rpb25zW2ldLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2dldENvbm5lY3Rpb25zLmpzIiwiY29uc3QgZ2V0Q29udGV4dCA9IHJlcXVpcmUoXCIuLi9jYW52YXMvZ2V0Q29udGV4dFwiKTtcbmNvbnN0IHJlbmRlckNvbm5lY3Rpb25zID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbnMvcmVuZGVyQ29ubmVjdGlvbnNcIik7XG5jb25zdCByZW5kZXJQb2ludHMgPSByZXF1aXJlKFwiLi9wb2ludHMvcmVuZGVyUG9pbnRzXCIpO1xuY29uc3QgaXNWYWxpZFBvc2l0aW9uID0gcmVxdWlyZShcIi4uL3V0aWxzL2lzVmFsaWRQb3NpdGlvblwiKTtcbmNvbnN0IHsgZ2V0Q3Vyc29yIH0gPSByZXF1aXJlKFwiLi4vdXRpbHMvY3Vyc29yXCIpO1xuY29uc3QgeyByZXNldEd1aWRlcyB9ID0gcmVxdWlyZShcIi4vZ3VpZGVzXCIpO1xuXG5jb25zdCBjdHhIZWlnaHQgPSA4MDA7XG5jb25zdCBjdHhXaWR0aCA9IDgwMDtcblxubGV0IGxhc3RQb3NpdGlvbjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZW5kZXIocG9zaXRpb24sIG9wdHMgPSB7fSkge1xuICBjb25zdCBjdHggPSBnZXRDb250ZXh0KCk7XG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4V2lkdGgsIGN0eEhlaWdodCk7XG5cbiAgcmVuZGVyQ29ubmVjdGlvbnMoKTtcbiAgcmVuZGVyUG9pbnRzKCk7XG5cbiAgcmVzZXRHdWlkZXMoKTtcblxuICBpZiAoIW9wdHMubm9Qb3NpdGlvbikgeyAvLyBTa2lwcyBhbGwgcG9zaXRpb24gYmFzZWQgZHJhd3MgYW5kIGNoZWNrc1xuICAgIGlmICghb3B0cy51c2VMYXN0UG9zaXRpb24pIHtcbiAgICAgIGxhc3RQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NpdGlvbiA9IGxhc3RQb3NpdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoIWlzVmFsaWRQb3NpdGlvbihwb3NpdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24uXCIpO1xuICAgIH1cblxuICAgIGN0eC5kcmF3SW1hZ2UoZ2V0Q3Vyc29yKCksIHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlbmRlci9yZW5kZXIuanMiLCJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0Q29udGV4dCgpIHtcbiAgcmV0dXJuIGN0eDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jYW52YXMvZ2V0Q29udGV4dC5qcyIsImNvbnN0IHsgY2hlY2tUeXBlIH0gPSByZXF1aXJlKFwiLi4vdXRpbHMvY2hlY2tUeXBlXCIpO1xuXG5sZXQgZ3VpZGVzID0ge307XG5cbmV4cG9ydHMuYWRkR3VpZGUgPSBmdW5jdGlvbiBhZGRHdWlkZSh0eXBlLCB2YWx1ZSkge1xuICBjaGVja1R5cGUodHlwZSk7XG5cbiAgXG4gIGlmICghQXJyYXkuaXNBcnJheShndWlkZXNbdHlwZV0pKSB7XG4gICAgZ3VpZGVzW3R5cGVdID0gW3ZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICBndWlkZXNbdHlwZV0ucHVzaCh2YWx1ZSk7XG4gIH1cblxufVxuXG5leHBvcnRzLnJlc2V0R3VpZGVzID0gZnVuY3Rpb24gcmVzZXRHdWlkZXMoKSB7XG4gIGd1aWRlcyA9IHt9O1xufVxuXG5leHBvcnRzLmdldEd1aWRlc09mVHlwZSA9IGZ1bmN0aW9uIGdldEd1aWRlc09mVHlwZSh0eXBlKSB7XG4gIGNoZWNrVHlwZSh0eXBlKTtcbiAgcmV0dXJuIGd1aWRlc1t0eXBlXSB8fCBbXTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9yZW5kZXIvZ3VpZGVzLmpzIiwiY29uc3QgZ2V0UG9zRGlmZmVyZW5jZSA9IChvbGRQb3MsIG5ld1BvcykgPT4gKHtcbiAgeDogbmV3UG9zLnggLSBvbGRQb3MueCxcbiAgeTogbmV3UG9zLnkgLSBvbGRQb3MueSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFBvc0RpZmZlcmVuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMvZ2V0UG9zRGlmZmVyZW5jZS5qcyIsImNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uLy4uL3N0b3JlXCIpO1xuY29uc3QgeyBjb3B5U2VsZWN0aW9uIH0gPSByZXF1aXJlKFwiLi4vLi4vc2VsZWN0aW9uXCIpO1xuY29uc3QgcmVzb2x2ZUFjdGlvbiA9IHJlcXVpcmUoXCIuLi9yZXNvbHZlQWN0aW9uXCIpO1xuXG4vKipcbiAqIEFuIGFjdGlvbiBwYXNzZWQgbmVlZHMgdG8gaGF2ZSB0d28gcHJvcGVydGllcy5cbiAqICAgIC0gdHlwZSA9PiB0byBmaW5kIHRoZSBhY3Rpb24gY3JlYXRvclxuICogICAgLSBkYXRhID0+IHdoYXQgdG8gcGFzcyB0byB0aGUgYWN0aW9uIGNyZWF0b3JcbiAqIFxuICogV2UgZ2V0IHRoZSB0aGlyZCBwcm9wZXJ0eSBvdXJzZWx2ZXNcbiAqICAgIC0gc2VsZWN0aW9uID0+IHRoZSBzZWxlY3Rpb24gc3RhdGUgYXQgdGhhdCBwb2ludCBpbiBoaXN0b3J5XG4gKlxuICogVGhlIHJlZG8gcGFydCBvZiB0aGUgYWN0aW9uIGlzIGV4ZWN1dGVkIGJ5IGRlZmF1dCBiZWZvcmUgdGhlXG4gKiBhY3Rpb24gaXMgYWRkZWQgdG8gdGhlIGhpc3RvcnkuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IHNldHRpbmdcbiAqIGV4ZWN1dGVJbW1lZGlhdGVseSB0byBmYWxzZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhZGRBY3Rpb24oYWN0aW9uLCBleGVjdXRlSW1tZWRpYXRlbHkgPSB0cnVlKSB7XG4gIGlmICghYWN0aW9uIHx8IHR5cGVvZiBhY3Rpb24gIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYWN0aW9uLiBFeHBlY3RlZCBvYmplY3QgYnV0IGdvdCAnJHthY3Rpb259Jy5gKTtcbiAgfVxuICBcbiAgaWYgKCFhY3Rpb24udHlwZSB8fCB0eXBlb2YgYWN0aW9uLnR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHlwZS4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7YWN0aW9uLnR5cGV9Jy5gKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYWN0aW9uLmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGF0YS4gRXhwZWN0ZWQgYW55IGJ1dCBnb3QgJyR7YWN0aW9uLmRhdGF9Jy5gKTtcbiAgfVxuXG4gIGFjdGlvbi5zZWxlY3Rpb24gPSBjb3B5U2VsZWN0aW9uKCk7XG5cbiAgaWYgKGV4ZWN1dGVJbW1lZGlhdGVseSkge1xuICAgIHJlc29sdmVBY3Rpb24oYWN0aW9uLCB7IGlnbm9yZVNlbGVjdGlvbjogdHJ1ZSB9KTtcbiAgfVxuICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgdHlwZTogXCJBRERfQUNUSU9OX1RPX0hJU1RPUllcIixcbiAgICBwYXlsb2FkOiBhY3Rpb24sXG4gIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2FjdGlvbnMvaGlzdG9yeS9hZGRBY3Rpb25Ub0hpc3RvcnkuanMiLCJmdW5jdGlvbiBjYWxjTmV3SGFuZGxlcyhwMCwgcDMsIHAxKSB7XG4gIHJldHVybiBbXG4gICAgeyAvLyBwMlxuICAgICAgeDogcDEueCArICgocDMueCAtIHAxLngpICogMC40KSxcbiAgICAgIHk6IHAxLnkgKyAoKHAzLnkgLSBwMS55KSAqIDAuNCksXG4gICAgfSxcbiAgICB7IC8vIHAzXG4gICAgICB4OiBwMC54ICsgKChwMy54IC0gcDAueCkgKiAwLjg1KSxcbiAgICAgIHk6IHAwLnkgKyAoKHAzLnkgLSBwMC55KSAqIDAuODUpLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUXVhZHJhdGljIG1lYW5zIHRoYXQgdGhyZWUgcG9pbnRzIGFyZSBwcmVzZW50LCB3aGlsc3QgY3ViaWMgbWVhbnNcbiAqIGZvdXIgYXJlLlxuICpcbiAqIFRoaXMgdGFrZXMgaW4gdGhyZWUgcG9pbnRzLCBidXQgb25lIG9mIHRoZSBoYW5kbGVzIChwMSwgcDIpIG11c3QgYmVcbiAqIHBvc2l0aW9uIGFuZCBvbmUgbXVzdCBiZSBudWxsLlxuICpcbiAqIFRoaXMgcmV0dXJucyBmb3VyIG5ldyBwb2ludHMsIGJ1dCB0aGUgaGFuZGxlIHRoYXQgd2FzIHByZXNlbnQgd2lsbFxuICogaGF2ZSBhIDE1JSBzbWFsbGVyIG1hZ25pdHVkZSBhbmQgdGhlIG90aGVyIGhhbmRsZSB3aWxsIGhhdmUgMjUlXG4gKiBvZiBpdCdzIG1hZ25pdHV0ZS5cbiAqXG4gKiBUaGlzIG1ha2VzIHRoZSBjdXJ2ZSBmZWVsIG1vcmUgbmF0dXJhbC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBxdWFkcmF0aWNUb0N1YmljQmV6aWVyKHAwLCBwMSwgcDIsIHAzKSB7XG4gIGlmIChwMSA9PT0gbnVsbCkge1xuICAgIGlmIChwMiA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBwMiBub3QgdG8gYmUgbnVsbC5gKTtcbiAgICB9XG5cbiAgICAvLyBGbGlwcGluZ1xuICAgIGNvbnN0IFsgbmV3UDIsIG5ld1AxIF0gPSBjYWxjTmV3SGFuZGxlcyhwMywgcDIsIHAwKTtcbiAgICByZXR1cm4gW3AwLCBuZXdQMSwgbmV3UDIsIHAzXTtcbiAgfVxuXG4gIGlmIChwMiA9PT0gbnVsbCkge1xuICAgIGlmIChwMSA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBwMSBub3QgdG8gYmUgbnVsbC5gKTtcbiAgICB9XG5cbiAgICBjb25zdCBbIG5ld1AxLCBuZXdQMiBdID0gY2FsY05ld0hhbmRsZXMocDAsIHAxLCBwMyk7XG4gICAgcmV0dXJuIFtwMCwgbmV3UDIsIG5ld1AxLCBwM107XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBlaXRoZXIgcDEgb3IgcDIgdG8gYmUgbnVsbC5cIik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYmV6aWVyL3F1YWRyYXRpY1RvQ3ViaWNCZXppZXIuanMiLCJjb25zdCB7IHRvb2xzLCBkZWZhdWx0VG9vbEN1cnNvcnMgfSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCB0b1Bvc2l0aW9uID0gcmVxdWlyZShcIi4uL3V0aWxzL3RvUG9zaXRpb25cIik7XG5jb25zdCB7IHJ1bkxpc3RlbmVycyB9ID0gcmVxdWlyZShcIi4uL2xpc3RlbmVycy9saXN0ZW5lcnNcIik7XG5jb25zdCByZXNvbHZlT2JqZWN0QXRQb3NpdGlvbiA9IHJlcXVpcmUoXCIuLi9yZXNvbHZlL3Jlc29sdmVPYmplY3RBdFBvc2l0aW9uXCIpO1xuY29uc3QgeyBzZXRDdXJzb3IgfSA9IHJlcXVpcmUoXCIuLi91dGlscy9jdXJzb3JcIik7XG5jb25zdCByZW5kZXIgPSByZXF1aXJlKFwiLi4vcmVuZGVyL3JlbmRlclwiKTtcblxuLy8gbW91c2Vkb3duXG5jb25zdCBvbk1vdmVNb3VzZURvd24gPSByZXF1aXJlKFwiLi9tb3ZlL29uTW92ZU1vdXNlRG93blwiKTtcbmNvbnN0IG9uUGVuTW91c2VEb3duID0gcmVxdWlyZShcIi4vcGVuL29uUGVuTW91c2VEb3duXCIpO1xuXG4vLyBtb3VzZW1vdmVcbmNvbnN0IG9uUGVuTW91c2VNb3ZlID0gcmVxdWlyZShcIi4vcGVuL29uUGVuTW91c2VNb3ZlXCIpO1xuXG5jb25zdCB7IFBFTiwgTU9WRSB9ID0gdG9vbHM7XG5cbmNvbnN0IG1vdXNlRG93bkxpc3RlbmVycyA9IHtcbiAgTU9WRTogb25Nb3ZlTW91c2VEb3duLFxuICBQRU46ICBvblBlbk1vdXNlRG93bixcbn07XG5cbmNvbnN0IG1vdXNlTW92ZUxpc3RlbmVycyA9IHtcbiAgTU9WRTogdW5kZWZpbmVkLFxuICBQRU46ICBvblBlbk1vdXNlTW92ZSxcbn07XG5cbmNvbnN0IG1vdXNlVXBMaXN0ZW5lcnMgPSB7fTtcblxubGV0IGN1cnJlbnRUb29sID0gTU9WRTtcblxuZXhwb3J0cy5zZXRUb29sID0gZnVuY3Rpb24gc2V0VG9vbChrZXkpIHtcbiAgaWYgKHRvb2xzW2tleV0gJiYgdG9vbHNba2V5XSAhPT0gY3VycmVudFRvb2wpIHtcbiAgICBjdXJyZW50VG9vbCA9IHRvb2xzW2tleV07XG4gICAgc2V0Q3Vyc29yKGN1cnJlbnRUb29sKTtcbiAgICByZW5kZXIobnVsbCwgeyB1c2VMYXN0UG9zaXRpb246IHRydWUgfSk7XG4gIH1cblxuICBjb25zdCBlbEFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10b29sLWtleV1cIik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZWxBcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBlbEFycltpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIGlmIChlbEFycltpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvb2wta2V5XCIpID09PSBrZXkpIHtcbiAgICAgIGVsQXJyW2ldLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydHMub25Ub29sTW91c2VEb3duID0gZnVuY3Rpb24gb25Ub29sTW91c2VEb3duKGUpIHtcbiAgY29uc3QgcG9zaXRpb24gPSB0b1Bvc2l0aW9uKGUpO1xuXG4gIGNvbnN0IG9iaiA9IHJlc29sdmVPYmplY3RBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKCFvYmopIHtcbiAgICBzZXRDdXJzb3IoZGVmYXVsdFRvb2xDdXJzb3JzW2N1cnJlbnRUb29sXSk7XG4gIH1cblxuICBpZiAobW91c2VEb3duTGlzdGVuZXJzW2N1cnJlbnRUb29sXSkge1xuICAgIG1vdXNlRG93bkxpc3RlbmVyc1tjdXJyZW50VG9vbF0ocG9zaXRpb24sIG9iaik7XG4gIH1cblxuICByZW5kZXIocG9zaXRpb24pO1xufVxuXG5leHBvcnRzLm9uVG9vbE1vdXNlTW92ZSA9IGZ1bmN0aW9uIG9uVG9vbE1vdXNlTW92ZShlKSB7XG4gIGNvbnN0IHBvc2l0aW9uID0gdG9Qb3NpdGlvbihlKTtcbiAgcnVuTGlzdGVuZXJzKFwibW91c2Vtb3ZlXCIsIHBvc2l0aW9uKTtcbiAgXG4gIGNvbnN0IG9iaiA9IHJlc29sdmVPYmplY3RBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKCFvYmopIHtcbiAgICBzZXRDdXJzb3IoZGVmYXVsdFRvb2xDdXJzb3JzW2N1cnJlbnRUb29sXSk7XG4gIH1cblxuICBpZiAobW91c2VNb3ZlTGlzdGVuZXJzW2N1cnJlbnRUb29sXSkge1xuICAgIG1vdXNlTW92ZUxpc3RlbmVyc1tjdXJyZW50VG9vbF0ocG9zaXRpb24sIG9iaik7XG4gIH1cblxuICByZW5kZXIocG9zaXRpb24pO1xufVxuXG5leHBvcnRzLm9uVG9vbE1vdXNlVXAgPSBmdW5jdGlvbiBvblRvb2xNb3VzZVVwKGUpIHtcbiAgY29uc3QgcG9zaXRpb24gPSB0b1Bvc2l0aW9uKGUpO1xuICBydW5MaXN0ZW5lcnMoXCJtb3VzZXVwXCIsIHBvc2l0aW9uKTtcbiAgXG4gIGNvbnN0IG9iaiA9IHJlc29sdmVPYmplY3RBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKCFvYmopIHtcbiAgICBzZXRDdXJzb3IoZGVmYXVsdFRvb2xDdXJzb3JzW2N1cnJlbnRUb29sXSk7XG4gIH1cblxuICBpZiAobW91c2VVcExpc3RlbmVyc1tjdXJyZW50VG9vbF0pIHtcbiAgICBtb3VzZVVwTGlzdGVuZXJzW2N1cnJlbnRUb29sXShwb3NpdGlvbiwgb2JqKTtcbiAgfVxuXG4gIHJlbmRlcihwb3NpdGlvbik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdG9vbHMvdG9vbHMuanMiLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IHRvQ29ubmVjdGlvbklkID0gKGEsIGIpID0+IChbYSwgYl0uc29ydCgpLmpvaW4oXCItXCIpKTtcblxuZXhwb3J0cy50b0Nvbm5lY3Rpb25JZCA9IHRvQ29ubmVjdGlvbklkO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2Nvbm5lY3Rpb25JZC5qcyIsImNvbnN0IGdldFBvaW50cyA9IHJlcXVpcmUoXCIuLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyBnZXRIYW5kbGVCeUlkIH0gPSByZXF1aXJlKFwiLi4vaGFuZGxlcy9nZXRIYW5kbGVzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Qb2ludHMoYykge1xuICAvKipcbiAgICogV2UgbmVlZCB0byBkbyBpdCBsaWtlIHRoaXMgYmVjYXVzZSBvZiBjaXJjdWxhciBmaWxlIHJlcXVpcmVzLlxuICAgKi9cbiAgY29uc3QgeyBnZXRQb2ludEJ5SWQgfSA9IGdldFBvaW50cztcblxuICBjb25zdCBbIHAwLCBwMyBdID0gYy5wb2ludHM7XG4gIGNvbnN0IFsgcDEsIHAyIF0gPSBjLmhhbmRsZXM7XG5cbiAgaWYgKCFwMSAmJiAhcDIgJiYgIXAzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb25uZWN0aW9uLlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcDEgaGFuZGxlIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGhhbmRsZXMgbWF5IGJlIGRlbGV0ZWQgYWZ0ZXIgdGhlIGNvbm5lY3Rpb24gaXMgY3JlYXRlZCwgc29cbiAgICogdGhlcmUncyBhIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGNvbm5lY3Rpb24gaGFzIHR3byBwb2ludHMgYnV0IG5vIGhhbmRsZXMuXG4gICAqL1xuICByZXR1cm4gW1xuICAgIGdldFBvaW50QnlJZChwMCksXG4gICAgcDEgPyBnZXRIYW5kbGVCeUlkKHAxKSA6IG51bGwsXG4gICAgcDIgPyBnZXRIYW5kbGVCeUlkKHAyKSA6IG51bGwsXG4gICAgcDMgPyBnZXRQb2ludEJ5SWQocDMpIDogbnVsbCxcbiAgXTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb25uZWN0aW9ucy9nZXRDb25uZWN0aW9uUG9pbnRzLmpzIiwiLyoqXG4gKiBhIGFuZCBiIGFyZSBhbnkgbnVtYmVycy5cbiAqIHQgc2hvdWxkIGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMVxuICovXG5jb25zdCBnZXRJbnRlcm1lZGlhdGVOdW1iZXIgPSAoYSwgYiwgdCkgPT4gKGEgKiAoMSAtIHQpKSArIChiICogdCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0SW50ZXJtZWRpYXRlTnVtYmVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWxzL2dldEludGVybWVkaWF0ZU51bWJlci5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY2FsY0Rpc3RhbmNlQmV0d2VlblBvc2l0aW9ucyhhLCBiKSB7XG4gIGNvbnN0IGRYID0gTWF0aC5hYnMoYS54IC0gYi54KTsgLy8gZGlmZmVyZW5jZSBvbiB4IGF4aXNcbiAgY29uc3QgZFkgPSBNYXRoLmFicyhhLnkgLSBiLnkpOyAvLyBkaWZmZXJlbmNlIG9uIHkgYXhpc1xuICByZXR1cm4gKGRYICogZFgpICsgKGRZICogZFkpOyAvLyBzaG91dG91dCBweXRoYWdvcmFzXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMvY2FsY0Rpc3RhbmNlQmV0d2VlblBvc2l0aW9ucy5qcyIsImNvbnN0IGdldENvbnRleHQgPSByZXF1aXJlKFwiLi4vY2FudmFzL2dldENvbnRleHRcIik7XG5jb25zdCBpc1ZhbGlkUG9zaXRpb24gPSByZXF1aXJlKFwiLi4vdXRpbHMvaXNWYWxpZFBvc2l0aW9uXCIpO1xuXG5leHBvcnRzLnJlbmRlckNpcmNsZSA9IGZ1bmN0aW9uIHJlbmRlckNpcmNsZShwb2ludHMsIHJhZGl1cywgY29sb3IsIHN0cm9rZSkge1xuICBjb25zdCBjdHggPSBnZXRDb250ZXh0KCk7XG4gIFxuICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSkge1xuICAgIHBvaW50cyA9IFtwb2ludHNdO1xuICB9XG5cbiAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcG9pbnRzW2ldO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcblxuICAgIGlmIChzdHJva2UpIHtcbiAgICAgIGlmICh0eXBlb2Ygc3Ryb2tlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdHJva2UuIEV4cGVjdGVkIG9iamVjdCBidXQgZ290ICcke3N0cm9rZX0nLmApXG4gICAgICB9XG5cbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGN0eC5hcmMoeCwgeSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IHN0cm9rZS53aWR0aCB8fCAxO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlLmNvbG9yIHx8IFwiIzAwMDAwMFwiO1xuICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLnJlbmRlckxpbmUgPSBmdW5jdGlvbiByZW5kZXJMaW5lKGZyb20sIHRvLCBjb2xvciA9IFwiIzQ0NFwiLCB3aWR0aCA9IDEpIHtcbiAgY29uc3QgY3R4ID0gZ2V0Q29udGV4dCgpO1xuXG4gIGlmICghaXNWYWxpZFBvc2l0aW9uKGZyb20pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbiAnZnJvbScuXCIpO1xuICB9XG5cbiAgaWYgKCFpc1ZhbGlkUG9zaXRpb24odG8pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbiAndG8nLlwiKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY29sb3IgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29sb3IuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICcke2NvbG9yfScuYCk7XG4gIH1cblxuICBpZiAodHlwZW9mIHdpZHRoICE9PSBcIm51bWJlclwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdpZHRoLiBFeHBlY3RlZCBudW1iZXIgYnV0IGdvdCAnJHt3aWR0aH0nLmApO1xuICB9XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKGZyb20ueCwgZnJvbS55KTtcbiAgY3R4LmxpbmVUbyh0by54LCB0by55KTtcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gIGN0eC5saW5lV2lkdGggPSB3aWR0aDtcbiAgY3R4LnN0cm9rZSgpO1xufVxuXG5leHBvcnRzLnJlbmRlckN1YmljQmV6aWVyID0gZnVuY3Rpb24gcmVuZGVyQ3ViaWNCZXppZXIocG9pbnRzLCBsaW5lV2lkdGggPSAxLCBjb2xvciA9IFwiIzQ0NFwiKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShwb2ludHMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBvaW50cy4gRXhwZWN0ZWQgYXJyYXkgYnV0IGdvdCAke3BvaW50c30uYCk7XG4gIH1cblxuICBpZiAocG9pbnRzLmxlbmd0aCAhPT0gNCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwb2ludHMuIEV4cGVjdGVkIDQgYnV0IGdvdCAke3BvaW50cy5sZW5ndGh9LmApO1xuICB9XG5cbiAgcG9pbnRzLmZvckVhY2goKHBvaW50LCBpKSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24ocG9pbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcG9zaXRpb24gYXQgaW5kZXggJHtpfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgWyBwMCwgcDEsIHAyLCBwMyBdID0gcG9pbnRzO1xuICBjb25zdCBjdHggPSBnZXRDb250ZXh0KCk7XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKHAwLngsIHAwLnkpO1xuICBjdHguYmV6aWVyQ3VydmVUbyhcbiAgICAocDEueCksIChwMS55KSxcbiAgICAocDIueCksIChwMi55KSxcbiAgICAocDMueCksIChwMy55KSxcbiAgKTtcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gIGN0eC5zdHJva2UoKTtcbn1cblxuZXhwb3J0cy5yZW5kZXJRdWFkcmF0aWNCZXppZXIgPSBmdW5jdGlvbiByZW5kZXJRdWFkcmF0aWNCZXppZXIoXG4gIHBvaW50cyxcbiAgbGluZVdpZHRoID0gMSxcbiAgY29sb3IgPSBcIiM0NDRcIixcbikge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwb2ludHMuIEV4cGVjdGVkIGFycmF5IGJ1dCBnb3QgJHtwb2ludHN9LmApO1xuICB9XG5cbiAgaWYgKHBvaW50cy5sZW5ndGggIT09IDMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcG9pbnRzLiBFeHBlY3RlZCAzIGJ1dCBnb3QgJHtwb2ludHMubGVuZ3RofS5gKTtcbiAgfVxuXG4gIHBvaW50cy5mb3JFYWNoKChwb2ludCwgaSkgPT4ge1xuICAgIGlmICghaXNWYWxpZFBvc2l0aW9uKHBvaW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBvc2l0aW9uIGF0IGluZGV4ICR7aX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IFsgcDAsIHAxLCBwMiBdID0gcG9pbnRzO1xuICBjb25zdCBjdHggPSBnZXRDb250ZXh0KCk7XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKHAwLngsIHAwLnkpO1xuICBjdHgucXVhZHJhdGljQ3VydmVUbyhcbiAgICAocDEueCksIChwMS55KSxcbiAgICAocDIueCksIChwMi55KSxcbiAgKTtcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gIGN0eC5zdHJva2UoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVuZGVyL3ByaW1pdGl2ZXMuanMiLCJjb25zdCB0b29scyA9IHJlcXVpcmUoXCIuLi90b29scy90b29sc1wiKTtcbmNvbnN0IHsga2V5cyB9ID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IHVuZG8gPSByZXF1aXJlKFwiLi4vYWN0aW9ucy9oaXN0b3J5L3VuZG9cIik7XG5jb25zdCByZWRvID0gcmVxdWlyZShcIi4uL2FjdGlvbnMvaGlzdG9yeS9yZWRvXCIpO1xuXG5jb25zdCBhY3RpdmVLZXlzID0ge307XG5cbmZ1bmN0aW9uIGlzS2V5RG93bihrZXkpIHtcbiAgaWYgKHR5cGVvZiBrZXkgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQga2V5LiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHtrZXl9Jy5gKTtcbiAgfVxuXG4gIHJldHVybiBhY3RpdmVLZXlzW2tleV0gfHwgZmFsc2U7XG59XG5cbmV4cG9ydHMub25LZXlVcCA9IGZ1bmN0aW9uIG9uS2V5VXAoeyBrZXkgfSkge1xuICBpZiAodHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXkuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICcke2tleX0nLmApO1xuICB9XG5cbiAgYWN0aXZlS2V5c1trZXldID0gZmFsc2U7XG59XG5cbmV4cG9ydHMub25LZXlEb3duID0gZnVuY3Rpb24gb25LZXlEb3duKHsga2V5LCByZXBlYXQgfSkge1xuICBpZiAocmVwZWF0KSB7IHJldHVybjsgfVxuXG4gIGlmICh0eXBlb2Yga2V5ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleS4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7a2V5fScuYCk7XG4gIH1cblxuICAvLyBXaW5kb3dzXG4gIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gXCJ6XCIgJiYgaXNLZXlEb3duKGtleXMuQ09OVFJPTCkgJiYgaXNLZXlEb3duKGtleXMuU0hJRlQpKSB7XG4gICAgcmVkbygpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoa2V5ID09PSBcInpcIiAmJiBpc0tleURvd24oa2V5cy5DT05UUk9MKSkge1xuICAgIHVuZG8oKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBNYWNPUyAtIE1ldGEgaXMgQ29tbWFuZFxuICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IFwielwiICYmIGlzS2V5RG93bihcIk1ldGFcIikgJiYgaXNLZXlEb3duKGtleXMuU0hJRlQpKSB7XG4gICAgcmVkbygpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoa2V5ID09PSBcInpcIiAmJiBpc0tleURvd24oXCJNZXRhXCIpKSB7XG4gICAgdW5kbygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRvb2xzLnNldFRvb2woa2V5KTsgLy8gT25seSBjaGFuZ2VzIHRvIHRvb2wgaWYga2V5IGlzIGEgdmFsaWQgdG9vbC5cblxuICBhY3RpdmVLZXlzW2tleV0gPSB0cnVlO1xufVxuXG5leHBvcnRzLmlzS2V5RG93biA9IGlzS2V5RG93bjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy9rZXlib2FyZC5qcyIsIi8qKlxuICogQW4gYWN0aW9uIGlzIGNvbXBvc2VkIG9mIHRocmVlIHByb3BlcnRpZXMuXG4gKlxuICogICAgdHlwZSAtIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb24sIHVzZWQgdG8gcmVzb2x2ZSB0aGUgYWN0aW9uIGNyZWF0b3JcbiAqICAgIGRhdGEgLSBQYXNzZWQgdG8gdGhlIGFjdGlvbiBjcmVhdG9yXG4gKiAgICBzZWxlY3Rpb24gLSBUaGUgc2VsZWN0aW9uIHRvIHJlc3RvcmUgd2hlbiB0aGUgYWN0aW9uIGlzIGV4ZWN1dGVkXG4gKlxuICogQW4gYWN0aW9uIG1heSByZXR1cm4gYWYgYXJyYXkgb2YgYWN0aW9ucyB0byBleGVjdXRlLlxuICpcbiAqIEEgdG9wIGxldmVsIGFjdGlvbiBtdXN0IGhhdmUgYSBzZWxlY3Rpb24sIGJ1dCBzdWItYWN0aW9ucyBzaG91bGQgbm90LlxuICpcbiAqIEV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHNob3VsZCBiZSBhYmxlIHRvIGV4ZWN1dGUgYW5kIHJldmVyc2UgaXRzZWxmIGdpdmVuXG4gKiB0aG9zZSB0aHJlZSBwcm9wZXJ0aWVzLlxuICovXG5cbmNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uL3N0b3JlXCIpO1xuY29uc3QgYWN0aW9ucyA9IHJlcXVpcmUoXCIuL2FjdGlvbnNcIik7XG5jb25zdCB7IGlzVmFsaWRTZWxlY3Rpb24sIGNsZWFyU2VsZWN0aW9uIH0gPSByZXF1aXJlKFwiLi4vc2VsZWN0aW9uXCIpO1xuXG4vKipcbiAqIEZldGNoZXMgdGhlIGFwcHJvcHJpYXRlIGFjdGlvbiBjcmVhdG9yIGZvciB0aGUgdHlwZSBwcm92aWRlZC5cbiAqXG4gKiBFYWNoIGFjdGlvbiBjcmVhdG9yIG1vZHVsZSBzaG91bGQgaGF2ZSBhIHJlZG8gYW5kIHVuZG9cbiAqIGV4cG9ydCB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBpbiBhbiBhY3Rpb24gYW5kIHJldHVybnNcbiAqIGEgZGlzcGF0Y2hhYmxlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUFjdGlvbkNyZWF0b3IodHlwZSwgdW5kbykge1xuICBpZiAoIWFjdGlvbnNbdHlwZV0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGFjdGlvbiBvZiB0eXBlICcke3R5cGV9Jy5gKTtcbiAgfVxuXG4gIGNvbnN0IHVuZG9PclJlZG8gPSB1bmRvID8gXCJ1bmRvXCIgOiBcInJlZG9cIjtcblxuICBpZiAodHlwZW9mIGFjdGlvbnNbdHlwZV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAodHlwZW9mIGFjdGlvbnNbdHlwZV1bdW5kb09yUmVkb10gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFjdGlvbiBjcmVhdG9yIG9mIHR5cGU6ICcke3R5cGV9Jy4gQ291bGQgbm90ICcke3VuZG9PclJlZG99Jy5gKTsgIFxuICAgIH1cbiAgICByZXR1cm4gYWN0aW9uc1t0eXBlXVt1bmRvT3JSZWRvXTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYWN0aW9uc1t0eXBlXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgLyoqXG4gICAgICogSGlnaGVyIG9yZGVyIGFjdGlvbiBjcmVhdG9yLiBJdCByZXR1cm5zIGFuIGFycmF5IG9mIGFjdGlvbnMuXG4gICAgICpcbiAgICAgKiBIaWdoZXIgb3JkZXIgYWN0aW9uIGNyZWF0b3JzIGNhbid0IGJlIGZsaXBwZWQsIGJ1dCB0aGUgYWN0aW9uc1xuICAgICAqIGNyZWF0b3JzIHRoYXQgdGhleSByZXR1cm4gY2FuIGJlLlxuICAgICAqL1xuICAgIHJldHVybiBhY3Rpb25zW3R5cGVdO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFjdGlvbiBjcmVhdG9yIG9mIHR5cGU6ICcke3R5cGV9Jy5gKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZU5lc3RlZEFjdGlvbihhY3Rpb25zLCB1bmRvKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHsgdHlwZSwgZGF0YSB9ID0gYWN0aW9uc1tpXTtcbiAgXG4gICAgY29uc3QgYWN0aW9uQ3JlYXRvciA9IHJlc29sdmVBY3Rpb25DcmVhdG9yKHR5cGUsIHVuZG8pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGFjdGlvbkNyZWF0b3IoZGF0YSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICByZXNvbHZlTmVzdGVkQWN0aW9uKHJlc3VsdCwgdW5kbyk7IC8vIG9oIGJveVxuICAgIH0gZWxzZSB7XG4gICAgICBzdG9yZS5kaXNwYXRjaChyZXN1bHQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFByZWRvbWluYW50bHkgdXNlZCBieSB0aGUgdW5kby9yZWRvIG1lY2hhbmlzbS5cbiAqXG4gKiBUYWtlcyBpbiBhbiBhY3Rpb24gYW5kIGV4ZWN1dGVzIG9yIHJldmVyc2VzIHRoYXQgYWN0aW9uIGRlcGVuZGluZ1xuICogb24gdGhlIG9wdGlvbnMgcGFzc2VkLlxuICpcbiAqIE9wdGlvbnM6XG4gKiAgICB1bmRvICAgICAgICAgICAgLSBpZiBzZXQgdG8gdHJ1ZSwgdGhlIGFjdGlvbiBpcyByZXZlcnNlZC5cbiAqICAgIGlnbm9yZVNlbGVjdGlvbiAtIGlmIHNldCB0byB0cnVlLCB0aGUgY3VycmVudCBzZWxlY3Rpb24gaXMgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZCB3aGF0c29ldmVyLlxuICpcbiAqIGlnbm9yZVNlbGVjdGlvbiBzaG91bGQgZXhjbHVzaXZlbHkgYmUgdXNlZCBieSB0aGUgYWRkQWN0aW9uVG9IaXN0b3J5XG4gKiBtb2R1bGUuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVzb2x2ZUFjdGlvbihhY3Rpb24sIG9wdHMgPSB7fSkge1xuICBpZiAoIW9wdHMgfHwgdHlwZW9mIG9wdHMgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgb3B0aW9ucy4gRXhwZWN0ZWQgb2JqZWN0IGJ1dCBnb3QgJyR7b3B0c30nLmApO1xuICB9XG5cbiAgY29uc3QgeyB0eXBlLCBkYXRhLCBzZWxlY3Rpb24gfSA9IGFjdGlvbjtcbiAgY29uc3QgdW5kbyA9IG9wdHMudW5kbyB8fCBmYWxzZTtcblxuICBjb25zdCBhY3Rpb25DcmVhdG9yID0gcmVzb2x2ZUFjdGlvbkNyZWF0b3IodHlwZSwgdW5kbyk7XG4gIGNvbnN0IHJlc3VsdCA9IGFjdGlvbkNyZWF0b3IoZGF0YSk7XG4gIFxuICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgcmVzb2x2ZU5lc3RlZEFjdGlvbihyZXN1bHQsIHVuZG8pO1xuICB9IGVsc2Uge1xuICAgIHN0b3JlLmRpc3BhdGNoKHJlc3VsdCk7XG4gIH1cblxuICBpZiAoIW9wdHMuaWdub3JlU2VsZWN0aW9uKSB7XG4gICAgaWYgKHVuZG8pIHtcbiAgICAgIC8qKlxuICAgICAgICogT24gb2JqZWN0IGNyZWF0aW9uLCB0aG9zZSBvYmplY3RzIHdpbGwgYmUgc2VsZWN0ZWQuXG4gICAgICAgKlxuICAgICAgICogSWYgd2UncmUgdW5kb2luZyBhbiBvYmplY3QgY3JlYXRpb24sIHRoZW4gdGhlIHNlbGVjdGlvbiB3aWxsXG4gICAgICAgKiBjb250YWluIG9iamVjdHMgdGhhdCBkb24ndCBleGlzdC5cbiAgICAgICAqXG4gICAgICAgKiBJZiB0aGlzIGlzIHRoZSBjYXNlLCB3ZSByZXN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGFjdGlvbiBiZWZvcmVcbiAgICAgICAqIGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHdlIGNsZWFyIHRoZSBzZWxlY3Rpb24uXG4gICAgICAgKi9cbiAgICAgIGlmICghaXNWYWxpZFNlbGVjdGlvbihzZWxlY3Rpb24pKSB7XG4gICAgICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gc3RvcmUuZ2V0U3RhdGUoKS5oaXN0b3J5O1xuICAgICAgICBpZiAoIWhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhY3Rpb25CZWZvcmUgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJSRVNUT1JFX1NFTEVDVElPTlwiLFxuICAgICAgICAgICAgcGF5bG9hZDogYWN0aW9uQmVmb3JlLnNlbGVjdGlvbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiUkVTVE9SRV9TRUxFQ1RJT05cIixcbiAgICAgICAgcGF5bG9hZDogc2VsZWN0aW9uLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9yZXNvbHZlQWN0aW9uLmpzIiwiY29uc3QgeyBnZXRMZWZ0T2Zmc2V0LCBnZXRUb3BPZmZzZXQgfSA9IHJlcXVpcmUoXCIuLi9jYW52YXMvZ2V0Q2FudmFzT2Zmc2V0XCIpO1xuXG5jb25zdCB0b1Bvc2l0aW9uID0gZSA9PiAoe1xuICB4OiBlLmNsaWVudFggLSBnZXRMZWZ0T2Zmc2V0KCksXG4gIHk6IGUuY2xpZW50WSAtIGdldFRvcE9mZnNldCgpLFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gdG9Qb3NpdGlvbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy90b1Bvc2l0aW9uLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZG9tQnl0ZSA9IHJlcXVpcmUoJy4vcmFuZG9tL3JhbmRvbS1ieXRlJyk7XG5cbmZ1bmN0aW9uIGVuY29kZShsb29rdXAsIG51bWJlcikge1xuICAgIHZhciBsb29wQ291bnRlciA9IDA7XG4gICAgdmFyIGRvbmU7XG5cbiAgICB2YXIgc3RyID0gJyc7XG5cbiAgICB3aGlsZSAoIWRvbmUpIHtcbiAgICAgICAgc3RyID0gc3RyICsgbG9va3VwKCAoIChudW1iZXIgPj4gKDQgKiBsb29wQ291bnRlcikpICYgMHgwZiApIHwgcmFuZG9tQnl0ZSgpICk7XG4gICAgICAgIGRvbmUgPSBudW1iZXIgPCAoTWF0aC5wb3coMTYsIGxvb3BDb3VudGVyICsgMSApICk7XG4gICAgICAgIGxvb3BDb3VudGVyKys7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZW5jb2RlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9saWIvZW5jb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgaXNQbGFpbk9iamVjdCBmcm9tICdsb2Rhc2gtZXMvaXNQbGFpbk9iamVjdCc7XG5pbXBvcnQgJCRvYnNlcnZhYmxlIGZyb20gJ3N5bWJvbC1vYnNlcnZhYmxlJztcblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbmV4cG9ydCB2YXIgQWN0aW9uVHlwZXMgPSB7XG4gIElOSVQ6ICdAQHJlZHV4L0lOSVQnXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBSZWR1eCBzdG9yZSB0aGF0IGhvbGRzIHRoZSBzdGF0ZSB0cmVlLlxuICAgKiBUaGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZSBkYXRhIGluIHRoZSBzdG9yZSBpcyB0byBjYWxsIGBkaXNwYXRjaCgpYCBvbiBpdC5cbiAgICpcbiAgICogVGhlcmUgc2hvdWxkIG9ubHkgYmUgYSBzaW5nbGUgc3RvcmUgaW4geW91ciBhcHAuIFRvIHNwZWNpZnkgaG93IGRpZmZlcmVudFxuICAgKiBwYXJ0cyBvZiB0aGUgc3RhdGUgdHJlZSByZXNwb25kIHRvIGFjdGlvbnMsIHlvdSBtYXkgY29tYmluZSBzZXZlcmFsIHJlZHVjZXJzXG4gICAqIGludG8gYSBzaW5nbGUgcmVkdWNlciBmdW5jdGlvbiBieSB1c2luZyBgY29tYmluZVJlZHVjZXJzYC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbmV4dCBzdGF0ZSB0cmVlLCBnaXZlblxuICAgKiB0aGUgY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgYWN0aW9uIHRvIGhhbmRsZS5cbiAgICpcbiAgICogQHBhcmFtIHthbnl9IFtwcmVsb2FkZWRTdGF0ZV0gVGhlIGluaXRpYWwgc3RhdGUuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gICAqIHRvIGh5ZHJhdGUgdGhlIHN0YXRlIGZyb20gdGhlIHNlcnZlciBpbiB1bml2ZXJzYWwgYXBwcywgb3IgdG8gcmVzdG9yZSBhXG4gICAqIHByZXZpb3VzbHkgc2VyaWFsaXplZCB1c2VyIHNlc3Npb24uXG4gICAqIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2Vyc2AgdG8gcHJvZHVjZSB0aGUgcm9vdCByZWR1Y2VyIGZ1bmN0aW9uLCB0aGlzIG11c3QgYmVcbiAgICogYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgYGNvbWJpbmVSZWR1Y2Vyc2Aga2V5cy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2VuaGFuY2VyXSBUaGUgc3RvcmUgZW5oYW5jZXIuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gICAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAgICogdGltZSB0cmF2ZWwsIHBlcnNpc3RlbmNlLCBldGMuIFRoZSBvbmx5IHN0b3JlIGVuaGFuY2VyIHRoYXQgc2hpcHMgd2l0aCBSZWR1eFxuICAgKiBpcyBgYXBwbHlNaWRkbGV3YXJlKClgLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RvcmV9IEEgUmVkdXggc3RvcmUgdGhhdCBsZXRzIHlvdSByZWFkIHRoZSBzdGF0ZSwgZGlzcGF0Y2ggYWN0aW9uc1xuICAgKiBhbmQgc3Vic2NyaWJlIHRvIGNoYW5nZXMuXG4gICAqL1xufTtleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgdmFyIF9yZWYyO1xuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAndW5kZWZpbmVkJykge1xuICAgIGVuaGFuY2VyID0gcHJlbG9hZGVkU3RhdGU7XG4gICAgcHJlbG9hZGVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIGVuaGFuY2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuaGFuY2VyKGNyZWF0ZVN0b3JlKShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSByZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgY3VycmVudFJlZHVjZXIgPSByZWR1Y2VyO1xuICB2YXIgY3VycmVudFN0YXRlID0gcHJlbG9hZGVkU3RhdGU7XG4gIHZhciBjdXJyZW50TGlzdGVuZXJzID0gW107XG4gIHZhciBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycztcbiAgdmFyIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCkge1xuICAgIGlmIChuZXh0TGlzdGVuZXJzID09PSBjdXJyZW50TGlzdGVuZXJzKSB7XG4gICAgICBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycy5zbGljZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgc3RhdGUgdHJlZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMge2FueX0gVGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY2hhbmdlIGxpc3RlbmVyLiBJdCB3aWxsIGJlIGNhbGxlZCBhbnkgdGltZSBhbiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCxcbiAgICogYW5kIHNvbWUgcGFydCBvZiB0aGUgc3RhdGUgdHJlZSBtYXkgcG90ZW50aWFsbHkgaGF2ZSBjaGFuZ2VkLiBZb3UgbWF5IHRoZW5cbiAgICogY2FsbCBgZ2V0U3RhdGUoKWAgdG8gcmVhZCB0aGUgY3VycmVudCBzdGF0ZSB0cmVlIGluc2lkZSB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIFlvdSBtYXkgY2FsbCBgZGlzcGF0Y2goKWAgZnJvbSBhIGNoYW5nZSBsaXN0ZW5lciwgd2l0aCB0aGUgZm9sbG93aW5nXG4gICAqIGNhdmVhdHM6XG4gICAqXG4gICAqIDEuIFRoZSBzdWJzY3JpcHRpb25zIGFyZSBzbmFwc2hvdHRlZCBqdXN0IGJlZm9yZSBldmVyeSBgZGlzcGF0Y2goKWAgY2FsbC5cbiAgICogSWYgeW91IHN1YnNjcmliZSBvciB1bnN1YnNjcmliZSB3aGlsZSB0aGUgbGlzdGVuZXJzIGFyZSBiZWluZyBpbnZva2VkLCB0aGlzXG4gICAqIHdpbGwgbm90IGhhdmUgYW55IGVmZmVjdCBvbiB0aGUgYGRpc3BhdGNoKClgIHRoYXQgaXMgY3VycmVudGx5IGluIHByb2dyZXNzLlxuICAgKiBIb3dldmVyLCB0aGUgbmV4dCBgZGlzcGF0Y2goKWAgY2FsbCwgd2hldGhlciBuZXN0ZWQgb3Igbm90LCB3aWxsIHVzZSBhIG1vcmVcbiAgICogcmVjZW50IHNuYXBzaG90IG9mIHRoZSBzdWJzY3JpcHRpb24gbGlzdC5cbiAgICpcbiAgICogMi4gVGhlIGxpc3RlbmVyIHNob3VsZCBub3QgZXhwZWN0IHRvIHNlZSBhbGwgc3RhdGUgY2hhbmdlcywgYXMgdGhlIHN0YXRlXG4gICAqIG1pZ2h0IGhhdmUgYmVlbiB1cGRhdGVkIG11bHRpcGxlIHRpbWVzIGR1cmluZyBhIG5lc3RlZCBgZGlzcGF0Y2goKWAgYmVmb3JlXG4gICAqIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQuIEl0IGlzLCBob3dldmVyLCBndWFyYW50ZWVkIHRoYXQgYWxsIHN1YnNjcmliZXJzXG4gICAqIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBgZGlzcGF0Y2goKWAgc3RhcnRlZCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBsYXRlc3RcbiAgICogc3RhdGUgYnkgdGhlIHRpbWUgaXQgZXhpdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCBvbiBldmVyeSBkaXNwYXRjaC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGlzIGNoYW5nZSBsaXN0ZW5lci5cbiAgICovXG4gIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICB2YXIgaXNTdWJzY3JpYmVkID0gdHJ1ZTtcblxuICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICBuZXh0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgaWYgKCFpc1N1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpc1N1YnNjcmliZWQgPSBmYWxzZTtcblxuICAgICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgICAgdmFyIGluZGV4ID0gbmV4dExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIG5leHRMaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYW4gYWN0aW9uLiBJdCBpcyB0aGUgb25seSB3YXkgdG8gdHJpZ2dlciBhIHN0YXRlIGNoYW5nZS5cbiAgICpcbiAgICogVGhlIGByZWR1Y2VyYCBmdW5jdGlvbiwgdXNlZCB0byBjcmVhdGUgdGhlIHN0b3JlLCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgKiBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBnaXZlbiBgYWN0aW9uYC4gSXRzIHJldHVybiB2YWx1ZSB3aWxsXG4gICAqIGJlIGNvbnNpZGVyZWQgdGhlICoqbmV4dCoqIHN0YXRlIG9mIHRoZSB0cmVlLCBhbmQgdGhlIGNoYW5nZSBsaXN0ZW5lcnNcbiAgICogd2lsbCBiZSBub3RpZmllZC5cbiAgICpcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBwbGFpbiBvYmplY3QgYWN0aW9ucy4gSWYgeW91IHdhbnQgdG9cbiAgICogZGlzcGF0Y2ggYSBQcm9taXNlLCBhbiBPYnNlcnZhYmxlLCBhIHRodW5rLCBvciBzb21ldGhpbmcgZWxzZSwgeW91IG5lZWQgdG9cbiAgICogd3JhcCB5b3VyIHN0b3JlIGNyZWF0aW5nIGZ1bmN0aW9uIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgbWlkZGxld2FyZS4gRm9yXG4gICAqIGV4YW1wbGUsIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIGByZWR1eC10aHVua2AgcGFja2FnZS4gRXZlbiB0aGVcbiAgICogbWlkZGxld2FyZSB3aWxsIGV2ZW50dWFsbHkgZGlzcGF0Y2ggcGxhaW4gb2JqZWN0IGFjdGlvbnMgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gQSBwbGFpbiBvYmplY3QgcmVwcmVzZW50aW5nIOKAnHdoYXQgY2hhbmdlZOKAnS4gSXQgaXNcbiAgICogYSBnb29kIGlkZWEgdG8ga2VlcCBhY3Rpb25zIHNlcmlhbGl6YWJsZSBzbyB5b3UgY2FuIHJlY29yZCBhbmQgcmVwbGF5IHVzZXJcbiAgICogc2Vzc2lvbnMsIG9yIHVzZSB0aGUgdGltZSB0cmF2ZWxsaW5nIGByZWR1eC1kZXZ0b29sc2AuIEFuIGFjdGlvbiBtdXN0IGhhdmVcbiAgICogYSBgdHlwZWAgcHJvcGVydHkgd2hpY2ggbWF5IG5vdCBiZSBgdW5kZWZpbmVkYC4gSXQgaXMgYSBnb29kIGlkZWEgdG8gdXNlXG4gICAqIHN0cmluZyBjb25zdGFudHMgZm9yIGFjdGlvbiB0eXBlcy5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gRm9yIGNvbnZlbmllbmNlLCB0aGUgc2FtZSBhY3Rpb24gb2JqZWN0IHlvdSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQsIGlmIHlvdSB1c2UgYSBjdXN0b20gbWlkZGxld2FyZSwgaXQgbWF5IHdyYXAgYGRpc3BhdGNoKClgIHRvXG4gICAqIHJldHVybiBzb21ldGhpbmcgZWxzZSAoZm9yIGV4YW1wbGUsIGEgUHJvbWlzZSB5b3UgY2FuIGF3YWl0KS5cbiAgICovXG4gIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChhY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuICcgKyAnSGF2ZSB5b3UgbWlzc3BlbGxlZCBhIGNvbnN0YW50PycpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50UmVkdWNlcihjdXJyZW50U3RhdGUsIGFjdGlvbik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgcmVkdWNlciBjdXJyZW50bHkgdXNlZCBieSB0aGUgc3RvcmUgdG8gY2FsY3VsYXRlIHRoZSBzdGF0ZS5cbiAgICpcbiAgICogWW91IG1pZ2h0IG5lZWQgdGhpcyBpZiB5b3VyIGFwcCBpbXBsZW1lbnRzIGNvZGUgc3BsaXR0aW5nIGFuZCB5b3Ugd2FudCB0b1xuICAgKiBsb2FkIHNvbWUgb2YgdGhlIHJlZHVjZXJzIGR5bmFtaWNhbGx5LiBZb3UgbWlnaHQgYWxzbyBuZWVkIHRoaXMgaWYgeW91XG4gICAqIGltcGxlbWVudCBhIGhvdCByZWxvYWRpbmcgbWVjaGFuaXNtIGZvciBSZWR1eC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFJlZHVjZXIgVGhlIHJlZHVjZXIgZm9yIHRoZSBzdG9yZSB0byB1c2UgaW5zdGVhZC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBmdW5jdGlvbiByZXBsYWNlUmVkdWNlcihuZXh0UmVkdWNlcikge1xuICAgIGlmICh0eXBlb2YgbmV4dFJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIG5leHRSZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgY3VycmVudFJlZHVjZXIgPSBuZXh0UmVkdWNlcjtcbiAgICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGVzLklOSVQgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJvcGVyYWJpbGl0eSBwb2ludCBmb3Igb2JzZXJ2YWJsZS9yZWFjdGl2ZSBsaWJyYXJpZXMuXG4gICAqIEByZXR1cm5zIHtvYnNlcnZhYmxlfSBBIG1pbmltYWwgb2JzZXJ2YWJsZSBvZiBzdGF0ZSBjaGFuZ2VzLlxuICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBvYnNlcnZhYmxlIHByb3Bvc2FsOlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYnNlcnZhYmxlXG4gICAqL1xuICBmdW5jdGlvbiBvYnNlcnZhYmxlKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIG91dGVyU3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgIHJldHVybiBfcmVmID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbWluaW1hbCBvYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JzZXJ2ZXIgQW55IG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIG9ic2VydmVyLlxuICAgICAgICogVGhlIG9ic2VydmVyIG9iamVjdCBzaG91bGQgaGF2ZSBhIGBuZXh0YCBtZXRob2QuXG4gICAgICAgKiBAcmV0dXJucyB7c3Vic2NyaXB0aW9ufSBBbiBvYmplY3Qgd2l0aCBhbiBgdW5zdWJzY3JpYmVgIG1ldGhvZCB0aGF0IGNhblxuICAgICAgICogYmUgdXNlZCB0byB1bnN1YnNjcmliZSB0aGUgb2JzZXJ2YWJsZSBmcm9tIHRoZSBzdG9yZSwgYW5kIHByZXZlbnQgZnVydGhlclxuICAgICAgICogZW1pc3Npb24gb2YgdmFsdWVzIGZyb20gdGhlIG9ic2VydmFibGUuXG4gICAgICAgKi9cbiAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIG9ic2VydmVyIHRvIGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9ic2VydmVTdGF0ZSgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChnZXRTdGF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvYnNlcnZlU3RhdGUoKTtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gb3V0ZXJTdWJzY3JpYmUob2JzZXJ2ZVN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHsgdW5zdWJzY3JpYmU6IHVuc3Vic2NyaWJlIH07XG4gICAgICB9XG4gICAgfSwgX3JlZlskJG9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSwgX3JlZjtcbiAgfVxuXG4gIC8vIFdoZW4gYSBzdG9yZSBpcyBjcmVhdGVkLCBhbiBcIklOSVRcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCBzbyB0aGF0IGV2ZXJ5XG4gIC8vIHJlZHVjZXIgcmV0dXJucyB0aGVpciBpbml0aWFsIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAvLyB0aGUgaW5pdGlhbCBzdGF0ZSB0cmVlLlxuICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGVzLklOSVQgfSk7XG5cbiAgcmV0dXJuIF9yZWYyID0ge1xuICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICBnZXRTdGF0ZTogZ2V0U3RhdGUsXG4gICAgcmVwbGFjZVJlZHVjZXI6IHJlcGxhY2VSZWR1Y2VyXG4gIH0sIF9yZWYyWyQkb2JzZXJ2YWJsZV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9jcmVhdGVTdG9yZS5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGJhc2VHZXRUYWcgZnJvbSAnLi9fYmFzZUdldFRhZy5qcyc7XG5pbXBvcnQgZ2V0UHJvdG90eXBlIGZyb20gJy4vX2dldFByb3RvdHlwZS5qcyc7XG5pbXBvcnQgaXNPYmplY3RMaWtlIGZyb20gJy4vaXNPYmplY3RMaWtlLmpzJztcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBiYXNlR2V0VGFnKHZhbHVlKSAhPSBvYmplY3RUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiZcbiAgICBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpc1BsYWluT2JqZWN0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL2lzUGxhaW5PYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCByb290IGZyb20gJy4vX3Jvb3QuanMnO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuZXhwb3J0IGRlZmF1bHQgU3ltYm9sO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL19TeW1ib2wuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQ29tcG9zZXMgc2luZ2xlLWFyZ3VtZW50IGZ1bmN0aW9ucyBmcm9tIHJpZ2h0IHRvIGxlZnQuIFRoZSByaWdodG1vc3RcbiAqIGZ1bmN0aW9uIGNhbiB0YWtlIG11bHRpcGxlIGFyZ3VtZW50cyBhcyBpdCBwcm92aWRlcyB0aGUgc2lnbmF0dXJlIGZvclxuICogdGhlIHJlc3VsdGluZyBjb21wb3NpdGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3MgVGhlIGZ1bmN0aW9ucyB0byBjb21wb3NlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIG9idGFpbmVkIGJ5IGNvbXBvc2luZyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zXG4gKiBmcm9tIHJpZ2h0IHRvIGxlZnQuIEZvciBleGFtcGxlLCBjb21wb3NlKGYsIGcsIGgpIGlzIGlkZW50aWNhbCB0byBkb2luZ1xuICogKC4uLmFyZ3MpID0+IGYoZyhoKC4uLmFyZ3MpKSkuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgZnVuY3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmdW5jcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZnVuY3NbMF07XG4gIH1cblxuICByZXR1cm4gZnVuY3MucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhKGIuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9jb21wb3NlLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjb25zdCBnZXRDb25uZWN0aW9uUG9pbnRzID0gcmVxdWlyZShcIi4vZ2V0Q29ubmVjdGlvblBvaW50c1wiKTtcbmNvbnN0IGdldEludGVybWVkaWF0ZU51bWJlciA9IHJlcXVpcmUoXCIuLi91dGlscy9nZXRJbnRlcm1lZGlhdGVOdW1iZXJcIik7XG5cblxuLyoqXG4gKiBUYWtlcyBpbiBhIGNvbm5lY3Rpb24gYW5kIGEgdCB2YWx1ZSBhbmQgcmV0dXJucyB0aGUgcG9pbnRcbiAqIG9uIHRoZSBjb25uZWN0aW9uIGF0IHNhaWQgdCB2YWx1ZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjYWxjQmV6aWVyUG9pbnRBdChjb25uZWN0aW9uLCB0KSB7XG4gIGNvbnN0IFsgcDAsIHAxLCBwMiwgcDMgXSA9IGdldENvbm5lY3Rpb25Qb2ludHMoY29ubmVjdGlvbik7XG4gIGlmICghcDEgJiYgIXAyKSB7XG4gICAgY29uc3QgeCA9IGdldEludGVybWVkaWF0ZU51bWJlcihwMC54LCBwMy54LCB0KTtcbiAgICBjb25zdCB5ID0gZ2V0SW50ZXJtZWRpYXRlTnVtYmVyKHAwLnksIHAzLnksIHQpO1xuICAgIHJldHVybiB7IHgsIHkgfTtcbiAgfVxuXG4gIGNvbnN0IHUgPSAxIC0gdDtcblxuICBmdW5jdGlvbiBjYWxjUGFydCh3aGljaCkge1xuICAgIGxldCBwID0gICAgICAgICAgIE1hdGgucG93KHUsIDMpICogcDBbd2hpY2hdOyAvLyBmaXJzdCB0ZXJtXG4gICAgICAgIHAgKz0gMyAqIHQgKiAgTWF0aC5wb3codSwgMikgKiBwMVt3aGljaF07IC8vIHNlY29uZCB0ZXJtXG4gICAgICAgIHAgKz0gMyAqIHUgKiAgTWF0aC5wb3codCwgMikgKiBwMlt3aGljaF07IC8vIHRoaXJkIHRlcm1cbiAgICAgICAgcCArPSAgICAgICAgICBNYXRoLnBvdyh0LCAzKSAqIHAzW3doaWNoXTsgLy8gZm91cnRoIHRlcm1cbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIGNvbnN0IHggPSBjYWxjUGFydChcInhcIik7XG4gIGNvbnN0IHkgPSBjYWxjUGFydChcInlcIik7XG5cbiAgcmV0dXJuIHsgeCwgeSwgdCB9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2NhbGNCZXppZXJQb2ludEF0LmpzIiwiY29uc3QgcmVzb2x2ZU9iamVjdElkID0gcmVxdWlyZShcIi4uLy4uL3Jlc29sdmUvcmVzb2x2ZU9iamVjdElkXCIpO1xuY29uc3QgeyBpc0tleURvd24gfSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9rZXlib2FyZFwiKTtcbmNvbnN0IHsga2V5cywgdHlwZXMgfSA9IHJlcXVpcmUoXCIuLi8uLi9jb25zdGFudHNcIik7XG5jb25zdCB7IGFkZExpc3RlbmVyLCByZW1vdmVMaXN0ZW5lciB9ID0gcmVxdWlyZShcIi4uLy4uL2xpc3RlbmVycy9saXN0ZW5lcnNcIik7XG5jb25zdCB7IHNldEN1cnNvciwgcmVsZWFzZU92ZXJyaWRlIH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvY3Vyc29yXCIpO1xuY29uc3Qgc3RvcmUgPSByZXF1aXJlKFwiLi4vLi4vc3RvcmVcIik7XG5jb25zdCBhZGRBY3Rpb25Ub0hpc3RvcnkgPSByZXF1aXJlKFwiLi4vLi4vYWN0aW9ucy9oaXN0b3J5L2FkZEFjdGlvblRvSGlzdG9yeVwiKTtcbmNvbnN0IGFkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMgPSByZXF1aXJlKFwiLi9hZGRJbXBsaWNpdGx5U2VsZWN0ZWRPYmplY3RzXCIpO1xuY29uc3Qge1xuICBjbGVhclNlbGVjdGlvbixcbiAgYWRkVG9TZWxlY3Rpb24sXG4gIGlzU2VsZWN0ZWQsXG4gIGNvcHlTZWxlY3Rpb24sXG4gIHJlbW92ZUZyb21TZWxlY3Rpb24sXG59ID0gcmVxdWlyZShcIi4uLy4uL3NlbGVjdGlvblwiKTtcblxuY29uc3QgZ2V0UG9zRGlmZmVyZW5jZSA9IChvbGRQb3MsIG5ld1BvcykgPT4gKHtcbiAgeDogbmV3UG9zLnggLSBvbGRQb3MueCxcbiAgeTogbmV3UG9zLnkgLSBvbGRQb3MueSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlc29sdmVNb3ZlTW91c2VEb3duKGluaXRpYWxQb3NpdGlvbiwgb2JqKSB7XG4gIGlmICghb2JqKSB7XG4gICAgY2xlYXJTZWxlY3Rpb24oKTsgLy8gV2Ugc2ltcGx5IGNsZWFyIHRoZSBzZWxlY3Rpb25cbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB7IHZhbHVlLCB0eXBlIH0gPSBvYmo7XG4gIFxuICBjb25zdCBvYmplY3RJZCA9IHJlc29sdmVPYmplY3RJZCh0eXBlLCB2YWx1ZSk7XG4gIGNvbnN0IHdhc1NlbGVjdGVkQmVmb3JlQ2xpY2sgPSBpc1NlbGVjdGVkKHR5cGUsIG9iamVjdElkKTtcbiAgXG4gIGxldCBtb3VzZU1vdmVkID0gZmFsc2U7XG4gIGxldCBjdXJzb3JPdmVycmlkZUlkO1xuICBsZXQgbGFzdFBvc2l0aW9uID0gaW5pdGlhbFBvc2l0aW9uO1xuICBsZXQgc2VsZWN0aW9uO1xuXG4gIC8qKlxuICAgKiBSdW5zIHdoaWxzdCB0aGUgbW91c2UgaXMgZG93biwgaW5jcmVtZW50YWxseSB1cGRhdGVzIHRoZVxuICAgKiBwb3NpdGlvbiBvZiBhbGwgc2VsZWN0ZWQgb2JqZWN0c1xuICAgKi9cbiAgY29uc3QgbGlzdGVuZXJJZCA9IGFkZExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChjdXJyZW50UG9zaXRpb24pID0+IHtcbiAgICBpZiAoIW1vdXNlTW92ZWQpIHtcbiAgICAgIG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgY3Vyc29yT3ZlcnJpZGVJZCA9IHNldEN1cnNvcihcIk1PVkVcIiwgeyBvdmVycmlkZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBNb3ZpbmcgdGhlIG9iamVjdHNcbiAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShsYXN0UG9zaXRpb24sIGN1cnJlbnRQb3NpdGlvbiksXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGxhc3RQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbjtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFJ1bnMgd2hlbiB0aGUgbW91c2UgaXMgcmVsZWFzZWQuXG4gICAqXG4gICAqIFJlbW92ZXMgdGhlIG1vdXNlbW92ZSBsaXN0ZW5lciBhYm92ZSBhbmQgY3JlYXRlcyBhIG5ldyBhY3Rpb24gdGhhdFxuICAgKiBtb3ZlcyB0aGUgY3VycmVudCBzZWxlY3Rpb24gYmV0d2VlbiB0aGUgaW5pdGlhbCBhbmQgbGFzdCBwb3NpdGlvbi5cbiAgICpcbiAgICogRG9lcyBub3QgY3JlYXRlIGFuIGFjdGlvbiBpZiB0aGUgbW91c2Ugd2FzIG5vdCBtb3ZlZC5cbiAgICovXG4gIGFkZExpc3RlbmVyKFwibW91c2V1cFwiLCAoKSA9PiB7XG4gICAgcmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbGlzdGVuZXJJZCk7XG5cbiAgICAvLyBSZWxlYXNpbmcgdGhlIGN1cnNvciBvdmVycmlkZS5cbiAgICBpZiAodHlwZW9mIGN1cnNvck92ZXJyaWRlSWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJlbGVhc2VPdmVycmlkZShjdXJzb3JPdmVycmlkZUlkKTtcbiAgICAgIHNldEN1cnNvcihcIkRFRkFVTFRcIik7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlcyB0aGUgbW92ZSBhY3Rpb24gaWYgdGhlIG1vdXNlIHdhcyBtb3ZlZFxuICAgIGlmIChtb3VzZU1vdmVkKSB7XG4gICAgICBhZGRBY3Rpb25Ub0hpc3Rvcnkoe1xuICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShpbml0aWFsUG9zaXRpb24sIGxhc3RQb3NpdGlvbiksXG4gICAgICAgIH0sXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKCFtb3VzZU1vdmVkICYmIHdhc1NlbGVjdGVkQmVmb3JlQ2xpY2spIHtcbiAgICAgIGlmIChpc0tleURvd24oa2V5cy5TSElGVCkpIHtcbiAgICAgICAgLy8gV2UgcmVtb3ZlIHRoZSBvYmplY3QgZnJvbSB0aGUgc2VsZWN0aW9uIGlmIHRoZSBzaGlmdCBrZXkgd2FzIGRvd25cbiAgICAgICAgcmVtb3ZlRnJvbVNlbGVjdGlvbih0eXBlLCBvYmplY3RJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGV2ZXJ5dGhpbmcgYnV0IHRoZSBvYmplY3QgZnJvbSB0aGUgc2VsZWN0aW9uIGlmIHRoZVxuICAgICAgICAgKiBzaGlmdCBrZXkgd2FzIG5vdCBkb3duLlxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgYWRkVG9TZWxlY3Rpb24odHlwZSwgb2JqZWN0SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgdHJ1ZSk7XG5cblxuICAvKipcbiAgICogVGhlIG9iamVjdCBjbGlja2VkIG9uIHdpbGwgYmUgc2VsZWN0ZWQsIGJ1dCBpZiB0aGVcbiAgICogc2hpZnQga2V5IHdhcyBub3QgZG93biwgdGhlbiB3ZSByZW1vdmUgYWxsIG90aGVyIG9iamVjdHMuXG4gICAqL1xuICBpZiAoIXdhc1NlbGVjdGVkQmVmb3JlQ2xpY2spIHtcbiAgICBpZiAoIWlzS2V5RG93bihrZXlzLlNISUZUKSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgYWRkVG9TZWxlY3Rpb24odHlwZSwgb2JqZWN0SWQpO1xuICB9XG5cbiAgc2VsZWN0aW9uID0gYWRkSW1wbGljaXRseVNlbGVjdGVkT2JqZWN0cyhjb3B5U2VsZWN0aW9uKCkpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90b29scy9tb3ZlL29uTW92ZU1vdXNlRG93bi5qcyIsImNvbnN0IGRlZmF1bHRPcHRzID0ge1xuICBtaXJyb3JMZW5ndGg6IHRydWUsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1pcnJvclBvc2l0aW9uKHBvc2l0aW9uLCBvcmlnaW4sIG9wdHMgPSBkZWZhdWx0T3B0cykge1xuICBjb25zdCBvWCA9IG9yaWdpbi54O1xuICBjb25zdCBvWSA9IG9yaWdpbi55O1xuXG4gIGlmIChvcHRzLm1pcnJvckxlbmd0aCkge1xuICAgIC8vIEhlcmUgd2UganVzdCByZXZlcnNlIHRoZSB4IGFuZCB5IGNvb3JkcyBvZiB0aGUgaGFuZGxlLlxuICAgIGNvbnN0IG5ld1ggPSAocG9zaXRpb24ueCAtIG9YKSAqIC0xO1xuICAgIGNvbnN0IG5ld1kgPSAocG9zaXRpb24ueSAtIG9ZKSAqIC0xO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IG5ld1ggKyBvWCxcbiAgICAgIHk6IG5ld1kgKyBvWSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG1pcnJvciA9IHsgLi4ub3B0cy5wb3NpdGlvblRvTWlycm9yIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWZlcmVuY2UgZm9yIHRoZSBtYXRoIGJlaGluZCByb3RhdGluZyBhIHZlY3Rvci5cbiAgICAgKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDYwNzY0MC9yb3RhdGluZy1hLXZlY3Rvci1pbi0zZC1zcGFjZVxuICAgICAqL1xuXG4gICAgY29uc3QgcG9zaXRpb25SYWQgPSBNYXRoLmF0YW4yKCAgIHBvcy55IC0gb1ksICAgIHBvcy54IC0gb1gpO1xuICAgIGNvbnN0IG1pcnJvclJhZCAgID0gTWF0aC5hdGFuMihtaXJyb3IueSAtIG9ZLCBtaXJyb3IueCAtIG9YKVxuICAgIGNvbnN0IG1pcnJvcmVkUmFkID0gKHBvc2l0aW9uUmFkIC0gbWlycm9yUmFkKSArIE1hdGguUEk7IC8vICsgUEkgdG8gZmxpcCBpdFxuXG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW4obWlycm9yZWRSYWQpO1xuICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKG1pcnJvcmVkUmFkKTtcblxuICAgIC8vIFRyYW5zbGF0ZSB0aGUgcG9zaXRpb24gYXMgaWYgdGhlIG9yaWdpbiAocG9pbnQpIGlzICgwLDApLlxuICAgIG1pcnJvci54IC09IG9YO1xuICAgIG1pcnJvci55IC09IG9ZO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgYWN0dWFsIHJvdGF0aW9uXG4gICAgICpcbiAgICAgKiAgICB4JyA9IHggY29zIM64IC0geSBzaW4gzrhcbiAgICAgKiAgICB5JyA9IHggc2luIM64ICsgeSBjb3MgzrhcbiAgICAgKi9cbiAgICBjb25zdCBuZXdYID0gKG1pcnJvci54ICogY29zKSAtIChtaXJyb3IueSAqIHNpbik7XG4gICAgY29uc3QgbmV3WSA9IChtaXJyb3IueCAqIHNpbikgKyAobWlycm9yLnkgKiBjb3MpO1xuXG4gICAgLy8gVHJhbnNsYXRlIHBvc2l0aW9uIGJhY2tcbiAgICBtaXJyb3IueCA9IG5ld1ggKyBvWDtcbiAgICBtaXJyb3IueSA9IG5ld1kgKyBvWTtcblxuICAgIHJldHVybiBtaXJyb3I7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy9taXJyb3JQb3NpdGlvbi5qcyIsImNvbnN0IHsgb25Ub29sTW91c2VEb3duLCBvblRvb2xNb3VzZU1vdmUsIG9uVG9vbE1vdXNlVXAgfSA9IHJlcXVpcmUoXCIuL3NyYy90b29scy90b29sc1wiKTtcbmNvbnN0IHRvUG9zaXRpb24gPSByZXF1aXJlKFwiLi9zcmMvdXRpbHMvdG9Qb3NpdGlvblwiKTtcbmNvbnN0IHJlbmRlciA9IHJlcXVpcmUoXCIuL3NyYy9yZW5kZXIvcmVuZGVyXCIpO1xuY29uc3QgeyBvbktleURvd24sIG9uS2V5VXAgfSA9IHJlcXVpcmUoXCIuL3NyYy91dGlscy9rZXlib2FyZFwiKTtcbmNvbnN0IGNyZWF0ZVRvb2xCYXIgPSByZXF1aXJlKFwiLi9zcmMvdG9vbHMvdG9vbGJhclwiKTtcblxuY29uc3QgY2FudnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcblxud2luZG93Lm9ua2V5ZG93biAgPSBvbktleURvd247XG53aW5kb3cub25rZXl1cCAgICA9IG9uS2V5VXA7XG5cbmNhbnZhcy5vbm1vdXNlZG93biAgPSBvblRvb2xNb3VzZURvd247XG5jYW52YXMub25tb3VzZW1vdmUgID0gb25Ub29sTW91c2VNb3ZlO1xuY2FudmFzLm9ubW91c2V1cCAgICA9IG9uVG9vbE1vdXNlVXA7XG5cbmNyZWF0ZVRvb2xCYXIoKTtcblxucmVuZGVyKG51bGwsIHsgbm9Qb3NpdGlvbjogdHJ1ZSB9KTsgLy8gSW5pdGlhbCByZW5kZXJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2luZGV4LmpzIiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XG5jb25zdCBnZXRDYW52YXNSZWN0ID0gKCkgPT4gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5leHBvcnRzLmdldExlZnRPZmZzZXQgPSAoKSA9PiBnZXRDYW52YXNSZWN0KCkubGVmdDtcbmV4cG9ydHMuZ2V0VG9wT2Zmc2V0ICA9ICgpID0+IGdldENhbnZhc1JlY3QoKS50b3A7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY2FudmFzL2dldENhbnZhc09mZnNldC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFscGhhYmV0ID0gcmVxdWlyZSgnLi9hbHBoYWJldCcpO1xudmFyIGVuY29kZSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG52YXIgZGVjb2RlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbnZhciBidWlsZCA9IHJlcXVpcmUoJy4vYnVpbGQnKTtcbnZhciBpc1ZhbGlkID0gcmVxdWlyZSgnLi9pcy12YWxpZCcpO1xuXG4vLyBpZiB5b3UgYXJlIHVzaW5nIGNsdXN0ZXIgb3IgbXVsdGlwbGUgc2VydmVycyB1c2UgdGhpcyB0byBtYWtlIGVhY2ggaW5zdGFuY2Vcbi8vIGhhcyBhIHVuaXF1ZSB2YWx1ZSBmb3Igd29ya2VyXG4vLyBOb3RlOiBJIGRvbid0IGtub3cgaWYgdGhpcyBpcyBhdXRvbWF0aWNhbGx5IHNldCB3aGVuIHVzaW5nIHRoaXJkXG4vLyBwYXJ0eSBjbHVzdGVyIHNvbHV0aW9ucyBzdWNoIGFzIHBtMi5cbnZhciBjbHVzdGVyV29ya2VySWQgPSByZXF1aXJlKCcuL3V0aWwvY2x1c3Rlci13b3JrZXItaWQnKSB8fCAwO1xuXG4vKipcbiAqIFNldCB0aGUgc2VlZC5cbiAqIEhpZ2hseSByZWNvbW1lbmRlZCBpZiB5b3UgZG9uJ3Qgd2FudCBwZW9wbGUgdG8gdHJ5IHRvIGZpZ3VyZSBvdXQgeW91ciBpZCBzY2hlbWEuXG4gKiBleHBvc2VkIGFzIHNob3J0aWQuc2VlZChpbnQpXG4gKiBAcGFyYW0gc2VlZCBJbnRlZ2VyIHZhbHVlIHRvIHNlZWQgdGhlIHJhbmRvbSBhbHBoYWJldC4gIEFMV0FZUyBVU0UgVEhFIFNBTUUgU0VFRCBvciB5b3UgbWlnaHQgZ2V0IG92ZXJsYXBzLlxuICovXG5mdW5jdGlvbiBzZWVkKHNlZWRWYWx1ZSkge1xuICAgIGFscGhhYmV0LnNlZWQoc2VlZFZhbHVlKTtcbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8qKlxuICogU2V0IHRoZSBjbHVzdGVyIHdvcmtlciBvciBtYWNoaW5lIGlkXG4gKiBleHBvc2VkIGFzIHNob3J0aWQud29ya2VyKGludClcbiAqIEBwYXJhbSB3b3JrZXJJZCB3b3JrZXIgbXVzdCBiZSBwb3NpdGl2ZSBpbnRlZ2VyLiAgTnVtYmVyIGxlc3MgdGhhbiAxNiBpcyByZWNvbW1lbmRlZC5cbiAqIHJldHVybnMgc2hvcnRpZCBtb2R1bGUgc28gaXQgY2FuIGJlIGNoYWluZWQuXG4gKi9cbmZ1bmN0aW9uIHdvcmtlcih3b3JrZXJJZCkge1xuICAgIGNsdXN0ZXJXb3JrZXJJZCA9IHdvcmtlcklkO1xuICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLyoqXG4gKlxuICogc2V0cyBuZXcgY2hhcmFjdGVycyB0byB1c2UgaW4gdGhlIGFscGhhYmV0XG4gKiByZXR1cm5zIHRoZSBzaHVmZmxlZCBhbHBoYWJldFxuICovXG5mdW5jdGlvbiBjaGFyYWN0ZXJzKG5ld0NoYXJhY3RlcnMpIHtcbiAgICBpZiAobmV3Q2hhcmFjdGVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFscGhhYmV0LmNoYXJhY3RlcnMobmV3Q2hhcmFjdGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFscGhhYmV0LnNodWZmbGVkKCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgdW5pcXVlIGlkXG4gKiBSZXR1cm5zIHN0cmluZyBpZFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZSgpIHtcbiAgcmV0dXJuIGJ1aWxkKGNsdXN0ZXJXb3JrZXJJZCk7XG59XG5cbi8vIEV4cG9ydCBhbGwgb3RoZXIgZnVuY3Rpb25zIGFzIHByb3BlcnRpZXMgb2YgdGhlIGdlbmVyYXRlIGZ1bmN0aW9uXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlO1xubW9kdWxlLmV4cG9ydHMuZ2VuZXJhdGUgPSBnZW5lcmF0ZTtcbm1vZHVsZS5leHBvcnRzLnNlZWQgPSBzZWVkO1xubW9kdWxlLmV4cG9ydHMud29ya2VyID0gd29ya2VyO1xubW9kdWxlLmV4cG9ydHMuY2hhcmFjdGVycyA9IGNoYXJhY3RlcnM7XG5tb2R1bGUuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG5tb2R1bGUuZXhwb3J0cy5pc1ZhbGlkID0gaXNWYWxpZDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Nob3J0aWQvbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8vIEZvdW5kIHRoaXMgc2VlZC1iYXNlZCByYW5kb20gZ2VuZXJhdG9yIHNvbWV3aGVyZVxuLy8gQmFzZWQgb24gVGhlIENlbnRyYWwgUmFuZG9taXplciAxLjMgKEMpIDE5OTcgYnkgUGF1bCBIb3VsZSAoaG91bGVAbXNjLmNvcm5lbGwuZWR1KVxuXG52YXIgc2VlZCA9IDE7XG5cbi8qKlxuICogcmV0dXJuIGEgcmFuZG9tIG51bWJlciBiYXNlZCBvbiBhIHNlZWRcbiAqIEBwYXJhbSBzZWVkXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBnZXROZXh0VmFsdWUoKSB7XG4gICAgc2VlZCA9IChzZWVkICogOTMwMSArIDQ5Mjk3KSAlIDIzMzI4MDtcbiAgICByZXR1cm4gc2VlZC8oMjMzMjgwLjApO1xufVxuXG5mdW5jdGlvbiBzZXRTZWVkKF9zZWVkXykge1xuICAgIHNlZWQgPSBfc2VlZF87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIG5leHRWYWx1ZTogZ2V0TmV4dFZhbHVlLFxuICAgIHNlZWQ6IHNldFNlZWRcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9yYW5kb20vcmFuZG9tLWZyb20tc2VlZC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3J5cHRvID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgKHdpbmRvdy5jcnlwdG8gfHwgd2luZG93Lm1zQ3J5cHRvKTsgLy8gSUUgMTEgdXNlcyB3aW5kb3cubXNDcnlwdG9cblxuZnVuY3Rpb24gcmFuZG9tQnl0ZSgpIHtcbiAgICBpZiAoIWNyeXB0byB8fCAhY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KSAmIDB4MzA7XG4gICAgfVxuICAgIHZhciBkZXN0ID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhkZXN0KTtcbiAgICByZXR1cm4gZGVzdFswXSAmIDB4MzA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmFuZG9tQnl0ZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Nob3J0aWQvbGliL3JhbmRvbS9yYW5kb20tYnl0ZS1icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG52YXIgYWxwaGFiZXQgPSByZXF1aXJlKCcuL2FscGhhYmV0Jyk7XG5cbi8qKlxuICogRGVjb2RlIHRoZSBpZCB0byBnZXQgdGhlIHZlcnNpb24gYW5kIHdvcmtlclxuICogTWFpbmx5IGZvciBkZWJ1Z2dpbmcgYW5kIHRlc3RpbmcuXG4gKiBAcGFyYW0gaWQgLSB0aGUgc2hvcnRpZC1nZW5lcmF0ZWQgaWQuXG4gKi9cbmZ1bmN0aW9uIGRlY29kZShpZCkge1xuICAgIHZhciBjaGFyYWN0ZXJzID0gYWxwaGFiZXQuc2h1ZmZsZWQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB2ZXJzaW9uOiBjaGFyYWN0ZXJzLmluZGV4T2YoaWQuc3Vic3RyKDAsIDEpKSAmIDB4MGYsXG4gICAgICAgIHdvcmtlcjogY2hhcmFjdGVycy5pbmRleE9mKGlkLnN1YnN0cigxLCAxKSkgJiAweDBmXG4gICAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWNvZGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9kZWNvZGUuanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuY29kZSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG52YXIgYWxwaGFiZXQgPSByZXF1aXJlKCcuL2FscGhhYmV0Jyk7XG5cbi8vIElnbm9yZSBhbGwgbWlsbGlzZWNvbmRzIGJlZm9yZSBhIGNlcnRhaW4gdGltZSB0byByZWR1Y2UgdGhlIHNpemUgb2YgdGhlIGRhdGUgZW50cm9weSB3aXRob3V0IHNhY3JpZmljaW5nIHVuaXF1ZW5lc3MuXG4vLyBUaGlzIG51bWJlciBzaG91bGQgYmUgdXBkYXRlZCBldmVyeSB5ZWFyIG9yIHNvIHRvIGtlZXAgdGhlIGdlbmVyYXRlZCBpZCBzaG9ydC5cbi8vIFRvIHJlZ2VuZXJhdGUgYG5ldyBEYXRlKCkgLSAwYCBhbmQgYnVtcCB0aGUgdmVyc2lvbi4gQWx3YXlzIGJ1bXAgdGhlIHZlcnNpb24hXG52YXIgUkVEVUNFX1RJTUUgPSAxNDU5NzA3NjA2NTE4O1xuXG4vLyBkb24ndCBjaGFuZ2UgdW5sZXNzIHdlIGNoYW5nZSB0aGUgYWxnb3Mgb3IgUkVEVUNFX1RJTUVcbi8vIG11c3QgYmUgYW4gaW50ZWdlciBhbmQgbGVzcyB0aGFuIDE2XG52YXIgdmVyc2lvbiA9IDY7XG5cbi8vIENvdW50ZXIgaXMgdXNlZCB3aGVuIHNob3J0aWQgaXMgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGluIG9uZSBzZWNvbmQuXG52YXIgY291bnRlcjtcblxuLy8gUmVtZW1iZXIgdGhlIGxhc3QgdGltZSBzaG9ydGlkIHdhcyBjYWxsZWQgaW4gY2FzZSBjb3VudGVyIGlzIG5lZWRlZC5cbnZhciBwcmV2aW91c1NlY29uZHM7XG5cbi8qKlxuICogR2VuZXJhdGUgdW5pcXVlIGlkXG4gKiBSZXR1cm5zIHN0cmluZyBpZFxuICovXG5mdW5jdGlvbiBidWlsZChjbHVzdGVyV29ya2VySWQpIHtcblxuICAgIHZhciBzdHIgPSAnJztcblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIFJFRFVDRV9USU1FKSAqIDAuMDAxKTtcblxuICAgIGlmIChzZWNvbmRzID09PSBwcmV2aW91c1NlY29uZHMpIHtcbiAgICAgICAgY291bnRlcisrO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICBwcmV2aW91c1NlY29uZHMgPSBzZWNvbmRzO1xuICAgIH1cblxuICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIHZlcnNpb24pO1xuICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIGNsdXN0ZXJXb3JrZXJJZCk7XG4gICAgaWYgKGNvdW50ZXIgPiAwKSB7XG4gICAgICAgIHN0ciA9IHN0ciArIGVuY29kZShhbHBoYWJldC5sb29rdXAsIGNvdW50ZXIpO1xuICAgIH1cbiAgICBzdHIgPSBzdHIgKyBlbmNvZGUoYWxwaGFiZXQubG9va3VwLCBzZWNvbmRzKTtcblxuICAgIHJldHVybiBzdHI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnVpbGQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zaG9ydGlkL2xpYi9idWlsZC5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFscGhhYmV0ID0gcmVxdWlyZSgnLi9hbHBoYWJldCcpO1xuXG5mdW5jdGlvbiBpc1Nob3J0SWQoaWQpIHtcbiAgICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gJ3N0cmluZycgfHwgaWQubGVuZ3RoIDwgNiApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBjaGFyYWN0ZXJzID0gYWxwaGFiZXQuY2hhcmFjdGVycygpO1xuICAgIHZhciBsZW4gPSBpZC5sZW5ndGg7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjtpKyspIHtcbiAgICAgICAgaWYgKGNoYXJhY3RlcnMuaW5kZXhPZihpZFtpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTaG9ydElkO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9saWIvaXMtdmFsaWQuanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSAwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2hvcnRpZC9saWIvdXRpbC9jbHVzdGVyLXdvcmtlci1pZC1icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjb25zdCB7IGdldFBvaW50QXRQb3NpdGlvbiB9ID0gcmVxdWlyZShcIi4uL3BvaW50cy9nZXRQb2ludHNcIik7XG5jb25zdCB7IGdldENvbm5lY3Rpb25BdFBvc2l0aW9uIH0gPSByZXF1aXJlKFwiLi4vY29ubmVjdGlvbnMvZ2V0Q29ubmVjdGlvbnNcIik7XG5jb25zdCBnZXRIYW5kbGVBdFBvc2l0aW9uID0gcmVxdWlyZShcIi4uL2hhbmRsZXMvZ2V0SGFuZGxlQXRQb3NpdGlvblwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXNvbHZlT2JqZWN0QXRQb3NpdGlvbihwb3NpdGlvbikge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2xvc2VzdCBoYW5kbGUgaWYgaXQncyBjbG9zZSBlbm91Z2guXG4gICAqL1xuICBjb25zdCBoYW5kbGUgPSBnZXRIYW5kbGVBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKGhhbmRsZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIl9fSEFORExFXCIsXG4gICAgICB2YWx1ZTogaGFuZGxlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHBvaW50IG9uIGEgcGF0aCBpZiBpdCdzIGNsb3NlIGVub3VnaC5cbiAgICovXG4gIGNvbnN0IHBvaW50ID0gZ2V0UG9pbnRBdFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgaWYgKHBvaW50KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiX19QT0lOVFwiLFxuICAgICAgdmFsdWU6IHBvaW50LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgY29ubmVjdGlvbiBpZiBhIGNvbm5lY3Rpb25cbiAgICogaXMgcmV0dXJuZWQuXG4gICAqL1xuICBjb25zdCBjb25uZWN0aW9uQW5kUG9pbnQgPSBnZXRDb25uZWN0aW9uQXRQb3NpdGlvbihwb3NpdGlvbik7XG4gIGlmIChjb25uZWN0aW9uQW5kUG9pbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJfX0NPTk5FQ1RJT05cIixcbiAgICAgIHZhbHVlOiBjb25uZWN0aW9uQW5kUG9pbnQsXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3Jlc29sdmUvcmVzb2x2ZU9iamVjdEF0UG9zaXRpb24uanMiLCJpbXBvcnQgU3ltYm9sIGZyb20gJy4vX1N5bWJvbC5qcyc7XG5pbXBvcnQgZ2V0UmF3VGFnIGZyb20gJy4vX2dldFJhd1RhZy5qcyc7XG5pbXBvcnQgb2JqZWN0VG9TdHJpbmcgZnJvbSAnLi9fb2JqZWN0VG9TdHJpbmcuanMnO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgbnVsbFRhZyA9ICdbb2JqZWN0IE51bGxdJyxcbiAgICB1bmRlZmluZWRUYWcgPSAnW29iamVjdCBVbmRlZmluZWRdJztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnO1xuICB9XG4gIHJldHVybiAoc3ltVG9TdHJpbmdUYWcgJiYgc3ltVG9TdHJpbmdUYWcgaW4gT2JqZWN0KHZhbHVlKSlcbiAgICA/IGdldFJhd1RhZyh2YWx1ZSlcbiAgICA6IG9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYmFzZUdldFRhZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fYmFzZUdldFRhZy5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGZyZWVHbG9iYWwgZnJvbSAnLi9fZnJlZUdsb2JhbC5qcyc7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuZXhwb3J0IGRlZmF1bHQgcm9vdDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fcm9vdC5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuZXhwb3J0IGRlZmF1bHQgZnJlZUdsb2JhbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fZnJlZUdsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFN5bWJvbCBmcm9tICcuL19TeW1ib2wuanMnO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldFJhd1RhZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fZ2V0UmF3VGFnLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgb2JqZWN0VG9TdHJpbmc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvX29iamVjdFRvU3RyaW5nLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgb3ZlckFyZyBmcm9tICcuL19vdmVyQXJnLmpzJztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdldFByb3RvdHlwZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fZ2V0UHJvdG90eXBlLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgb3ZlckFyZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9fb3ZlckFyZy5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzT2JqZWN0TGlrZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy9pc09iamVjdExpa2UuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvaW5kZXgnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcG9ueWZpbGwgPSByZXF1aXJlKCcuL3BvbnlmaWxsLmpzJyk7XG5cbnZhciBfcG9ueWZpbGwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9ueWZpbGwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciByb290OyAvKiBnbG9iYWwgd2luZG93ICovXG5cblxuaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gc2VsZjtcbn0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IG1vZHVsZTtcbn0gZWxzZSB7XG4gIHJvb3QgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xufVxuXG52YXIgcmVzdWx0ID0gKDAsIF9wb255ZmlsbDJbJ2RlZmF1bHQnXSkocm9vdCk7XG5leHBvcnRzWydkZWZhdWx0J10gPSByZXN1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvbGliL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRpZighbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcclxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHN5bWJvbE9ic2VydmFibGVQb255ZmlsbDtcbmZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdHZhciByZXN1bHQ7XG5cdHZhciBfU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cblx0aWYgKHR5cGVvZiBfU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0aWYgKF9TeW1ib2wub2JzZXJ2YWJsZSkge1xuXHRcdFx0cmVzdWx0ID0gX1N5bWJvbC5vYnNlcnZhYmxlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHQgPSBfU3ltYm9sKCdvYnNlcnZhYmxlJyk7XG5cdFx0XHRfU3ltYm9sLm9ic2VydmFibGUgPSByZXN1bHQ7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvbGliL3BvbnlmaWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBBY3Rpb25UeXBlcyB9IGZyb20gJy4vY3JlYXRlU3RvcmUnO1xuaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnbG9kYXNoLWVzL2lzUGxhaW5PYmplY3QnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAnLi91dGlscy93YXJuaW5nJztcblxuZnVuY3Rpb24gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2Uoa2V5LCBhY3Rpb24pIHtcbiAgdmFyIGFjdGlvblR5cGUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGU7XG4gIHZhciBhY3Rpb25OYW1lID0gYWN0aW9uVHlwZSAmJiAnXCInICsgYWN0aW9uVHlwZS50b1N0cmluZygpICsgJ1wiJyB8fCAnYW4gYWN0aW9uJztcblxuICByZXR1cm4gJ0dpdmVuIGFjdGlvbiAnICsgYWN0aW9uTmFtZSArICcsIHJlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZC4gJyArICdUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuICcgKyAnSWYgeW91IHdhbnQgdGhpcyByZWR1Y2VyIHRvIGhvbGQgbm8gdmFsdWUsIHlvdSBjYW4gcmV0dXJuIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuJztcbn1cblxuZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgYXJndW1lbnROYW1lID0gYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBBY3Rpb25UeXBlcy5JTklUID8gJ3ByZWxvYWRlZFN0YXRlIGFyZ3VtZW50IHBhc3NlZCB0byBjcmVhdGVTdG9yZScgOiAncHJldmlvdXMgc3RhdGUgcmVjZWl2ZWQgYnkgdGhlIHJlZHVjZXInO1xuXG4gIGlmIChyZWR1Y2VyS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1N0b3JlIGRvZXMgbm90IGhhdmUgYSB2YWxpZCByZWR1Y2VyLiBNYWtlIHN1cmUgdGhlIGFyZ3VtZW50IHBhc3NlZCAnICsgJ3RvIGNvbWJpbmVSZWR1Y2VycyBpcyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSByZWR1Y2Vycy4nO1xuICB9XG5cbiAgaWYgKCFpc1BsYWluT2JqZWN0KGlucHV0U3RhdGUpKSB7XG4gICAgcmV0dXJuICdUaGUgJyArIGFyZ3VtZW50TmFtZSArICcgaGFzIHVuZXhwZWN0ZWQgdHlwZSBvZiBcIicgKyB7fS50b1N0cmluZy5jYWxsKGlucHV0U3RhdGUpLm1hdGNoKC9cXHMoW2EtenxBLVpdKykvKVsxXSArICdcIi4gRXhwZWN0ZWQgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyAnICsgKCdrZXlzOiBcIicgKyByZWR1Y2VyS2V5cy5qb2luKCdcIiwgXCInKSArICdcIicpO1xuICB9XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRTdGF0ZSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIXJlZHVjZXJzLmhhc093blByb3BlcnR5KGtleSkgJiYgIXVuZXhwZWN0ZWRLZXlDYWNoZVtrZXldO1xuICB9KTtcblxuICB1bmV4cGVjdGVkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XSA9IHRydWU7XG4gIH0pO1xuXG4gIGlmICh1bmV4cGVjdGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuICdVbmV4cGVjdGVkICcgKyAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMSA/ICdrZXlzJyA6ICdrZXknKSArICcgJyArICgnXCInICsgdW5leHBlY3RlZEtleXMuam9pbignXCIsIFwiJykgKyAnXCIgZm91bmQgaW4gJyArIGFyZ3VtZW50TmFtZSArICcuICcpICsgJ0V4cGVjdGVkIHRvIGZpbmQgb25lIG9mIHRoZSBrbm93biByZWR1Y2VyIGtleXMgaW5zdGVhZDogJyArICgnXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCIuIFVuZXhwZWN0ZWQga2V5cyB3aWxsIGJlIGlnbm9yZWQuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVkdWNlclNoYXBlKHJlZHVjZXJzKSB7XG4gIE9iamVjdC5rZXlzKHJlZHVjZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgcmVkdWNlciA9IHJlZHVjZXJzW2tleV07XG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IHJlZHVjZXIodW5kZWZpbmVkLCB7IHR5cGU6IEFjdGlvblR5cGVzLklOSVQgfSk7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gJyArICdJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgJyArICdleHBsaWNpdGx5IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5ICcgKyAnbm90IGJlIHVuZGVmaW5lZC4gSWYgeW91IGRvblxcJ3Qgd2FudCB0byBzZXQgYSB2YWx1ZSBmb3IgdGhpcyByZWR1Y2VyLCAnICsgJ3lvdSBjYW4gdXNlIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuJyk7XG4gICAgfVxuXG4gICAgdmFyIHR5cGUgPSAnQEByZWR1eC9QUk9CRV9VTktOT1dOX0FDVElPTl8nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpLnNwbGl0KCcnKS5qb2luKCcuJyk7XG4gICAgaWYgKHR5cGVvZiByZWR1Y2VyKHVuZGVmaW5lZCwgeyB0eXBlOiB0eXBlIH0pID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VyIFwiJyArIGtleSArICdcIiByZXR1cm5lZCB1bmRlZmluZWQgd2hlbiBwcm9iZWQgd2l0aCBhIHJhbmRvbSB0eXBlLiAnICsgKCdEb25cXCd0IHRyeSB0byBoYW5kbGUgJyArIEFjdGlvblR5cGVzLklOSVQgKyAnIG9yIG90aGVyIGFjdGlvbnMgaW4gXCJyZWR1eC8qXCIgJykgKyAnbmFtZXNwYWNlLiBUaGV5IGFyZSBjb25zaWRlcmVkIHByaXZhdGUuIEluc3RlYWQsIHlvdSBtdXN0IHJldHVybiB0aGUgJyArICdjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCAnICsgJ2luIHdoaWNoIGNhc2UgeW91IG11c3QgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLCByZWdhcmRsZXNzIG9mIHRoZSAnICsgJ2FjdGlvbiB0eXBlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgbm90IGJlIHVuZGVmaW5lZCwgYnV0IGNhbiBiZSBudWxsLicpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG4gKiByZWR1Y2VyIGZ1bmN0aW9uLiBJdCB3aWxsIGNhbGwgZXZlcnkgY2hpbGQgcmVkdWNlciwgYW5kIGdhdGhlciB0aGVpciByZXN1bHRzXG4gKiBpbnRvIGEgc2luZ2xlIHN0YXRlIG9iamVjdCwgd2hvc2Uga2V5cyBjb3JyZXNwb25kIHRvIHRoZSBrZXlzIG9mIHRoZSBwYXNzZWRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWR1Y2VycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGNvcnJlc3BvbmQgdG8gZGlmZmVyZW50XG4gKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG4gKiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhcyByZWR1Y2Vyc2Agc3ludGF4LiBUaGUgcmVkdWNlcnMgbWF5IG5ldmVyIHJldHVyblxuICogdW5kZWZpbmVkIGZvciBhbnkgYWN0aW9uLiBJbnN0ZWFkLCB0aGV5IHNob3VsZCByZXR1cm4gdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG4gKiB1bnJlY29nbml6ZWQgYWN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcbiAqIHBhc3NlZCBvYmplY3QsIGFuZCBidWlsZHMgYSBzdGF0ZSBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tYmluZVJlZHVjZXJzKHJlZHVjZXJzKSB7XG4gIHZhciByZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKTtcbiAgdmFyIGZpbmFsUmVkdWNlcnMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSByZWR1Y2VyS2V5c1tpXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdhcm5pbmcoJ05vIHJlZHVjZXIgcHJvdmlkZWQgZm9yIGtleSBcIicgKyBrZXkgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG4gICAgfVxuICB9XG4gIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlDYWNoZSA9IHZvaWQgMDtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGUgPSB7fTtcbiAgfVxuXG4gIHZhciBzaGFwZUFzc2VydGlvbkVycm9yID0gdm9pZCAwO1xuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTaGFwZShmaW5hbFJlZHVjZXJzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHNoYXBlQXNzZXJ0aW9uRXJyb3IgPSBlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbWJpbmF0aW9uKCkge1xuICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChzaGFwZUFzc2VydGlvbkVycm9yKSB7XG4gICAgICB0aHJvdyBzaGFwZUFzc2VydGlvbkVycm9yO1xuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgd2FybmluZ01lc3NhZ2UgPSBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKHN0YXRlLCBmaW5hbFJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSk7XG4gICAgICBpZiAod2FybmluZ01lc3NhZ2UpIHtcbiAgICAgICAgd2FybmluZyh3YXJuaW5nTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICB2YXIgbmV4dFN0YXRlID0ge307XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IGZpbmFsUmVkdWNlcktleXNbX2ldO1xuICAgICAgdmFyIHJlZHVjZXIgPSBmaW5hbFJlZHVjZXJzW19rZXldO1xuICAgICAgdmFyIHByZXZpb3VzU3RhdGVGb3JLZXkgPSBzdGF0ZVtfa2V5XTtcbiAgICAgIHZhciBuZXh0U3RhdGVGb3JLZXkgPSByZWR1Y2VyKHByZXZpb3VzU3RhdGVGb3JLZXksIGFjdGlvbik7XG4gICAgICBpZiAodHlwZW9mIG5leHRTdGF0ZUZvcktleSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKF9rZXksIGFjdGlvbik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgbmV4dFN0YXRlW19rZXldID0gbmV4dFN0YXRlRm9yS2V5O1xuICAgICAgaGFzQ2hhbmdlZCA9IGhhc0NoYW5nZWQgfHwgbmV4dFN0YXRlRm9yS2V5ICE9PSBwcmV2aW91c1N0YXRlRm9yS2V5O1xuICAgIH1cbiAgICByZXR1cm4gaGFzQ2hhbmdlZCA/IG5leHRTdGF0ZSA6IHN0YXRlO1xuICB9O1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2NvbWJpbmVSZWR1Y2Vycy5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goYWN0aW9uQ3JlYXRvci5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvbiBjcmVhdG9ycywgaW50byBhbiBvYmplY3Qgd2l0aCB0aGVcbiAqIHNhbWUga2V5cywgYnV0IHdpdGggZXZlcnkgZnVuY3Rpb24gd3JhcHBlZCBpbnRvIGEgYGRpc3BhdGNoYCBjYWxsIHNvIHRoZXlcbiAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuICogYHN0b3JlLmRpc3BhdGNoKE15QWN0aW9uQ3JlYXRvcnMuZG9Tb21ldGhpbmcoKSlgIHlvdXJzZWxmIGp1c3QgZmluZS5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAqIGFuZCBnZXQgYSBmdW5jdGlvbiBpbiByZXR1cm4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuICogY3JlYXRvciBmdW5jdGlvbnMuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzYFxuICogc3ludGF4LiBZb3UgbWF5IGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwYXRjaCBUaGUgYGRpc3BhdGNoYCBmdW5jdGlvbiBhdmFpbGFibGUgb24geW91ciBSZWR1eFxuICogc3RvcmUuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gVGhlIG9iamVjdCBtaW1pY2tpbmcgdGhlIG9yaWdpbmFsIG9iamVjdCwgYnV0IHdpdGhcbiAqIGV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHdyYXBwZWQgaW50byB0aGUgYGRpc3BhdGNoYCBjYWxsLiBJZiB5b3UgcGFzc2VkIGFcbiAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG4gKiBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzICE9PSAnb2JqZWN0JyB8fCBhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYmluZEFjdGlvbkNyZWF0b3JzIGV4cGVjdGVkIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLCBpbnN0ZWFkIHJlY2VpdmVkICcgKyAoYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0aW9uQ3JlYXRvcnMpICsgJy4gJyArICdEaWQgeW91IHdyaXRlIFwiaW1wb3J0IEFjdGlvbkNyZWF0b3JzIGZyb21cIiBpbnN0ZWFkIG9mIFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiPycpO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25DcmVhdG9ycyk7XG4gIHZhciBib3VuZEFjdGlvbkNyZWF0b3JzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gYWN0aW9uQ3JlYXRvcnNba2V5XTtcbiAgICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJvdW5kQWN0aW9uQ3JlYXRvcnM7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVkdXgvZXMvYmluZEFjdGlvbkNyZWF0b3JzLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5pbXBvcnQgY29tcG9zZSBmcm9tICcuL2NvbXBvc2UnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdG9yZSBlbmhhbmNlciB0aGF0IGFwcGxpZXMgbWlkZGxld2FyZSB0byB0aGUgZGlzcGF0Y2ggbWV0aG9kXG4gKiBvZiB0aGUgUmVkdXggc3RvcmUuIFRoaXMgaXMgaGFuZHkgZm9yIGEgdmFyaWV0eSBvZiB0YXNrcywgc3VjaCBhcyBleHByZXNzaW5nXG4gKiBhc3luY2hyb25vdXMgYWN0aW9ucyBpbiBhIGNvbmNpc2UgbWFubmVyLCBvciBsb2dnaW5nIGV2ZXJ5IGFjdGlvbiBwYXlsb2FkLlxuICpcbiAqIFNlZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UgYXMgYW4gZXhhbXBsZSBvZiB0aGUgUmVkdXggbWlkZGxld2FyZS5cbiAqXG4gKiBCZWNhdXNlIG1pZGRsZXdhcmUgaXMgcG90ZW50aWFsbHkgYXN5bmNocm9ub3VzLCB0aGlzIHNob3VsZCBiZSB0aGUgZmlyc3RcbiAqIHN0b3JlIGVuaGFuY2VyIGluIHRoZSBjb21wb3NpdGlvbiBjaGFpbi5cbiAqXG4gKiBOb3RlIHRoYXQgZWFjaCBtaWRkbGV3YXJlIHdpbGwgYmUgZ2l2ZW4gdGhlIGBkaXNwYXRjaGAgYW5kIGBnZXRTdGF0ZWAgZnVuY3Rpb25zXG4gKiBhcyBuYW1lZCBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgVGhlIG1pZGRsZXdhcmUgY2hhaW4gdG8gYmUgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBzdG9yZSBlbmhhbmNlciBhcHBseWluZyB0aGUgbWlkZGxld2FyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWlkZGxld2FyZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBtaWRkbGV3YXJlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlU3RvcmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlLCBlbmhhbmNlcikge1xuICAgICAgdmFyIHN0b3JlID0gY3JlYXRlU3RvcmUocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKTtcbiAgICAgIHZhciBfZGlzcGF0Y2ggPSBzdG9yZS5kaXNwYXRjaDtcbiAgICAgIHZhciBjaGFpbiA9IFtdO1xuXG4gICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IHN0b3JlLmdldFN0YXRlLFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmUobWlkZGxld2FyZUFQSSk7XG4gICAgICB9KTtcbiAgICAgIF9kaXNwYXRjaCA9IGNvbXBvc2UuYXBwbHkodW5kZWZpbmVkLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuXG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0b3JlLCB7XG4gICAgICAgIGRpc3BhdGNoOiBfZGlzcGF0Y2hcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVkdXgvZXMvYXBwbHlNaWRkbGV3YXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT90KGV4cG9ydHMpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSx0KTp0KGUucmVkdXhMb2dnZXI9ZS5yZWR1eExvZ2dlcnx8e30pfSh0aGlzLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSx0KXtlLnN1cGVyXz10LGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pfWZ1bmN0aW9uIHIoZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImtpbmRcIix7dmFsdWU6ZSxlbnVtZXJhYmxlOiEwfSksdCYmdC5sZW5ndGgmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGF0aFwiLHt2YWx1ZTp0LGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBuKGUsdCxyKXtuLnN1cGVyXy5jYWxsKHRoaXMsXCJFXCIsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJsaHNcIix7dmFsdWU6dCxlbnVtZXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJyaHNcIix7dmFsdWU6cixlbnVtZXJhYmxlOiEwfSl9ZnVuY3Rpb24gbyhlLHQpe28uc3VwZXJfLmNhbGwodGhpcyxcIk5cIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInJoc1wiLHt2YWx1ZTp0LGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBpKGUsdCl7aS5zdXBlcl8uY2FsbCh0aGlzLFwiRFwiLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibGhzXCIse3ZhbHVlOnQsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIGEoZSx0LHIpe2Euc3VwZXJfLmNhbGwodGhpcyxcIkFcIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImluZGV4XCIse3ZhbHVlOnQsZW51bWVyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXRlbVwiLHt2YWx1ZTpyLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBmKGUsdCxyKXt2YXIgbj1lLnNsaWNlKChyfHx0KSsxfHxlLmxlbmd0aCk7cmV0dXJuIGUubGVuZ3RoPXQ8MD9lLmxlbmd0aCt0OnQsZS5wdXNoLmFwcGx5KGUsbiksZX1mdW5jdGlvbiB1KGUpe3ZhciB0PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6TihlKTtyZXR1cm5cIm9iamVjdFwiIT09dD90OmU9PT1NYXRoP1wibWF0aFwiOm51bGw9PT1lP1wibnVsbFwiOkFycmF5LmlzQXJyYXkoZSk/XCJhcnJheVwiOlwiW29iamVjdCBEYXRlXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpP1wiZGF0ZVwiOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUudG9TdHJpbmcmJi9eXFwvLipcXC8vLnRlc3QoZS50b1N0cmluZygpKT9cInJlZ2V4cFwiOlwib2JqZWN0XCJ9ZnVuY3Rpb24gbChlLHQscixjLHMsZCxwKXtzPXN8fFtdLHA9cHx8W107dmFyIGc9cy5zbGljZSgwKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZCl7aWYoYyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmYyhnLGQpKXJldHVybjtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjP1widW5kZWZpbmVkXCI6TihjKSkpe2lmKGMucHJlZmlsdGVyJiZjLnByZWZpbHRlcihnLGQpKXJldHVybjtpZihjLm5vcm1hbGl6ZSl7dmFyIGg9Yy5ub3JtYWxpemUoZyxkLGUsdCk7aCYmKGU9aFswXSx0PWhbMV0pfX19Zy5wdXNoKGQpfVwicmVnZXhwXCI9PT11KGUpJiZcInJlZ2V4cFwiPT09dSh0KSYmKGU9ZS50b1N0cmluZygpLHQ9dC50b1N0cmluZygpKTt2YXIgeT1cInVuZGVmaW5lZFwiPT10eXBlb2YgZT9cInVuZGVmaW5lZFwiOk4oZSksdj1cInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOk4odCksYj1cInVuZGVmaW5lZFwiIT09eXx8cCYmcFtwLmxlbmd0aC0xXS5saHMmJnBbcC5sZW5ndGgtMV0ubGhzLmhhc093blByb3BlcnR5KGQpLG09XCJ1bmRlZmluZWRcIiE9PXZ8fHAmJnBbcC5sZW5ndGgtMV0ucmhzJiZwW3AubGVuZ3RoLTFdLnJocy5oYXNPd25Qcm9wZXJ0eShkKTtpZighYiYmbSlyKG5ldyBvKGcsdCkpO2Vsc2UgaWYoIW0mJmIpcihuZXcgaShnLGUpKTtlbHNlIGlmKHUoZSkhPT11KHQpKXIobmV3IG4oZyxlLHQpKTtlbHNlIGlmKFwiZGF0ZVwiPT09dShlKSYmZS10IT09MClyKG5ldyBuKGcsZSx0KSk7ZWxzZSBpZihcIm9iamVjdFwiPT09eSYmbnVsbCE9PWUmJm51bGwhPT10KWlmKHAuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxocz09PWV9KS5sZW5ndGgpZSE9PXQmJnIobmV3IG4oZyxlLHQpKTtlbHNle2lmKHAucHVzaCh7bGhzOmUscmhzOnR9KSxBcnJheS5pc0FycmF5KGUpKXt2YXIgdztlLmxlbmd0aDtmb3Iodz0wO3c8ZS5sZW5ndGg7dysrKXc+PXQubGVuZ3RoP3IobmV3IGEoZyx3LG5ldyBpKHZvaWQgMCxlW3ddKSkpOmwoZVt3XSx0W3ddLHIsYyxnLHcscCk7Zm9yKDt3PHQubGVuZ3RoOylyKG5ldyBhKGcsdyxuZXcgbyh2b2lkIDAsdFt3KytdKSkpfWVsc2V7dmFyIHg9T2JqZWN0LmtleXMoZSksUz1PYmplY3Qua2V5cyh0KTt4LmZvckVhY2goZnVuY3Rpb24obixvKXt2YXIgaT1TLmluZGV4T2Yobik7aT49MD8obChlW25dLHRbbl0scixjLGcsbixwKSxTPWYoUyxpKSk6bChlW25dLHZvaWQgMCxyLGMsZyxuLHApfSksUy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2wodm9pZCAwLHRbZV0scixjLGcsZSxwKX0pfXAubGVuZ3RoPXAubGVuZ3RoLTF9ZWxzZSBlIT09dCYmKFwibnVtYmVyXCI9PT15JiZpc05hTihlKSYmaXNOYU4odCl8fHIobmV3IG4oZyxlLHQpKSl9ZnVuY3Rpb24gYyhlLHQscixuKXtyZXR1cm4gbj1ufHxbXSxsKGUsdCxmdW5jdGlvbihlKXtlJiZuLnB1c2goZSl9LHIpLG4ubGVuZ3RoP246dm9pZCAwfWZ1bmN0aW9uIHMoZSx0LHIpe2lmKHIucGF0aCYmci5wYXRoLmxlbmd0aCl7dmFyIG4sbz1lW3RdLGk9ci5wYXRoLmxlbmd0aC0xO2ZvcihuPTA7bjxpO24rKylvPW9bci5wYXRoW25dXTtzd2l0Y2goci5raW5kKXtjYXNlXCJBXCI6cyhvW3IucGF0aFtuXV0sci5pbmRleCxyLml0ZW0pO2JyZWFrO2Nhc2VcIkRcIjpkZWxldGUgb1tyLnBhdGhbbl1dO2JyZWFrO2Nhc2VcIkVcIjpjYXNlXCJOXCI6b1tyLnBhdGhbbl1dPXIucmhzfX1lbHNlIHN3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpzKGVbdF0sci5pbmRleCxyLml0ZW0pO2JyZWFrO2Nhc2VcIkRcIjplPWYoZSx0KTticmVhaztjYXNlXCJFXCI6Y2FzZVwiTlwiOmVbdF09ci5yaHN9cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQscil7aWYoZSYmdCYmciYmci5raW5kKXtmb3IodmFyIG49ZSxvPS0xLGk9ci5wYXRoP3IucGF0aC5sZW5ndGgtMTowOysrbzxpOylcInVuZGVmaW5lZFwiPT10eXBlb2YgbltyLnBhdGhbb11dJiYobltyLnBhdGhbb11dPVwibnVtYmVyXCI9PXR5cGVvZiByLnBhdGhbb10/W106e30pLG49bltyLnBhdGhbb11dO3N3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpzKHIucGF0aD9uW3IucGF0aFtvXV06bixyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmRlbGV0ZSBuW3IucGF0aFtvXV07YnJlYWs7Y2FzZVwiRVwiOmNhc2VcIk5cIjpuW3IucGF0aFtvXV09ci5yaHN9fX1mdW5jdGlvbiBwKGUsdCxyKXtpZihyLnBhdGgmJnIucGF0aC5sZW5ndGgpe3ZhciBuLG89ZVt0XSxpPXIucGF0aC5sZW5ndGgtMTtmb3Iobj0wO248aTtuKyspbz1vW3IucGF0aFtuXV07c3dpdGNoKHIua2luZCl7Y2FzZVwiQVwiOnAob1tyLnBhdGhbbl1dLHIuaW5kZXgsci5pdGVtKTticmVhaztjYXNlXCJEXCI6b1tyLnBhdGhbbl1dPXIubGhzO2JyZWFrO2Nhc2VcIkVcIjpvW3IucGF0aFtuXV09ci5saHM7YnJlYWs7Y2FzZVwiTlwiOmRlbGV0ZSBvW3IucGF0aFtuXV19fWVsc2Ugc3dpdGNoKHIua2luZCl7Y2FzZVwiQVwiOnAoZVt0XSxyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmVbdF09ci5saHM7YnJlYWs7Y2FzZVwiRVwiOmVbdF09ci5saHM7YnJlYWs7Y2FzZVwiTlwiOmU9ZihlLHQpfXJldHVybiBlfWZ1bmN0aW9uIGcoZSx0LHIpe2lmKGUmJnQmJnImJnIua2luZCl7dmFyIG4sbyxpPWU7Zm9yKG89ci5wYXRoLmxlbmd0aC0xLG49MDtuPG87bisrKVwidW5kZWZpbmVkXCI9PXR5cGVvZiBpW3IucGF0aFtuXV0mJihpW3IucGF0aFtuXV09e30pLGk9aVtyLnBhdGhbbl1dO3N3aXRjaChyLmtpbmQpe2Nhc2VcIkFcIjpwKGlbci5wYXRoW25dXSxyLmluZGV4LHIuaXRlbSk7YnJlYWs7Y2FzZVwiRFwiOmlbci5wYXRoW25dXT1yLmxoczticmVhaztjYXNlXCJFXCI6aVtyLnBhdGhbbl1dPXIubGhzO2JyZWFrO2Nhc2VcIk5cIjpkZWxldGUgaVtyLnBhdGhbbl1dfX19ZnVuY3Rpb24gaChlLHQscil7aWYoZSYmdCl7dmFyIG49ZnVuY3Rpb24obil7ciYmIXIoZSx0LG4pfHxkKGUsdCxuKX07bChlLHQsbil9fWZ1bmN0aW9uIHkoZSl7cmV0dXJuXCJjb2xvcjogXCIrRltlXS5jb2xvcitcIjsgZm9udC13ZWlnaHQ6IGJvbGRcIn1mdW5jdGlvbiB2KGUpe3ZhciB0PWUua2luZCxyPWUucGF0aCxuPWUubGhzLG89ZS5yaHMsaT1lLmluZGV4LGE9ZS5pdGVtO3N3aXRjaCh0KXtjYXNlXCJFXCI6cmV0dXJuW3Iuam9pbihcIi5cIiksbixcIuKGklwiLG9dO2Nhc2VcIk5cIjpyZXR1cm5bci5qb2luKFwiLlwiKSxvXTtjYXNlXCJEXCI6cmV0dXJuW3Iuam9pbihcIi5cIildO2Nhc2VcIkFcIjpyZXR1cm5bci5qb2luKFwiLlwiKStcIltcIitpK1wiXVwiLGFdO2RlZmF1bHQ6cmV0dXJuW119fWZ1bmN0aW9uIGIoZSx0LHIsbil7dmFyIG89YyhlLHQpO3RyeXtuP3IuZ3JvdXBDb2xsYXBzZWQoXCJkaWZmXCIpOnIuZ3JvdXAoXCJkaWZmXCIpfWNhdGNoKGUpe3IubG9nKFwiZGlmZlwiKX1vP28uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLmtpbmQsbj12KGUpO3IubG9nLmFwcGx5KHIsW1wiJWMgXCIrRlt0XS50ZXh0LHkodCldLmNvbmNhdChQKG4pKSl9KTpyLmxvZyhcIuKAlOKAlCBubyBkaWZmIOKAlOKAlFwiKTt0cnl7ci5ncm91cEVuZCgpfWNhdGNoKGUpe3IubG9nKFwi4oCU4oCUIGRpZmYgZW5kIOKAlOKAlCBcIil9fWZ1bmN0aW9uIG0oZSx0LHIsbil7c3dpdGNoKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6TihlKSl7Y2FzZVwib2JqZWN0XCI6cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVtuXT9lW25dLmFwcGx5KGUsUChyKSk6ZVtuXTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiBlKHQpO2RlZmF1bHQ6cmV0dXJuIGV9fWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ZS50aW1lc3RhbXAscj1lLmR1cmF0aW9uO3JldHVybiBmdW5jdGlvbihlLG4sbyl7dmFyIGk9W1wiYWN0aW9uXCJdO3JldHVybiBpLnB1c2goXCIlY1wiK1N0cmluZyhlLnR5cGUpKSx0JiZpLnB1c2goXCIlY0AgXCIrbiksciYmaS5wdXNoKFwiJWMoaW4gXCIrby50b0ZpeGVkKDIpK1wiIG1zKVwiKSxpLmpvaW4oXCIgXCIpfX1mdW5jdGlvbiB4KGUsdCl7dmFyIHI9dC5sb2dnZXIsbj10LmFjdGlvblRyYW5zZm9ybWVyLG89dC50aXRsZUZvcm1hdHRlcixpPXZvaWQgMD09PW8/dyh0KTpvLGE9dC5jb2xsYXBzZWQsZj10LmNvbG9ycyx1PXQubGV2ZWwsbD10LmRpZmYsYz1cInVuZGVmaW5lZFwiPT10eXBlb2YgdC50aXRsZUZvcm1hdHRlcjtlLmZvckVhY2goZnVuY3Rpb24obyxzKXt2YXIgZD1vLnN0YXJ0ZWQscD1vLnN0YXJ0ZWRUaW1lLGc9by5hY3Rpb24saD1vLnByZXZTdGF0ZSx5PW8uZXJyb3Isdj1vLnRvb2ssdz1vLm5leHRTdGF0ZSx4PWVbcysxXTt4JiYodz14LnByZXZTdGF0ZSx2PXguc3RhcnRlZC1kKTt2YXIgUz1uKGcpLGs9XCJmdW5jdGlvblwiPT10eXBlb2YgYT9hKGZ1bmN0aW9uKCl7cmV0dXJuIHd9LGcsbyk6YSxqPUQocCksRT1mLnRpdGxlP1wiY29sb3I6IFwiK2YudGl0bGUoUykrXCI7XCI6XCJcIixBPVtcImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjtcIl07QS5wdXNoKEUpLHQudGltZXN0YW1wJiZBLnB1c2goXCJjb2xvcjogZ3JheTsgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7XCIpLHQuZHVyYXRpb24mJkEucHVzaChcImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjtcIik7dmFyIE89aShTLGosdik7dHJ5e2s/Zi50aXRsZSYmYz9yLmdyb3VwQ29sbGFwc2VkLmFwcGx5KHIsW1wiJWMgXCIrT10uY29uY2F0KEEpKTpyLmdyb3VwQ29sbGFwc2VkKE8pOmYudGl0bGUmJmM/ci5ncm91cC5hcHBseShyLFtcIiVjIFwiK09dLmNvbmNhdChBKSk6ci5ncm91cChPKX1jYXRjaChlKXtyLmxvZyhPKX12YXIgTj1tKHUsUyxbaF0sXCJwcmV2U3RhdGVcIiksUD1tKHUsUyxbU10sXCJhY3Rpb25cIiksQz1tKHUsUyxbeSxoXSxcImVycm9yXCIpLEY9bSh1LFMsW3ddLFwibmV4dFN0YXRlXCIpO2lmKE4paWYoZi5wcmV2U3RhdGUpe3ZhciBMPVwiY29sb3I6IFwiK2YucHJldlN0YXRlKGgpK1wiOyBmb250LXdlaWdodDogYm9sZFwiO3JbTl0oXCIlYyBwcmV2IHN0YXRlXCIsTCxoKX1lbHNlIHJbTl0oXCJwcmV2IHN0YXRlXCIsaCk7aWYoUClpZihmLmFjdGlvbil7dmFyIFQ9XCJjb2xvcjogXCIrZi5hY3Rpb24oUykrXCI7IGZvbnQtd2VpZ2h0OiBib2xkXCI7cltQXShcIiVjIGFjdGlvbiAgICBcIixULFMpfWVsc2UgcltQXShcImFjdGlvbiAgICBcIixTKTtpZih5JiZDKWlmKGYuZXJyb3Ipe3ZhciBNPVwiY29sb3I6IFwiK2YuZXJyb3IoeSxoKStcIjsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI7cltDXShcIiVjIGVycm9yICAgICBcIixNLHkpfWVsc2UgcltDXShcImVycm9yICAgICBcIix5KTtpZihGKWlmKGYubmV4dFN0YXRlKXt2YXIgXz1cImNvbG9yOiBcIitmLm5leHRTdGF0ZSh3KStcIjsgZm9udC13ZWlnaHQ6IGJvbGRcIjtyW0ZdKFwiJWMgbmV4dCBzdGF0ZVwiLF8sdyl9ZWxzZSByW0ZdKFwibmV4dCBzdGF0ZVwiLHcpO2wmJmIoaCx3LHIsayk7dHJ5e3IuZ3JvdXBFbmQoKX1jYXRjaChlKXtyLmxvZyhcIuKAlOKAlCBsb2cgZW5kIOKAlOKAlFwiKX19KX1mdW5jdGlvbiBTKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHQ9T2JqZWN0LmFzc2lnbih7fSxMLGUpLHI9dC5sb2dnZXIsbj10LnN0YXRlVHJhbnNmb3JtZXIsbz10LmVycm9yVHJhbnNmb3JtZXIsaT10LnByZWRpY2F0ZSxhPXQubG9nRXJyb3JzLGY9dC5kaWZmUHJlZGljYXRlO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiByKXJldHVybiBmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9fX07aWYoZS5nZXRTdGF0ZSYmZS5kaXNwYXRjaClyZXR1cm4gY29uc29sZS5lcnJvcihcIltyZWR1eC1sb2dnZXJdIHJlZHV4LWxvZ2dlciBub3QgaW5zdGFsbGVkLiBNYWtlIHN1cmUgdG8gcGFzcyBsb2dnZXIgaW5zdGFuY2UgYXMgbWlkZGxld2FyZTpcXG4vLyBMb2dnZXIgd2l0aCBkZWZhdWx0IG9wdGlvbnNcXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdyZWR1eC1sb2dnZXInXFxuY29uc3Qgc3RvcmUgPSBjcmVhdGVTdG9yZShcXG4gIHJlZHVjZXIsXFxuICBhcHBseU1pZGRsZXdhcmUobG9nZ2VyKVxcbilcXG4vLyBPciB5b3UgY2FuIGNyZWF0ZSB5b3VyIG93biBsb2dnZXIgd2l0aCBjdXN0b20gb3B0aW9ucyBodHRwOi8vYml0Lmx5L3JlZHV4LWxvZ2dlci1vcHRpb25zXFxuaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXFxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHtcXG4gIC8vIC4uLm9wdGlvbnNcXG59KTtcXG5jb25zdCBzdG9yZSA9IGNyZWF0ZVN0b3JlKFxcbiAgcmVkdWNlcixcXG4gIGFwcGx5TWlkZGxld2FyZShsb2dnZXIpXFxuKVxcblwiKSxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9fX07dmFyIHU9W107cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0U3RhdGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihsKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYhaShyLGwpKXJldHVybiBlKGwpO3ZhciBjPXt9O3UucHVzaChjKSxjLnN0YXJ0ZWQ9Ty5ub3coKSxjLnN0YXJ0ZWRUaW1lPW5ldyBEYXRlLGMucHJldlN0YXRlPW4ocigpKSxjLmFjdGlvbj1sO3ZhciBzPXZvaWQgMDtpZihhKXRyeXtzPWUobCl9Y2F0Y2goZSl7Yy5lcnJvcj1vKGUpfWVsc2Ugcz1lKGwpO2MudG9vaz1PLm5vdygpLWMuc3RhcnRlZCxjLm5leHRTdGF0ZT1uKHIoKSk7dmFyIGQ9dC5kaWZmJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBmP2YocixsKTp0LmRpZmY7aWYoeCh1LE9iamVjdC5hc3NpZ24oe30sdCx7ZGlmZjpkfSkpLHUubGVuZ3RoPTAsYy5lcnJvcil0aHJvdyBjLmVycm9yO3JldHVybiBzfX19fXZhciBrLGosRT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgQXJyYXkodCsxKS5qb2luKGUpfSxBPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEUoXCIwXCIsdC1lLnRvU3RyaW5nKCkubGVuZ3RoKStlfSxEPWZ1bmN0aW9uKGUpe3JldHVybiBBKGUuZ2V0SG91cnMoKSwyKStcIjpcIitBKGUuZ2V0TWludXRlcygpLDIpK1wiOlwiK0EoZS5nZXRTZWNvbmRzKCksMikrXCIuXCIrQShlLmdldE1pbGxpc2Vjb25kcygpLDMpfSxPPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBwZXJmb3JtYW5jZSYmbnVsbCE9PXBlcmZvcm1hbmNlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2U6RGF0ZSxOPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9LFA9ZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAscj1BcnJheShlLmxlbmd0aCk7dDxlLmxlbmd0aDt0Kyspclt0XT1lW3RdO3JldHVybiByfXJldHVybiBBcnJheS5mcm9tKGUpfSxDPVtdO2s9XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZ2xvYmFsP1widW5kZWZpbmVkXCI6TihnbG9iYWwpKSYmZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxqPWsuRGVlcERpZmYsaiYmQy5wdXNoKGZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGomJmsuRGVlcERpZmY9PT1jJiYoay5EZWVwRGlmZj1qLGo9dm9pZCAwKX0pLHQobixyKSx0KG8sciksdChpLHIpLHQoYSxyKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjLHtkaWZmOnt2YWx1ZTpjLGVudW1lcmFibGU6ITB9LG9ic2VydmFibGVEaWZmOnt2YWx1ZTpsLGVudW1lcmFibGU6ITB9LGFwcGx5RGlmZjp7dmFsdWU6aCxlbnVtZXJhYmxlOiEwfSxhcHBseUNoYW5nZTp7dmFsdWU6ZCxlbnVtZXJhYmxlOiEwfSxyZXZlcnRDaGFuZ2U6e3ZhbHVlOmcsZW51bWVyYWJsZTohMH0saXNDb25mbGljdDp7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygan0sZW51bWVyYWJsZTohMH0sbm9Db25mbGljdDp7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gQyYmKEMuZm9yRWFjaChmdW5jdGlvbihlKXtlKCl9KSxDPW51bGwpLGN9LGVudW1lcmFibGU6ITB9fSk7dmFyIEY9e0U6e2NvbG9yOlwiIzIxOTZGM1wiLHRleHQ6XCJDSEFOR0VEOlwifSxOOntjb2xvcjpcIiM0Q0FGNTBcIix0ZXh0OlwiQURERUQ6XCJ9LEQ6e2NvbG9yOlwiI0Y0NDMzNlwiLHRleHQ6XCJERUxFVEVEOlwifSxBOntjb2xvcjpcIiMyMTk2RjNcIix0ZXh0OlwiQVJSQVk6XCJ9fSxMPXtsZXZlbDpcImxvZ1wiLGxvZ2dlcjpjb25zb2xlLGxvZ0Vycm9yczohMCxjb2xsYXBzZWQ6dm9pZCAwLHByZWRpY2F0ZTp2b2lkIDAsZHVyYXRpb246ITEsdGltZXN0YW1wOiEwLHN0YXRlVHJhbnNmb3JtZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGFjdGlvblRyYW5zZm9ybWVyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxlcnJvclRyYW5zZm9ybWVyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxjb2xvcnM6e3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJpbmhlcml0XCJ9LHByZXZTdGF0ZTpmdW5jdGlvbigpe3JldHVyblwiIzlFOUU5RVwifSxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5cIiMwM0E5RjRcIn0sbmV4dFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuXCIjNENBRjUwXCJ9LGVycm9yOmZ1bmN0aW9uKCl7cmV0dXJuXCIjRjIwNDA0XCJ9fSxkaWZmOiExLGRpZmZQcmVkaWNhdGU6dm9pZCAwLHRyYW5zZm9ybWVyOnZvaWQgMH0sVD1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSx0PWUuZGlzcGF0Y2gscj1lLmdldFN0YXRlO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHI/UygpKHtkaXNwYXRjaDp0LGdldFN0YXRlOnJ9KTp2b2lkIGNvbnNvbGUuZXJyb3IoXCJcXG5bcmVkdXgtbG9nZ2VyIHYzXSBCUkVBS0lORyBDSEFOR0VcXG5bcmVkdXgtbG9nZ2VyIHYzXSBTaW5jZSAzLjAuMCByZWR1eC1sb2dnZXIgZXhwb3J0cyBieSBkZWZhdWx0IGxvZ2dlciB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXFxuW3JlZHV4LWxvZ2dlciB2M10gQ2hhbmdlXFxuW3JlZHV4LWxvZ2dlciB2M10gaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXFxuW3JlZHV4LWxvZ2dlciB2M10gdG9cXG5bcmVkdXgtbG9nZ2VyIHYzXSBpbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tICdyZWR1eC1sb2dnZXInXFxuXCIpfTtlLmRlZmF1bHRzPUwsZS5jcmVhdGVMb2dnZXI9UyxlLmxvZ2dlcj1ULGUuZGVmYXVsdD1ULE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWR1eC1sb2dnZXIvZGlzdC9yZWR1eC1sb2dnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IHsgY29tYmluZVJlZHVjZXJzIH0gPSByZXF1aXJlKFwicmVkdXhcIik7XG5cbmNvbnN0IGhpc3RvcnkgPSByZXF1aXJlKFwiLi9oaXN0b3J5UmVkdWNlclwiKTtcbmNvbnN0IHBvaW50cyA9IHJlcXVpcmUoXCIuL3BvaW50UmVkdWNlclwiKTtcbmNvbnN0IHNlbGVjdGlvbiA9IHJlcXVpcmUoXCIuL3NlbGVjdGlvblJlZHVjZXJcIik7XG5jb25zdCBjb25uZWN0aW9ucyA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb25SZWR1Y2VyXCIpO1xuY29uc3QgaGFuZGxlcyA9IHJlcXVpcmUoXCIuL2hhbmRsZVJlZHVjZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gY29tYmluZVJlZHVjZXJzKHtcbiAgaGlzdG9yeSxcbiAgcG9pbnRzLFxuICBzZWxlY3Rpb24sXG4gIGNvbm5lY3Rpb25zLFxuICBoYW5kbGVzLFxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVkdWNlcnMvaW5kZXguanMiLCJjb25zdCBkZWZhdWx0U3RhdGUgPSB7XG4gIGhpc3Rvcnk6IFtdLFxuICBmdXR1cmU6IFtdLFxufTtcblxuY29uc3QgbWF4TGVuID0gNTA7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSA9IGRlZmF1bHRTdGF0ZSwgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwiQ0xFQVJfSElTVE9SWVwiOiB7XG4gICAgICByZXR1cm4gZGVmYXVsdFN0YXRlO1xuICAgIH1cbiAgICBjYXNlIFwiQUREX0FDVElPTl9UT19ISVNUT1JZXCI6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBoaXN0b3J5OiBbXG4gICAgICAgICAgLi4uc3RhdGUuaGlzdG9yeS5zbGljZShzdGF0ZS5oaXN0b3J5Lmxlbmd0aCA9PT0gbWF4TGVuID8gMSA6IDApLFxuICAgICAgICAgIGFjdGlvbi5wYXlsb2FkLFxuICAgICAgICBdLFxuICAgICAgICBmdXR1cmU6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gICAgY2FzZSBcIlVORE9cIjoge1xuICAgICAgaWYgKHN0YXRlLmhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBmdXR1cmU6IFtcbiAgICAgICAgICAuLi5zdGF0ZS5mdXR1cmUsXG4gICAgICAgICAgc3RhdGUuaGlzdG9yeVtzdGF0ZS5oaXN0b3J5Lmxlbmd0aCAtIDFdLFxuICAgICAgICBdLFxuICAgICAgICBoaXN0b3J5OiBzdGF0ZS5oaXN0b3J5LnNwbGljZSgwLCBzdGF0ZS5oaXN0b3J5Lmxlbmd0aCAtIDEpLFxuICAgICAgfTtcbiAgICB9XG4gICAgY2FzZSBcIlJFRE9cIjoge1xuICAgICAgaWYgKHN0YXRlLmZ1dHVyZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGhpc3Rvcnk6IFtcbiAgICAgICAgICAuLi5zdGF0ZS5oaXN0b3J5LFxuICAgICAgICAgIHN0YXRlLmZ1dHVyZVtzdGF0ZS5mdXR1cmUubGVuZ3RoIC0gMV0sXG4gICAgICAgIF0sXG4gICAgICAgIGZ1dHVyZTogc3RhdGUuZnV0dXJlLnNwbGljZSgwLCBzdGF0ZS5mdXR1cmUubGVuZ3RoIC0gMSksXG4gICAgICB9O1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlZHVjZXJzL2hpc3RvcnlSZWR1Y2VyLmpzIiwiY29uc3QgeyB0eXBlcyB9ID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcblxuY29uc3QgZGVmYXVsdFN0YXRlID0ge1xuICBcImFcIjoge1xuICAgIHg6IDQwLFxuICAgIHk6IDQwLFxuICB9LFxuICBcImJcIjoge1xuICAgIHg6IDQwMCxcbiAgICB5OiAyMDAsXG4gIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUgPSBkZWZhdWx0U3RhdGUsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIk1PVkVcIjoge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb24sIHBvc2l0aW9uQ2hhbmdlIH0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGNvbnN0IHRvTW92ZSA9IHNlbGVjdGlvblt0eXBlcy5QT0lOVF07XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0b01vdmUpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgfTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgaWQgPSB0b01vdmVbaV07XG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gc3RhdGVbaWRdO1xuICAgICAgICBuZXdTdGF0ZVtpZF0gPSB7XG4gICAgICAgICAgLi4uc3RhdGVbaWRdLFxuICAgICAgICAgIHg6IHggKyBwb3NpdGlvbkNoYW5nZS54LFxuICAgICAgICAgIHk6IHkgKyBwb3NpdGlvbkNoYW5nZS55LFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfVxuICAgIGNhc2UgXCJBRERfUE9JTlRcIjoge1xuICAgICAgY29uc3QgeyB4LCB5LCBpZCB9ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgW2lkXTogeyB4LCB5IH0sXG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgXCJERUxFVEVfUE9JTlRcIjoge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlKS5yZWR1Y2UoKG5ld1N0YXRlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGtleSAhPT0gYWN0aW9uLnBheWxvYWQpIHtcbiAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gc3RhdGVba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICB9LCB7fSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVkdWNlcnMvcG9pbnRSZWR1Y2VyLmpzIiwiY29uc3QgZGVmYXVsdFN0YXRlID0ge307XG5cbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIGlkIG5lZWRzIHRvIGJlIGFkZGVkL3JlbW92ZWQgaXMgY2hlY2tlZFxuICogYnkgdGhlIHNlbGVjdGlvbi5qcyBtZXRob2RzLlxuICogVGhpcyByZWR1Y2VyIGFzc3VtZXMgaWRzIGJlaW5nIHJlbW92ZWQgZXhpc3QgaW4gdGhlIGFycmF5XG4gKiBhbmQgaWRzIHRoYXQgYXJlIGJlaW5nIGFkZGVkIGRvbid0LlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUgPSBkZWZhdWx0U3RhdGUsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIkFERF9TRUxFQ1RJT05fVFlQRVwiOiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgW2FjdGlvbi5wYXlsb2FkXTogW10sXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIFwiQUREX1RPX1NFTEVDVElPTlwiOiB7XG4gICAgICBjb25zdCB7IGlkLCB0eXBlIH0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBbdHlwZV06IFtcbiAgICAgICAgICAuLi5zdGF0ZVt0eXBlXSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgXCJSRU1PVkVfRlJPTV9TRUxFQ1RJT05cIjoge1xuICAgICAgY29uc3QgeyB0eXBlLCBpdGVtSW5kZXggfSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIFt0eXBlXTogc3RhdGVbdHlwZV0uZmlsdGVyKChpZCwgaSkgPT4gKGkgIT09IGl0ZW1JbmRleCkpLFxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwiQ0xFQVJfU0VMRUNUSU9OXCI6IHtcbiAgICAgIC8vIFdlIHR1cm4gZXZlcnkgYXJyYXkgaW50byBhIG5ldyBlbXB0eSBhcnJheSFcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0ge307XG5cbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzdGF0ZSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgbmV3U3RhdGVba2V5c1tpXV0gPSBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbiAgICBjYXNlIFwiUkVTVE9SRV9TRUxFQ1RJT05cIjoge1xuICAgICAgLy8gV2Ugc2ltcGx5IHBhc3MgaW4gdGhlIG9sZCBzdGF0ZS4uLlxuICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICAgIC4uLmFjdGlvbi5wYXlsb2FkLFxuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiAuLi5idXQgbm90IHNvIGZhc3QgYnVja28sIHdlIG1pZ2h0IGhhdmUgbmV3IHR5cGVzIGluIHRoZVxuICAgICAgICogdmFsaWRhdGVkIHR5cGVzIHRoYXQgZGlkbid0IGV4aXN0cyBpbiB0aGUgc3RhdGUgYmVpbmdcbiAgICAgICAqIHJlc3RvcmVkLlxuICAgICAgICogVG8gYW1lbmQgdGhhdCB3ZSBzaW1wbHkgYWRkIGFycmF5cyBmb3IgdGhlIG5ldyB2YWxpZGF0ZWRcbiAgICAgICAqIHR5cGVzLlxuICAgICAgICovXG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc3RhdGUpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdTdGF0ZVtrZXlzW2ldXSkpIHtcbiAgICAgICAgICBuZXdTdGF0ZVtrZXlzW2ldXSA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9yZWR1Y2Vycy9zZWxlY3Rpb25SZWR1Y2VyLmpzIiwiY29uc3QgeyB0b0Nvbm5lY3Rpb25JZCB9ID0gcmVxdWlyZShcIi4uL2Nvbm5lY3Rpb25zL2Nvbm5lY3Rpb25JZFwiKTtcbmNvbnN0IHsgY2hlY2tWYWxpZENvbm5lY3Rpb24sIGNoZWNrSWRBcnJheSB9ID0gcmVxdWlyZShcIi4uL2Nvbm5lY3Rpb25zL2NoZWNrVmFsaWRDb25uZWN0aW9uXCIpO1xuXG5jb25zdCBhID0gXCJhXCI7XG5jb25zdCBiID0gXCJiXCI7XG5jb25zdCB4ID0gXCJ4XCI7XG5jb25zdCB5ID0gXCJ5XCI7XG5cbmNvbnN0IGRlZmF1bHRTdGF0ZSA9IHtcbiAgW3RvQ29ubmVjdGlvbklkKGEsIGIpXToge1xuICAgIGlkOiB0b0Nvbm5lY3Rpb25JZChhLCBiKSxcbiAgICBwb2ludHM6IFthLCBiXSxcbiAgICBoYW5kbGVzOiBbeCwgeV0sXG4gIH0sXG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSA9IGRlZmF1bHRTdGF0ZSwgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwiQUREX0NPTk5FQ1RJT05cIjoge1xuICAgICAgY2hlY2tWYWxpZENvbm5lY3Rpb24oYWN0aW9uLnBheWxvYWQpO1xuICAgICAgY29uc3QgeyBpZCB9ID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgICAgIGlmIChzdGF0ZVtpZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBhbHJlYWR5IGEgY29ubmVjdGlvbiBieSB0aGUgaWQgJyR7aWR9J2ApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgW2lkXTogYWN0aW9uLnBheWxvYWQsXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIFwiUkVQTEFDRV9DT05ORUNUSU9OX1BPSU5UX0lEU1wiOiB7XG4gICAgICBjb25zdCB7IGlkLCBoYW5kbGVzLCBwb2ludHMgfSA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gICAgICBpZiAoIXN0YXRlW2lkXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbm5lY3Rpb24gYnkgaWQgJyR7aWR9JyBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhbmRsZXMpICB7IGNoZWNrSWRBcnJheShoYW5kbGVzKTsgfVxuICAgICAgaWYgKHBvaW50cykgICB7IGNoZWNrSWRBcnJheShwb2ludHMpOyB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBbaWRdOiB7XG4gICAgICAgICAgLi4uc3RhdGVbaWRdLFxuICAgICAgICAgIGhhbmRsZXM6ICBoYW5kbGVzIHx8IHN0YXRlW2lkXS5oYW5kbGVzLFxuICAgICAgICAgIHBvaW50czogICBwb2ludHMgIHx8IHN0YXRlW2lkXS5wb2ludHMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIFwiREVMRVRFX0NPTk5FQ1RJT05cIjoge1xuICAgICAgY29uc3QgaWQgPSBhY3Rpb24ucGF5bG9hZDtcblxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlKS5yZWR1Y2UoKG5ld1N0YXRlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGtleSAhPT0gaWQpIHtcbiAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gc3RhdGVba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICB9LCB7fSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVkdWNlcnMvY29ubmVjdGlvblJlZHVjZXIuanMiLCJjb25zdCBpbnZhbGlkQ29ubmVjdGlvbiA9ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb25uZWN0aW9uLlwiKTsgfVxuY29uc3QgaW52YWxpZElkQXJyYXkgPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaWQgYXJyYXkuXCIpOyB9XG5cbmZ1bmN0aW9uIGNoZWNrSWRBcnJheShpZEFyciwgbGVuZ3RoID0gMikge1xuICBpZiAoaWRBcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcbiAgICBpbnZhbGlkSWRBcnJheSgpO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZEFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgIC8vIENoZWNraW5nIGZvciBvYmplY3RzXG4gICBpZiAoaWRBcnJbaV0gJiYgdHlwZW9mIGlkQXJyW2ldID09PSBcIm9iamVjdFwiKSB7XG4gICAgIGludmFsaWRJZEFycmF5KCk7XG4gICB9XG5cbiAgIC8vIEFsbCBpZHMgc2hvdWxkIGJlIGEgc3RyaW5nIG9yIG51bGwuXG4gICBpZiAodHlwZW9mIGlkQXJyW2ldICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBpZEFycltpXSAhPT0gXCJvYmplY3RcIikgeyBcbiAgICAgaW52YWxpZElkQXJyYXkoKTtcbiAgIH1cbiB9XG59XG5leHBvcnRzLmNoZWNrSWRBcnJheSA9IGNoZWNrSWRBcnJheTtcblxuLyoqXG4gKiBUaGlzIGlzIG5vdCBleHRlbnNpdmUsIGJ1dCBzaG91bGQgY2F0Y2ggbW9zdCBlcnJvcnMuXG4gKi9cbmV4cG9ydHMuY2hlY2tWYWxpZENvbm5lY3Rpb24gPSBmdW5jdGlvbiBjaGVja1ZhbGlkQ29ubmVjdGlvbih7IGlkLCBwb2ludHMsIGhhbmRsZXMgfSkge1xuICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIikge1xuICAgIGludmFsaWRDb25uZWN0aW9uKCk7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSB8fCAhQXJyYXkuaXNBcnJheShoYW5kbGVzKSkge1xuICAgIGludmFsaWRDb25uZWN0aW9uKCk7XG4gIH1cblxuICAvLyBUaGUgZmlyc3QgcG9pbnQgbXVzdCBhbHdheXMgYmUgcHJlc2VudFxuICBpZiAoIXBvaW50c1swXSkge1xuICAgIGludmFsaWRDb25uZWN0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIHNlY29uZCBwb2ludCBpcyBub3QgcHJlc2VudCwgYSBoYW5kbGUgbXVzdCBiZSBwcmVzZW50XG4gICAqIGZvciB0aGUgZmlyc3QgcG9pbnQuXG4gICAqL1xuICBpZiAoIXBvaW50c1sxXSAmJiAhaGFuZGxlc1swXSkge1xuICAgIGludmFsaWRDb25uZWN0aW9uKCk7XG4gIH1cblxuICBjaGVja0lkQXJyYXkoW1xuICAgIC4uLnBvaW50cyxcbiAgICAuLi5oYW5kbGVzLFxuICBdLCA0KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb25uZWN0aW9ucy9jaGVja1ZhbGlkQ29ubmVjdGlvbi5qcyIsImNvbnN0IHsgdHlwZXMgfSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5cbmNvbnN0IGRlZmF1bHRTdGF0ZSA9IHtcbiAgeDogeyB4OiAyNDAsIHk6IDIwLCAgIGlkOiBcInhcIiB9LFxuICB5OiB7IHg6IDM2MCwgeTogNTAwLCAgaWQ6IFwieVwiIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUgPSBkZWZhdWx0U3RhdGUsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIk1PVkVcIjoge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb24sIHBvc2l0aW9uQ2hhbmdlIH0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGNvbnN0IHRvTW92ZSA9IHNlbGVjdGlvblt0eXBlcy5IQU5ETEVdO1xuXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodG9Nb3ZlKSkge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgIH07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9Nb3ZlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGlkID0gdG9Nb3ZlW2ldO1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHN0YXRlW2lkXTtcbiAgICAgICAgbmV3U3RhdGVbaWRdID0ge1xuICAgICAgICAgIC4uLnN0YXRlW2lkXSxcbiAgICAgICAgICB4OiB4ICsgcG9zaXRpb25DaGFuZ2UueCxcbiAgICAgICAgICB5OiB5ICsgcG9zaXRpb25DaGFuZ2UueSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbiAgICBjYXNlIFwiQUREX0hBTkRMRVNcIjoge1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSB7IC4uLnN0YXRlIH07XG4gICAgICBjb25zdCBoYW5kbGVzID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFuZGxlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCB7IGlkLCB4LCB5IH0gPSBoYW5kbGVzW2ldO1xuICAgICAgICBuZXdTdGF0ZVtpZF0gPSB7IHgsIHksIGlkIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9XG4gICAgY2FzZSBcIkRFTEVURV9IQU5ETEVTXCI6IHtcbiAgICAgIGNvbnN0IGhhbmRsZUlkcyA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlKS5yZWR1Y2UoKG5ld1N0YXRlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGhhbmRsZUlkcy5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHN0YXRlW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlZHVjZXJzL2hhbmRsZVJlZHVjZXIuanMiLCJjb25zdCBjYWxjQmV6aWVyUG9pbnRBdCA9IHJlcXVpcmUoXCIuL2NhbGNCZXppZXJQb2ludEF0XCIpO1xuY29uc3QgY2FsY0Rpc3RhbmNlQmV0d2VlblBvc2l0aW9ucyA9IHJlcXVpcmUoXCIuLi91dGlscy9jYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zXCIpO1xuY29uc3QgZ2V0SW50ZXJtZWRpYXRlTnVtYmVyID0gcmVxdWlyZShcIi4uL3V0aWxzL2dldEludGVybWVkaWF0ZU51bWJlclwiKTtcbmNvbnN0IGdldFBvaW50c0JldHdlZW4gPSByZXF1aXJlKFwiLi9nZXRQb2ludHNCZXR3ZWVuXCIpO1xuXG5jb25zdCBudW1BcHByb3hQb2ludHMgPSA0MDtcblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBwb2ludCBmcm9tIGEgcG9zaXRpb24gdG8gdGhlIGJlemllciBjdXJ2ZSB0aGF0XG4gKiByZXByZXNlbnRzIHRoZSBjb25uZWN0aW9uLlxuICpcbiAqIElmIHRoZSBjbG9zZXN0IHBvaW50IGlzIG92ZXIgMTVweCBhd2F5IG51bGwgaXMgcmV0dXJuZWQuXG4gKlxuICogRWxzZSBpdCByZXR1cm5zIGFuIHBvaW50LlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldENsb3Nlc3RQb2ludE9uQ29ubmVjdGlvbihjLCBwb3NpdGlvbikge1xuICBpZiAoYy5wb2ludHMuaW5kZXhPZihudWxsKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgbGV0IGNsb3Nlc3RBcHByb3g7XG4gIGxldCBzZWNvbmRBcHByb3g7XG5cbiAgLyoqXG4gICAqIEZpbmRpbmcgdGhlIGluaXRpYWwgYXBwcm94aW1hdGlvbiBwb2ludHNcbiAgICovXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQXBwcm94UG9pbnRzOyBpICs9IDEpIHtcbiAgICBjb25zdCB0ID0gaSAvIChudW1BcHByb3hQb2ludHMgLSAxKTtcbiAgICBjb25zdCBiZXppZXJQb2ludCA9IGNhbGNCZXppZXJQb2ludEF0KGMsIGdldEludGVybWVkaWF0ZU51bWJlcigwLCAxLCB0KSk7XG5cbiAgICBjb25zdCBkaXN0YW5jZSA9IGNhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnMocG9zaXRpb24sIGJlemllclBvaW50KTtcbiAgICBjb25zdCBwb2ludCA9IHtcbiAgICAgIHg6IGJlemllclBvaW50LngsXG4gICAgICB5OiBiZXppZXJQb2ludC55LFxuICAgICAgZGlzdGFuY2UsXG4gICAgICB0LFxuICAgIH07XG5cbiAgICBpZiAoIWNsb3Nlc3RBcHByb3ggfHwgKGRpc3RhbmNlIDwgY2xvc2VzdEFwcHJveC5kaXN0YW5jZSkpIHtcbiAgICAgIHNlY29uZEFwcHJveCA9IGNsb3Nlc3RBcHByb3g7XG4gICAgICBjbG9zZXN0QXBwcm94ID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghc2Vjb25kQXBwcm94IHx8IChkaXN0YW5jZSA8IHNlY29uZEFwcHJveC5kaXN0YW5jZSkpIHtcbiAgICAgIHNlY29uZEFwcHJveCA9IHBvaW50O1xuICAgIH1cbiAgfVxuXG4gIGlmIChjbG9zZXN0QXBwcm94LmRpc3RhbmNlID4gMjI1KSB7IC8vIDE1cHhcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHBvaW50cyA9IGdldFBvaW50c0JldHdlZW4oYywgMjAsIGNsb3Nlc3RBcHByb3gudCwgc2Vjb25kQXBwcm94LnQpO1xuICBsZXQgY2xvc2VzdFBvaW50O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBwb2ludHNbaV0pO1xuICAgIGlmICghY2xvc2VzdFBvaW50IHx8IChkaXN0YW5jZSA8IGNsb3Nlc3RQb2ludC5kaXN0YW5jZSkpIHtcbiAgICAgIGNsb3Nlc3RQb2ludCA9IHtcbiAgICAgICAgeDogcG9pbnRzW2ldLngsXG4gICAgICAgIHk6IHBvaW50c1tpXS55LFxuICAgICAgICB0OiBwb2ludHNbaV0udCxcbiAgICAgICAgZGlzdGFuY2UsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjbG9zZXN0UG9pbnQ7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2dldENsb3Nlc3RQb2ludE9uQ29ubmVjdGlvbi5qcyIsImNvbnN0IGdldEludGVybWVkaWF0ZU51bWJlciA9IHJlcXVpcmUoXCIuLi91dGlscy9nZXRJbnRlcm1lZGlhdGVOdW1iZXJcIik7XG5jb25zdCBjYWxjQmV6aWVyUG9pbnRBdCA9IHJlcXVpcmUoXCIuL2NhbGNCZXppZXJQb2ludEF0XCIpO1xuXG4vKipcbiAqIGMgaXMgdGhlIGNvbm5lY3Rpb24uXG4gKiBuIGlzIHRoZSBudW1iZXIgb2YgcG9pbnRzLlxuICogdFN0YXJ0IGlzIHRoZSB0IHZhbHVlIG9mIHRoZSBmaXJzdCBwb2ludC5cbiAqIHRFbmQgaXMgdGhlIHQgdmFsdWUgb2YgdGhlIGxhc3QgcG9pbnQuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UG9pbnRzQmV0d2VlbihjLCBuLCB0U3RhcnQsIHRFbmQpIHtcbiAgY29uc3QgcG9pbnRzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpICs9IDEpIHtcbiAgICBjb25zdCB0ID0gZ2V0SW50ZXJtZWRpYXRlTnVtYmVyKHRTdGFydCwgdEVuZCwgKGkgLyBuKSk7XG4gICAgY29uc3QgcG9pbnQgPSBjYWxjQmV6aWVyUG9pbnRBdChjLCB0KTtcbiAgICBwb2ludHMucHVzaChwb2ludCk7XG4gIH1cblxuICByZXR1cm4gcG9pbnRzO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2dldFBvaW50c0JldHdlZW4uanMiLCJjb25zdCB7IGdldEFsbEhhbmRsZXMgfSA9IHJlcXVpcmUoXCIuL2dldEhhbmRsZXNcIik7XG5jb25zdCBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zID0gcmVxdWlyZShcIi4uL3V0aWxzL2NhbGNEaXN0YW5jZUJldHdlZW5Qb3NpdGlvbnNcIik7XG5jb25zdCB7IGdldFBvaW50QnlJZCB9ID0gcmVxdWlyZShcIi4uL3BvaW50cy9nZXRQb2ludHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0SGFuZGxlQXRQb3NpdGlvbihwb3NpdGlvbiwgZ2V0UG9pbnQpIHtcbiAgY29uc3QgaGFuZGxlcyA9IGdldEFsbEhhbmRsZXMoKTtcbiAgbGV0IGNsb3Nlc3RIYW5kbGU7XG4gIGxldCBjbG9zZXN0RGlzdGFuY2U7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBoYW5kbGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2VCZXR3ZWVuUG9zaXRpb25zKHBvc2l0aW9uLCBoYW5kbGVzW2ldKTtcbiAgICBpZiAoIWNsb3Nlc3REaXN0YW5jZSB8fCBkaXN0YW5jZSA8IGNsb3Nlc3REaXN0YW5jZSkge1xuICAgICAgY2xvc2VzdEhhbmRsZSA9IGhhbmRsZXNbaV07XG4gICAgICBjbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICB9XG4gIH1cblxuICBpZiAoY2xvc2VzdERpc3RhbmNlIDwgMjI1KSB7IC8vIDE1cHhcbiAgICByZXR1cm4gY2xvc2VzdEhhbmRsZTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2hhbmRsZXMvZ2V0SGFuZGxlQXRQb3NpdGlvbi5qcyIsImNvbnN0IHsgZ2V0R3VpZGVzT2ZUeXBlIH0gPSByZXF1aXJlKFwiLi4vZ3VpZGVzXCIpO1xuY29uc3QgZ2V0Q29udGV4dCA9IHJlcXVpcmUoXCIuLi8uLi9jYW52YXMvZ2V0Q29udGV4dFwiKTtcbmNvbnN0IGdldENvbm5lY3Rpb25Qb2ludHMgPSByZXF1aXJlKFwiLi4vLi4vY29ubmVjdGlvbnMvZ2V0Q29ubmVjdGlvblBvaW50c1wiKTtcbmNvbnN0IHsgZ2V0QWxsQ29ubmVjdGlvbnMgfSA9IHJlcXVpcmUoXCIuLi8uLi9jb25uZWN0aW9ucy9nZXRDb25uZWN0aW9uc1wiKTtcbmNvbnN0IHJlbmRlckhhbmRsZXMgPSByZXF1aXJlKFwiLi9yZW5kZXJIYW5kbGVzXCIpO1xuY29uc3QgeyByZW5kZXJMaW5lLCByZW5kZXJDdWJpY0JlemllciwgcmVuZGVyUXVhZHJhdGljQmV6aWVyIH0gPSByZXF1aXJlKFwiLi4vcHJpbWl0aXZlc1wiKTtcbmNvbnN0IHsgdHlwZXMsIGNvbG9ycyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlckNvbm5lY3Rpb25zKCkge1xuICBjb25zdCBjb25uZWN0aW9ucyA9IGdldEFsbENvbm5lY3Rpb25zKCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBwb2ludHMgPSBnZXRDb25uZWN0aW9uUG9pbnRzKGNvbm5lY3Rpb25zW2ldKTtcbiAgICBpZiAocG9pbnRzLmluZGV4T2YobnVsbCkgPT09IC0xKSB7IC8vIEFsbCBwb2ludHMgZXhpc3RcbiAgICAgIHJlbmRlckN1YmljQmV6aWVyKHBvaW50cyk7XG4gICAgfSBlbHNlIGlmIChwb2ludHNbMF0gJiYgcG9pbnRzWzNdKSB7IC8vIE5vdCBhIHN0cmF5IGNvbm5lY3Rpb25cbiAgICAgIC8vIFN0cmFpZ2h0IGxpbmVcbiAgICAgIGlmICghcG9pbnRzWzFdICYmICFwb2ludHNbMl0pIHtcbiAgICAgICAgcmVuZGVyTGluZShwb2ludHNbMF0sIHBvaW50c1szXSk7XG4gICAgICB9IGVsc2UgeyAvLyAzIHBvaW50cyBleGlzdFxuICAgICAgICByZW5kZXJRdWFkcmF0aWNCZXppZXIocG9pbnRzLmZpbHRlcihwID0+IHApKTsgLy8gV2lsbCBoYXZlIDMgcG9pbnRzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRHJhd2luZyB0aGUgaGFuZGxlcyAoYW5kIGhhbmRsZSBsaW5lcylcbiAgICByZW5kZXJIYW5kbGVzKGNvbm5lY3Rpb25zW2ldKTtcbiAgfVxuXG4gIGdldEd1aWRlc09mVHlwZSh0eXBlcy5DT05OKS5mb3JFYWNoKChndWlkZSkgPT4ge1xuICAgIHJlbmRlckN1YmljQmV6aWVyKGd1aWRlLCAxLCBjb2xvcnMuUFJJTUFSWSk7XG4gIH0pO1xuXG4gIGdldEd1aWRlc09mVHlwZSh0eXBlcy5MSU5FKS5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgY29uc3QgY3R4ID0gZ2V0Q29udGV4dCgpO1xuXG4gICAgcmVuZGVyTGluZShsaW5lLmZyb20sIGxpbmUudG8sIGNvbG9ycy5QUklNQVJZLCAxKTtcbiAgfSk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlbmRlci9jb25uZWN0aW9ucy9yZW5kZXJDb25uZWN0aW9ucy5qcyIsImNvbnN0IHsgdHlwZXMgfSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5cbmNvbnN0IHR5cGVBcnIgPSBbXTtcblxue1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModHlwZXMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0eXBlQXJyLnB1c2godHlwZXNba2V5c1tpXV0pO1xuICB9XG59XG5cbmV4cG9ydHMuaXNWYWxpZFR5cGUgPSBmdW5jdGlvbiBpc1ZhbGlkVHlwZSgpIHtcbiAgcmV0dXJuIHR5cGVBcnIuaW5kZXhPZih0eXBlKSA+IC0xO1xufVxuXG5leHBvcnRzLmNoZWNrVHlwZSA9IGZ1bmN0aW9uIGNoZWNrVHlwZSh0eXBlKSB7XG4gIGlmICh0eXBlQXJyLmluZGV4T2YodHlwZSkgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHR5cGUgJyR7dHlwZX0nLmApO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMvY2hlY2tUeXBlLmpzIiwiY29uc3QgeyBnZXRIYW5kbGVCeUlkIH0gPSByZXF1aXJlKFwiLi4vLi4vaGFuZGxlcy9nZXRIYW5kbGVzXCIpO1xuY29uc3QgeyBnZXRTZWxlY3RlZE9mVHlwZSB9ID0gcmVxdWlyZShcIi4uLy4uL3NlbGVjdGlvblwiKTtcbmNvbnN0IHsgZ2V0UG9pbnRCeUlkIH0gPSByZXF1aXJlKFwiLi4vLi4vcG9pbnRzL2dldFBvaW50c1wiKTtcbmNvbnN0IHsgcmVuZGVyQ2lyY2xlLCByZW5kZXJMaW5lIH0gPSByZXF1aXJlKFwiLi4vcHJpbWl0aXZlc1wiKTtcbmNvbnN0IGdldENvbnRleHQgPSByZXF1aXJlKFwiLi4vLi4vY2FudmFzL2dldENvbnRleHRcIik7XG5jb25zdCB7IGNvbG9ycyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxuY29uc3QgeyBQUklNQVJZLCBQUklNQVJZX0xJR0hUIH0gPSBjb2xvcnM7XG5cbmZ1bmN0aW9uIHJlbmRlckhhbmRsZShwb2ludCwgaGFuZGxlLCBvcHRzKSB7XG4gIGNvbnN0IGlzSGFuZGxlU2VsZWN0ZWQgPSBnZXRTZWxlY3RlZE9mVHlwZShcIl9fSEFORExFXCIpLmluZGV4T2YoaGFuZGxlLmlkKSA+IC0xO1xuXG4gIC8qKiBcbiAgICogRHJhd2luZyB0aGUgbGluZSBiZXR3ZWVuIHRoZSBwb2ludCBhbmQgaGFuZGxlLlxuICAgKlxuICAgKiBDaGVjayBpcyBjb25uZWN0aW9uIHNlbGVjdGVkIGFzd2VsbCB3aGVuIGltcGxlbWVudGVkLlxuICAgKi9cbiAgY29uc3QgbGluZUNvbG9yID0gaXNIYW5kbGVTZWxlY3RlZCA/IFBSSU1BUllfTElHSFQgOiBcIiNhYWFcIjtcbiAgcmVuZGVyTGluZShwb2ludCwgaGFuZGxlLCBsaW5lQ29sb3IsIDEpO1xuXG5cbiAgLy8gRHJhd2luZyB0aGUgaGFuZGxlIGl0c2VsZlxuICBjb25zdCBoYW5kbGVDb2xvciA9IGlzSGFuZGxlU2VsZWN0ZWQgPyBQUklNQVJZIDogXCIjOTk5XCI7XG4gIGNvbnN0IGhhbmRsZVNpemUgPSBpc0hhbmRsZVNlbGVjdGVkID8gNCA6IDM7XG4gIHJlbmRlckNpcmNsZShoYW5kbGUsIGhhbmRsZVNpemUsIGhhbmRsZUNvbG9yKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlckhhbmRsZXMoY29ubmVjdGlvbikge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3Rpb24uaGFuZGxlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChjb25uZWN0aW9uLmhhbmRsZXNbaV0gJiYgY29ubmVjdGlvbi5wb2ludHNbaV0pIHtcblxuICAgICAgY29uc3QgaGFuZGxlID0gZ2V0SGFuZGxlQnlJZChjb25uZWN0aW9uLmhhbmRsZXNbaV0pO1xuICAgICAgY29uc3QgcG9pbnQgPSBnZXRQb2ludEJ5SWQoY29ubmVjdGlvbi5wb2ludHNbaV0pO1xuXG4gICAgICByZW5kZXJIYW5kbGUocG9pbnQsIGhhbmRsZSk7XG4gICAgfVxuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlbmRlci9jb25uZWN0aW9ucy9yZW5kZXJIYW5kbGVzLmpzIiwiY29uc3QgeyBnZXRHdWlkZXNPZlR5cGUgfSA9IHJlcXVpcmUoXCIuLi9ndWlkZXNcIik7XG5jb25zdCB7IGdldFNlbGVjdGVkT2ZUeXBlIH0gPSByZXF1aXJlKFwiLi4vLi4vc2VsZWN0aW9uXCIpO1xuY29uc3QgeyBnZXRBbGxQb2ludHMgfSA9IHJlcXVpcmUoXCIuLi8uLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyByZW5kZXJDaXJjbGUgfSA9IHJlcXVpcmUoXCIuLi9wcmltaXRpdmVzXCIpO1xuY29uc3QgeyBjb2xvcnMsIHR5cGVzIH0gPSByZXF1aXJlKFwiLi4vLi4vY29uc3RhbnRzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlclBvaW50cygpIHtcbiAgY29uc3QgcG9pbnRzID0gZ2V0QWxsUG9pbnRzKCk7XG4gIGNvbnN0IHNlbGVjdGVkUG9pbnRzID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZXMuUE9JTlQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGlzUG9pbnRTZWxlY3RlZCA9IHNlbGVjdGVkUG9pbnRzLmluZGV4T2YocG9pbnRzW2ldLmlkKSA+IC0xO1xuICAgIGlmIChpc1BvaW50U2VsZWN0ZWQpIHtcbiAgICAgIHJlbmRlckNpcmNsZShwb2ludHNbaV0sIDUsIGNvbG9ycy5XSElURSwgeyBjb2xvcjogY29sb3JzLlBSSU1BUlksIHdpZHRoOiAyIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXJDaXJjbGUocG9pbnRzW2ldLCA0LCBjb2xvcnMuUFJJTUFSWSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcG9pbnRHdWlkZXMgPSBnZXRHdWlkZXNPZlR5cGUodHlwZXMuUE9JTlQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50R3VpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgcmVuZGVyQ2lyY2xlKHBvaW50R3VpZGVzW2ldLCA0LCBjb2xvcnMuUFJJTUFSWSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9yZW5kZXIvcG9pbnRzL3JlbmRlclBvaW50cy5qcyIsImNvbnN0IHsgdHlwZXMgfSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5cbmNvbnN0IHsgUE9JTlQsIENPTk4sIEhBTkRMRSB9ID0gdHlwZXM7XG5cbmNvbnN0IHJlc29sdmVycyA9IHtcbiAgW1BPSU5UXTogIHggPT4geC5pZCxcbiAgW0hBTkRMRV06IHggPT4geC5pZCxcbiAgW0NPTk5dOiAgIHggPT4geC5jb25uZWN0aW9uLmlkLFxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpZHMgb2Ygb2JqZWN0IGZldGNoZWQgdGhyb3VnaCB0aGVcbiAqIHJlc29sdmVPYmplY3RBdFBvc2l0aW9uIGZ1bmN0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlc29sdmVPYmplY3RJZCh0eXBlLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHJlc29sdmVyc1t0eXBlXSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHR5cGU6ICcke3R5cGV9Jy5gKTtcbiAgfVxuXG4gIHJldHVybiByZXNvbHZlcnNbdHlwZV0odmFsdWUpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3Jlc29sdmUvcmVzb2x2ZU9iamVjdElkLmpzIiwiY29uc3QgcmVzb2x2ZUFjdGlvbiA9IHJlcXVpcmUoXCIuLi9yZXNvbHZlQWN0aW9uXCIpO1xuY29uc3Qgc3RvcmUgPSByZXF1aXJlKFwiLi4vLi4vc3RvcmVcIik7XG5jb25zdCByZW5kZXIgPSByZXF1aXJlKFwiLi4vLi4vcmVuZGVyL3JlbmRlclwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB1bmRvKCkge1xuICBjb25zdCB7IGhpc3RvcnkgfSA9IHN0b3JlLmdldFN0YXRlKCkuaGlzdG9yeTtcbiAgaWYgKCFoaXN0b3J5Lmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGFjdGlvbiA9IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlVORE9cIiB9KTtcblxuICByZXNvbHZlQWN0aW9uKGFjdGlvbiwgeyB1bmRvOiB0cnVlIH0pO1xuICByZW5kZXIobnVsbCwgeyB1c2VMYXN0UG9zaXRpb246IHRydWUgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9oaXN0b3J5L3VuZG8uanMiLCIvLyBDb21tb24gYWN0aW9uc1xuY29uc3QgbW92ZSA9IHJlcXVpcmUoXCIuL2NvbW1vbi9tb3ZlXCIpO1xuXG4vLyBQb2ludCBhY3Rpb25zXG5jb25zdCBhZGRQb2ludCA9IHJlcXVpcmUoXCIuL3BvaW50L2FkZFBvaW50XCIpO1xuY29uc3QgYWRkUGVuUG9pbnQgPSByZXF1aXJlKFwiLi9wb2ludC9hZGRQZW5Qb2ludFwiKTtcblxuLy8gQ29ubmVjdGlvbiBhY3Rpb25zXG5jb25zdCBhZGRDb25uZWN0aW9uID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbi9hZGRDb25uZWN0aW9uXCIpO1xuY29uc3Qgc3BsaXRDb25uZWN0aW9uID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbi9zcGxpdENvbm5lY3Rpb25cIik7XG5jb25zdCBzcGxpdExpbmVDb25uZWN0aW9uID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbi9zcGxpdExpbmVDb25uZWN0aW9uXCIpO1xuY29uc3QgY29ubmVjdFBvaW50cyA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb24vY29ubmVjdFBvaW50c1wiKTtcbmNvbnN0IGFkZFN0cmF5Q29ubmVjdGlvbiA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb24vYWRkU3RyYXlDb25uZWN0aW9uXCIpO1xuY29uc3QgY29tcGxldGVTdHJheUNvbm5lY3Rpb24gPSByZXF1aXJlKFwiLi9jb25uZWN0aW9uL2NvbXBsZXRlU3RyYXlDb25uZWN0aW9uXCIpO1xuY29uc3QgcmVwbGFjZUNvbm5lY3Rpb25Qb2ludElkcyA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb24vcmVwbGFjZUNvbm5lY3Rpb25Qb2ludElkc1wiKTtcblxuLy8gSGFuZGxlIGFjdGlvbnNcbmNvbnN0IGFkZEhhbmRsZXMgPSByZXF1aXJlKFwiLi9oYW5kbGUvYWRkSGFuZGxlc1wiKTtcblxuY29uc3QgcmV2ZXJzZSA9ICh7IHVuZG8sIHJlZG8gfSkgPT4gKHtcbiAgcmVkbzogdW5kbyxcbiAgdW5kbzogcmVkbyxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5mcmVlemUoe1xuICAvLyBDb21tb25cbiAgTU9WRTogbW92ZSxcblxuICAvLyBQb2ludCBhY3Rpb25zXG4gIEFERF9QT0lOVDogYWRkUG9pbnQsXG4gIERFTEVURV9QT0lOVDogcmV2ZXJzZShhZGRQb2ludCksXG4gIEFERF9QRU5fUE9JTlQ6IGFkZFBlblBvaW50LFxuXG4gIC8vIENvbm5lY3Rpb24gYWN0aW9uc1xuICBBRERfQ09OTkVDVElPTjogYWRkQ29ubmVjdGlvbixcbiAgREVMRVRFX0NPTk5FQ1RJT046IHJldmVyc2UoYWRkQ29ubmVjdGlvbiksXG4gIFNQTElUX0NPTk5FQ1RJT046IHNwbGl0Q29ubmVjdGlvbixcbiAgU1BMSVRfTElORV9DT05ORUNUSU9OOiBzcGxpdExpbmVDb25uZWN0aW9uLFxuICBDT05ORUNUX1BPSU5UUzogY29ubmVjdFBvaW50cyxcbiAgQUREX1NUUkFZX0NPTk5FQ1RJT046IGFkZFN0cmF5Q29ubmVjdGlvbixcbiAgQ09NUExFVEVfU1RSQVlfQ09OTkVDVElPTjogY29tcGxldGVTdHJheUNvbm5lY3Rpb24sXG4gIFJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFM6IHJlcGxhY2VDb25uZWN0aW9uUG9pbnRJZHMsXG5cbiAgLy8gSGFuZGxlIGFjdGlvbnNcbiAgQUREX0hBTkRMRVM6IGFkZEhhbmRsZXMsXG4gIERFTEVURV9IQU5ETEVTOiByZXZlcnNlKGFkZEhhbmRsZXMpLFxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9hY3Rpb25zLmpzIiwiY29uc3QgdG9BY3Rpb24gPSAoc2VsZWN0aW9uLCBwb3NpdGlvbkNoYW5nZSkgPT4gKHtcbiAgdHlwZTogXCJNT1ZFXCIsXG4gIHBheWxvYWQ6IHtcbiAgICBzZWxlY3Rpb24sXG4gICAgcG9zaXRpb25DaGFuZ2UsXG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlZG86ICh7IHNlbGVjdGlvbiwgcG9zaXRpb25DaGFuZ2UgfSkgPT4gdG9BY3Rpb24oc2VsZWN0aW9uLCBwb3NpdGlvbkNoYW5nZSksXG4gIHVuZG86ICh7IHNlbGVjdGlvbiwgcG9zaXRpb25DaGFuZ2UgfSkgPT4gdG9BY3Rpb24oc2VsZWN0aW9uLCB7XG4gICAgeDogcG9zaXRpb25DaGFuZ2UueCAqIC0xLFxuICAgIHk6IHBvc2l0aW9uQ2hhbmdlLnkgKiAtMSxcbiAgfSksXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2FjdGlvbnMvY29tbW9uL21vdmUuanMiLCJjb25zdCBpc1ZhbGlkUG9zaXRpb24gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvaXNWYWxpZFBvc2l0aW9uXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVkbzogKHBvaW50KSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24ocG9pbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBvc2l0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoIXBvaW50LmlkIHx8IHR5cGVvZiBwb2ludC5pZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBvaW50IGlkLiBFeHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHtwb2ludC5pZH0nLmApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgICAgcGF5bG9hZDogcG9pbnQsXG4gICAgfTtcbiAgfSxcbiAgdW5kbzogKHsgaWQgfSkgPT4ge1xuICAgIGlmICghaWQgfHwgdHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcG9pbnQgaWQuIEV4cGVjdGVkIHN0cmluZyBidXQgZ290ICcke2lkfScuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiREVMRVRFX1BPSU5UXCIsXG4gICAgICBwYXlsb2FkOiBpZCxcbiAgICB9O1xuICB9LFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hY3Rpb25zL3BvaW50L2FkZFBvaW50LmpzIiwiY29uc3QgeyB0eXBlcyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxuLyoqXG4gKiBcIlBlbiBwb2ludFwiIGp1c3QgbWVhbnMgdGhhdCB0aGUgcG9pbnQgd2FzIGRyYWdnZWQvY29ubmVjdGVkXG4gKiBvciBzb21lIG90aGVyIHdhcyBhcHBsaWVkIHRvIGl0IG90aGVyIHRoYW4gY3JlYXRpbmcgYSBzaW5nbGVcbiAqIHBvaW50LlxuICpcbiAqIEkgY2FuJ3QgZmluZCBhIGJldHRlciBuYW1lIGZvciB0aGlzLCBJJ20gc29ycnkuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWRkUGVuUG9pbnQoZGF0YSkge1xuICBjb25zdCB7XG4gICAgcG9pbnQsXG4gICAgbmV3SGFuZGxlLFxuICAgIG5ld0Nvbm5lY3Rpb24sXG4gICAgbW92ZWRIYW5kbGUsXG4gICAgc3RyYXlDb25uZWN0aW9uLFxuICAgIGNvbXBsZXRlZENvbm5lY3Rpb24sXG4gICAgbmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSwgLy8gRG9uJ3QganVkZ2UgbWUuXG4gICAgbGluZUNvbm5lY3Rpb24sXG4gICAgbGluZUNvbm5lY3Rpb25IYW5kbGVzLFxuICB9ID0gZGF0YTtcblxuICBjb25zdCBhY3Rpb25zID0gW1xuICAgIHsgLy8gVGhlIGluaXRpYWwgcG9pbnQgdGhhdCB3YXMgY3JlYXRlZCB3aGVuIHdlIGNsaWNrZWQuXG4gICAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgICAgZGF0YTogcG9pbnQsXG4gICAgfSxcbiAgXTtcblxuICAvKipcbiAgICogVGhlIGhhbmRsZSBhbmQgY29ubmVjdGlvbiBmb3IgdGhlIE5FVyBzdHJheSBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBUaGlzIGlzIE5PVCB0aGUgaGFuZGxlIGZvciB0aGUgY29ubmVjdGlvbiB0aGF0IHRoaXMgcG9pbnRcbiAgICogY29tcGxldGVzIChpZiBpdCBkb2VzKS5cbiAgICovXG4gIGlmIChuZXdIYW5kbGUpIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgICAgZGF0YTogbmV3Q29ubmVjdGlvbixcbiAgICB9KTtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgICAgZGF0YTogW25ld0hhbmRsZV0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgY29ubmVjdGlvbiBjcmVhdGVkIGlmIHRoZXJlIHdhcyBubyBzdHJheSBjb25uZWN0aW9uXG4gICAqIG9uIHRoZSBzZWxlY3RlZCBwb2ludCB3aGVuIHRoZSBuZXcgcG9pbnQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIFRoaXMgY29ubmVjdGlvbiB3aWxsIG5vdCBoYXZlIGEgcDIgaGFuZGxlLCBidXQgd2lsbCBoYXZlIGEgcDMgaGFuZGxlXG4gICAqIGlmIHRoZSBtb3VzZSB3YXMgbW92ZWQuXG4gICAqL1xuICBpZiAobGluZUNvbm5lY3Rpb24pIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgICAgZGF0YTogbGluZUNvbm5lY3Rpb24sXG4gICAgfSk7XG5cbiAgICAvLyBUaGUgcDMgaGFuZGxlIGlmIHRoZSBtb3VzZSB3YXMgbW92ZWQuXG4gICAgaWYgKGxpbmVDb25uZWN0aW9uSGFuZGxlcykge1xuICAgICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgICAgICBkYXRhOiBbbGluZUNvbm5lY3Rpb25IYW5kbGVzXSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBzdHJheSBhY3Rpb24gdGhhdCB3YXMgY29tcGxldGVkLlxuICAgKlxuICAgKiBUaGUgbmV3IGhhbmRsZSBpZCAoaWYgcHJlc2VudCkgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGVcbiAgICogY29tcGxldGVkQ29ubmVjdGlvbiBvYmplY3QuXG4gICAqL1xuICBpZiAoY29tcGxldGVkQ29ubmVjdGlvbikge1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgb2xkQ29ubmVjdGlvbjogc3RyYXlDb25uZWN0aW9uLFxuICAgICAgICBuZXdDb25uZWN0aW9uOiBjb21wbGV0ZWRDb25uZWN0aW9uLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVGhlIGhhbmRsZSB0aGF0IHdhcyBwcmVzZW50IG9uIHRoZSBjb21wbGV0ZWRDb25uZWN0aW9uIChwMikuXG4gICAgaWYgKG1vdmVkSGFuZGxlKSB7XG4gICAgICBjb25zdCB7IGlkLCBwb3NpdGlvbkNoYW5nZSB9ID0gbW92ZWRIYW5kbGU7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgW3R5cGVzLkhBTkRMRV06IFtpZF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRoZSBuZXcgaGFuZGxlIGZvciB0aGUgY29tcGxldGVkIGNvbm5lY3Rpb24gKHAzKS5cbiAgICBpZiAoIW5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGUpIHtcbiAgICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgICAgZGF0YTogW25ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGVdLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9wb2ludC9hZGRQZW5Qb2ludC5qcyIsImNvbnN0IHsgdG9Db25uZWN0aW9uSWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9jb25uZWN0aW9ucy9jb25uZWN0aW9uSWRcIik7XG5cbmV4cG9ydHMucmVkbyA9ICh7IHBvaW50cywgaGFuZGxlcywgaWQgfSkgPT4gKHtcbiAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICBwYXlsb2FkOiB7XG4gICAgaWQsXG4gICAgcG9pbnRzLFxuICAgIGhhbmRsZXMsXG4gIH0sXG59KTtcblxuZXhwb3J0cy51bmRvID0gKHsgaWQgfSkgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiREVMRVRFX0NPTk5FQ1RJT05cIixcbiAgICBwYXlsb2FkOiBpZCxcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vYWRkQ29ubmVjdGlvbi5qcyIsIm1vZHVsZS5leHBvcnRzID0gKHsgY29ubmVjdGlvbiwgbmV3UG9pbnRzLCBpZHMgfSkgPT4ge1xuICBjb25zdCBhY3Rpb25zID0gW107XG4gIFxuICBjb25zdCBbIGFJZCwgYklkIF0gPSBjb25uZWN0aW9uLnBvaW50czsgLy8gVGhlc2UgYXJlIHRoZSBwb2ludCBpZHMsIG5vdCB0aGUgYWN0dWFsIHBvaW50cy5cblxuICAvKipcbiAgICogcDAgaXMgYSAodGhlIGxlZnQgaGFuZCBwb2ludClcbiAgICogcDYgaXMgYiAodGhlIHJpZ2h0IGhhbmQgcG9pbnQpXG4gICAqIHAzIGlzIHRoZSBuZXcgcG9pbnQuXG4gICAqXG4gICAqIFdlIGRvbid0IG5lZWQgdG8gdXNlIHAwIG9yIHA2LCB0aGV5J3JlIHRoZSBleGFjdCBzYW1lIGFzIGEgYW5kIGIuXG4gICAqXG4gICAqIFRoZSBvdGhlciBwb2ludHMgKHAxLCBwMiwgcDQsIHA1KSBhcmUgdGhlIGhhbmRsZXMuXG4gICAqL1xuICBjb25zdCBbIHAwLCBwMSwgcDIsIHAzLCBwNCwgcDUsIHA2IF0gPSBuZXdQb2ludHM7IC8vIEZyb20gdGhlIHNwbGl0Q3ViaWNCZXppZXIgZnVuY3Rpb25cblxuICAvLyBXZSByZW1vdmUgdGhlIG9sZCBjb25uZWN0aW9uXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJERUxFVEVfQ09OTkVDVElPTlwiLFxuICAgIGRhdGE6IGNvbm5lY3Rpb24sXG4gIH0pO1xuXG4gIC8vIEFuZCBhZGQgdGhlIG5ldyBwb2ludFxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX1BPSU5UXCIsXG4gICAgZGF0YTogcDMsXG4gIH0pXG5cbiAgLyoqXG4gICAqIE5vdGljZSBob3cgd2UgZ2l2ZSB0aGUgaWRzIG9mIHRoZSBwb2ludHMgZm9yIHRoZSBmaXJzdFxuICAgKiBhbmQgbGFzdCBwYXJhbWV0ZXIsIG5vdCB0aGUgYWN0dWFsIHBvaW50cyB0aGVtc2VsdmVzLlxuICAgKlxuICAgKiBwMSwgcDIsIHAzLCBwNCBhcmUgYWN0dWFsIHBvaW50cyBidXQgaGF2ZSBiZWVuIGdpdmVuIGlkcyBieVxuICAgKiB0aGUgbGlzdGVuZXIuXG4gICAqL1xuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiB7XG4gICAgICBpZDogaWRzWzBdLFxuICAgICAgcG9pbnRzOiBbYUlkLCBwMy5pZF0sXG4gICAgICBoYW5kbGVzOiBbcDEuaWQsIHAyLmlkXSxcbiAgICB9XG4gIH0pO1xuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiB7XG4gICAgICBpZDogaWRzWzFdLFxuICAgICAgcG9pbnRzOiBbcDMuaWQsIGJJZF0sXG4gICAgICBoYW5kbGVzOiBbcDQuaWQsIHA1LmlkXSxcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEFkZGluZyB0aGUgaGFuZGxlc1xuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICBkYXRhOiBbcDEsIHAyLCBwNCwgcDVdLFxuICB9KTtcblxuICByZXR1cm4gYWN0aW9ucztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vc3BsaXRDb25uZWN0aW9uLmpzIiwibW9kdWxlLmV4cG9ydHMgPSAoeyBpZHMsIGNvbm5lY3Rpb24sIG5ld1BvaW50IH0pID0+IHtcbiAgY29uc3QgYWN0aW9ucyA9IFtdO1xuICBcbiAgY29uc3QgWyBhSWQsIGJJZCBdID0gY29ubmVjdGlvbi5wb2ludHM7IC8vIFRoZXNlIGFyZSB0aGUgcG9pbnQgaWRzLCBub3QgdGhlIGFjdHVhbCBwb2ludHMuXG5cbiAgLy8gV2UgcmVtb3ZlIHRoZSBvbGQgY29ubmVjdGlvblxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiREVMRVRFX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiBjb25uZWN0aW9uLFxuICB9KTtcblxuICAvLyBBbmQgYWRkIHRoZSBuZXcgcG9pbnRcbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgIGRhdGE6IG5ld1BvaW50LFxuICB9KVxuXG4gIC8vIEFkZGluZyB0aGUgdHdvIG5ldyBjb25uZWN0aW9uc1xuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICBkYXRhOiB7XG4gICAgICBpZDogaWRzWzBdLFxuICAgICAgcG9pbnRzOiBbYUlkLCBuZXdQb2ludC5pZF0sXG4gICAgICBoYW5kbGVzOiBbbnVsbCwgbnVsbF0sXG4gICAgfSxcbiAgfSk7XG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBpZHNbMV0sXG4gICAgICBwb2ludHM6IFtuZXdQb2ludC5pZCwgYklkXSxcbiAgICAgIGhhbmRsZXM6IFtudWxsLCBudWxsXSxcbiAgICB9LFxuICB9KTtcblxuXG4gIHJldHVybiBhY3Rpb25zO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2FjdGlvbnMvY29ubmVjdGlvbi9zcGxpdExpbmVDb25uZWN0aW9uLmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb25uZWN0UG9pbnRzKHtcbiAgY29ubmVjdGlvbixcbiAgaGFuZGxlcyxcbiAgc3RyYXlDb25uZWN0aW9uLFxuICBzdHJheUNvbm5lY3Rpb25IYW5kbGVcbn0pIHtcbiAgY29uc3QgYWN0aW9ucyA9IFtdO1xuXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIGRhdGE6IGNvbm5lY3Rpb24sXG4gIH0pO1xuXG4gIGlmIChoYW5kbGVzKSB7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgIGRhdGE6IGhhbmRsZXMsXG4gICAgfSk7XG4gIH1cblxuICBpZiAoc3RyYXlDb25uZWN0aW9uKSB7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIixcbiAgICAgIGRhdGE6IHN0cmF5Q29ubmVjdGlvbixcbiAgICB9KTtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogXCJBRERfSEFORExFU1wiLFxuICAgICAgZGF0YTogW3N0cmF5Q29ubmVjdGlvbkhhbmRsZV0sXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gYWN0aW9ucztcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9jb25uZWN0aW9uL2Nvbm5lY3RQb2ludHMuanMiLCJtb2R1bGUuZXhwb3J0cyA9ICh7IHBvaW50SWQsIGNvbm5lY3Rpb25JZCwgaGFuZGxlSWQsIGhhbmRsZVBvc2l0aW9uIH0pID0+IChbXG4gIHtcbiAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgZGF0YToge1xuICAgICAgaWQ6IGNvbm5lY3Rpb25JZCxcbiAgICAgIHBvaW50czogW3BvaW50SWQsIG51bGxdLFxuICAgICAgaGFuZGxlczogW2hhbmRsZUlkLCBudWxsXSxcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcIkFERF9IQU5ETEVTXCIsXG4gICAgZGF0YTogW3tcbiAgICAgIHg6IGhhbmRsZVBvc2l0aW9uLngsXG4gICAgICB5OiBoYW5kbGVQb3NpdGlvbi55LFxuICAgICAgaWQ6IGhhbmRsZUlkLFxuICAgIH1dLFxuICB9XG5dKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vYWRkU3RyYXlDb25uZWN0aW9uLmpzIiwiY29uc3QgeyBnZXRIYW5kbGVCeUlkIH0gPSByZXF1aXJlKFwiLi4vLi4vaGFuZGxlcy9nZXRIYW5kbGVzXCIpO1xuY29uc3QgZ2V0UG9zRGlmZmVyZW5jZSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9nZXRQb3NEaWZmZXJlbmNlXCIpO1xuY29uc3QgeyB0eXBlcyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoeyBoYW5kbGVJZCwgbmV3UG9pbnRzLCBwb2ludElkcywgY29ubmVjdGlvbiB9KSA9PiB7XG4gIGNvbnN0IGFjdGlvbnMgPSBbXTtcbiAgY29uc3QgWyBwMCwgcDEsIHAyLCBwMyBdID0gbmV3UG9pbnRzO1xuXG4gIGFjdGlvbnMucHVzaCh7XG4gICAgLy8gcG9pbnRJZHMgaXMgbG9vc2VseSBkZWZpbmVkIGFzIHBvaW50IGFuZCBoYW5kbGUgaWRzIGhlcmUuXG4gICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgZGF0YToge1xuICAgICAgbmV3Q29ubmVjdGlvbjoge1xuICAgICAgICBpZDogY29ubmVjdGlvbi5pZCxcbiAgICAgICAgcG9pbnRzOiBbXG4gICAgICAgICAgY29ubmVjdGlvbi5wb2ludHNbMF0sXG4gICAgICAgICAgcG9pbnRJZHNbM10sXG4gICAgICAgIF0sXG4gICAgICAgIGhhbmRsZXM6IFtcbiAgICAgICAgICBjb25uZWN0aW9uLmhhbmRsZXNbMF0sXG4gICAgICAgICAgcG9pbnRJZHNbMl0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgb2xkQ29ubmVjdGlvbjogY29ubmVjdGlvbixcbiAgICB9LFxuICB9KTtcblxuICAvLyBUaGUgcG9pbnQgYXQgdGhlIGNsaWNrZWQgcG9zaXRpb25cbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIkFERF9QT0lOVFwiLFxuICAgIGRhdGE6IHsgLi4ucDMsIGlkOiBwb2ludElkc1szXSB9XG4gIH0pO1xuXG4gIC8vIFRoZSBoYW5kbGUgZm9yIHRoZSBjbGlja2VkIHBvc2l0aW9uIHBvaW50IChzdGF0ZW1lbnQgYWJvdmUpLlxuICBhY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICBkYXRhOiBbeyAuLi5wMiwgaWQ6IHBvaW50SWRzWzJdIH1dLFxuICB9KTtcblxuICAvLyBUaGUgaGFuZGxlIHRoYXQgd2FzIHByZXNlbnQgb24gdGhlIHN0cmF5IGNvbm5lY3Rpb25cbiAgYWN0aW9ucy5wdXNoKHtcbiAgICB0eXBlOiBcIk1PVkVcIixcbiAgICBkYXRhOiB7XG4gICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgW3R5cGVzLkhBTkRMRV06IFtoYW5kbGVJZF0sXG4gICAgICB9LFxuICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZ2V0SGFuZGxlQnlJZChjb25uZWN0aW9uLmhhbmRsZXNbMF0pLCBwMSksXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2FjdGlvbnMvY29ubmVjdGlvbi9jb21wbGV0ZVN0cmF5Q29ubmVjdGlvbi5qcyIsImNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uLy4uL3N0b3JlXCIpO1xuXG5leHBvcnRzLnVuZG8gPSAoZGF0YSkgPT4ge1xuICBjb25zdCB7IG9sZENvbm5lY3Rpb24gfSA9IGRhdGE7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJSRVBMQUNFX0NPTk5FQ1RJT05fUE9JTlRfSURTXCIsXG4gICAgcGF5bG9hZDogb2xkQ29ubmVjdGlvbixcbiAgfTtcbn07XG5cbmV4cG9ydHMucmVkbyA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IHsgbmV3Q29ubmVjdGlvbiB9ID0gZGF0YTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIixcbiAgICBwYXlsb2FkOiBuZXdDb25uZWN0aW9uLFxuICB9O1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9hY3Rpb25zL2Nvbm5lY3Rpb24vcmVwbGFjZUNvbm5lY3Rpb25Qb2ludElkcy5qcyIsImNvbnN0IGlzVmFsaWRQb3NpdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9pc1ZhbGlkUG9zaXRpb25cIik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZWRvOiAoaGFuZGxlcykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFuZGxlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKCFpc1ZhbGlkUG9zaXRpb24oaGFuZGxlc1tpXSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoYW5kbGUuXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWhhbmRsZXNbaV0uaWQgfHwgdHlwZW9mIGhhbmRsZXNbaV0uaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhhbmRsZSBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7aGFuZGxlc1tpXS5pZH0nLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIkFERF9IQU5ETEVTXCIsXG4gICAgICBwYXlsb2FkOiBoYW5kbGVzLFxuICAgIH07XG4gIH0sXG4gIHVuZG86IChoYW5kbGVzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoYW5kbGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAoIWhhbmRsZXNbaV0uaWQgfHwgdHlwZW9mIGhhbmRsZXNbaV0uaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhhbmRsZSBpZC4gRXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7aGFuZGxlc1tpXS5pZH0nLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIkRFTEVURV9IQU5ETEVTXCIsXG4gICAgICBwYXlsb2FkOiBoYW5kbGVzLm1hcCgoeyBpZCB9KSA9PiBpZCksXG4gICAgfTtcbiAgfSxcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9oYW5kbGUvYWRkSGFuZGxlcy5qcyIsImNvbnN0IHJlc29sdmVBY3Rpb24gPSByZXF1aXJlKFwiLi4vcmVzb2x2ZUFjdGlvblwiKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uLy4uL3N0b3JlXCIpO1xuY29uc3QgcmVuZGVyID0gcmVxdWlyZShcIi4uLy4uL3JlbmRlci9yZW5kZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVkbygpIHtcbiAgY29uc3QgeyBmdXR1cmUgfSA9IHN0b3JlLmdldFN0YXRlKCkuaGlzdG9yeTtcbiAgaWYgKCFmdXR1cmUubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYWN0aW9uID0gZnV0dXJlW2Z1dHVyZS5sZW5ndGggLSAxXTtcbiAgcmVzb2x2ZUFjdGlvbihhY3Rpb24sIHsgdW5kbzogZmFsc2UgfSk7XG4gIFxuICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiUkVET1wiIH0pO1xuICByZW5kZXIobnVsbCwgeyB1c2VMYXN0UG9zaXRpb246IHRydWUgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYWN0aW9ucy9oaXN0b3J5L3JlZG8uanMiLCJjb25zdCB7IGdldENvbm5lY3Rpb25CeUlkIH0gPSByZXF1aXJlKFwiLi4vLi4vY29ubmVjdGlvbnMvZ2V0Q29ubmVjdGlvbnNcIik7XG5jb25zdCB7IGdldFBvaW50SGFuZGxlSWRzIH0gPSByZXF1aXJlKFwiLi4vLi4vcG9pbnRzL2dldFBvaW50c1wiKTtcbmNvbnN0IHsgdHlwZXMgfSA9IHJlcXVpcmUoXCIuLi8uLi9jb25zdGFudHNcIik7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzZWxlY3Rpb24gYW5kIGFkZHMgb2JqZWN0cyB0aGF0IGFyZSBpbXBsaWNpdGx5XG4gKiBzZWxlY3RlZCBieSBhbm90aGVyIG9iamVjdC5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqICAgIC0gTW92aW5nIGEgY29ubmVjdGlvbiBhbHNvIG1vdmVzIHRoZSBjb25uZWN0aW9uJ3MgcG9pbnRzXG4gKiAgICAtIE1vdmluZyBhIHBvaW50IGFsc28gbW92ZXMgdGhlIHBvaW50J3MgaGFuZGxlcy5cbiAqXG4gKiBTbyBpZiB5b3UgbW92ZSBhIGNvbm5lY3Rpb24sIHlvdSBtb3ZlIGl0cyBwb2ludHMsIGFuZCB0aG9zZVxuICogcG9pbnRzIHdpbGwgYWxzbyBtb3ZlIHRoZWlyIGhhbmRsZXMuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWRkSW1wbGljaXRseVNlbGVjdGVkT2JqZWN0cyhzZWxlY3Rpb24pIHtcbiAgY29uc3QgbmV3U2VsZWN0aW9uID0ge307XG5cbiAgZnVuY3Rpb24gYWRkVG9TZWxlY3Rpb24odHlwZSwgaWQpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobmV3U2VsZWN0aW9uW3R5cGVdKSkge1xuICAgICAgbmV3U2VsZWN0aW9uW3R5cGVdID0gW2lkXTtcbiAgICB9IGVsc2UgaWYgKG5ld1NlbGVjdGlvblt0eXBlXS5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgIG5ld1NlbGVjdGlvblt0eXBlXS5wdXNoKGlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVyZSBpcyBwcm9iYWJseSB3aGF0IHlvdSB3YW50IHRvIGVkaXRcbiAgICovXG4gIGZ1bmN0aW9uIGFkZEltcGxpY2l0bHlTZWxlY3RlZCh0eXBlLCBpZCkge1xuICAgIGlmICh0eXBlID09PSB0eXBlcy5QT0lOVCkge1xuICAgICAgY29uc3QgaGFuZGxlSWRzID0gZ2V0UG9pbnRIYW5kbGVJZHMoaWQpLmZpbHRlcih4ID0+IHgpO1xuICAgICAgYWRkQXJyYXlUb1NlbGVjdGlvbih0eXBlcy5IQU5ETEUsIGhhbmRsZUlkcyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSB0eXBlcy5DT05OKSB7XG4gICAgICBjb25zdCBwb2ludElkcyA9IGdldENvbm5lY3Rpb25CeUlkKGlkKS5wb2ludHM7XG4gICAgICBhZGRBcnJheVRvU2VsZWN0aW9uKHR5cGVzLlBPSU5ULCBwb2ludElkcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkQXJyYXlUb1NlbGVjdGlvbih0eXBlLCBpZHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgYWRkVG9TZWxlY3Rpb24odHlwZSwgaWRzW2ldKTtcbiAgICAgIGFkZEltcGxpY2l0bHlTZWxlY3RlZCh0eXBlLCBpZHNbaV0pO1xuICAgIH1cbiAgfVxuICBcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdGlvbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHR5cGUgPSBrZXlzW2ldO1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG5ld1NlbGVjdGlvblt0eXBlXSkpIHtcbiAgICAgIG5ld1NlbGVjdGlvblt0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VsZWN0aW9uW3R5cGVdLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICBhZGRUb1NlbGVjdGlvbih0eXBlLCBzZWxlY3Rpb25bdHlwZV1bal0pO1xuICAgICAgYWRkSW1wbGljaXRseVNlbGVjdGVkKHR5cGUsIHNlbGVjdGlvblt0eXBlXVtqXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld1NlbGVjdGlvbjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90b29scy9tb3ZlL2FkZEltcGxpY2l0bHlTZWxlY3RlZE9iamVjdHMuanMiLCJjb25zdCBzaG9ydGlkID0gcmVxdWlyZShcInNob3J0aWRcIik7XG5cbmNvbnN0IHsgYWRkTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyIH0gPSByZXF1aXJlKFwiLi4vLi4vbGlzdGVuZXJzL2xpc3RlbmVyc1wiKTtcbmNvbnN0IHsgaXNLZXlEb3duIH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMva2V5Ym9hcmRcIik7XG5jb25zdCBnZXRTdHJheUNvbm5lY3Rpb24gPSByZXF1aXJlKFwiLi4vLi4vY29ubmVjdGlvbnMvZ2V0U3RyYXlDb25uZWN0aW9uXCIpO1xuY29uc3QgeyBnZXRTZWxlY3RlZE9mVHlwZSB9ID0gcmVxdWlyZShcIi4uLy4uL3NlbGVjdGlvblwiKTtcbmNvbnN0IHsgc2V0Q3Vyc29yLCByZWxlYXNlT3ZlcnJpZGUgfSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9jdXJzb3JcIik7XG5jb25zdCBzcGxpdEN1YmljQmV6aWVyID0gcmVxdWlyZShcIi4uLy4uL2Jlemllci9zcGxpdEN1YmljQmV6aWVyXCIpO1xuY29uc3QgZ2V0Q29ubmVjdGlvblBvaW50cyA9IHJlcXVpcmUoXCIuLi8uLi9jb25uZWN0aW9ucy9nZXRDb25uZWN0aW9uUG9pbnRzXCIpO1xuY29uc3QgYWRkQWN0aW9uVG9IaXN0b3J5ID0gcmVxdWlyZShcIi4uLy4uL2FjdGlvbnMvaGlzdG9yeS9hZGRBY3Rpb25Ub0hpc3RvcnlcIik7XG5jb25zdCBvbk1vdmVNb3VzZURvd24gPSByZXF1aXJlKFwiLi4vbW92ZS9vbk1vdmVNb3VzZURvd25cIik7XG5jb25zdCB7IHR5cGVzLCBjdXJzb3JzLCBrZXlzIH0gPSByZXF1aXJlKFwiLi4vLi4vY29uc3RhbnRzXCIpO1xuY29uc3Qgc3RvcmUgPSByZXF1aXJlKFwiLi4vLi4vc3RvcmVcIik7XG5jb25zdCBxdWFkcmF0aWNUb0N1YmljQmV6aWVyID0gcmVxdWlyZShcIi4uLy4uL2Jlemllci9xdWFkcmF0aWNUb0N1YmljQmV6aWVyXCIpO1xuY29uc3QgeyBnZXRQb2ludEJ5SWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyBnZXRIYW5kbGVCeUlkIH0gPSByZXF1aXJlKFwiLi4vLi4vaGFuZGxlcy9nZXRIYW5kbGVzXCIpO1xuY29uc3QgZ2V0UG9zRGlmZmVyZW5jZSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9nZXRQb3NEaWZmZXJlbmNlXCIpO1xuY29uc3QgeyBhZGRUb1NlbGVjdGlvbiwgY2xlYXJTZWxlY3Rpb24sIGlzU2VsZWN0ZWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9zZWxlY3Rpb25cIik7XG5cbmNvbnN0IG9uUGVuQ29ubmVjdFBvaW50cyA9IHJlcXVpcmUoXCIuL29uUGVuQ29ubmVjdFBvaW50c1wiKTtcbmNvbnN0IG9uUGVuQWRkUG9pbnQgPSByZXF1aXJlKFwiLi9vblBlbkFkZFBvaW50XCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG9uUGVuTW91c2VEb3duKGluaXRpYWxQb3NpdGlvbiwgb2JqKSB7XG4gIGlmICghb2JqKSB7XG4gICAgLyoqXG4gICAgICogTm90aGluZyB3YXMgY2xpY2tlZCBvbiwgbGV0J3Mgc2VlIGlmIHRoZXJlIGFyZSBzb21lIHNlbGVjdGVkXG4gICAgICogcG9pbnRzLlxuICAgICAqL1xuICAgIGNvbnN0IHNlbGVjdGVkUG9pbnRzID0gZ2V0U2VsZWN0ZWRPZlR5cGUodHlwZXMuUE9JTlQpO1xuXG4gICAgaWYgKHNlbGVjdGVkUG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLyoqXG4gICAgICAgKiBBIHNpbmdsZSBzZWxlY3RlZCBwb2ludCBtZWFucyB3ZSBhcmUgZ29pbmcgdG8gYmUgY3JlYXRpbmcgYVxuICAgICAgICogcGF0aCBiZXR3ZWVuIHRoYXQgcG9pbnQgYW5kIHdoZXJlIHdlIGNsaWNrZWQuXG4gICAgICAgKlxuICAgICAgICogSWYgdGhlcmUncyBhIHN0cmF5IGNvbm5lY3Rpb24sIHdlIHVzZSBpdC5cbiAgICAgICAqL1xuICAgICAgY29uc3Qgc3RyYXlDb25uZWN0aW9uID0gZ2V0U3RyYXlDb25uZWN0aW9uKHNlbGVjdGVkUG9pbnRzWzBdKTtcbiAgICAgIGlmIChzdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgICAgb25QZW5BZGRQb2ludChpbml0aWFsUG9zaXRpb24sIHtcbiAgICAgICAgICBzdHJheUNvbm5lY3Rpb24sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25QZW5BZGRQb2ludChpbml0aWFsUG9zaXRpb24sIHtcbiAgICAgICAgICBzZWxlY3RlZFBvaW50OiBzZWxlY3RlZFBvaW50c1swXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIG9yIG11bHRpcGxlIHBvaW50cyBzZWxlY3RlZCwgc28gd2UgY3JlYXRlIGFuIHVuY29ubmVjdGVkIHBvaW50XG4gICAgICBvblBlbkFkZFBvaW50KGluaXRpYWxQb3NpdGlvbik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgdmFsdWUsIHR5cGUgfSA9IG9iajtcblxuICAvKipcbiAgICogV2UgY2xpY2tlZCBvbiBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgcGVuIHRvb2wsIHNvIHdlXG4gICAqIHNwbGl0IHRoZSBjb25uZWN0aW9uLlxuICAgKi9cbiAgaWYgKHR5cGUgPT09IHR5cGVzLkNPTk4pIHtcbiAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNsb3Nlc3RQb2ludCB9ID0gdmFsdWU7XG4gICAgY29uc3QgeyB0IH0gPSBjbG9zZXN0UG9pbnQ7IC8vIHQgaXMgd2hlcmUgd2Ugc3BsaXQgdGhlIHBhdGhcblxuICAgIGNvbnN0IGN1cnJlbnRQb2ludHMgPSBnZXRDb25uZWN0aW9uUG9pbnRzKGNvbm5lY3Rpb24pO1xuXG4gICAgaWYgKCFjdXJyZW50UG9pbnRzWzFdICYmICFjdXJyZW50UG9pbnRzWzJdKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vIGhhbmRsZXMsIHNvIHdlJ3JlIHNwbGl0dGluZyBhIHN0cmFpZ2h0IGxpbmUuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG5ld1BvaW50SWQgPSBzaG9ydGlkKCk7XG5cbiAgICAgIGNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICBhZGRUb1NlbGVjdGlvbih0eXBlcy5QT0lOVCwgbmV3UG9pbnRJZCk7XG5cbiAgICAgIGFkZEFjdGlvblRvSGlzdG9yeSh7XG4gICAgICAgIHR5cGU6IFwiU1BMSVRfTElORV9DT05ORUNUSU9OXCIsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZHM6IFtzaG9ydGlkKCksIHNob3J0aWQoKV0sXG4gICAgICAgICAgY29ubmVjdGlvbixcbiAgICAgICAgICBuZXdQb2ludDoge1xuICAgICAgICAgICAgLi4uY2xvc2VzdFBvaW50LFxuICAgICAgICAgICAgaWQ6IG5ld1BvaW50SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIFNwbGl0dGluZyBhIGN1YmljIGJlemllclxuICAgICAgICovXG4gICAgICBjb25zdCBuZXdQb2ludHMgPSBzcGxpdEN1YmljQmV6aWVyKGN1cnJlbnRQb2ludHMsIHQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1BvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBuZXdQb2ludHNbaV0uaWQgPSBzaG9ydGlkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHAyIGFuZCBwNCB3aWxsIGJlIHNpYmxpbmdzXG4gICAgICBuZXdQb2ludHNbMl0uc2libGluZyA9IG5ld1BvaW50c1s0XS5pZDtcbiAgICAgIG5ld1BvaW50c1s0XS5zaWJsaW5nID0gbmV3UG9pbnRzWzJdLmlkO1xuXG4gICAgICAvLyBTZWxlY3RpbmcgdGhlIG5ldyBwb2ludFxuICAgICAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIGFkZFRvU2VsZWN0aW9uKHR5cGVzLlBPSU5ULCBuZXdQb2ludHNbM10uaWQpO1xuXG4gICAgICBhZGRBY3Rpb25Ub0hpc3Rvcnkoe1xuICAgICAgICB0eXBlOiBcIlNQTElUX0NPTk5FQ1RJT05cIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkczogW3Nob3J0aWQoKSwgc2hvcnRpZCgpXSwgXG4gICAgICAgICAgY29ubmVjdGlvbixcbiAgICAgICAgICBuZXdQb2ludHNcbiAgICAgICAgfSxcbiAgICAgIH0sIHRydWUpO1xuICAgICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTsgLy8gVGhlcmUgd2lsbCBiZSBhIHBvaW50IGJlbG93IHRoZSBtb3VzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB3ZSBjbGljayBhIGhhbmRsZSwgd2Ugc2ltcGx5IG1vdmUgaXQuXG4gICAqL1xuICBpZiAodHlwZSA9PT0gdHlwZXMuSEFORExFKSB7XG4gICAgb25Nb3ZlTW91c2VEb3duKGluaXRpYWxQb3NpdGlvbiwgb2JqKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHdoZXJlIHRoaW5ncyBnZXQgZnVuLlxuICAgKi9cbiAgaWYgKHR5cGUgPT09IHR5cGVzLlBPSU5UKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRQb2ludHMgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlcy5QT0lOVCk7XG5cbiAgICBpZiAoc2VsZWN0ZWRQb2ludHMubGVuZ3RoID09PSAxICYmIChzZWxlY3RlZFBvaW50c1swXSAhPT0gdmFsdWUuaWQpKSB7XG4gICAgICBvblBlbkNvbm5lY3RQb2ludHMoc2VsZWN0ZWRQb2ludHNbMF0sIHZhbHVlLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBXZSBjbGVhciB0aGUgc2VsZWN0aW9uIGlmIHNoaWZ0IGlzIG5vdCBiZWluZyBoZWxkXG4gICAgaWYgKCFpc0tleURvd24oa2V5cy5TSElGVCkpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIC8vIFRoZSBwb2ludCBob3dldmVyLCB3aWxsIGFsd2F5cyBiZSBzZWxlY3RlZFxuICAgIGlmICghaXNTZWxlY3RlZCh0eXBlcy5QT0lOVCwgdmFsdWUuaWQpKSB7XG4gICAgICBhZGRUb1NlbGVjdGlvbih0eXBlcy5QT0lOVCwgdmFsdWUuaWQpO1xuICAgIH1cblxuICAgIGxldCBtb3VzZU1vdmVkID0gZmFsc2U7XG4gICAgbGV0IGN1cnNvck92ZXJyaWRlSWQ7XG4gICAgbGV0IGxhc3RQb3NpdGlvbiA9IGluaXRpYWxQb3NpdGlvbjtcblxuICAgIGxldCBzdHJheUNvbm5lY3Rpb24gPSBzZWxlY3RlZFBvaW50cy5sZW5ndGggPT09IDFcbiAgICAgID8gZ2V0U3RyYXlDb25uZWN0aW9uKHNlbGVjdGVkUG9pbnRzWzBdKVxuICAgICAgOiBudWxsO1xuXG4gICAgaWYgKCFzdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgdGhlcmUncyBubyBzdHJheSBjb25uZWN0aW9uIHdlIGNyZWF0ZSBvbmUgaWYgdGhlIG1vdXNlIGlzXG4gICAgICAgKiBtb3ZlZC5cbiAgICAgICAqXG4gICAgICAgKiBPdGhlcndpc2Ugbm90aGluZyBoYXBwZW5zIGV4Y2VwdCB0aGF0IHRoZSBwb2ludCBpcyBzZWxlY3RlZC5cbiAgICAgICAqL1xuXG4gICAgICBsZXQgbmV3Q29ubmVjdGlvbklkID0gc2hvcnRpZCgpO1xuICAgICAgbGV0IG5ld0hhbmRsZUlkID0gc2hvcnRpZCgpO1xuXG4gICAgICBjb25zdCBsaXN0ZW5lcklkID0gYWRkTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGN1cnJlbnRQb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAoIW1vdXNlTW92ZWQpIHtcbiAgICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgdGhlIG5ldyBzdHJheSBjb25uZWN0aW9uIGFuZCBoYW5kbGVcbiAgICAgICAgICBtb3VzZU1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICBjdXJzb3JPdmVycmlkZUlkID0gc2V0Q3Vyc29yKFwiUEVOXCIsIHsgb3ZlcnJpZGU6IHRydWUgfSk7XG5cbiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgIGlkOiBuZXdDb25uZWN0aW9uSWQsXG4gICAgICAgICAgICAgIHBvaW50czogW3ZhbHVlLmlkLCBudWxsXSxcbiAgICAgICAgICAgICAgaGFuZGxlczogW25ld0hhbmRsZUlkLCBudWxsXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcIkFERF9IQU5ETEVTXCIsXG4gICAgICAgICAgICBwYXlsb2FkOiBbe1xuICAgICAgICAgICAgICB4OiBjdXJyZW50UG9zaXRpb24ueCxcbiAgICAgICAgICAgICAgeTogY3VycmVudFBvc2l0aW9uLnksXG4gICAgICAgICAgICAgIGlkOiBuZXdIYW5kbGVJZCxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1vdXNlIHdhcyBhbHJlYWR5IG1vdmVkLCBzbyB3ZSBqdXN0IHVwZGF0ZSB0aGUgcG9zaXRpb24uXG4gICAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgIFt0eXBlcy5IQU5ETEVdOiBbbmV3SGFuZGxlSWRdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShsYXN0UG9zaXRpb24sIGN1cnJlbnRQb3NpdGlvbiksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsYXN0UG9zaXRpb24gPSBjdXJyZW50UG9zaXRpb247XG4gICAgICB9KTtcblxuICAgICAgYWRkTGlzdGVuZXIoXCJtb3VzZXVwXCIsICgpID0+IHtcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbGlzdGVuZXJJZCk7XG4gIFxuICAgICAgICBpZiAodHlwZW9mIGN1cnNvck92ZXJyaWRlSWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICByZWxlYXNlT3ZlcnJpZGUoY3Vyc29yT3ZlcnJpZGVJZCk7XG4gICAgICAgICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gQ3JlYXRlcyB0aGUgYWN0aW9uIHRvIGNyZWF0ZSB0aGUgbmV3IHN0cmF5IGNvbm5lY3Rpb24uXG4gICAgICAgIGlmIChtb3VzZU1vdmVkICYmICFzdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgICAgICBhZGRBY3Rpb25Ub0hpc3Rvcnkoe1xuICAgICAgICAgICAgdHlwZTogXCJBRERfU1RSQVlfQ09OTkVDVElPTlwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBwb2ludElkOiBzZWxlY3RlZFBvaW50c1swXSxcbiAgICAgICAgICAgICAgY29ubmVjdGlvbklkOiBuZXdDb25uZWN0aW9uSWQsXG4gICAgICAgICAgICAgIGhhbmRsZUlkOiBuZXdIYW5kbGVJZCxcbiAgICAgICAgICAgICAgaGFuZGxlUG9zaXRpb246IGxhc3RQb3NpdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHRydWUpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90b29scy9wZW4vb25QZW5Nb3VzZURvd24uanMiLCJjb25zdCB7IGdldFBvaW50Q29ubmVjdGlvbnMgfSA9IHJlcXVpcmUoXCIuLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFN0cmF5Q29ubmVjdGlvbihwb2ludElkKSB7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gZ2V0UG9pbnRDb25uZWN0aW9ucyhwb2ludElkKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3Rpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGNvbm5lY3Rpb25zW2ldLnBvaW50c1sxXSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nvbm5lY3Rpb25zL2dldFN0cmF5Q29ubmVjdGlvbi5qcyIsIi8qKlxuICogRm9yIGEgbmljZSBnZW9tZXRyaWMgdmlzdWFsaXphdGlvbiBvZiB0aGUgbWF0aCwgY2hlY2sgYmVsb3cuXG4gKiBodHRwOi8vd3d3LmlzY3JpcHRkZXNpZ24uY29tLz9za2V0Y2g9dHV0b3JpYWwvc3BsaXRDdWJpY0JlemllclxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwbGl0Q3ViaWNCZXppZXIocG9pbnRzLCB0KSB7XG4gIGNvbnN0IFsgcDEgLHAyLCBwMywgcDQgXSA9IHBvaW50cztcblxuICBjb25zdCB4MSA9IHAxLng7XG4gIGNvbnN0IHkxID0gcDEueTtcblxuICBjb25zdCB4MiA9IHAyLng7XG4gIGNvbnN0IHkyID0gcDIueTtcblxuICBjb25zdCB4MyA9IHAzLng7XG4gIGNvbnN0IHkzID0gcDMueTtcblxuICBjb25zdCB4NCA9IHA0Lng7XG4gIGNvbnN0IHk0ID0gcDQueTtcblxuICBjb25zdCB4MTIgPSAgICh4MiAtIHgxKSAqIHQgKyB4MTtcbiAgY29uc3QgeTEyID0gICAoeTIgLSB5MSkgKiB0ICsgeTE7XG5cbiAgY29uc3QgeDIzID0gICAoeDMgLSB4MikgKiB0ICsgeDI7XG4gIGNvbnN0IHkyMyA9ICAgKHkzIC0geTIpICogdCArIHkyO1xuXG4gIGNvbnN0IHgzNCA9ICAgKHg0IC0geDMpICogdCArIHgzO1xuICBjb25zdCB5MzQgPSAgICh5NCAtIHkzKSAqIHQgKyB5MztcblxuICBjb25zdCB4MTIzID0gICh4MjMgLSB4MTIpICogdCArIHgxMjtcbiAgY29uc3QgeTEyMyA9ICAoeTIzIC0geTEyKSAqIHQgKyB5MTI7XG5cbiAgY29uc3QgeDIzNCA9ICAoeDM0IC0geDIzKSAqIHQgKyB4MjM7XG4gIGNvbnN0IHkyMzQgPSAgKHkzNCAtIHkyMykgKiB0ICsgeTIzO1xuXG4gIGNvbnN0IHgxMjM0ID0gKHgyMzQgLSB4MTIzKSAqIHQgKyB4MTIzO1xuICBjb25zdCB5MTIzNCA9ICh5MjM0IC0geTEyMykgKiB0ICsgeTEyMztcblxuICAvKipcbiAgICogQ3JlZGl0IHRvIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NDA1NzU2LlxuICAgKlxuICAgKiBCZWxvdyBpcyBhYnNvbHV0ZWx5IGdvcmdlb3VzLlxuICAgKi9cbiAgcmV0dXJuIFtcbiAgICB7IHg6IHgxLCAgICB5OiB5MSAgICAgfSwgLy8gVGhlIGxlZnQgaGFuZCBwb2ludFxuICAgIHsgeDogeDEyLCAgIHk6IHkxMiAgICB9LFxuICAgIHsgeDogeDEyMywgIHk6IHkxMjMgICB9LFxuICAgIHsgeDogeDEyMzQsIHk6IHkxMjM0ICB9LCAvLyBUaGUgbmV3IHNwbGl0IHBvaW50XG4gICAgeyB4OiB4MjM0LCAgeTogeTIzNCAgIH0sXG4gICAgeyB4OiB4MzQsICAgeTogeTM0ICAgIH0sXG4gICAgeyB4OiB4NCwgICAgeTogeTQgICAgIH0sIC8vIFRoZSByaWdodCBoYW5kIHBvaW50XG4gIF07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYmV6aWVyL3NwbGl0Q3ViaWNCZXppZXIuanMiLCJpbXBvcnQgeyBnZXRIYW5kbGVCeUlkIH0gZnJvbSBcIi4uLy4uL2hhbmRsZXMvZ2V0SGFuZGxlc1wiO1xuXG5jb25zdCBzaG9ydGlkID0gcmVxdWlyZShcInNob3J0aWRcIik7XG5cbmNvbnN0IHsgYWRkTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyIH0gPSByZXF1aXJlKFwiLi4vLi4vbGlzdGVuZXJzL2xpc3RlbmVyc1wiKTtcbmNvbnN0IGlzVmFsaWRQb3NpdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9pc1ZhbGlkUG9zaXRpb25cIik7XG5jb25zdCB7IGFkZFRvU2VsZWN0aW9uLCBjbGVhclNlbGVjdGlvbiwgaXNTZWxlY3RlZCB9ID0gcmVxdWlyZShcIi4uLy4uL3NlbGVjdGlvblwiKTtcbmNvbnN0IGFkZEFjdGlvblRvSGlzdG9yeSA9IHJlcXVpcmUoXCIuLi8uLi9hY3Rpb25zL2hpc3RvcnkvYWRkQWN0aW9uVG9IaXN0b3J5XCIpO1xuY29uc3QgeyBzZXRDdXJzb3IsIHJlbGVhc2VPdmVycmlkZSB9ID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2N1cnNvclwiKTtcbmNvbnN0IGdldFBvc0RpZmZlcmVuY2UgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvZ2V0UG9zRGlmZmVyZW5jZVwiKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uLy4uL3N0b3JlXCIpO1xuY29uc3QgbWlycm9yUG9zaXRpb24gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvbWlycm9yUG9zaXRpb25cIik7XG5jb25zdCBxdWFkcmF0aWNUb0N1YmljQmV6aWVyID0gcmVxdWlyZShcIi4uLy4uL2Jlemllci9xdWFkcmF0aWNUb0N1YmljQmV6aWVyXCIpO1xuY29uc3QgeyBnZXRQb2ludEJ5SWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyB0eXBlcyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBvblBlbkNvbm5lY3RQb2ludHMoc2VsZWN0ZWRQb2ludElkLCBjbGlja2VkUG9pbnRJZCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIHNlbGVjdGVkUG9pbnRJZCxcbiAgICBjbGlja2VkUG9pbnRJZCxcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICBpZDogc2hvcnRpZCgpLFxuICAgICAgcG9pbnRzOiBbc2VsZWN0ZWRQb2ludElkLCBjbGlja2VkUG9pbnRJZF0sXG4gICAgICBoYW5kbGVzOiBbbnVsbCwgbnVsbF0sXG4gICAgfSxcbiAgfTtcblxuICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLFxuICAgIHBheWxvYWQ6IGRhdGEuY29ubmVjdGlvbixcbiAgfSk7XG5cbiAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgYWRkVG9TZWxlY3Rpb24odHlwZXMuUE9JTlQsIGNsaWNrZWRQb2ludElkKTtcblxuICBsZXQgbW91c2VNb3ZlZCA9IGZhbHNlO1xuICBsZXQgY3Vyc29yT3ZlcnJpZGVJZDtcbiAgbGV0IGxhc3RQb3NpdGlvbiA9IHsgLi4uZ2V0UG9pbnRCeUlkKGNsaWNrZWRQb2ludElkKSB9O1xuXG4gIGNvbnN0IGxpc3RlbmVySWQgPSBhZGRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAocG9zaXRpb24pID0+IHtcbiAgICBpZiAoXG4gICAgICAhbW91c2VNb3ZlZCAmJlxuICAgICAgTWF0aC5oeXBvdChcbiAgICAgICAgbGFzdFBvc2l0aW9uLnggLSBwb3NpdGlvbi54LFxuICAgICAgICBsYXN0UG9zaXRpb24ueSAtIHBvc2l0aW9uLnkpIDwgMTBcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW1vdXNlTW92ZWQpIHtcbiAgICAgIG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgY3Vyc29yT3ZlcnJpZGVJZCA9IHNldEN1cnNvcihcIlBFTlwiLCB7IG92ZXJyaWRlOiB0cnVlIH0pO1xuXG4gICAgICBjb25zdCBzdHJheUNvbm5lY3Rpb25IYW5kbGVJZCA9IHNob3J0aWQoKTtcblxuICAgICAgZGF0YS5zdHJheUNvbm5lY3Rpb24gPSB7XG4gICAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICAgIHBvaW50czogW2NsaWNrZWRQb2ludElkLCBudWxsXSxcbiAgICAgICAgaGFuZGxlczogW3N0cmF5Q29ubmVjdGlvbkhhbmRsZUlkLCBudWxsXSxcbiAgICAgIH07XG4gICAgICBkYXRhLnN0cmF5Q29ubmVjdGlvbkhhbmRsZSA9IHtcbiAgICAgICAgaWQ6IHN0cmF5Q29ubmVjdGlvbkhhbmRsZUlkLFxuICAgICAgICB4OiBwb3NpdGlvbi54LFxuICAgICAgICB5OiBwb3NpdGlvbi55LFxuICAgICAgfTtcblxuICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIkFERF9DT05ORUNUSU9OXCIsICBwYXlsb2FkOiBkYXRhLnN0cmF5Q29ubmVjdGlvbiB9KTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfSEFORExFU1wiLCAgICAgcGF5bG9hZDogW2RhdGEuc3RyYXlDb25uZWN0aW9uSGFuZGxlXSB9KTtcblxuICAgICAgY29uc3Qgb3JpZ2luID0gZ2V0UG9pbnRCeUlkKGNsaWNrZWRQb2ludElkKTtcblxuICAgICAgY29uc3QgW3AwLCBwMSwgcDIsIHAzXSA9IHF1YWRyYXRpY1RvQ3ViaWNCZXppZXIoXG4gICAgICAgIGdldFBvaW50QnlJZChzZWxlY3RlZFBvaW50SWQpLFxuICAgICAgICBudWxsLFxuICAgICAgICBtaXJyb3JQb3NpdGlvbihwb3NpdGlvbiwgb3JpZ2luKSxcbiAgICAgICAgb3JpZ2luKTtcblxuICAgICAgZGF0YS5oYW5kbGVzID0gW3AxLCBwMl0ubWFwKHAgPT4gKHtcbiAgICAgICAgLi4ucCxcbiAgICAgICAgaWQ6IHNob3J0aWQoKSxcbiAgICAgIH0pKTtcbiAgICAgIGRhdGEuY29ubmVjdGlvbi5oYW5kbGVzID0gZGF0YS5oYW5kbGVzLm1hcCh4ID0+IHguaWQpO1xuXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgICAgcGF5bG9hZDogZGF0YS5oYW5kbGVzLFxuICAgICAgfSk7XG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiUkVQTEFDRV9DT05ORUNUSU9OX1BPSU5UX0lEU1wiLFxuICAgICAgICBwYXlsb2FkOiBkYXRhLmNvbm5lY3Rpb24sXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvcmlnaW4gPSBnZXRQb2ludEJ5SWQoY2xpY2tlZFBvaW50SWQpO1xuICAgICAgXG4gICAgICBjb25zdCBbcDAsIHAxLCBwMiwgcDNdID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihcbiAgICAgICAgZ2V0UG9pbnRCeUlkKHNlbGVjdGVkUG9pbnRJZCksXG4gICAgICAgIG51bGwsXG4gICAgICAgIG1pcnJvclBvc2l0aW9uKHBvc2l0aW9uLCBvcmlnaW4pLFxuICAgICAgICBvcmlnaW4pO1xuXG4gICAgICAvLyBSaWdodCBoYW5kbGVcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgIFt0eXBlcy5IQU5ETEVdOiBbZGF0YS5oYW5kbGVzWzFdLmlkXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBnZXRQb3NEaWZmZXJlbmNlKGRhdGEuaGFuZGxlc1sxXSwgcDEpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBkYXRhLmhhbmRsZXNbMV0ueCA9IHAxLng7XG4gICAgICBkYXRhLmhhbmRsZXNbMV0ueSA9IHAxLnk7XG5cbiAgICAgIC8vIExlZnQgaGFuZGxlXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICBbdHlwZXMuSEFORExFXTogW2RhdGEuaGFuZGxlc1swXS5pZF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZTogZ2V0UG9zRGlmZmVyZW5jZShkYXRhLmhhbmRsZXNbMF0sIHAyKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBkYXRhLmhhbmRsZXNbMF0ueCA9IHAyLng7XG4gICAgICBkYXRhLmhhbmRsZXNbMF0ueSA9IHAyLnk7XG5cbiAgICAgIC8vIFVwZGF0aW5nIHN0cmF5IGNvbm5lY3Rpb24gaGFuZGxlIHBvc2l0aW9uXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICBbdHlwZXMuSEFORExFXTogW2RhdGEuc3RyYXlDb25uZWN0aW9uLmhhbmRsZXNbMF1dLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZGF0YS5zdHJheUNvbm5lY3Rpb25IYW5kbGUsIHBvc2l0aW9uKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZGF0YS5zdHJheUNvbm5lY3Rpb25IYW5kbGUueCA9IHBvc2l0aW9uLng7XG4gICAgICBkYXRhLnN0cmF5Q29ubmVjdGlvbkhhbmRsZS55ID0gcG9zaXRpb24ueTtcbiAgICB9XG4gICAgbGFzdFBvc2l0aW9uID0gcG9zaXRpb247XG4gIH0pO1xuXG4gIGFkZExpc3RlbmVyKFwibW91c2V1cFwiLCAoKSA9PiB7XG4gICAgcmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbGlzdGVuZXJJZCk7XG5cbiAgICBpZiAoY3Vyc29yT3ZlcnJpZGVJZCkge1xuICAgICAgcmVsZWFzZU92ZXJyaWRlKGN1cnNvck92ZXJyaWRlSWQpO1xuICAgICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTtcbiAgICB9XG5cbiAgICBhZGRBY3Rpb25Ub0hpc3Rvcnkoe1xuICAgICAgdHlwZTogXCJDT05ORUNUX1BPSU5UU1wiLFxuICAgICAgZGF0YSxcbiAgICB9LCBmYWxzZSk7XG4gIH0sIHRydWUpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3Rvb2xzL3Blbi9vblBlbkNvbm5lY3RQb2ludHMuanMiLCJpbXBvcnQgeyBnZXRIYW5kbGVCeUlkIH0gZnJvbSBcIi4uLy4uL2hhbmRsZXMvZ2V0SGFuZGxlc1wiO1xuXG5jb25zdCBzaG9ydGlkID0gcmVxdWlyZShcInNob3J0aWRcIik7XG5cbmNvbnN0IHsgYWRkTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyIH0gPSByZXF1aXJlKFwiLi4vLi4vbGlzdGVuZXJzL2xpc3RlbmVyc1wiKTtcbmNvbnN0IGlzVmFsaWRQb3NpdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9pc1ZhbGlkUG9zaXRpb25cIik7XG5jb25zdCB7IGFkZFRvU2VsZWN0aW9uLCBjbGVhclNlbGVjdGlvbiwgaXNTZWxlY3RlZCB9ID0gcmVxdWlyZShcIi4uLy4uL3NlbGVjdGlvblwiKTtcbmNvbnN0IGFkZEFjdGlvblRvSGlzdG9yeSA9IHJlcXVpcmUoXCIuLi8uLi9hY3Rpb25zL2hpc3RvcnkvYWRkQWN0aW9uVG9IaXN0b3J5XCIpO1xuY29uc3QgeyBzZXRDdXJzb3IsIHJlbGVhc2VPdmVycmlkZSB9ID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2N1cnNvclwiKTtcbmNvbnN0IGdldFBvc0RpZmZlcmVuY2UgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvZ2V0UG9zRGlmZmVyZW5jZVwiKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZShcIi4uLy4uL3N0b3JlXCIpO1xuY29uc3QgbWlycm9yUG9zaXRpb24gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvbWlycm9yUG9zaXRpb25cIik7XG5jb25zdCBxdWFkcmF0aWNUb0N1YmljQmV6aWVyID0gcmVxdWlyZShcIi4uLy4uL2Jlemllci9xdWFkcmF0aWNUb0N1YmljQmV6aWVyXCIpO1xuY29uc3QgeyBnZXRQb2ludEJ5SWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyB0eXBlcyB9ID0gcmVxdWlyZShcIi4uLy4uL2NvbnN0YW50c1wiKTtcblxuY29uc3QgZGVmYXVsdE9wdHMgPSB7XG4gIHN0cmF5Q29ubmVjdGlvbjogbnVsbCxcbiAgc2VsZWN0ZWRQb2ludDogbnVsbCxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb25QZW5BZGRQb2ludChwb3NpdGlvbiwgb3B0cyA9IGRlZmF1bHRPcHRzKSB7XG4gIGlmICghaXNWYWxpZFBvc2l0aW9uKHBvc2l0aW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24uXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZGF0YSBvYmplY3Qgd2lsbCBsYXRlciBiZSBwYXNzZWQgaW50byB0aGUgXCJBRERfUEVOX1BPSU5UXCJcbiAgICogYWN0aW9uLCB3aGljaCBoYXMgYSBsb3Qgb2Ygb3B0aW9uYWwgZnVuY3Rpb25hbGl0eS5cbiAgICovXG4gIGNvbnN0IGRhdGEgPSB7fTtcblxuICBjb25zdCBwb2ludElkID0gc2hvcnRpZCgpO1xuICBkYXRhLnBvaW50ID0ge1xuICAgIGlkOiBwb2ludElkLFxuICAgIHg6IHBvc2l0aW9uLngsXG4gICAgeTogcG9zaXRpb24ueSxcbiAgfTtcblxuICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiQUREX1BPSU5UXCIsIHBheWxvYWQ6IGRhdGEucG9pbnQgfSk7XG5cbiAgY2xlYXJTZWxlY3Rpb24oKTtcbiAgYWRkVG9TZWxlY3Rpb24odHlwZXMuUE9JTlQsIHBvaW50SWQpO1xuXG4gIGxldCBtb3VzZU1vdmVkID0gZmFsc2U7XG4gIGxldCBjdXJzb3JPdmVycmlkZUlkO1xuICBsZXQgbGFzdFBvc2l0aW9uID0gcG9zaXRpb247XG5cbiAgY29uc3QgaGFuZGxlSWQgPSBzaG9ydGlkKCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25JZCA9IHNob3J0aWQoKTtcblxuICBsZXQgb3JpZ2luYWxNb3ZlZEhhbmRsZTtcbiAgbGV0IHN0cmF5Q29ubmVjdGlvblBvaW50cztcbiAgbGV0IG5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGU7XG5cbiAgLyoqXG4gICAqIFdlIGNvbXBsZXRlIHRoZSBzdHJheSBjb25uZWN0aW9uIGJ5IGNvbm5lY3RpbmcgdGhlXG4gICAqIG5ldyBwb2ludCB0byBpdC5cbiAgICovXG4gIGlmIChvcHRzLnN0cmF5Q29ubmVjdGlvbikge1xuICAgIGNvbnN0IHsgc3RyYXlDb25uZWN0aW9uIH0gPSBvcHRzO1xuICAgIGRhdGEuc3RyYXlDb25uZWN0aW9uID0gc3RyYXlDb25uZWN0aW9uO1xuXG4gICAgY29uc3QgbmV3UG9pbnRzID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihcbiAgICAgIGdldFBvaW50QnlJZChzdHJheUNvbm5lY3Rpb24ucG9pbnRzWzBdKSxcbiAgICAgIGdldEhhbmRsZUJ5SWQoc3RyYXlDb25uZWN0aW9uLmhhbmRsZXNbMF0pLFxuICAgICAgbnVsbCxcbiAgICAgIHBvc2l0aW9uKTtcblxuICAgIHN0cmF5Q29ubmVjdGlvblBvaW50cyA9IG5ld1BvaW50cztcblxuICAgIC8qKlxuICAgICAqIFRoZSBoYW5kbGUgb2YgdGhlIG5ldyBwb2ludCBmb3IgdGhlIGNvbXBsZXRlZCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIG1vdXNlIGlzIG5vdCBtb3ZlZCwgcDIgb2YgdGhlIG5ldyBwb2ludHMgd2lsbCBiZSB1c2VkXG4gICAgICogZm9yIHRoZSBwb3NpdGlvbiBvZiB0aGUgaGFuZGxlLlxuICAgICAqXG4gICAgICogSWYgdGhlIG1vdXNlIGlzIG1vdmVkLCB0aGUgbWlycm9yIG9mIHRoZSBtb3VzZXVwIHBvc2l0aW9uIHdpbGxcbiAgICAgKiBiZSB0aGUgaGFuZGxlIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZSA9IHtcbiAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICB4OiBuZXdQb2ludHNbMl0ueCxcbiAgICAgIHk6IG5ld1BvaW50c1syXS55LFxuICAgIH07XG5cbiAgICBkYXRhLmNvbXBsZXRlZENvbm5lY3Rpb24gPSB7XG4gICAgICBpZDogc3RyYXlDb25uZWN0aW9uLmlkLFxuICAgICAgcG9pbnRzOiAgIFtzdHJheUNvbm5lY3Rpb24ucG9pbnRzWzBdLCAgIGRhdGEucG9pbnQuaWRdLFxuICAgICAgaGFuZGxlczogIFtzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSwgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS5pZF0sXG4gICAgfTtcblxuICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfSEFORExFU1wiLCBwYXlsb2FkOiBbZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlXSB9KTtcbiAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiUkVQTEFDRV9DT05ORUNUSU9OX1BPSU5UX0lEU1wiLCBwYXlsb2FkOiBkYXRhLmNvbXBsZXRlZENvbm5lY3Rpb24gfSk7XG5cbiAgICAvLyBOb3cgd2UgbmVlZCB0byBtb3ZlIHRoZSBcIm1vdmVkSGFuZGxlXCJcbiAgICBvcmlnaW5hbE1vdmVkSGFuZGxlID0gZ2V0SGFuZGxlQnlJZChzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSk7XG4gICAgY29uc3QgcG9zaXRpb25DaGFuZ2UgPSBnZXRQb3NEaWZmZXJlbmNlKG9yaWdpbmFsTW92ZWRIYW5kbGUsIG5ld1BvaW50c1sxXSk7XG4gICAgZGF0YS5tb3ZlZEhhbmRsZSA9IHtcbiAgICAgIGlkOiBzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSxcbiAgICAgIHBvc2l0aW9uQ2hhbmdlLFxuICAgIH07XG5cbiAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgW3R5cGVzLkhBTkRMRV06IFtkYXRhLm1vdmVkSGFuZGxlLmlkXSxcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb25DaGFuZ2UsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKG9wdHMuc2VsZWN0ZWRQb2ludCkge1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSdzIG5vdCBhIHN0cmF5IGNvbm5lY3Rpb24sIGJ1dCBhIHNpbmdsZVxuICAgICAqIHBvaW50IGlzIHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogVGhpcyBtZWFucyB0aGF0IHdlJ3JlIGNyZWF0aW5nIGEgbmV3IGNvbm5lY3Rpb24gd2l0aCBubyBwMCBoYW5kbGUuXG4gICAgICovXG5cbiAgICAvLyBUaGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBzZWxlY3RlZFBvaW50IGFuZCB0aGUgbmV3XG4gICAgZGF0YS5saW5lQ29ubmVjdGlvbiA9IHtcbiAgICAgIGlkOiBzaG9ydGlkKCksXG4gICAgICBwb2ludHM6IFtvcHRzLnNlbGVjdGVkUG9pbnQsIHBvaW50SWRdLFxuICAgICAgaGFuZGxlczogW251bGwsIG51bGxdLFxuICAgIH1cblxuICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfQ09OTkVDVElPTlwiLCBwYXlsb2FkOiBkYXRhLmxpbmVDb25uZWN0aW9uIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdyBoZXJlIGNvbWVzIGFsbCB0aGUgYnVsbHNoaXRcbiAgICovXG4gIGNvbnN0IGxpc3RlbmVySWQgPSBhZGRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoY3VycmVudFBvc2l0aW9uKSA9PiB7XG4gICAgaWYgKFxuICAgICAgIW1vdXNlTW92ZWQgJiZcbiAgICAgIE1hdGguaHlwb3QoXG4gICAgICAgIGxhc3RQb3NpdGlvbi54IC0gY3VycmVudFBvc2l0aW9uLngsXG4gICAgICAgIGxhc3RQb3NpdGlvbi55IC0gY3VycmVudFBvc2l0aW9uLnkpIDwgMTBcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW1vdXNlTW92ZWQpIHtcbiAgICAgIG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgY3Vyc29yT3ZlcnJpZGVJZCA9IHNldEN1cnNvcihcIlBFTlwiLCB7IG92ZXJyaWRlOiB0cnVlIH0pO1xuXG4gICAgICAvLyBTaW5jZSB0aGUgbW91c2UgbW92ZWQsIHdlIGNyZWF0ZSBhIG5ldyBzdHJheSBjb25uZWN0aW9uIVxuICAgICAgZGF0YS5uZXdDb25uZWN0aW9uID0ge1xuICAgICAgICBpZDogY29ubmVjdGlvbklkLFxuICAgICAgICBwb2ludHM6IFtwb2ludElkLCBudWxsXSxcbiAgICAgICAgaGFuZGxlczogW2hhbmRsZUlkLCBudWxsXSxcbiAgICAgIH07XG4gICAgICBkYXRhLm5ld0hhbmRsZSA9IHtcbiAgICAgICAgeDogY3VycmVudFBvc2l0aW9uLngsXG4gICAgICAgIHk6IGN1cnJlbnRQb3NpdGlvbi55LFxuICAgICAgICBpZDogaGFuZGxlSWQsXG4gICAgICB9O1xuXG4gICAgICBzdG9yZS5kaXNwYXRjaCh7IHR5cGU6IFwiQUREX0NPTk5FQ1RJT05cIiwgIHBheWxvYWQ6IGRhdGEubmV3Q29ubmVjdGlvbiB9KTtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogXCJBRERfSEFORExFU1wiLCAgICAgcGF5bG9hZDogW2RhdGEubmV3SGFuZGxlXSB9KTtcblxuXG4gICAgICBpZiAob3B0cy5zdHJheUNvbm5lY3Rpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtb3VzZSBtb3ZlZCBzbyB3ZSBoYXZlIHRvIGRpc2NhcmQgYm90aCBvZiB0aGUgc3RyYXlcbiAgICAgICAgICogY29ubmVjdGlvbiBoYW5kbGUgcG9zaXRpb25zLlxuICAgICAgICAgKi9cblxuICAgICAgICAvLyBNb3ZpbmcgcDEgKG1vdmVkSGFuZGxlKVxuICAgICAgICBkYXRhLm1vdmVkSGFuZGxlLnBvc2l0aW9uQ2hhbmdlID0gZ2V0UG9zRGlmZmVyZW5jZShzdHJheUNvbm5lY3Rpb25Qb2ludHNbMV0sIG9yaWdpbmFsTW92ZWRIYW5kbGUpO1xuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgIFt0eXBlcy5IQU5ETEVdOiBbZGF0YS5tb3ZlZEhhbmRsZS5pZF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGRhdGEubW92ZWRIYW5kbGUucG9zaXRpb25DaGFuZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTW92aW5nIHAyICh0aGUgXCJuZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlXCIpLlxuICAgICAgICBjb25zdCBwb3NpdGlvbkNoYW5nZSA9IGdldFBvc0RpZmZlcmVuY2UoXG4gICAgICAgICAgZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLFxuICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbik7XG4gIFxuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgIFt0eXBlcy5IQU5ETEVdOiBbZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLmlkXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbkNoYW5nZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLnggPSBjdXJyZW50UG9zaXRpb24ueDtcbiAgICAgICAgZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLnkgPSBjdXJyZW50UG9zaXRpb24ueTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5saW5lQ29ubmVjdGlvbikge1xuICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uUmlnaHRIYW5kbGUgPSB7XG4gICAgICAgICAgaWQ6IHNob3J0aWQoKSxcbiAgICAgICAgICB4OiBjdXJyZW50UG9zaXRpb24ueCxcbiAgICAgICAgICB5OiBjdXJyZW50UG9zaXRpb24ueSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBsZWZ0SGFuZGxlID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihcbiAgICAgICAgICBnZXRQb2ludEJ5SWQob3B0cy5zZWxlY3RlZFBvaW50KSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZSxcbiAgICAgICAgICBwb3NpdGlvbilbMV07XG5cbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvbkxlZnRIYW5kbGUgPSB7XG4gICAgICAgICAgaWQ6IHNob3J0aWQoKSxcbiAgICAgICAgICB4OiBsZWZ0SGFuZGxlLngsXG4gICAgICAgICAgeTogbGVmdEhhbmRsZS55LFxuICAgICAgICB9O1xuXG4gICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb24uaGFuZGxlcyA9IFtcbiAgICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZS5pZCxcbiAgICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uUmlnaHRIYW5kbGUuaWQsXG4gICAgICAgIF07XG5cbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiQUREX0hBTkRMRVNcIixcbiAgICAgICAgICBwYXlsb2FkOiBbXG4gICAgICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZSxcbiAgICAgICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBcIlJFUExBQ0VfQ09OTkVDVElPTl9QT0lOVF9JRFNcIiwgcGF5bG9hZDogZGF0YS5saW5lQ29ubmVjdGlvbiB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIE1vdXNlIGhhcyBiZWVuIG1vdmVkLCBzbyB3ZSB1cGRhdGUgYSBmZXcgdGhpbmdzLlxuICAgICAgICovXG4gICAgICBjb25zdCBwb3NpdGlvbkNoYW5nZSA9IGdldFBvc0RpZmZlcmVuY2UobGFzdFBvc2l0aW9uLCBjdXJyZW50UG9zaXRpb24pO1xuICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgW3R5cGVzLkhBTkRMRV06IFtoYW5kbGVJZF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvbkNoYW5nZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBkYXRhLm5ld0hhbmRsZS54ID0gY3VycmVudFBvc2l0aW9uLng7XG4gICAgICBkYXRhLm5ld0hhbmRsZS55ID0gY3VycmVudFBvc2l0aW9uLnk7XG5cbiAgICAgIGlmIChvcHRzLnN0cmF5Q29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBoYW5kbGVQb3MgPSBkYXRhLm5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGU7XG4gICAgICAgIGNvbnN0IGhhbmRsZU1pcnJvcklkID0gZGF0YS5uZXdDb21wbGV0ZWRDb25uZWN0aW9uSGFuZGxlLmlkO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG1pcnJvclBvc2l0aW9uKGN1cnJlbnRQb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJNT1ZFXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgIFt0eXBlcy5IQU5ETEVdOiBbaGFuZGxlTWlycm9ySWRdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uQ2hhbmdlOiBnZXRQb3NEaWZmZXJlbmNlKGhhbmRsZVBvcywgbmV3UG9zaXRpb24pLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLm5ld0NvbXBsZXRlZENvbm5lY3Rpb25IYW5kbGUueCA9IG5ld1Bvc2l0aW9uLng7XG4gICAgICAgIGRhdGEubmV3Q29tcGxldGVkQ29ubmVjdGlvbkhhbmRsZS55ID0gbmV3UG9zaXRpb24ueTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5saW5lQ29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBbcDAsIHAxLCBwMiwgcDNdID0gcXVhZHJhdGljVG9DdWJpY0JlemllcihcbiAgICAgICAgICBnZXRQb2ludEJ5SWQob3B0cy5zZWxlY3RlZFBvaW50KSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIG1pcnJvclBvc2l0aW9uKGN1cnJlbnRQb3NpdGlvbiwgcG9zaXRpb24pLFxuICAgICAgICAgIHBvc2l0aW9uKTtcblxuICAgICAgICAvLyBSaWdodCBoYW5kbGVcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiTU9WRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICBbdHlwZXMuSEFORExFXTogW2RhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZS5pZF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlLCBwMSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEubGluZUNvbm5lY3Rpb25SaWdodEhhbmRsZS54ID0gcDEueDtcbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvblJpZ2h0SGFuZGxlLnkgPSBwMS55O1xuXG4gICAgICAgIC8vIExlZnQgaGFuZGxlXG4gICAgICAgIHN0b3JlLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcIk1PVkVcIixcbiAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgICAgW3R5cGVzLkhBTkRMRV06IFtkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZS5pZF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb25DaGFuZ2U6IGdldFBvc0RpZmZlcmVuY2UoZGF0YS5saW5lQ29ubmVjdGlvbkxlZnRIYW5kbGUsIHAyKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBkYXRhLmxpbmVDb25uZWN0aW9uTGVmdEhhbmRsZS54ID0gcDIueDtcbiAgICAgICAgZGF0YS5saW5lQ29ubmVjdGlvbkxlZnRIYW5kbGUueSA9IHAyLnk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxhc3RQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbjtcbiAgfSk7XG5cbiAgYWRkTGlzdGVuZXIoXCJtb3VzZXVwXCIsICgpID0+IHtcbiAgICByZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBsaXN0ZW5lcklkKTtcblxuICAgIGlmIChjdXJzb3JPdmVycmlkZUlkKSB7XG4gICAgICByZWxlYXNlT3ZlcnJpZGUoY3Vyc29yT3ZlcnJpZGVJZCk7XG4gICAgICBzZXRDdXJzb3IoXCJERUZBVUxUXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbiA9IHtcbiAgICAgIHR5cGU6IFwiQUREX1BFTl9QT0lOVFwiLFxuICAgICAgZGF0YSxcbiAgICB9O1xuXG4gICAgYWRkQWN0aW9uVG9IaXN0b3J5KGFjdGlvbiwgZmFsc2UpO1xuICB9LCB0cnVlKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90b29scy9wZW4vb25QZW5BZGRQb2ludC5qcyIsImltcG9ydCB7IGdldEhhbmRsZUJ5SWQgfSBmcm9tIFwiLi4vLi4vaGFuZGxlcy9nZXRIYW5kbGVzXCI7XG5pbXBvcnQgeyBnZXRQb2ludEJ5SWQgfSBmcm9tIFwiLi4vLi4vcG9pbnRzL2dldFBvaW50c1wiO1xuXG5jb25zdCB7IGdldFBvaW50Q29ubmVjdGlvbnMgfSA9IHJlcXVpcmUoXCIuLi8uLi9wb2ludHMvZ2V0UG9pbnRzXCIpO1xuY29uc3QgeyBhZGRHdWlkZSB9ID0gcmVxdWlyZShcIi4uLy4uL3JlbmRlci9ndWlkZXNcIik7XG5jb25zdCB7IGdldFNlbGVjdGVkT2ZUeXBlIH0gPSByZXF1aXJlKFwiLi4vLi4vc2VsZWN0aW9uXCIpO1xuY29uc3QgeyBzZXRDdXJzb3IgfSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9jdXJzb3JcIik7XG5jb25zdCB7IHR5cGVzIH0gPSByZXF1aXJlKFwiLi4vLi4vY29uc3RhbnRzXCIpO1xuY29uc3QgcXVhZHJhdGljVG9DdWJpY0JlemllciA9IHJlcXVpcmUoXCIuLi8uLi9iZXppZXIvcXVhZHJhdGljVG9DdWJpY0JlemllclwiKTtcblxuZnVuY3Rpb24gc2V0UGVuQ3Vyc29yKHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IHR5cGVzLkNPTk4pIHtcbiAgICBzZXRDdXJzb3IoXCJQRU5fQUREX1BPSU5UXCIpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IHR5cGVzLkhBTkRMRSkge1xuICAgIHNldEN1cnNvcihcIkRFRkFVTFRcIik7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gdHlwZXMuUE9JTlQpIHtcbiAgICBzZXRDdXJzb3IoXCJQRU5fU0VMRUNUX1BPSU5UXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb25QZW5Nb3VzZU1vdmUocG9zaXRpb24sIG9iaikge1xuICBpZiAoIW9iaikge1xuICAgIC8vIFNob3cgZ3VpZGUgZm9yIG5ldyBwb2ludCBjcmVhdGlvblxuICAgIGFkZEd1aWRlKHR5cGVzLlBPSU5ULCBwb3NpdGlvbik7XG5cbiAgICBjb25zdCBzZWxlY3RlZFBvaW50cyA9IGdldFNlbGVjdGVkT2ZUeXBlKHR5cGVzLlBPSU5UKTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZXJlJ3Mgb25lIHBvaW50IHNlbGVjdGVkIHdlIHdhbnQgdG8gZHJhdyBhIGd1aWRlXG4gICAgICogYmV0d2VlbiB0aGUgc2VsZWN0ZWQgYW5kIHBvc3NpYmxlIG5ldyBwb2ludC5cbiAgICAgKi9cbiAgICBpZiAoc2VsZWN0ZWRQb2ludHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBsZXQgc3RyYXlDb25uZWN0aW9uID0gZmFsc2U7XG5cbiAgICAgIHsgLy8gQ2hlY2tpbmcgZm9yIHN0cmF5IGNvbm5lY3Rpb25zXG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gZ2V0UG9pbnRDb25uZWN0aW9ucyhzZWxlY3RlZFBvaW50c1swXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoY29ubmVjdGlvbnNbaV0ucG9pbnRzWzFdID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdHJheUNvbm5lY3Rpb24gPSBjb25uZWN0aW9uc1tpXTtcbiAgICAgICAgICAgIGkgPSBjb25uZWN0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQSBzdHJheSBjb25uZWN0aW9uIG1lYW5zIHRoYXQgYSBoYW5kbGUgaGFzIGJlZW4gZHJhZ2dlZCBvdXRcbiAgICAgICAqIGZyb20gdGhlIHBvaW50LlxuICAgICAgICpcbiAgICAgICAqIElmIHRoaXMgaXMgdGhlIGNhc2UsIHdlIG5lZWQgdG8gZHJhdyBhIGJlemllciBndWlkZSwgYnV0IHdlIG9ubHlcbiAgICAgICAqIGhhdmUgb25lIGhhbmRsZSwgc28gd2UgbmVlZCB0byBtYWtlIGFzc3VtcHRpb25zIGFib3V0IHRoZSBvdGhlci5cbiAgICAgICAqL1xuICAgICAgaWYgKHN0cmF5Q29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBuZXdQb2ludHMgPSBxdWFkcmF0aWNUb0N1YmljQmV6aWVyKFxuICAgICAgICAgIGdldFBvaW50QnlJZChzZWxlY3RlZFBvaW50c1swXSksXG4gICAgICAgICAgZ2V0SGFuZGxlQnlJZChzdHJheUNvbm5lY3Rpb24uaGFuZGxlc1swXSksXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwb3NpdGlvbik7XG4gICAgICAgIGFkZEd1aWRlKHR5cGVzLkNPTk4sIG5ld1BvaW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlcmUgaXMgYSBzaW5nbGUgY29ubmVjdGlvbiBzZWxlY3RlZCB3aXRoIG5vIHN0cmF5IGNvbm5lY3Rpb25zLFxuICAgICAgICAgKiBzbyB3ZSBzaG91bGQgc2hvdyBhIGd1aWRlIGxpbmUgYmV0d2VlbiB0aGVtLlxuICAgICAgICAgKi9cbiAgICAgICAgYWRkR3VpZGUodHlwZXMuTElORSwge1xuICAgICAgICAgIGZyb206IGdldFBvaW50QnlJZChzZWxlY3RlZFBvaW50c1swXSksXG4gICAgICAgICAgdG86IHBvc2l0aW9uLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNldEN1cnNvcihcIlBFTl9BRERfUE9JTlRcIik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgdmFsdWUsIHR5cGUgfSA9IG9iajtcblxuICBpZiAodHlwZSA9PT0gdHlwZXMuQ09OTikge1xuICAgIGNvbnN0IHsgY2xvc2VzdFBvaW50IH0gPSB2YWx1ZTtcbiAgICBzZXRDdXJzb3IoXCJQRU5fQUREX1BPSU5UXCIpO1xuICAgIGFkZEd1aWRlKHR5cGVzLlBPSU5ULCB2YWx1ZS5jbG9zZXN0UG9pbnQpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IHR5cGVzLlBPSU5UKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRQb2ludHMgPSBnZXRTZWxlY3RlZE9mVHlwZSh0eXBlcy5QT0lOVCk7XG4gICAgaWYgKHNlbGVjdGVkUG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHNlbGVjdGVkUG9pbnRzWzBdICE9PSB2YWx1ZS5pZCkgeyAvLyBDb25uZWN0aW5nIHR3byBwb2ludHNcbiAgICAgICAgc2V0Q3Vyc29yKFwiUEVOX1NFTEVDVF9QT0lOVFwiKTtcbiAgICAgICAgYWRkR3VpZGUodHlwZXMuTElORSwge1xuICAgICAgICAgIGZyb206IGdldFBvaW50QnlJZChzZWxlY3RlZFBvaW50c1swXSksXG4gICAgICAgICAgdG86IHZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7IC8vIEhvdmVyaW5nIG92ZXIgc2VsZWN0ZWQgcG9pbnRcbiAgICAgICAgc2V0Q3Vyc29yKFwiUEVOX1NFTEVDVF9QT0lOVFwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q3Vyc29yKFwiUEVOX0FERF9QT0lOVFwiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gdHlwZXMuSEFORExFKSB7XG4gICAgc2V0Q3Vyc29yKFwiREVGQVVMVFwiKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3Rvb2xzL3Blbi9vblBlbk1vdXNlTW92ZS5qcyIsImNvbnN0IHsgc2V0VG9vbCB9ID0gcmVxdWlyZShcIi4vdG9vbHNcIik7XG5cbmNvbnN0IHRvb2xzID0gW1xuICB7XG4gICAgaWNvbjogXCJkZWZhdWx0LWN1cnNvci5wbmdcIixcbiAgICB0b29sS2V5OiBcInZcIixcbiAgICBpZDogXCJtb3ZldG9vbFwiLFxuICAgIHBvc2l0aW9uOiB7XG4gICAgICB4OiA3LFxuICAgICAgeTogNyxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgaWNvbjogXCJwZW4tY3Vyc29yLnBuZ1wiLFxuICAgIHRvb2xLZXk6IFwicFwiLFxuICAgIGlkOiBcInBlbnRvb2xcIixcbiAgICBwb3NpdGlvbjoge1xuICAgICAgeDogNyxcbiAgICAgIHk6IDcsXG4gICAgfSxcbiAgfSxcbl07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlVG9vbEJhcigpIHtcbiAgY29uc3QgdG9vbEVsZW1lbnRzID0gdG9vbHMubWFwKCh7IGljb24sIHRvb2xLZXksIGlkLCBwb3NpdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgdG9vbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkJVVFRPTlwiKTtcbiAgICB0b29sRWwuY2xhc3NMaXN0LmFkZChcInRvb2xcIik7XG4gICAgdG9vbEVsLmlkID0gaWQ7XG4gICAgdG9vbEVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCJzdGF0aWMvaW1hZ2VzLyR7aWNvbn1cIilgO1xuICAgIHRvb2xFbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25YID0gYCR7cG9zaXRpb24ueH1weGA7XG4gICAgdG9vbEVsLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvblkgPSBgJHtwb3NpdGlvbi55fXB4YDtcbiAgICB0b29sRWwuc2V0QXR0cmlidXRlKFwiZGF0YS10b29sLWtleVwiLCB0b29sS2V5KTtcblxuICAgIGlmIChpZCA9PT0gXCJtb3ZldG9vbFwiKSB7XG4gICAgICB0b29sRWwuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICB0b29sRWwub25jbGljayA9ICgpID0+IHNldFRvb2wodG9vbEtleSk7XG4gICAgcmV0dXJuIHRvb2xFbDtcbiAgfSk7XG5cbiAgdG9vbEVsZW1lbnRzLmZvckVhY2goKHRvb2xFbCkgPT4ge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9vbGJhclwiKS5hcHBlbmRDaGlsZCh0b29sRWwpO1xuICB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdG9vbHMvdG9vbGJhci5qcyJdLCJzb3VyY2VSb290IjoiIn0=